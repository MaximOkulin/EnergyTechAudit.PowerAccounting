<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.9" DspName="Microsoft.Data.Tools.Schema.Sql.Sql130DatabaseSchemaProvider" CollationLcid="1049" CollationCaseSensitive="True" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="130" />
		</CustomData>
		<CustomData Category="Reference" Type="SqlSchema">
			<Metadata Name="FileName" Value="C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2019\ENTERPRISE\COMMON7\IDE\EXTENSIONS\MICROSOFT\SQLDB\EXTENSIONS\SQLSERVER\120\SQLSCHEMAS\MASTER.DACPAC" />
			<Metadata Name="LogicalName" Value="master.dacpac" />
			<Metadata Name="ExternalParts" Value="[master]" />
			<Metadata Name="SuppressMissingDependenciesErrors" Value="True" />
		</CustomData>
		<CustomData Category="Reference" Type="SqlSchema">
			<Metadata Name="FileName" Value="C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2019\ENTERPRISE\COMMON7\IDE\EXTENSIONS\MICROSOFT\SQLDB\EXTENSIONS\SQLSERVER\120\SQLSCHEMAS\MSDB.DACPAC" />
			<Metadata Name="LogicalName" Value="msdb.dacpac" />
			<Metadata Name="ExternalParts" Value="[msdb]" />
			<Metadata Name="SuppressMissingDependenciesErrors" Value="True" />
		</CustomData>
		<CustomData Category="Reference" Type="SqlSchema">
			<Metadata Name="FileName" Value="C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2019\ENTERPRISE\COMMON7\IDE\EXTENSIONS\MICROSOFT\SQLDB\EXTENSIONS\SQLSERVER\130\SQLSCHEMAS\MASTER.DACPAC" />
			<Metadata Name="LogicalName" Value="master.dacpac" />
			<Metadata Name="ExternalParts" Value="[master]" />
			<Metadata Name="SuppressMissingDependenciesErrors" Value="False" />
		</CustomData>
		<CustomData Category="Reference" Type="SqlSchema">
			<Metadata Name="FileName" Value="C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2019\ENTERPRISE\COMMON7\IDE\EXTENSIONS\MICROSOFT\SQLDB\EXTENSIONS\SQLSERVER\130\SQLSCHEMAS\MSDB.DACPAC" />
			<Metadata Name="LogicalName" Value="msdb.dacpac" />
			<Metadata Name="ExternalParts" Value="[msdb]" />
			<Metadata Name="SuppressMissingDependenciesErrors" Value="False" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="EnergyTechAudit.PowerAccounting.Database.dll" />
			<Metadata Name="FileName" Value="C:\PROJECTS\ENERGYTECHAUDIT.POWERACCOUNTING\MAIN\ENERGYTECHAUDIT.POWERACCOUNTING.DATABASE\OBJ\RELEASE\ENERGYTECHAUDIT.POWERACCOUNTING.DATABASE.DLL" />
			<Metadata Name="AssemblyName" Value="EnergyTechAudit.PowerAccounting.Database" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Projects\EnergyTechAudit.PowerAccounting\Main\EnergyTechAudit.PowerAccounting.Database\obj\Release\EnergyTechAudit.PowerAccounting.Database.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable">
			<Metadata Name="ClearDeploy" Value="" />
			<Metadata Name="DeployTestData" Value="" />
		</CustomData>
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="Cyrillic_General_100_CS_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsAutoShrinkOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="RecoveryMode" Value="1" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="IsAllowSnapshotIsolation" Value="True" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Property Name="QueryStoreStaleQueryThreshold" Value="367" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Admin].[User].[IsOnline]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="394" />
		</Element>
		<Element Type="SqlMasterKey">
			<Property Name="EncryptionPassword" Value="gh8nc3pe4" />
		</Element>
		<Element Type="SqlSchema" Name="[Admin]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[Alert]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[Message]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[Type]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[TimeOut]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[Duration]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[ShowCloseButton]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[InjectCss]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[Title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[PendingDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Alert].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="395" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[Audit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Area]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Controller]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Action]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[Elapsed]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Audit].[ActionParams]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="396" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="397" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[Audit].[IX_Admin_Audit_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Audit].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Audit].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Admin].[Audit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Action]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Elapsed]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[ActionParams]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[DeletedEntityLogEntry]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[EntityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[EntityDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[EntityTypeDescription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[CascadeDeletedEntities]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[User]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[DeletedEntityLogEntry].[DateTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="398" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[DeletedEntityLogEntry].[IX_Admin_DeletedEntityLogEntry_DateTime]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[DeletedEntityLogEntry].[DateTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityTypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[DeletedEntityLogEntry].[IX_Admin_DeletedEntityLogEntry_EntityTypeName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[DeletedEntityLogEntry].[EntityTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Admin].[DF_Admin_Alert_Duration]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[500]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Alert]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Admin].[Alert].[Duration]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Admin].[DF_Admin_Alert_ShowCloseButton]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Alert]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Admin].[Alert].[ShowCloseButton]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Admin].[DF_Admin_Alert_Type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['info']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Alert]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Admin].[Alert].[Type]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Admin].[DF_Admin_UserMessage_Date]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[GETDATE()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[UserMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Admin].[UserMessage].[Date]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[EntityHistory]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[EntityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[EntityTypeDescription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[PropertyName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[PropertyDescription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[OriginalValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[CurrentValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[User]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[EntityHistory].[DateTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="399" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[EntityHistory].[IX_Admin_EntityHistory_EntityTypeName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[EntityHistory].[EntityId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[EntityHistory].[EntityTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[EntityHistory]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[EntityHistory].[IX_Admin_EntityHistory_EntityTypeName_PropertyName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[EntityHistory].[EntityTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[EntityHistory].[PropertyName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Admin].[EntityHistory].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[DateTime]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[EntityHistory]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[ErrorLogEntry]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[UserName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[UserAgent]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[Exception]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[Message]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[StackTrace]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[ErrorLogEntry].[RequestParams]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="400" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[ErrorLogEntry].[IX_Admin_ErrorLogEntry_UserName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[ErrorLogEntry].[UserName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[Faq]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Caption]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Number]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Question]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Answer]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[Categories]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Faq].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="401" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[FaqLinkRole]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[FaqLinkRole].[FaqId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[FaqLinkRole].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="402" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="403" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="404" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_Audit_UserId_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[Audit].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="397" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_FaqLinkRole_FaqId_Admin_Faq_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[FaqLinkRole].[FaqId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[FaqLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Faq].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Faq]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="403" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_FaqLinkRole_RoleId_Admin_Role_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[FaqLinkRole].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[FaqLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="404" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_News_Core_Binary_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[News].[BinaryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[News]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Binary].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="405" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_NewsLinkRole_NewsId_Admin_News_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[NewsLinkRole].[NewsId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[NewsLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[News].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[News]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="406" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_NewsLinkRole_RoleId_Admin_Role_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[NewsLinkRole].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[NewsLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="407" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_User_RoleId_Admin_Role_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="408" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_User_UserGroupId_Admin_UserGroup_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[User].[UserGroupId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[UserGroup].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[UserGroup]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="409" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Admin].[FK_Admin_UserMessage_UserId_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Admin].[UserMessage].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[UserMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="410" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[News]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Caption]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[Text]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[BinaryId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[News].[ViewCounter]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="411" />
			<AttachedAnnotation Disambiguator="405" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[NewsLinkRole]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[NewsLinkRole].[NewsId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[NewsLinkRole].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="412" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="406" />
			<AttachedAnnotation Disambiguator="407" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_Alert_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Alert].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Alert]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="395" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_Audit_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Audit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="396" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_DeletedEntityEntry_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[DeletedEntityLogEntry].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="398" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_EntityHistory]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[EntityHistory].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[EntityHistory]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="399" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_ErrorLogEntry]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[ErrorLogEntry].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="400" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_Faq]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Faq].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Faq]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="401" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_FaqLinkRole]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[FaqLinkRole].[FaqId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[FaqLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[FaqLinkRole]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="402" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_News]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[News].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[News]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="411" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_NewsLinkRole]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[NewsLinkRole].[NewsId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[NewsLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[NewsLinkRole]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="412" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_Role_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[Role].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="413" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_System_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[SystemSetting].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[SystemSetting]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="414" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_User]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[User].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="415" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_UserGroup_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[UserGroup].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[UserGroup]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="416" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Admin].[PK_Admin_UserMessage_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[UserMessage].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[UserMessage]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="417" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[Role]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Role].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Role].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Role].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Role].[StartupRoute]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[Role].[MobileDeviceStartupRoute]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="413" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[SystemSetting]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[SystemName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailAdminAddress]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailAddress]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailSmtpServer]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailSmtpPort]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailUserName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailPassword]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[EmailEnableSsl]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[CustomData]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[SystemSetting].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="414" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Admin].[UQ_Admin_User_UserName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[User].[UserName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="418" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[User]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[UserGroupId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[UserName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[Email]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[Password]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[EncryptedPassword]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[CreateDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[ExpiredDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[IsTemporary]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[IsApproved]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[IsOnline]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="394" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[User].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="415" />
			<AttachedAnnotation Disambiguator="408" />
			<AttachedAnnotation Disambiguator="409" />
			<AttachedAnnotation Disambiguator="418" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[User].[IX_Admin_User_RoleId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[User].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[User].[IX_Admin_User_UserName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[User].[UserName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Admin].[UserGroup]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[ProductLogoPlaceholder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[ProductCard]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[CustomData]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserGroup].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="416" />
		</Element>
		<Element Type="SqlTable" Name="[Admin].[UserMessage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserMessage].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserMessage].[Text]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserMessage].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Admin].[UserMessage].[Date]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Admin]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="417" />
			<AttachedAnnotation Disambiguator="410" />
		</Element>
		<Element Type="SqlIndex" Name="[Admin].[UserMessage].[IX_Admin_UserMessage_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Admin].[UserMessage].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Admin].[UserMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFilegroup" Name="[ARCHIVE_DAY]" />
		<Element Type="SqlFilegroup" Name="[ARCHIVE_FINAL]" />
		<Element Type="SqlFilegroup" Name="[ARCHIVE_FINALINSTANT]" />
		<Element Type="SqlFilegroup" Name="[ARCHIVE_HOUR]" />
		<Element Type="SqlFilegroup" Name="[ARCHIVE_INSTANT]" />
		<Element Type="SqlFilegroup" Name="[ARCHIVE_MONTH]" />
		<Element Type="SqlPartitionFunction" Name="[ArchivePartitionByPeriodType]">
			<Relationship Name="BoundaryValues">
				<Entry>
					<Element Type="SqlPartitionValue">
						<Property Name="ExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlPartitionValue">
						<Property Name="ExpressionScript">
							<Value><![CDATA[2]]></Value>
						</Property>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlPartitionValue">
						<Property Name="ExpressionScript">
							<Value><![CDATA[3]]></Value>
						</Property>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlPartitionValue">
						<Property Name="ExpressionScript">
							<Value><![CDATA[4]]></Value>
						</Property>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlPartitionValue">
						<Property Name="ExpressionScript">
							<Value><![CDATA[5]]></Value>
						</Property>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="ParameterType">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[int]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPartitionScheme" Name="[ArchivePartitionSchemeByPeriodType]">
			<Relationship Name="Filegroups">
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_INSTANT]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_HOUR]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_DAY]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_MONTH]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_FINALINSTANT]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlFilegroupSpecifier">
						<Relationship Name="Filegroup">
							<Entry>
								<References Name="[ARCHIVE_FINAL]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="PartitionFunction">
				<Entry>
					<References Name="[ArchivePartitionByPeriodType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Business]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[AccessPoint]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[Identifier]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[NetAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[Port]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[NetPhone]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[TransportTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[TransportServerModelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[DeviceReaderId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[LastConnectionTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[LastStatusConnectionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[SuccessConnectionPercent]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[ControllerAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[IsNeedToReconfigure]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[CsdModemId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPoint].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="419" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="420" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="421" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="422" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="423" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="424" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="425" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_CsdModemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[CsdModemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_DeviceReaderId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_DeviceReaderId2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Identifier]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[CsdModemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_LastStatusConnectionId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_TransportServerModelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_TransportTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[TransportTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPoint].[IX_Business_AccessPoint_TransportTypeId_DeviceReaderId_TransportServerModelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[TransportTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Identifier]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[CsdModemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[AccessPointLinkBuilding]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointLinkBuilding].[AccessPointId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointLinkBuilding].[BuildingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="426" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="427" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="428" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPointLinkBuilding].[IX_Business_AccessPointLinkBuilding_AccessPointId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPointLinkBuilding].[IX_Business_AccessPointLinkBuilding_BuildingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[AccessPointStatusConnectionLog]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointStatusConnectionLog].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointStatusConnectionLog].[ConnectionTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointStatusConnectionLog].[StatusConnectionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AccessPointStatusConnectionLog].[AccessPointId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="429" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="430" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="431" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPointStatusConnectionLog].[IX_Business_AccessPointConnectionStatus_AccessPointId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointStatusConnectionLog].[AccessPointId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPointStatusConnectionLog].[IX_Business_AccessPointConnectionStatus_ConnectionStatusId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointStatusConnectionLog].[StatusConnectionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AccessPointStatusConnectionLog].[IX_Business_AccessPointConnectionStatus_ConnectionTime]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointStatusConnectionLog].[ConnectionTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[AgreementParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AgreementParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AgreementParameter].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AgreementParameter].[AgreementParameterTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[AgreementParameter].[Value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="432" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="433" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[AgreementParameter].[IX_Business_AgreementParameter_AgreementParameterTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AgreementParameter].[AgreementParameterTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[AgreementParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[Archive]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[TimeSignatureId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[PeriodTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[Value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="19" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[IsValid]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Archive].[DeviceParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="PartitionColumn">
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="PartitionScheme">
				<Entry>
					<References Name="[ArchivePartitionSchemeByPeriodType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="434" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="435" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="436" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="437" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="438" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="439" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Archive].[IX_Business_Archive_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Archive].[IX_Business_Archive_PeriodTypeId_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Archive].[IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Archive].[IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Archive].[IX_Business_Archive_TimeSignatureId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[TimeSignatureId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[Building]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[FullAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[Square]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[BuildingPurposeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[CountFlats]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[Location]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[sys].[geography]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[OrganizationId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[DistrictId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Building].[UserAdditionalInfoId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="440" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="441" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="442" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="443" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="444" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Building].[IX_Business_Building_UserAdditionalInfoId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Building].[IX_FK_Business_Building_BuildingPurposeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[BuildingPurposeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Building].[IX_FK_Business_Building_DistrictId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[DistrictId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Building].[IX_FK_Business_Building_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Building].[IX_FK_Business_Building_OrganizationId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[OrganizationId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[BuildingMapResourceBuilding]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[BuildingMapResourceBuilding].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[BuildingMapResourceBuilding].[BuildingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[BuildingMapResourceBuilding].[ResourceBuildingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[BuildingMapResourceBuilding].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="445" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="446" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="447" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="448" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="449" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[BuildingMapResourceBuilding].[IX_Business_BuildingMapResourceBuilding_BuildingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[BuildingMapResourceBuilding].[IX_Business_BuildingMapResourceBuilding_ResourceBuildingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[ResourceBuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[BuildingMapResourceBuilding].[IX_Business_BuildingMapResourceBuilding_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[Channel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[ChannelTemplateId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[PlacementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[TechnologicAdjunctionTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[MnemoschemeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[OrganizationId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[ResourceSubsystemTypeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[LastEmergencyTimeSignatureId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[Activated]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Channel].[Order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="450" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="451" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="452" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="453" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="454" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="455" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="456" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="457" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="458" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_Activated]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[Activated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ChannelTemplateId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ChannelTemplateId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_Id]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_OrganizationId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[OrganizationId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_PlacementId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[PlacementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ResourceSubsystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ResourceSystemTypeId_Activated]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[Activated]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[TechnologicAdjunctionTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MnemoschemeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[LastEmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[UpdatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ResourceSystemTypeId2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_ResourceSystemTypeId3]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[TechnologicAdjunctionTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Business_Channel_TechnologicAdjunctionTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[TechnologicAdjunctionTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Channel].[IX_Channel_ResourceSystemTypeId4]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[ChannelLinkAgreementParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelLinkAgreementParameter].[ChannelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelLinkAgreementParameter].[AgreementParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="459" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="460" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="461" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ChannelLinkAgreementParameter].[IX_Business_ChannelLinkAgreementParameter_AgreementParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelLinkAgreementParameter].[AgreementParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ChannelLinkAgreementParameter].[IX_Business_ChannelLinkAgreementParameter_ChannelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelLinkAgreementParameter].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[ChannelTemplate]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[MnemoschemeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[Comment]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[ResourceSubsystemTypeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ChannelTemplate].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="462" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="463" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="464" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="465" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="466" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ChannelTemplate].[IX_Business_ChannelTemplate_ResourceSubsystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelTemplate].[ResourceSubsystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[Business].[ChannelTemplate_AfterUpdate]">
			<Property Name="IsUpdateTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="2" />
			<Property Name="IsDisabled" Value="True" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   /* Обновление типа ресурсной системы или типа устройства */
   IF(UPDATE([ResourceSystemTypeId]) OR UPDATE([DeviceId]))
   BEGIN
   /* Снос связаной матрицы сопоставления */
      DELETE [Map] FROM [Business].[ParameterMapDeviceParameter] [Map]
      WHERE [Map].[ChannelTemplateId] IN (SELECT inserted.[Id] FROM inserted)
   END;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="488" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER [Business].[ChannelTemplate_AfterUpdate]&#xD;&#xA;   ON [Business].[ChannelTemplate]&#xD;&#xA;   AFTER UPDATE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[Business].[CheckingAccount]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[AccountNumber]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[OrganizationId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccount].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="467" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="468" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[CheckingAccountLinkPlacement]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccountLinkPlacement].[CheckingAccountId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CheckingAccountLinkPlacement].[PlacementId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="469" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="470" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="471" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[CsdModem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[NetPhone]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[ComPortId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[CsdModem].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="472" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="473" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="474" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[CsdModem].[IX_Business_CsdModem_ComPortId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CsdModem].[ComPortId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[CsdModem].[IX_Business_CsdModem_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CsdModem].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceEvent]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceEvent].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceEvent].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceEvent].[DeviceEventParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceEvent].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceEvent].[State]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="19" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="475" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="476" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="477" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceEvent].[IX_Business_DeviceEvent_DeviceEventParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceEvent].[IX_Business_DeviceEvent_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceEvent].[IX_Business_DeviceEvent_MeasurementDeviceId_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceEvent].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[DeviceEvent].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[State]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceLinkDynamicParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceLinkDynamicParameter].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceLinkDynamicParameter].[DynamicParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="478" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="479" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="480" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceLinkDynamicParameter].[IX_Business_DeviceLinkDynamicParameter_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceLinkDynamicParameter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceLinkDynamicParameter].[IX_Business_DeviceLinkDynamicParameter_DynamicParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceLinkDynamicParameter].[DynamicParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceParameterSetting]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceParameterSetting].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceParameterSetting].[Min]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceParameterSetting].[Max]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceParameterSetting].[WriteMethodName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceParameterSetting].[ValueTypeCode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="481" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="482" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceReader]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[MaxThreadCount]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[UpdateConfigInterval]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[QueuePollingInterval]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[HoveringTaskRemoveTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[DeviceReaderTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[SignalRNetAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[SignalRPort]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[SignalRHub]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[ServerCommunicatorNetAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[ServerCommunicatorController]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[ServerCommunicatorReceiveAction]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReader].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="483" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="484" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="485" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReader].[IX_Business_DeviceReader_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReader].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceReaderErrorLog]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[Exception]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[Message]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[StackTrace]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[Text]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[DeviceReaderId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[MeasurementDeviceId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderErrorLog].[ErrorTypeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="486" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="487" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="488" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="489" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReaderErrorLog].[IX_Business_DeviceReaderErrorLog_DeviceReaderId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReaderErrorLog].[IX_Business_DeviceReaderErrorLog_ErrorTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[ErrorTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReaderErrorLog].[IX_Business_DeviceReaderErrorLog_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReaderErrorLog].[IX_Business_DeviceReaderErrorLog_MeasurementDeviceId_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Text]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[DeviceReaderId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[ErrorTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceReaderErrorLog].[IX_Business_DeviceReaderErrorLog_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceReaderLinkScheduleItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderLinkScheduleItem].[DeviceReaderId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceReaderLinkScheduleItem].[ScheduleItemId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="490" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="491" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="492" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[DeviceTechnicalParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[DeviceParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[DeviceValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[DeviceTechnicalParameter].[StringValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="493" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="494" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="495" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceTechnicalParameter].[IX_Business_DeviceTechnicalParameter_DeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceTechnicalParameter].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[DeviceTechnicalParameter].[IX_Business_DeviceTechnicalParameter_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceTechnicalParameter].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_ControllerAddress]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[255]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[ControllerAddress]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_IsNeedToReconfigure]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[IsNeedToReconfigure]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_LastConnectionTime]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[LastConnectionTime]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_LastStatusConnectionId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_NetAddress]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['10.135.64.1']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[NetAddress]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_Port]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[5010]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[Port]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_SuccessConnectionPercent]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[SuccessConnectionPercent]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_TransportServerModelId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPoint_TransportTypeId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportTypeId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPointStatusConnectionLog_ConnectionTime]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog].[ConnectionTime]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_AccessPointStatusConnectionLog_StatusConnectionId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Building_CountFlats]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Building].[CountFlats]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Building_Square]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Building].[Square]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Channel_Activated]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Channel].[Activated]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Channel_ResourceSystemTypeId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[4]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_CsdModem_ComPortId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[CsdModem].[ComPortId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_DeviceEvent_State]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[DeviceEvent].[State]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_DeviceReader_HoveringTaskRemoveTime]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[5]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[DeviceReader].[HoveringTaskRemoveTime]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_DeviceReader_MaxThreadCount]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[50]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[DeviceReader].[MaxThreadCount]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_DeviceReader_QueuePollingInterval]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[45]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[DeviceReader].[QueuePollingInterval]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_DeviceReader_UpdateConfigInterval]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[60]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[DeviceReader].[UpdateConfigInterval]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_EmergencyLog_IsAcknowledgement]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_AmountAttempt]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AmountAttempt]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_AutoDefTimeoutAnswer]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[5000]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AutoDefTimeoutAnswer]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_BaudId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[BaudId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_ComPortId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ComPortId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_CurrentAccreditationDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[CurrentAccreditationDate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_DataBitId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[2]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DataBitId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_GiveCurrData]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[GiveCurrData]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_GiveDArcData]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[GiveDArcData]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_GiveHArcData]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[GiveHArcData]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_GiveMArcData]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[GiveMArcData]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_LastConnectionTime]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastConnectionTime]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_LastStatusConnectionId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_ManufacturingDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ManufacturingDate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_NetworkAddress]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[NetworkAddress]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_NextAccreditationDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[NextAccreditationDate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_ParityId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ParityId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_PollingInterval]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[60]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[PollingInterval]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_PortTypeId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[PortTypeId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_Priority]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Priority]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_ProtocolSubTypeId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ProtocolSubTypeId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_StartReadArchiveDate]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[StartReadArchiveDate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_StopBitId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[StopBitId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_SuccessConnectionPercent]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDevice_TurnOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[TurnOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDeviceStatusConnectionLog_ConnectionTime]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[ConnectionTime]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_MeasurementDeviceStatusConnectionLog_StatusConnectionId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Mnemoscheme_Zoom]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Mnemoscheme].[Zoom]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_AmountPeople]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[AmountPeople]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_AmountRooms]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[AmountRooms]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_Area]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[Area]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_FrontNumber]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[FrontNumber]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_HasIndividualAccounting]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_Placement_PlacementPurposeId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[2]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_TimeSignature_StatusConnectionId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[TimeSignature].[StatusConnectionId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_UserAdditionalInfo_BirthDay]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['1900-01-01']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[BirthDay]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Business].[DF_Business_UserAdditionalInfo_GenderId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[GenderId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[EmergencyLog]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[EmergencySituationParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[Value]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[RecoveryTime]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[IsAcknowledgement]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[AcknowledgementUserName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[AcknowledgementDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyLog].[ShortTitle]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="496" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="497" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="498" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyLog].[IX_Business_EmergencyLog_EmergencySituationParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyLog].[IX_Business_EmergencyLog_EmergencySituationParameterId2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyLog].[IX_Business_EmergencyLog_EmergencySituationParameterId3]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[RecoveryTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyLog].[IX_Business_EmergencyLog_EmergencyTimeSignatureId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[EmergencyMessage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[NotificationTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[UserAdditionalInfoId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[Text]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyMessage].[EmergencyLogId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="499" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="500" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="501" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="502" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyMessage].[IX_Busines_EmergencyMessage_EmergencyLogId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[EmergencyLogId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyMessage].[IX_Busines_EmergencyMessage_NotificationTypeId_UserAdditionalInfoId_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[NotificationTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencyMessage].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage].[Text]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage].[EmergencyLogId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyMessage].[IX_Busines_EmergencyMessage_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyMessage].[IX_Business_EmergencyMessage_NotificationTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[NotificationTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyMessage].[IX_Business_EmergencyMessage_UserAdditionalInfoId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[EmergencySituationParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[SeasonTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[EmergencySituationParameterTemplateId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[PredicateExpression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[TurnOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[ChannelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameter].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="503" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="504" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="505" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="506" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencySituationParameter].[IX_Business_EmergencySituationParameter_ChannelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencySituationParameter].[IX_Business_EmergencySituationParameter_CreatedDate]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameter].[CreatedDate]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[CreatedBy]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencySituationParameter].[IX_Business_EmergencySituationParameterTemplateId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameter].[EmergencySituationParameterTemplateId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencySituationParameter].[IX_Business_SeasonTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameter].[SeasonTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[EmergencySituationParameterTemplate]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameterTemplate].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameterTemplate].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameterTemplate].[PredicateExpression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencySituationParameterTemplate].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="507" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[EmergencyTimeSignature]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyTimeSignature].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[EmergencyTimeSignature].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="508" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[EmergencyTimeSignature].[IX_Business_EmergencyTimeSignature_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyTimeSignature].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPoint_CsdModemId_Business_CsdModed_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPoint].[CsdModemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[CsdModem].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="424" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPoint_DeviceReaderId_Business_DeviceReader_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPoint].[DeviceReaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[DeviceReader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="422" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPoint_LastStatusConnectionId_Dictionaries_StatusConnection_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="423" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPoint_TransportServerModelId_Dictionaries_TransportServerModel_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="421" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPoint_TransportTypeId_Dictionaries_TransportType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[TransportType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[TransportType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="420" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPointLinkBuilding_AccessPointId_Business_AccessPoint_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="427" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPointLinkBuilding_BuildingId_Business_Building_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="428" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPointStatusConnectionLog_AccessPointId_Business_AccessPoint_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog].[AccessPointId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="431" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AccessPointStatusConnectionLog_ConnectionStatusId_Dictionaries_StatusConnection_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="430" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_AgreementParameter_AgreementParameterTypeId_Dictionaries_AgreementParameterType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[AgreementParameter].[AgreementParameterTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AgreementParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[AgreementParameterType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[AgreementParameterType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="433" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Archive_DeviceParameterId_Dictionaries_DeviceParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="438" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Archive_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="437" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Archive_PeriodTypeId_Dictionaries_PeriodType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="436" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Archive_TimeSignatureId_Business_TimeSignature_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="435" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Building_BuildingPurposeId_Dictionaries_BuildingPurpose_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Building].[BuildingPurposeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="442" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Building_DistrictId_Dictionaries_District_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="441" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Building_OrganizationId_Business_Organization_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="443" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Building_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="444" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_BuildingMapResourceBuilding_BuildingId_Business_Building_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[BuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="446" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_BuildingMapResourceBuilding_ResourceBuildingId_Business_Building_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[ResourceBuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="447" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_BuildingMapResourceBuilding_ResourceSystemTypeId_Dictionaries_ResourceSystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="448" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_ChannelTemplateId_Business_ChannelTemplate_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="451" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="453" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_MnemoschemeId_Business_Mnemoscheme_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[MnemoschemeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Mnemoscheme].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="455" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_OrganizationId_Business_Organization_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="456" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_PlacementId_Business_Placement_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="454" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_ResourceSubsystemTypeId_Dictionaries_ResourceSubsystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="458" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_ResourceSystemTypeId_Dictionaries_SystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="452" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Channel_TechnologicAdjunctionTypeId_Dictionaries_TechnologicAdjunctionType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Channel].[TechnologicAdjunctionTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[TechnologicAdjunctionType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[TechnologicAdjunctionType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="457" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelLinkAgreementParameter_AgreementParameterId_Business_AgreementParameter_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter].[AgreementParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[AgreementParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[AgreementParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="461" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelLinkAgreementParameter_ChannelId_Business_Channel_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter].[ChannelId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="460" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelTemplate_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="464" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelTemplate_MnemoschemeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[MnemoschemeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Mnemoscheme].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="465" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelTemplate_ResourceSubsystemTypeId_Dictionaries_ResourceSubsystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSubsystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="466" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ChannelTemplate_ResourceSystemTypeId_Dictionaries_SystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="463" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_CheckingAccount_OrganizationId_Business_Organization_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[CheckingAccount].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CheckingAccount]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="468" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_CheckingAccountLinkPlacement_CheckingAccountId_Businnee_CheckingAccount_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement].[CheckingAccountId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[CheckingAccount].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[CheckingAccount]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="470" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_CheckingAccountLinkPlacement_PlacementId_Business_Placement_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement].[PlacementId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="471" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_CsdModem_ComPortId_Dictionaries_ComPort_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[CsdModem].[ComPortId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ComPort].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ComPort]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="473" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_CsdModem_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[CsdModem].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="474" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceEvent_DeviceEventParameterId_Dictionaries_DeviceEventParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="476" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceEvent_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="477" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceLinkDynamicParameter_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="479" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceLinkDynamicParameter_DynamicParameterId_Dictionaries_DynamicParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter].[DynamicParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="480" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceParameterSetting_Id_Dictionaries_DeviceParameter_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceParameterSetting]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="482" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReader_DeviceReaderTypeId_Dictionaries_DeviceReaderType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReader].[DeviceReaderTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceReaderType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceReaderType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="484" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReader_UserId_Admin_User_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReader].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="485" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReaderErrorLog_DeviceReaderId_Business_DeviceReader_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[DeviceReaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[DeviceReader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="487" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReaderErrorLog_ErrorTypeId_Dictionaries_ErrorType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[ErrorTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ErrorType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ErrorType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="489" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReaderErrorLog_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="488" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReaderLinkScheduleItem_Core_ScheduleItem_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReaderLinkScheduleItem].[ScheduleItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="492" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceReaderLinkScheduleItem_DeviceReaderId_Business_DeviceReader_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceReaderLinkScheduleItem].[DeviceReaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[DeviceReader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="491" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceTechnicalParameter_DeviceParameterId_Dictionaries_DeviceParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="495" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_DeviceTechnicalParameter_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="494" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencyLog_EmergencySituationParameterId_Business_EmergencySituationParameter_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="497" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencyLog_EmergencyTimeSignatureId_Business_EmergencyTimeSignature_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="498" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencyMessage_EmergencyLogId_Business_EmergencyLog_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencyMessage].[EmergencyLogId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencyLog].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="502" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencyMessage_NotificationTypeId_Dictionaries_NotificationType_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencyMessage].[NotificationTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[NotificationType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[NotificationType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="500" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencyMessage_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencyMessage].[UserAdditionalInfoId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="501" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencySituationParameter_ChannelId_Business_Channel_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="506" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencySituationParameter_EmergencySituationParameterTemplateId_Business_EmergencySituationParameterTemplate_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[EmergencySituationParameterTemplateId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="505" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_EmergencySituationParameter_SeasonTypeId_Dictionaries_SeasonType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[SeasonTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[SeasonType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[SeasonType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="504" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Hub_BuildingId_Business_Building_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Hub].[BuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="509" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Hub_DeviceReaderId_Business_DeviceReader_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Hub].[DeviceReaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[DeviceReader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="510" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_IntegrationArchiveInfo_DiffDeviceParameterId_Dictionaries_DeviceParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo].[DiffDeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="511" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_IntegrationArchiveInfo_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="512" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_IntegrationArchiveInfo_PeriodTypeId_Dictionaries_PeriodType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo].[PeriodTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="513" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_AccessPointId_Business_AccessPointId]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="514" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_BaudId_Dictionaries_Baud_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[BaudId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Baud].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Baud]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="515" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_ComPortId_Dictionaries_ComPort_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ComPortId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ComPort].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ComPort]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="516" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_DataId_Dictionaries_DataBit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DataBitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DataBit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DataBit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="517" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="518" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_HubId_Business_Hub_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[HubId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Hub].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="519" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_LastStatusConnectionId_Dictionaries_StatusConnection_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="520" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_ParityId_Dictionaries_Parity_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ParityId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Parity].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Parity]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="521" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_PortTypeId_Dictionaries_PortType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[PortTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PortType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PortType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="522" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_ProtocolSubTypeId_Dictionaries_ProtocolSubType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[ProtocolSubTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ProtocolSubType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ProtocolSubType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="523" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDevice_StopBitId_Dictionaries_StopBit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[StopBitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StopBit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StopBit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="524" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceJournal_InternalDeviceEventId_Dictionaries_InternalDeviceEvent_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[InternalDeviceEvent].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[InternalDeviceEvent]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="525" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceJournal_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="526" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceLinkScheduleItem_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceLinkScheduleItem].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="527" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceLinkScheduleItem_ScheduleItemId_Core_ScheduleItem_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceLinkScheduleItem].[ScheduleItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="528" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceStatusConnectionLog_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="529" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MeasurementDeviceStatusConnectionLog_StatusConnectionId_Dictionaries_StatusConnection_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="530" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Mnemoscheme_MnemoschemeTypeId_Dictionaries_MnemoschemeType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Mnemoscheme].[MnemoschemeTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[MnemoschemeType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[MnemoschemeType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="531" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MobileDevice_UserId_Admin_User_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MobileDevice].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="532" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MobileEmergencyMessage_EmergencySituationParameterId_Business_EmergencySituationParameter_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage].[EmergencySituationParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="533" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_MobileEmergencyMessage_MobileDeviceId_Business_MobileDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage].[MobileDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MobileDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MobileDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="534" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Organization_OrganizationTypeId_Dictionaries_OrganizationType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Organization].[OrganizationTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[OrganizationType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[OrganizationType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="535" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_ChannelTemplateId]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="536" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_DeviceParameterId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="537" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_DimensionId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="538" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_MeasurementUnitId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="539" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_ParameterId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="540" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_PeriodTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="541" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterLinkDeviceParameter_SubsystemTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[SubsystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[SubsystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="542" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_ParameterMapDeviceParameter_ParameterDictionaryId_Dictionaries_ParameterDictionary_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="543" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Placement_BuildingId_Business_Building_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="544" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Placement_MnemoschemeId_Business_Mnemoscheme_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Placement].[MnemoschemeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Mnemoscheme].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="545" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Placement_OrganizationId_Business_Organization_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Placement].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="546" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Placement_PlacementPurposeId_Dictionaries_PlacementPurpose_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="547" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_Placement_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="548" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_RegulatorParameterValue_DeviceParameterId_Dictionaries_DeviceParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="549" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_RegulatorParameterValue_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="550" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_TimeSignature_MeasurementDeviceId_Business_MeasurementDevice_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="551" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_TimeSignature_StatusConnectionId_Dictionaries_StatusConnection_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[TimeSignature].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="552" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserAdditionalInfo_Id_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="553" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserAdditionalInfo_Id_Dictionaries_Gender_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[GenderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Gender].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Gender]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="554" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserAdditionalInfoLinkScheduleItem_ScheduleItemId_Core_ScheduleItem_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfoLinkScheduleItem].[ScheduleItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfoLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="555" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserAdditionalInfoLinkScheduleItem_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfoLinkScheduleItem].[UserAdditionalInfoId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfoLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="556" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserLinkChannel_ChannelId_Business_Channel_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="557" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserLinkChannel_UserId_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="558" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserLinkEmergencyNotificationType_EmergencySituationParameterId_Business_EmergencySituationParameter_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="559" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserLinkEmergencyNotificationType_NotificationTypeId_Dictionaries_NotificationType_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[NotificationType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[NotificationType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="560" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[FK_Business_UserLinkEmergencyNotificationType_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="561" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[Hub]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[FactoryNumber]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[ExternalNetAddress]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[ExternalPort]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[LocalNetAddress]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[LocalPort]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[Identifier]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[DeviceReaderId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Hub].[BuildingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="562" />
			<AttachedAnnotation Disambiguator="510" />
			<AttachedAnnotation Disambiguator="509" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Hub].[IX_Business_Hub_BuildingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Hub].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Hub].[IX_Business_Hub_DeviceReaderId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Hub].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[IntegrationArchiveInfo]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[PeriodTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[LastCalculatedDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[CurrentArchiveDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[IntegrationArchiveInfo].[DiffDeviceParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="563" />
			<AttachedAnnotation Disambiguator="512" />
			<AttachedAnnotation Disambiguator="513" />
			<AttachedAnnotation Disambiguator="511" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[IntegrationArchiveInfo].[IX_Business_IntegrationArchiveInfo_DiffDeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[IntegrationArchiveInfo].[DiffDeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[IntegrationArchiveInfo].[IX_Business_IntegrationArchiveInfo_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[IntegrationArchiveInfo].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[IntegrationArchiveInfo].[IX_Business_IntegrationArchiveInfo_PeriodTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[IntegrationArchiveInfo].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[MeasurementDevice]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[SubModel]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[AccessPointId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[AutoDefTimeoutAnswer]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[AmountAttempt]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[NetworkAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[ComPortId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[BaudId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[DataBitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[StopBitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[ParityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[Priority]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[LastStatusConnectionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[LastConnectionTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[PollingInterval]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[StartReadArchiveDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[CurrentAccreditationDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[NextAccreditationDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[ManufacturingDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[PortTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[FactoryNumber]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[Firmware]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[HubId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[TurnOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[GiveCurrData]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[GiveHArcData]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[GiveDArcData]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[GiveMArcData]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[ProtocolSubTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[LastTimeSignatureId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDevice].[LastSuccessConnectionTime]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="564" />
			<AttachedAnnotation Disambiguator="518" />
			<AttachedAnnotation Disambiguator="514" />
			<AttachedAnnotation Disambiguator="520" />
			<AttachedAnnotation Disambiguator="521" />
			<AttachedAnnotation Disambiguator="515" />
			<AttachedAnnotation Disambiguator="516" />
			<AttachedAnnotation Disambiguator="524" />
			<AttachedAnnotation Disambiguator="517" />
			<AttachedAnnotation Disambiguator="522" />
			<AttachedAnnotation Disambiguator="523" />
			<AttachedAnnotation Disambiguator="519" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="565" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDevice].[IX_Business_MeasurementDevice_AccessPointId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDevice].[IX_Business_MeasurementDevice_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDevice].[IX_Business_MeasurementDevice_HubId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[HubId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDevice].[IX_Business_MeasurementDevice_ProtocolSubTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[ProtocolSubTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDmlTrigger" Name="[Business].[MeasurementDevice_InstedOf_Delete]">
			<Property Name="IsDeleteTrigger" Value="True" />
			<Property Name="SqlTriggerType" Value="3" />
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT OFF;
    DECLARE @DeletedRows INT = 1;

  BEGIN TRY      
      /* [Archive] */
      SET @DeletedRows = 1;
      WHILE(@DeletedRows > 0)
      BEGIN

        DELETE TOP (5000) [Archive] 
          FROM [Business].[Archive] [Archive] 
          WHERE [Archive].[MeasurementDeviceId] IN
          (
            SELECT [Id] FROM [Deleted]
          );
          SET @DeletedRows = @@ROWCOUNT;
      END;
    
      /* [TimeSignature] */
      SET @DeletedRows = 1;
      WHILE(@DeletedRows > 0)
      BEGIN

        DELETE TOP (5000) [TimeSignature] 
          FROM [Business].[TimeSignature] [TimeSignature] 
          WHERE [TimeSignature].[MeasurementDeviceId] IN
          (
            SELECT [Id] FROM [Deleted]
          );

          SET @DeletedRows = @@ROWCOUNT;
      END;

      /* [DeviceReaderErrorLog] */
      SET @DeletedRows = 1;
      WHILE(@DeletedRows > 0)
      BEGIN

        DELETE TOP (5000) [DeviceReaderErrorLog] 
          FROM [Business].[DeviceReaderErrorLog]
          WHERE ISNULL([DeviceReaderErrorLog].[MeasurementDeviceId], 0) IN
          (
            SELECT [Id] FROM [Deleted]
          );
          SET @DeletedRows = @@ROWCOUNT;
      END;

      /* [DeviceEvent] */
      SET @DeletedRows = 1;
      WHILE(@DeletedRows > 0)
      BEGIN
        DELETE TOP (5000) [DeviceEvent]
          FROM [Business].[DeviceEvent]
          WHERE [DeviceEvent].[MeasurementDeviceId] IN 
          (
            SELECT [Deleted].[Id] FROM [Deleted]
          );

          SET @DeletedRows = @@ROWCOUNT;
      END;

      /* Каскадно удаляем остатки потрохов по [MeasurementDevice] */
      
      DELETE [MeasurementDevice] 
        FROM [Business].[MeasurementDevice] [MeasurementDevice]
        WHERE [MeasurementDevice].[Id] 
        IN 
        (
          SELECT [Deleted].[Id] FROM [Deleted]
        );
  END TRY

  BEGIN CATCH
    DECLARE @error NVARCHAR(MAX) = ERROR_MESSAGE();
    DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

    DECLARE @subject NVARCHAR(128) = CONCAT
    (
        'Ошибка триггера  [MeasurementDevice_InstedOf_Delete] при удалении сущности [MeasurementDevice]',               
        @serverName
    );

    SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());
     
    EXEC msdb.dbo.sp_send_dbmail
        @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
        @recipients = 'eta.development.dba@yandex.ru',
        @subject = @subject,
        @body = @error
      ;
      SET NOCOUNT ON;
    THROW;
  END CATCH;
  
  SET NOCOUNT ON;
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parent">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2809" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE TRIGGER [Business].[MeasurementDevice_InstedOf_Delete]&#xD;&#xA;ON [Business].[MeasurementDevice]&#xD;&#xA;&#xD;&#xA;INSTEAD OF DELETE&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[Business].[MeasurementDeviceJournal]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[OriginalValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceJournal].[CurrentValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="566" />
			<AttachedAnnotation Disambiguator="526" />
			<AttachedAnnotation Disambiguator="525" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="567" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceJournal].[IX_Business_MeasurementDeviceJournal_InternalDeviceEventId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceJournal].[IX_Business_MeasurementDeviceJournal_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[MeasurementDeviceLinkScheduleItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceLinkScheduleItem].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceLinkScheduleItem].[ScheduleItemId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="568" />
			<AttachedAnnotation Disambiguator="527" />
			<AttachedAnnotation Disambiguator="528" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[MeasurementDeviceStatusConnectionLog]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceStatusConnectionLog].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceStatusConnectionLog].[ConnectionTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceStatusConnectionLog].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="569" />
			<AttachedAnnotation Disambiguator="529" />
			<AttachedAnnotation Disambiguator="530" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[ConnectionTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin1]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[ConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_StatusConnectionId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[StatusConnectionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MeasurementDeviceStatusConnectionLog].[IX_Business_StatusConnectionLog_Time]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[ConnectionTime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[Mnemoscheme]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Mnemoscheme].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Mnemoscheme].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Mnemoscheme].[Image]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Mnemoscheme].[MnemoschemeTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Mnemoscheme].[Zoom]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="570" />
			<AttachedAnnotation Disambiguator="531" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[MobileDevice]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[Imei]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="82" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[Model]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[Os]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[RegistrationDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[LastConnectionDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[FcmToken]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileDevice].[IsActive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="571" />
			<AttachedAnnotation Disambiguator="532" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MobileDevice].[IX_Business_MobileDevice_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileDevice].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MobileDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[MobileEmergencyMessage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[MobileDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[Address]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[EmergencyDescription]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[EmergencyValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[EmergencySituationParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[Delivered]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[DeliveredTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[ChannelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileEmergencyMessage].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="572" />
			<AttachedAnnotation Disambiguator="534" />
			<AttachedAnnotation Disambiguator="533" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MobileEmergencyMessage].[IX_Business_MobileEmergencyMessage_ChannelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileEmergencyMessage].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MobileEmergencyMessage].[IX_Business_MobileEmergencyMessage_EmergencySituationParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileEmergencyMessage].[EmergencySituationParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MobileEmergencyMessage].[IX_Business_MobileEmergencyMessage_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileEmergencyMessage].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[MobileEmergencyMessage].[IX_Business_MobileEmergencyMessage_MobileDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileEmergencyMessage].[MobileDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[MobileGeolocationServicingMarker]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[ChannelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[Location]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[sys].[geography]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[ServerTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[Distance]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[real]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[MobileGeolocationServicingMarker].[IsValid]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="573" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="574" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="575" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[Organization]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[FullAddress]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[OrganizationTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[Location]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[sys].[geography]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Organization].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="576" />
			<AttachedAnnotation Disambiguator="535" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Organization].[IX_Business_Organization_OrganizationTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Organization].[OrganizationTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[ParameterMapDeviceParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[ParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[DimensionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[SubsystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[Order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[CreatedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[UpdatedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[CreatedDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[ParameterMapDeviceParameter].[UpdatedDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="577" />
			<AttachedAnnotation Disambiguator="540" />
			<AttachedAnnotation Disambiguator="541" />
			<AttachedAnnotation Disambiguator="539" />
			<AttachedAnnotation Disambiguator="538" />
			<AttachedAnnotation Disambiguator="543" />
			<AttachedAnnotation Disambiguator="537" />
			<AttachedAnnotation Disambiguator="542" />
			<AttachedAnnotation Disambiguator="536" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="578" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_ChannelTemplateId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_DeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_DimensionId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_MeasurementUnitId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_Order]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_ParameterDictionaryId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_ParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_PeriodTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_PeriodTypeId2]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[ParameterMapDeviceParameter].[IX_Business_ParameterMapDeviceParameter_SubsystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[SubsystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_AccessPoint]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="419" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_AccessPointLinkBuilding]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="426" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_AccessPointStatusConnectionLog]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPointStatusConnectionLog].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="429" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_AgreementParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AgreementParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AgreementParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="432" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Archive]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="434" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Building]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Building].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="440" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_BuildingMapResourceBuilding_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="445" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Channel]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Channel].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="450" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_ChannelLinkAgreementParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelLinkAgreementParameter].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelLinkAgreementParameter].[AgreementParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelLinkAgreementParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="459" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_ChannelTemplate]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ChannelTemplate].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="462" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_CheckingAccount_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CheckingAccount].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CheckingAccount]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="467" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_CheckingAccountLinkPlacement]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CheckingAccountLinkPlacement].[CheckingAccountId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CheckingAccountLinkPlacement].[PlacementId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="469" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_CsdModem]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[CsdModem].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[CsdModem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="472" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceEvent]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceEvent].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="475" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceLinkDynamicParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceLinkDynamicParameter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceLinkDynamicParameter].[DynamicParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceLinkDynamicParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="478" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceParameterSetting]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceParameterSetting].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceParameterSetting]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="481" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceReader]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReader].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="483" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceReaderErrorLog]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderErrorLog].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="486" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceReaderLinkScheduleItem_DeviceReaderId_ScheduleItemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderLinkScheduleItem].[DeviceReaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceReaderLinkScheduleItem].[ScheduleItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceReaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="490" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_DeviceTechnicalParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[DeviceTechnicalParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="493" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_EmergencyLog]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyLog].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="496" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_EmergencyMessage]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyMessage].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="499" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_EmergencySituationParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="503" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_EmergencySituationParameterTemplate]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="507" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_EmergencyTimeSignature]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[EmergencyTimeSignature].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="508" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_GeolocationServicingMarker]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileGeolocationServicingMarker].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileGeolocationServicingMarker]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="573" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[PK_Business_GeolocationServicingMarker_ChannelId_Business_Channel_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MobileGeolocationServicingMarker].[ChannelId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileGeolocationServicingMarker]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="575" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Business].[PK_Business_GeolocationServicingMarker_UserId_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Business].[MobileGeolocationServicingMarker].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileGeolocationServicingMarker]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="574" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Hub]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Hub].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Hub]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="562" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_IntergrationArchiveInfo]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[IntegrationArchiveInfo].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[IntegrationArchiveInfo]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="563" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MeasurementDevice]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="564" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MeasurementDeviceJournal]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="566" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MeasurementDeviceLinkScheduleItem_MeasurementDeviceId_ScheduleItemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceLinkScheduleItem].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceLinkScheduleItem].[ScheduleItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="568" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MeasurementDeviceStatusConnectionLog]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceStatusConnectionLog].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="569" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Mnemoscheme]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Mnemoscheme].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Mnemoscheme]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="570" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MobileDevice]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileDevice].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="571" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_MobileEmergencyMessage]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MobileEmergencyMessage].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MobileEmergencyMessage]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="572" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Organization]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Organization].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="576" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_ParameterLinkDeviceParameter_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="577" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_Placement]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="579" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_RegulatorParameterValue]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[RegulatorParameterValue].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="580" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_TimeSignature]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[TimeSignature].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="581" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_UserAdditionalInfo]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserAdditionalInfo].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="582" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_UserAdditionalInfoLinkScheduleItem_UserAdditionalInfoId_ScheduleItemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserAdditionalInfoLinkScheduleItem].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserAdditionalInfoLinkScheduleItem].[ScheduleItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserAdditionalInfoLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="583" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_UserLinkChannel]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkChannel].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkChannel].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="584" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Business].[PK_Business_UserLinkEmergencyNotificationType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="585" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[Placement]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[PlacementPurposeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[BuildingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[Number]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[AmountRooms]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[AmountPeople]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[FrontNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[Comment]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[Area]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[UserAdditionalInfoId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[OrganizationId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[HasIndividualAccounting]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[Placement].[MnemoschemeId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="579" />
			<AttachedAnnotation Disambiguator="547" />
			<AttachedAnnotation Disambiguator="544" />
			<AttachedAnnotation Disambiguator="548" />
			<AttachedAnnotation Disambiguator="546" />
			<AttachedAnnotation Disambiguator="545" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Placement].[IX_Business_Placement_BuildingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Placement].[IX_Business_Placement_HasIndividualAccounting]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[HasIndividualAccounting]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Placement].[IX_Business_Placement_OrganizationId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[OrganizationId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Placement].[IX_Business_Placement_PlacementPurposeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[PlacementPurposeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[Placement].[IX_Business_Placement_UserAdditionalInfoId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[RegulatorParameterValue]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[DeviceParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[DeviceValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[UserValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="3" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[SyncDeviceTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[UpdateUserValueTime]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[RegulatorParameterValue].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="580" />
			<AttachedAnnotation Disambiguator="550" />
			<AttachedAnnotation Disambiguator="549" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[RegulatorParameterValue].[IX_Business_RegulatorParameterValue_DeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[RegulatorParameterValue].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[RegulatorParameterValue].[IX_Business_RegulatorParameterValue_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[RegulatorParameterValue].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[Business].[StringSplitToArray]">
			<Property Name="ReturnTableVariable" Value="@Items" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[@input]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[@delimiter]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[StringSplitToArray].[Item]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
  SET @input = REPLACE(@input, '"', '');
  SET @input = REPLACE(@input, '[', '');
  SET @input = REPLACE(@input, ']', '');
  SET @input = REPLACE(@input, ' ', '');

  IF (@delimiter IS NULL OR @delimiter = '')
  BEGIN
    SET @delimiter = ',';
  END
           
  DECLARE @item NVARCHAR(1024)
  DECLARE @itemList NVARCHAR(1024)
  DECLARE @delimIndex INT

  SET @itemList = @input;
  SET @delimIndex = CHARINDEX(@delimiter, @itemList, 0);
      
  WHILE (@delimIndex != 0)
  BEGIN
            SET @item = SUBSTRING(@itemList, 0, @delimIndex)
            INSERT INTO @Items VALUES (@item)
            
            SET @itemList = SUBSTRING(@itemList, @delimIndex + 1, LEN(@itemList) - @delimIndex);
            SET @delimIndex = CHARINDEX(@delimiter, @itemList, 0);
  END 

  IF @item IS NOT NULL
  BEGIN
    SET @item = @itemList
    INSERT INTO @Items VALUES (@item)
  END     
  ELSE 
  BEGIN
    INSERT INTO @Items VALUES (@input)      	
  END
        
  RETURN
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1189" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Business].[StringSplitToArray]&#xD;&#xA;(&#xD;&#xA;      @input NVARCHAR(1024),&#xD;&#xA;      @delimiter VARCHAR(4)&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;RETURNS @Items TABLE &#xD;&#xA;(&#xD;&#xA;      Item NVARCHAR(1024)&#xD;&#xA;)&#xD;&#xA;&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Business].[StringSplitToArray].[@input]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Business].[StringSplitToArray].[@delimiter]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[TimeSignature]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[MeasurementDeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[DeviceTime]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[PollingDuration]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[TimeSignature].[StatusConnectionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="581" />
			<AttachedAnnotation Disambiguator="551" />
			<AttachedAnnotation Disambiguator="552" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[TimeSignature].[IX_Business_TimeSignature_MeasurementDeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[DeviceTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[PollingDuration]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[TimeSignature].[IX_Business_TimeSignature_MeasurementDeviceIdTime]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Property Name="IsAscending" Value="False" />
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[TimeSignature].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_Business_Archive_PeriodTypeId_Time_MeasurementDeviceId_DeviceParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[Archive].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="439" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_Business_BuildingMapResourceBuilding_BuildingId_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[BuildingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[BuildingMapResourceBuilding].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="449" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_Business_MeasurementDeviceJournal_MeasurementDeviceId_InternalDeviceEventId_Time_OriginalValue_CurrentValue]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[Time]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[OriginalValue]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDeviceJournal].[CurrentValue]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="567" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_Business_ParameterLinkDeviceParameter_ParameterId_PeriodTypeId_DeviceParameterId_ChannelTemplateId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="578" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_DeviceId_FactoryNumber]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="565" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Business].[UQ_NetAddress_Port_Identifier_NetPhone]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[NetAddress]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[Port]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[Identifier]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[AccessPoint].[NetPhone]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="425" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[UserAdditionalInfo]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[FirstName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[LastName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[Patronimic]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[BirthDay]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[date]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[GenderId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[Phone]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[Email]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfo].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="582" />
			<AttachedAnnotation Disambiguator="553" />
			<AttachedAnnotation Disambiguator="554" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[UserAdditionalInfoLinkScheduleItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfoLinkScheduleItem].[UserAdditionalInfoId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserAdditionalInfoLinkScheduleItem].[ScheduleItemId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="583" />
			<AttachedAnnotation Disambiguator="556" />
			<AttachedAnnotation Disambiguator="555" />
		</Element>
		<Element Type="SqlTable" Name="[Business].[UserLinkChannel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkChannel].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkChannel].[ChannelId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="584" />
			<AttachedAnnotation Disambiguator="558" />
			<AttachedAnnotation Disambiguator="557" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkChannel].[IX_Business_UserLinkChannel_ChannelId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkChannel].[ChannelId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkChannel].[IX_Business_UserLinkChannel_UserId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkChannel].[UserId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Business].[UserLinkEmergencyNotificationType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkEmergencyNotificationType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Business]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="585" />
			<AttachedAnnotation Disambiguator="559" />
			<AttachedAnnotation Disambiguator="561" />
			<AttachedAnnotation Disambiguator="560" />
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkEmergencyNotificationType].[IX_Business_UserLinkEmergencyNotificationType_EmergencySituationParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkEmergencyNotificationType].[IX_Business_UserLinkEmergencyNotificationType_NotificationTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkEmergencyNotificationType].[IX_Business_UserLinkEmergencyNotificationType_UserAdditionalInfoId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Business].[UserLinkEmergencyNotificationType].[IX_Business_UserLinkEmergencyNotificationType_UserAdditionalInfoId_NotificationTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Core]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[Binary]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[ItemId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsRowGuidColumn" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[BinaryContentTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[Data]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Binary].[Category]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="586" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="587" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="588" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Briefcase]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Briefcase].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Briefcase].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Briefcase].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Briefcase].[Comments]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Briefcase].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="589" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="590" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[BriefcaseItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[EntityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[BriefcaseId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[BriefcaseItem].[Comments]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="512" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="591" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="592" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="593" />
		</Element>
		<Element Type="SqlCheckConstraint" Name="[Core].[CHK_Core_MetaObject]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[([DictionaryId] IS NOT NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
			 OR ([DictionaryId] IS NULL AND [PivotId] IS NOT NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NOT NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NOT NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NOT NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NOT NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NULL)
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NOT NULL AND [DiagrammId] IS  NULL)           
	         OR ([DictionaryId] IS NULL AND [PivotId] IS NULL AND ReportId IS NULL AND QueryId IS NULL AND FormId IS NULL AND [PivotDiagrammId] IS NULL AND [ProcessingId] IS NULL AND [DiagrammId] IS NOT NULL)]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[Core].[MetaObject].[DictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[PivotId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[ReportId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[QueryId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[FormId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[PivotDiagrammId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[ProcessingId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[MetaObject].[DiagrammId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="594" />
		</Element>
		<Element Type="SqlCheckConstraint" Name="[Core].[CHK_Core_ScheduleItem_PeriodBegin_PeriodEnd]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[PeriodBegin] < [PeriodEnd]]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodEnd]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="595" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[CommandMenuTemplate]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[CommandMenuTemplate].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[CommandMenuTemplate].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[CommandMenuTemplate].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[CommandMenuTemplate].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="596" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[Core_Parametric_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Parametric].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Parametric]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="597" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[DashboardExtentionTemplate]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DashboardExtentionTemplate].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DashboardExtentionTemplate].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DashboardExtentionTemplate].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DashboardExtentionTemplate].[PredicateExpression]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DashboardExtentionTemplate].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="598" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Business_ProcessingLogEntry_ProcessingStatusId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry].[ProcessingStatusId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Binary_Category]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['Uncategorized']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Binary].[Category]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Binary_ItemId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[NEWID()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Binary].[ItemId]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Dictionary_UpdateOnly]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Dictionary]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Dictionary].[UpdateOnly]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Form_ReadOnly]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Form]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Form].[ReadOnly]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Menu_DisplayInMainMenu]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Menu]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Menu].[DisplayInMainMenu]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Menu_DisplayInNavbar]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Menu]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Menu].[DisplayInNavbar]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Processing_IsAsync]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Processing]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Processing].[IsAsync]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_Query_ExportableOnly]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Query]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[Query].[ExportableOnly]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_ScheduleItem_Enabled]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[ScheduleItem].[Enabled]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_ScheduleItem_PeriodBegin]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['00:00:00']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodBegin]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Core].[DF_Core_ScheduleItem_PeriodEnd]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['23:59:59']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodEnd]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[Diagramm]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Diagramm].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Diagramm].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Diagramm].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="599" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Dictionary]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Dictionary].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Dictionary].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Dictionary].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Dictionary].[UpdateOnly]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="600" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[DynamicParameterValue]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DynamicParameterValue].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DynamicParameterValue].[EntityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DynamicParameterValue].[DynamicParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[DynamicParameterValue].[Value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="601" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="602" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="603" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[DynamicParameterValue].[IX_Core_DynamicParameterValue_DynamicParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[Entity]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Entity].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Entity].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Entity].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Entity].[Schema]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="604" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[Entity].[IX_Core_Entity_Code]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Entity].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[Entity]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[EntityProperty]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityProperty].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityProperty].[EntityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityProperty].[PropertyName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityProperty].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="605" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="606" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[EntityTree]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTree].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTree].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTree].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTree].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="607" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[EntityTree].[IX_Core_EntityTree_Code]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTree].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[EntityTree]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[EntityTreeLinkRole]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTreeLinkRole].[EntityTreeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[EntityTreeLinkRole].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="608" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="609" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="610" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[EntityTreeLinkRole].[IX_Core_EntityTreeLinkRole_EntityTreeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTreeLinkRole].[EntityTreeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[EntityTreeLinkRole].[IX_Core_EntityTreeLinkRole_RoleId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTreeLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_Binary_ContentTypeId_Dictionaries_BinaryContentType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[Binary].[BinaryContentTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[BinaryContentType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[BinaryContentType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="587" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_Brieface_UserId_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[Briefcase].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Briefcase]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="590" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_BriefcaseItem_BriefcaseId_Core_Briefcase_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[BriefcaseItem].[BriefcaseId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[BriefcaseItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Briefcase].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Briefcase]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="592" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_DynamicParameterValue_DynamicParameterId_Dictionaries_DynamicParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="602" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_EntityPropery_EntityId_Core_Entity_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[EntityProperty].[EntityId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityProperty]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Entity].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Entity]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="606" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_EntityTreeLinkRole_EntityTreeId_Core_EntityTree_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole].[EntityTreeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[EntityTree].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[EntityTree]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="609" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_EntityTreeLinkRole_RoleId_Admin_Role_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="610" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MenuItemId_MenuId_Core_Menu_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MenuItem].[MenuId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MenuItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Menu].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Menu]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="611" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MenuItemId_MetaObjectId_Core_MetaObject_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MenuItem].[MetaObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MenuItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[MetaObject].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="612" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_DiagrammId_Core_Diagramm_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[DiagrammId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Diagramm].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Diagramm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="613" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_DictionaryId_Core_Dictionary_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[DictionaryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Dictionary].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Dictionary]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="614" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_FormId_Core_Form_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[FormId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Form].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Form]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="615" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_MetaObjectTypeId_Core_MetaObjectType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[MetaObjectTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[MetaObjectType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[MetaObjectType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="616" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_ParametricId_Core_Parametric_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[ParametricId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Parametric].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Parametric]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="617" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_PivotDiagrammId_Core_PivotDiagramm_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[PivotDiagrammId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[PivotDiagramm].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[PivotDiagramm]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="618" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_PivotId_Core_Pivot_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[PivotId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Pivot].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Pivot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="619" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_ProcessingId_Core_Processing_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[ProcessingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Processing].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Processing]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="620" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_QueryId_Core_Query_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[QueryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Query].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Query]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="621" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_ReportId_Core_Report_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[ReportId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Report].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="622" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObject_SourceId_Core_Source_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObject].[SourceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Source].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Source]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="623" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObjectLinkDevice_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="624" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObjectLinkDevice_MetaObjectId_Core_MetaObject_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice].[MetaObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[MetaObject].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="625" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObjectLinkRole_MetaObjectId_Core_MetaObject_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole].[MetaObjectId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[MetaObject].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="626" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObjectLinkRole_RoleId_Admin_Role_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole].[RoleId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="627" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_MetaObjectReferenceMeasurementDevice_Id_Core_MetaObject_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[MetaObjectReferenceMeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectReferenceMeasurementDevice]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[MetaObject].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="628" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ProcessingLogEntry_ProcessingId_Core_Processing_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry].[ProcessingId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Processing].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Processing]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="629" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ProcessingLogEntry_ProcessingStatusId_Dictionaries_ProcessingStatus_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry].[ProcessingStatusId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ProcessingStatus].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ProcessingStatus]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="630" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_Report_ReportTypeId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[Report].[ReportTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[ReportType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[ReportType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="631" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ReportPluginSelector_ReportId_Core_Report_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ReportPluginSelector].[ReportId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportPluginSelector]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Report].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="632" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ReportSelector_SelectorReportId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ReportSelector].[SelectorReportId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportSelector]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Report].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="633" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ReportSelector_TargetReportId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ReportSelector].[TargetReportId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportSelector]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[Report].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="634" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Core].[FK_Core_ScheduleItem_ScheduleTypeId_Dictionaries_ScheduleType_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Core].[ScheduleItem].[ScheduleTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ScheduleType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ScheduleType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="635" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Form]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[ReadOnly]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[LinkedEntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Form].[Layout]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="636" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[GoogleMapsStyle]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[GoogleMapsStyle].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[GoogleMapsStyle].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[GoogleMapsStyle].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[GoogleMapsStyle].[Template]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="637" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[MapInfoWindow]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MapInfoWindow].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MapInfoWindow].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MapInfoWindow].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MapInfoWindow].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="638" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Menu]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[Order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[Title]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[IconClass]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[DisplayInMainMenu]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Menu].[DisplayInNavbar]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="639" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[MenuItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[MenuId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[MetaObjectId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[Order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[Title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[IconClass]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MenuItem].[Visible]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="640" />
			<AttachedAnnotation Disambiguator="611" />
			<AttachedAnnotation Disambiguator="612" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MenuItem].[IX_Core_MenuItem_MenuId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MenuItem].[MenuId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MenuItem]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MenuItem].[IX_Core_MenuItem_MetaObjectId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MenuItem].[MetaObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MenuItem]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[MetaObject]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[MetaObjectTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[DictionaryId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[PivotId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[ReportId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[QueryId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[FormId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[PivotDiagrammId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[ProcessingId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[DiagrammId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[ParametricId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[SourceId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObject].[IsNotInlineParametric]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="641" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="616" />
			<AttachedAnnotation Disambiguator="614" />
			<AttachedAnnotation Disambiguator="619" />
			<AttachedAnnotation Disambiguator="621" />
			<AttachedAnnotation Disambiguator="622" />
			<AttachedAnnotation Disambiguator="615" />
			<AttachedAnnotation Disambiguator="618" />
			<AttachedAnnotation Disambiguator="620" />
			<AttachedAnnotation Disambiguator="613" />
			<AttachedAnnotation Disambiguator="617" />
			<AttachedAnnotation Disambiguator="623" />
			<AttachedAnnotation Disambiguator="594" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_DictionaryId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[DictionaryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_FormId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[FormId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_MetaObjectTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[MetaObjectTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_ParametricId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[ParametricId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_PivotDiagrammId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[PivotDiagrammId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_PivotId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[PivotId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_QueryId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[QueryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_ReportId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[ReportId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObject].[IX_Core_MetaObject_SourceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[SourceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[MetaObjectLinkDevice]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectLinkDevice].[MetaObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectLinkDevice].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="642" />
			<AttachedAnnotation Disambiguator="625" />
			<AttachedAnnotation Disambiguator="624" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObjectLinkDevice].[IX_Core_MetaObjectLinkDevice_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkDevice].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObjectLinkDevice].[IX_Core_MetaObjectLinkDevice_MetaObjectId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkDevice].[MetaObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[MetaObjectLinkRole]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectLinkRole].[MetaObjectId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectLinkRole].[RoleId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="643" />
			<AttachedAnnotation Disambiguator="626" />
			<AttachedAnnotation Disambiguator="627" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObjectLinkRole].[IX_Core_MetaObjectLinkRole_MetaObjectId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkRole].[MetaObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[MetaObjectLinkRole].[IX_Core_MetaObjectLinkRole_RoleId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[MetaObjectReferenceMeasurementDevice]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectReferenceMeasurementDevice].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="644" />
			<AttachedAnnotation Disambiguator="628" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[MetaObjectType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[MetaObjectType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="645" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Parametric]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Parametric].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Parametric].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Parametric].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Parametric].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="597" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Pivot]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Pivot].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Pivot].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Pivot].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="646" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[PivotDiagramm]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[PivotDiagramm].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[PivotDiagramm].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[PivotDiagramm].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="647" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Binary_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Binary].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="586" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Brieface]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Briefcase].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Briefcase]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="589" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_BriefcaseItem]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[BriefcaseItem].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[BriefcaseItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="591" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_CommandMenuTemplate]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[CommandMenuTemplate].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[CommandMenuTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="596" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_DashboardExtentionTemplate_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[DashboardExtentionTemplate].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[DashboardExtentionTemplate]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="598" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Diagramm_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Diagramm].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Diagramm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="599" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Dictionary]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Dictionary].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Dictionary]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="600" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_DynamicParameterValue]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[DynamicParameterValue].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="601" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Entity]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Entity].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Entity]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="604" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_EntityProperty]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityProperty].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityProperty]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="605" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_EntityTree]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTree].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityTree]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="607" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_EntityTreeLinkRole]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTreeLinkRole].[EntityTreeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[EntityTreeLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[EntityTreeLinkRole]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="608" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Form]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Form].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Form]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="636" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_GoogleMapsStyle_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[GoogleMapsStyle].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[GoogleMapsStyle]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="637" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MapInfoWindow]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MapInfoWindow].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MapInfoWindow]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="638" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Menu]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Menu].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Menu]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="639" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MenuItem]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MenuItem].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MenuItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="640" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MetaObject]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObject].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObject]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="641" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MetaObjectLinkDevice]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkDevice].[MetaObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkDevice].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="642" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MetaObjectLinkRole]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkRole].[MetaObjectId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectLinkRole].[RoleId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectLinkRole]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="643" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MetaObjectReferenceMeasurementDevice]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectReferenceMeasurementDevice].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectReferenceMeasurementDevice]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="644" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_MetaObjectType_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[MetaObjectType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[MetaObjectType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="645" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Pivot]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Pivot].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Pivot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="646" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_PivotDiagramm]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[PivotDiagramm].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[PivotDiagramm]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="647" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Processing]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Processing].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Processing]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="648" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_ProcessingLogEntry_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ProcessingLogEntry].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="649" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Query]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Query].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Query]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="650" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Report_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Report].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Report]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="651" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_ReportPluginSelector_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ReportPluginSelector].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportPluginSelector]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="652" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_ReportSelector_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ReportSelector].[TargetReportId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportSelector]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="653" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_ReportType_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ReportType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ReportType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="654" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_ScheduleItem_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ScheduleItem].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="655" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Script_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Script].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Script]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="656" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Core].[PK_Core_Source]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Source].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Source]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="657" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Processing]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Processing].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Processing].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Processing].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Processing].[IsAsync]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="648" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[ProcessingLogEntry]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[ProcessingId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[ProcessingStatusId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[Parameters]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ProcessingLogEntry].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="649" />
			<AttachedAnnotation Disambiguator="629" />
			<AttachedAnnotation Disambiguator="630" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[ProcessingLogEntry].[IX_Business_ProcessingLogEntry_ProcessingId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ProcessingLogEntry].[ProcessingId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Core].[ProcessingLogEntry].[IX_Business_ProcessingLogEntry_ProcessingLogStatusId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ProcessingLogEntry].[ProcessingStatusId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[ProcessingLogEntry]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[Query]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Query].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Query].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Query].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Query].[ExportableOnly]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Query].[Template]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="650" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Report]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[File]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[ReportTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Report].[HasPluginProcessing]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="651" />
			<AttachedAnnotation Disambiguator="631" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[ReportPluginSelector]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportPluginSelector].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportPluginSelector].[ReportId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportPluginSelector].[PredicateExpression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportPluginSelector].[TypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="652" />
			<AttachedAnnotation Disambiguator="632" />
		</Element>
		<Element Type="SqlIndex" Name="[Core].[ReportPluginSelector].[IX_Core_ReportPluginSelector_ReportId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[ReportPluginSelector].[ReportId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Core].[ReportPluginSelector]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[ReportSelector]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportSelector].[SelectorReportId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportSelector].[TargetReportId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportSelector].[PredicateExpression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="653" />
			<AttachedAnnotation Disambiguator="633" />
			<AttachedAnnotation Disambiguator="634" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[ReportType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ReportType].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="654" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[ScheduleItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[Enabled]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[ScheduleTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[PeriodBegin]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[PeriodEnd]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[ScheduleItem].[OrdinalNumberOfDay]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="655" />
			<AttachedAnnotation Disambiguator="635" />
			<AttachedAnnotation Disambiguator="595" />
		</Element>
		<Element Type="SqlTable" Name="[Core].[Script]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Script].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Script].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Script].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Script].[Language]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Script].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="656" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Core].[Source]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Source].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Source].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Source].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Core].[Source].[Template]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="657" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Core]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Core].[UQ_Core_Binary_ItemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[Binary].[ItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="588" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Core].[UQ_Core_BriefcaseItem_BriefcaseId_EntityId_EntityTypeName]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[BriefcaseItem].[BriefcaseId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[BriefcaseItem].[EntityId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[BriefcaseItem].[EntityTypeName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[BriefcaseItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="593" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Core].[UQ_EntityId_DynamicParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[DynamicParameterValue].[EntityId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="603" />
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[ConvertMeasurementUnit]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="MethodName" Value="ConvertMeasurementUnit" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.MathHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[ConvertMeasurementUnit].[@dimention1]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[ConvertMeasurementUnit].[@dimention2]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[ConvertMeasurementUnit].[@value]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="19" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[numeric]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[ConvertMeasurementUnit].[@expression]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Scale" Value="7" />
						<Property Name="Precision" Value="38" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[numeric]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[GetGridHyperlink]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="MethodName" Value="GetGridHyperlink" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.HtmlGridHyperLink" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetGridHyperlink].[@entityTypeName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetGridHyperlink].[@entityPropertyName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetGridHyperlink].[@entityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetGridHyperlink].[@commandName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetGridHyperlink].[@caption]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[dbo].[GetHtmlStatusConnectionBar]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[GetHtmlStatusConnectionBar].[EntityId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[dbo].[GetHtmlStatusConnectionBar].[HtmlTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1800" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="DataAccess" Value="1" />
						<Property Name="FillRowMethodName" Value="GetHtmlStatusConnectionBar_FillRow" />
						<Property Name="MethodName" Value="GetHtmlStatusConnectionBar" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.HtmlStatusConnectionBarHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetHtmlStatusConnectionBar].[@entityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[GetHtmlStatusConnectionBar].[@entityTypeName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[RegExReplace]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="IsDeterministic" Value="True" />
						<Property Name="DataAccess" Value="0" />
						<Property Name="SystemDataAccess" Value="0" />
						<Property Name="IsPrecise" Value="True" />
						<Property Name="MethodName" Value="RegExReplace" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.TextHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[RegExReplace].[@input]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[RegExReplace].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[RegExReplace].[@replacement]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[Trim]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="IsDeterministic" Value="True" />
						<Property Name="DataAccess" Value="0" />
						<Property Name="SystemDataAccess" Value="0" />
						<Property Name="IsPrecise" Value="True" />
						<Property Name="MethodName" Value="Trim" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.TextHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Trim].[@input]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[Trim].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[TrimEnd]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="IsDeterministic" Value="True" />
						<Property Name="DataAccess" Value="0" />
						<Property Name="SystemDataAccess" Value="0" />
						<Property Name="IsPrecise" Value="True" />
						<Property Name="MethodName" Value="TrimEnd" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.TextHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[TrimEnd].[@input]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[TrimEnd].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[dbo].[TrimStart]">
			<Property Name="IsAnsiNullsOn" />
			<Property Name="IsQuotedIdentifierOn" />
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlClrFunctionImplementation">
						<Property Name="IsDeterministic" Value="True" />
						<Property Name="DataAccess" Value="0" />
						<Property Name="SystemDataAccess" Value="0" />
						<Property Name="IsPrecise" Value="True" />
						<Property Name="MethodName" Value="TrimStart" />
						<Property Name="ClassName" Value="EnergyTechAudit.PowerAccounting.Database.Programmability.Clr.TextHelper" />
						<Relationship Name="Assembly">
							<Entry>
								<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[TrimStart].[@input]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[dbo].[TrimStart].[@pattern]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[DeviceReader]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Dictionaries]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[AgreementParameterType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementParameterType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementParameterType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementParameterType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="658" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[AgreementSystemParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementSystemParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementSystemParameter].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementSystemParameter].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementSystemParameter].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[AgreementSystemParameter].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="659" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="660" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="661" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[AgreementSystemParameter].[IX_Dictionaries_AgreementSystemParameter_PhysicalParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[AgreementSystemParameter].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[AgreementSystemParameter].[IX_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[AgreementSystemParameter].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Baud]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Baud].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Baud].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Baud].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="662" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[BinaryContentType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BinaryContentType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BinaryContentType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BinaryContentType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="663" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[BuildingPurpose]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BuildingPurpose].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BuildingPurpose].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[BuildingPurpose].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="664" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[City]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[City].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[City].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[City].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[City].[LatinCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[City].[MinimalTemperature]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="665" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ComPort]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ComPort].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ComPort].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ComPort].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="666" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[DataBit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DataBit].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DataBit].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DataBit].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="667" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Device]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ItemId]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsRowGuidColumn" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="668" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ArchiveDepthHour]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="669" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ArchiveDepthDay]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="670" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ArchiveDepthMonth]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="671" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ShortName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[Image]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[HasDigitalInterface]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[CalibrationInterval]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="672" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[BaudId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[DataBitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[StopBitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ParityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[ChannelsCount]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="673" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Device].[IsIntegralArchiveValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="674" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="675" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="676" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="677" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="678" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="679" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Device].[IX_Dictionaries_Device_BaudId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[BaudId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Device].[IX_Dictionaries_Device_DataId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[DataBitId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Device].[IX_Dictionaries_Device_ParityId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[ParityId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Device].[IX_Dictionaries_Device_StopBitId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[StopBitId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[DeviceEventParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceEventParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceEventParameter].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceEventParameter].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="256" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceEventParameter].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="680" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="681" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[DeviceEventParameter].[IX_Dictionaries_DeviceEventParameter_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceEventParameter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[DeviceParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceParameter].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceParameter].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceParameter].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="682" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="683" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[DeviceParameter].[IX_Dictionaries_DeviceParameter_Code]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceParameter].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[DeviceParameter].[IX_Dictionaries_DeviceParameter_DeviceIdId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceParameter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Description]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[DeviceReaderType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceReaderType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceReaderType].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DeviceReaderType].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="684" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_ArchiveDepthDay]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[ArchiveDepthDay]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="670" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_ArchiveDepthHour]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[ArchiveDepthHour]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="669" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_ArchiveDepthMonth]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[ArchiveDepthMonth]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="671" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_CalibrationInterval]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[CalibrationInterval]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="672" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_ChannelsCount]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[ChannelsCount]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="673" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Device_ItemId]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[NEWID()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Device].[ItemId]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="668" />
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Dimension_Prefix]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_DynamicParameter_EntityTypeName]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['MeasurementDevice']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[EntityTypeName]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_DynamicParameter_IsDefault]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[IsDefault]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_DynamicParameter_IsReadOnly]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[IsReadOnly]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_DynamicParameter_Type]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA['System.String']]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[Type]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[Dictionaries].[DF_Dictionaries_Parameter_IntegrableValue]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[0]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[Dictionaries_ScheduleType_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ScheduleType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ScheduleType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="685" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Dimension]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Dimension].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Dimension].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Dimension].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Dimension].[Prefix]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Dimension].[Value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="686" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="687" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[District]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[District].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[District].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[District].[CityId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="688" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="689" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[District].[IX_Dictionaries_District_CityId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[District].[CityId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[DynamicParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[EntityTypeName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[Type]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[IsDefault]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[DefaultValue]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[IsReadOnly]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[DynamicParameter].[Descriptor]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="690" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ErrorType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ErrorType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ErrorType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ErrorType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="691" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_AgreementSystemParameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="660" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId_Dictionaries_SystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="661" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Device_BaudId_Dictionaries_Baud_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Device].[BaudId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Baud].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Baud]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="675" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Device_DataId_Dictionaries_DataBit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Device].[DataBitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[DataBit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[DataBit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="676" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Device_ParityId_Dictionaries_Parity_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Device].[ParityId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Parity].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Parity]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="677" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Device_StopBitId_Dictionaries_StopBit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Device].[StopBitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[StopBit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[StopBit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="678" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_DeviceEventParameter_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="681" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_DeviceParameter_DeviceId]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="683" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_District_CityId_Dictionaries_City_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="689" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_InternalDeviceEvent_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[InternalDeviceEvent].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[InternalDeviceEvent]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="692" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_MeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="693" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Parameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="694" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_Parameter_ResourceSystemTypeId_Dictionaries_SystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[Parameter].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="695" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="696" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DictionaryId_Dictionaries_ParameterDictionary_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[ParameterDictionaryId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="697" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Dictionaries].[FK_Dictionaries_ResourceSubsystemType_ResourceSystemTypeId_Dictionaries_ResourceSystemType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="698" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Gender]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Gender].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Gender].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Gender].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="699" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[InternalDeviceEvent]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[InternalDeviceEvent].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[InternalDeviceEvent].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[InternalDeviceEvent].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[InternalDeviceEvent].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="700" />
			<AttachedAnnotation Disambiguator="692" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[MeasurementUnit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeasurementUnit].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeasurementUnit].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeasurementUnit].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="701" />
			<AttachedAnnotation Disambiguator="693" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[MeasurementUnit].[IX_Dictionaries_MeasurementUnit_PhysicalParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[MeteoDataSourceType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeteoDataSourceType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeteoDataSourceType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeteoDataSourceType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeteoDataSourceType].[Settings]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MeteoDataSourceType].[IsUse]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="702" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[MnemoschemeType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MnemoschemeType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MnemoschemeType].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[MnemoschemeType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="703" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[NotificationType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[NotificationType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[NotificationType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[NotificationType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[NotificationType].[IsActive]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="704" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[OrganizationType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[OrganizationType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[OrganizationType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[OrganizationType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="705" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Parameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[ShortDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parameter].[IntegrableValue]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="706" />
			<AttachedAnnotation Disambiguator="694" />
			<AttachedAnnotation Disambiguator="695" />
			<Annotation Type="SqlInlineIndexAnnotation" Disambiguator="707" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Parameter].[IX_Dictionaries_Parameter_Code]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="707" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Parameter].[IX_Dictionaries_Parameter_PhysicalParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[Parameter].[IX_Dictionaries_Parameter_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ParameterDictionary]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionary].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionary].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionary].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="708" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ParameterDictionaryValue]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[Value]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Property Name="Precision" Value="19" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ParameterDictionaryValue].[ParameterDictionaryId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="709" />
			<AttachedAnnotation Disambiguator="696" />
			<AttachedAnnotation Disambiguator="697" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[ParameterDictionaryValue].[IX_Dictionaries_ParameterDictionaryValue_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ParameterDictionaryValue].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[ParameterDictionaryValue].[IX_Dictionaries_ParameterDictionaryValue_ParameterDictionaryId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ParameterDictionaryValue].[ParameterDictionaryId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[Parity]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parity].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parity].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[Parity].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="710" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[PeriodType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PeriodType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PeriodType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PeriodType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="711" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[PhysicalParameter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PhysicalParameter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PhysicalParameter].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PhysicalParameter].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PhysicalParameter].[Order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="712" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_AgreementParameterType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[AgreementParameterType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[AgreementParameterType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="658" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_AgreementSystemParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[AgreementSystemParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[AgreementSystemParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="659" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Baud]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Baud].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Baud]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="662" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_BinaryContentType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[BinaryContentType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[BinaryContentType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="663" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_BuildingPurpose]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[BuildingPurpose].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="664" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_City]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[City].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="665" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ComPort]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ComPort].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ComPort]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="666" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_DataBit]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DataBit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DataBit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="667" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Device]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="674" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_DeviceEventParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceEventParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceEventParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="680" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_DeviceParameter_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="682" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_DeviceReaderType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DeviceReaderType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DeviceReaderType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="684" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Dimension]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Dimension].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="686" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_District]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[District].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="688" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_DynamicParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[DynamicParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="690" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ErrorType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ErrorType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ErrorType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="691" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Gender]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Gender].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Gender]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="699" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_InternalDeviceEvent_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[InternalDeviceEvent].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[InternalDeviceEvent]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="700" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_MeasurementUnit]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="701" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_MeteoDataSourceType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[MeteoDataSourceType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[MeteoDataSourceType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="702" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_MnemoschemeType_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[MnemoschemeType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[MnemoschemeType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="703" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_NotificationType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[NotificationType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[NotificationType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="704" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_OrganizationType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[OrganizationType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[OrganizationType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="705" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Parameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="706" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ParameterDictionary]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="708" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ParameterDictionaryValue]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ParameterDictionaryValue].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="709" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_Parity]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Parity].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Parity]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="710" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_PeriodType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[PeriodType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="711" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_PhysicalParameter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="712" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_PlacementPurpose]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="713" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_PortType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[PortType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[PortType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="714" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ProcessingStatus_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ProcessingStatus].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ProcessingStatus]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="715" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ProtocolSubType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ProtocolSubType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ProtocolSubType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="716" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ResourceSubsystemType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ResourceSubsystemType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="717" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_ResourceSystemType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="718" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_SeasonType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[SeasonType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[SeasonType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="719" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_StopBit]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[StopBit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[StopBit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="720" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_SubsystemType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[SubsystemType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[SubsystemType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="721" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_TechnologicAdjunctionType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[TechnologicAdjunctionType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[TechnologicAdjunctionType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="722" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_TemperatureProfile]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[TemperatureProfile].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[TemperatureProfile]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="723" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_TransportServerModel]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[TransportServerModel].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="724" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_Dictionaries_TransportType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[TransportType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[TransportType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="725" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_StatusConnection]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[StatusConnection].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="726" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Dictionaries].[PK_TypeConnection]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[TypeConnection].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[TypeConnection]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="727" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[PlacementPurpose]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PlacementPurpose].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PlacementPurpose].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PlacementPurpose].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="713" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[PortType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PortType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PortType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[PortType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="714" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ProcessingStatus]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProcessingStatus].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProcessingStatus].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProcessingStatus].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="715" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ProtocolSubType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProtocolSubType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProtocolSubType].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ProtocolSubType].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="716" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ResourceSubsystemType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSubsystemType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSubsystemType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSubsystemType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSubsystemType].[ResourceSystemTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSubsystemType].[ShortName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="717" />
			<AttachedAnnotation Disambiguator="698" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[ResourceSubsystemType].[IX_Dictionaries_ResourceSubsystemType_ResourceSystemTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ResourceSubsystemType].[ResourceSystemTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ResourceSystemType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSystemType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSystemType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSystemType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ResourceSystemType].[ShortName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="8" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="718" />
		</Element>
		<Element Type="SqlIndex" Name="[Dictionaries].[ResourceSystemType].[IX_Dictionaries_ResourceSystemType_Code]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[ScheduleType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ScheduleType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ScheduleType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[ScheduleType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="685" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[SeasonType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SeasonType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SeasonType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SeasonType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="719" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[StatusConnection]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StatusConnection].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StatusConnection].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StatusConnection].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="726" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[StopBit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StopBit].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StopBit].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[StopBit].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="720" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[SubsystemType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SubsystemType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SubsystemType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[SubsystemType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="721" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[TechnologicAdjunctionType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TechnologicAdjunctionType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TechnologicAdjunctionType].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TechnologicAdjunctionType].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="722" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[TemperatureProfile]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TemperatureProfile].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TemperatureProfile].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TemperatureProfile].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="723" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[TransportServerModel]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportServerModel].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportServerModel].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportServerModel].[Description]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="724" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[TransportType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportType].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TransportType].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="725" />
		</Element>
		<Element Type="SqlTable" Name="[Dictionaries].[TypeConnection]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TypeConnection].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TypeConnection].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Dictionaries].[TypeConnection].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Dictionaries]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="727" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Dictionaries].[UQ_Dictionaries_Device_ItemId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Device].[ItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="679" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Dictionaries].[UQ_Dictionaries_Dimension_Value]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Dictionaries].[Dimension].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="687" />
		</Element>
		<Element Type="SqlAssembly" Name="[EnergyTechAudit.PowerAccounting.Database]">
			<Relationship Name="AssemblySources">
				<Entry>
					<Element Type="SqlAssemblySource">
						<Property Name="Source">
							<Value><![CDATA[0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C01030026FA095E0000000000000000E00022200B013000005200000006000000000000B670000000200000008000000000001000200000000200000400000000000000060000000000000000C000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000647000004F00000000800000280300000000000000000000000000000000000000A000000C0000002C6F00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000BC500000002000000052000000020000000000000000000000000000200000602E7273726300000028030000008000000004000000540000000000000000000000000000400000402E72656C6F6300000C00000000A00000000200000058000000000000000000000000000040000042000000000000000000000000000000009870000000000000480000000200050070390000BC35000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B300600CD0100000100001102730700000A25720100007072050000706F0800000A25720B000070720F0000706F0800000A25721500007072190000706F0800000A25721F00007072230000706F0800000A257229000070722D0000706F0800000A25723300007072370000706F0800000A25723D00007072410000706F0800000A7D1900000402730700000A25724700007072510000706F0800000A25725D00007072510000706F0800000A25726100007072690000706F0800000A257273000070727B0000706F0800000A257285000070728B0000706F0800000A257293000070729B0000706F0800000A2572A500007072AB0000706F0800000A2572B300007072B90000706F0800000A2572C100007072C70000706F0800000A2572CF00007072D70000706F0800000A2572E100007072E90000706F0800000A2572F300007072FB0000706F0800000A7D1A00000402730700000A257205010070720B01007023182D4454FB2109400A1200280900000A280A00000A6F0800000A25720F010070720B010070236957148B0ABF05400A1200280900000A280A00000A6F0800000A7D1B00000402280B00000A02280C00000A6F0D00000A6F0E00000A280F00000A7D1C000004DE0D0B721301007007731000000A7A2A000000011000000000A3011CBF010D0700000113300600AB0100000200001102730700000A25720100007072050000706F0800000A25720B000070720F0000706F0800000A25721500007072190000706F0800000A25721F00007072230000706F0800000A257229000070722D0000706F0800000A25723300007072370000706F0800000A25723D00007072410000706F0800000A7D1900000402730700000A25724700007072510000706F0800000A25725D00007072510000706F0800000A25726100007072690000706F0800000A257273000070727B0000706F0800000A257285000070728B0000706F0800000A257293000070729B0000706F0800000A2572A500007072AB0000706F0800000A2572B300007072B90000706F0800000A2572C100007072C70000706F0800000A2572CF00007072D70000706F0800000A2572E100007072E90000706F0800000A2572F300007072FB0000706F0800000A7D1A00000402730700000A257205010070720B01007023182D4454FB2109400A1200280900000A280A00000A6F0800000A25720F010070720B010070236957148B0ABF05400A1200280900000A280A00000A6F0800000A7D1B00000402280B00000A02037D1C0000042A001B300400250000000200001102047D1D0000040202020328040000062805000006280B0000060ADE067A7A7A7A7A7A062A000000014C000000000700161D00010800000100000700161E00010700000100000700161F00010900000100000700162000010A00000100000700162100010B00000100000700162200010C00000113300200840000000300001103281100000A2C0B72BC010070731200000A7A731300000A0A160B160C2B4703086F1400000A0D091F2833060717580B2B09091F2933040717590B09281500000A2D1F09281600000A2C0F0609281700000A6F1800000A262B0806096F1800000A260817580C08036F1900000A32B0072C0B72F4010070731A00000A7A066F1B00000A2A133004007200000004000011160A731300000A0B731C00000A0C2B140203120028060000060D0209070828070000060B06036F1900000A32E32B33086F1D00000A166F1400000A725802007016281400000A330F07086F1E00000A6F1F00000A262B0B725C020070731A00000A7A086F2000000A1630C4076F1B00000A2A0000133005004103000005000011731300000A0A0603044A6F1400000A6F1800000A26027B19000004066F1B00000A6F2100000A2C72044A2C1003044A17596F1400000A1F28FE012B01170B04044A175854066F1B00000A0C082C3A087201000070282200000A2D0F08720B000070282200000A2D112B1E072D0672050000702A72CC0200702A072D06720F0000702A72D60200702A027B19000004066F1B00000A6F2300000A2A06166F2400000A282500000A2D3A027B1A000004066F1B00000A6F2100000A2D27027B1B000004066F1B00000A6F2100000A39860000002B0F0603044A6F1400000A6F1800000A2604044A17580D095409036F1900000A2F0F03044A6F1400000A282500000A2DD1027B1A000004066F1B00000A6F2100000A2C12027B1A000004066F1B00000A6F2300000A2A027B1B000004066F1B00000A6F2100000A2C12027B1B000004066F1B00000A6F2300000A2A72E0020070732600000A7A06166F2400000A282700000A2D1206166F2400000A027B1C00000440BF01000006166F2400000A282700000A2C332B0F0603044A6F1400000A6F1800000A2604044A17580D095409036F1900000A2F1803044A6F1400000A282700000A2DD12B07066F2800000A26044A036F1900000A2F5703044A6F1400000A027B1C000004334706280C00000A6F0D00000A6F0E00000A6F1F00000A262B0F0603044A6F1400000A6F1800000A2604044A17580D095409036F1900000A2F0F03044A6F1400000A282700000A2DD1044A1758036F1900000A3CF600000003044A6F1400000A1F6540E700000003044A17586F1400000A282700000A2D42044A1858036F1900000A3CC700000003044A17586F1400000A1F2B2E1103044A17586F1400000A1F2D40A800000003044A18586F1400000A282700000A3994000000060304044A0D09175854096F1400000A6F1800000A2603044A6F1400000A1F2B2E0C03044A6F1400000A1F2D332E060304044A0D09175854096F1400000A6F1800000A262B16060304044A0D09175854096F1400000A6F1800000A26044A036F1900000A2F0F03044A6F1400000A282700000A2DD1720B010070066F1B00000A282900000A13041204280900000A280A00000A2A720B010070066F1B00000A280A00000A2A72FC020070732600000A7A00000013300300E40000000600001103166F1400000A720B01007016281400000A330D04036F1F00000A2638C100000003166F1400000A723403007016281400000A330C05036F2A00000A38A1000000037237000070282200000A2C0C05036F2A00000A3888000000037241000070282200000A2C5C2B0804066F1F00000A26056F1E00000A250A7237000070282B00000A2DE4056F2000000A163154056F1D00000A166F1400000A723403007016281400000A333B04056F1E00000A6F1F00000A262B2C04056F1E00000A6F1F00000A26056F2000000A16310F0203056F1D00000A28080000062DDB05036F2A00000A042ABA020328090000062D140203280A0000060204280A000006FE0216FE012A0203280A0000060204280A000006FE042A3203722D000070282200000A2A13300200D8020000070000110339C702000003281C0000060A06206D82F422429A0000000620C8D0BB1E3549062014DEAC06351B06209B8683003B42020000062014DEAC063B28020000388A0200000620767DF3083B540200000620FB78F41C3B470100000620C8D0BB1E3BFD00000038640200000620EF758821351B06205BD2BB1F3B390100000620EF7588213BFD0100003841020000062081D5BB213BB5000000062014D7BB223B2801000006206D82F4223BDE000000381B0200000620818DB1CC354906203B4A5730351B06203ADABB243BA900000006203B4A57303B3101000038F001000006209756BC733BF7000000062029DD1EBF3B010100000620818DB1CC3BB301000038CA0100000620F6D01FE1351B062025D8DCD43B320100000620F6D01FE13BFD00000038A70100000620449C85E63B26010000062065E596E63B570100000620E28183FD3BEC0000003881010000037237000070282200000A3A64010000386C010000037205000070282200000A3A51010000385701000003720F000070282200000A3A3C01000038420100000372CC020070282200000A3A29010000382D0100000372D6020070282200000A3A140100003818010000037219000070282200000A3A010100003803010000037223000070282200000A3AEC00000038EE00000003722D000070282200000A3AD900000038D9000000037251000070282200000A3AC400000038C4000000037269000070282200000A3AB100000038AF00000003727B000070282200000A3A9C000000389A00000003728B000070282200000A3A87000000388500000003729B000070282200000A2D752B760372AB000070282200000A2D662B670372B9000070282200000A2D572B580372C7000070282200000A2D482B490372D7000070282200000A2D392B3A037238030070282200000A2D2A2B2B0372E9000070282200000A2D1B2B1C0372FB000070282200000A2D0C2B0D162A182A1C2A1A2A1E2A1F0A2A7240030070732600000A7A133003004100000008000011160A732C00000A0B2B1302031200280C0000060C020708280D0000060B06036F1900000A32E4076F2D00000A17310B7262030070732600000A7A076F2E00000A2A000000133005008400000009000011731300000A0A060304044A0B07175854076F1400000A6F1800000A262B16060304044A0B07175854076F1400000A6F1800000A26044A036F1900000A2F3F03044A6F1400000A720B01007016281400000A2E2A03044A6F1400000A725802007016281400000A2E1503044A6F1400000A723403007016281400000A33A1066F1B00000A2A13300400B20300000A00001104166F1400000A720B01007016281400000A3318030416176F2F00000A283000000A6F3100000A38840300000204280F0000061740B0020000036F2E00000A0A04398C02000004281C0000060C08203B4A573035510820767DF308352608209B8683003B5E010000082014DEAC063B3E0100000820767DF3083B72010000384F0200000820FB78F41C3B9000000008206D82F4222E7308203B4A57303BA7000000382C020000082025D8DCD43523082029DD1EBF2E7D0820818DB1CC3B44010000082025D8DCD43BBB00000038010200000820449C85E635180820F6D01FE12E7C0820449C85E63BB000000038E1010000082065E596E63BDF0000000820E28183FD2E6E38C90100000472CC020070282200000A3A0101000038B40100000472D6020070282200000A3AF3000000389F010000047251000070282200000A3AE6000000388A010000047269000070282200000A3ADD000000387501000004727B000070282200000A3AE1000000386001000004728B000070282200000A3AE2000000384B01000004729B000070282200000A3AE300000038360100000472AB000070282200000A3AEE00000038210100000472B9000070282200000A3AE2000000380C0100000472C7000070282200000A3AD800000038F7000000047238030070282200000A3ACC00000038E20000000472E9000070282200000A3AC000000038CD0000000472FB000070282200000A3AB400000038B8000000060B38BC00000006650B38B400000006283200000A0B38A80000000214FE063300000A733400000A06280E0000060B388F0000000214FE063500000A733400000A06280E0000060B2B790214FE063600000A733400000A06280E0000060B2B6323000000000000F03F0214FE063600000A733400000A06280E0000065B0B2B4306283700000A0B2B3A06283800000A250B0B2B2F06283900000A0B2B2606283A00000A0B2B1D06283B00000A0B2B1406283C00000A0B2B0B7240030070732600000A7A03076F3100000A38C7000000036F2E00000A0D036F2E00000A130404399F000000047205000070282200000A2D4304720F000070282200000A2D3E047219000070282200000A2D39047223000070282200000A2D3404722D000070282200000A2D460472D7000070282200000A2D452B4F1104095813052B521104095913052B4A1104095A13052B4209230000000000000000330B7280030070733D00000A7A1104095B13052B23110409283E00000A13052B17091104283F00000A13052B0B7240030070732600000A7A0311056F3100000A032A9E027B1D0000042D170423182D4454FB2109405A2300000000008066405B100203046F4000000A2A000013300200A00200000700001103398F02000003281C0000060A06206D82F422428F0000000620FB78F41C353E062014DEAC06351B06209B8683003B83010000062014DEAC063B6301000038520200000620767DF3083BCB0100000620FB78F41C3BF4000000383702000006205BD2BB1F351B0620C8D0BB1E3BC601000006205BD2BB1F3BD901000038140200000620EF7588213BF6010000062014D7BB223BCD01000006206D82F4223B9600000038EE0100000620818DB1CC354606203B4A5730351B06203ADABB243B8401000006203B4A57303B2801000038C301000006209756BC733B96010000062029DD1EBF2E7D0620818DB1CC3B3801000038A00100000620F6D01FE1351B062025D8DCD43BD80000000620F6D01FE13BF7000000387D0100000620449C85E62E6C062065E596E63BA00000000620E28183FD2E44385D0100000372CC020070282200000A3A4901000038480100000372D6020070282200000A3A340100003833010000037251000070282200000A3A1F010000381E01000003728B000070282200000A3A0A01000038090100000372AB000070282200000A3AF500000038F40000000372B9000070282200000A3AE000000038DF0000000372C7000070282200000A3ACB00000038CA000000037238030070282200000A3AB600000038B500000003729B000070282200000A3AA100000038A0000000037269000070282200000A3A8C000000388B00000003727B000070282200000A2D7A2B7C0372E9000070282200000A2D6B2B6D0372FB000070282200000A2D5C2B5E037205000070282200000A2D4F2B4F03720F000070282200000A2D402B40037219000070282200000A2D312B31037223000070282200000A2D222B2203722D000070282200000A2D132B130372D7000070282200000A2D042B04172A182A7240030070732600000A7A13300200200000000B0000110274080000020A03066F1D000006811000000104066F1F00000681110000012A1B300400010100000C00001173220000060A06037D2600000472B0030070734100000A0B076F4200000A140C72E0030070067B260000048C11000001284300000A07734400000A250C0D086F4500000A734600000A2572A10900706F4700000A25028C100000016F4800000A6F4900000A26086F4A00000A130406734B00000A7D25000004067B2500000411046F4C00000ADE2011042C0711046F4D00000ADC092C06096F4D00000ADC072C06076F4D00000ADC00067B250000046F4E00000A280100002B7E2A000004252D17267E29000004FE0628000006735000000A25802A000004280200002B06FE0623000006735200000A280300002B1305DE0C067B250000046F5400000ADC11052A0000000134000002006E001A88000C0000000002003E005694000A0000000002001800869E000A000000000200A90049F2000C000000001E02280B00000A2A13300600AC0000000D0000110F00285500000A3A9E0000000F01285500000A3A920000000F02285500000A3A860000000F03285600000A2D7D0F03FE16110000016F1B00000A0A0F02FE161F0000016F1B00000A0B0F00FE161F0000016F1B00000A0C0F01FE161F0000016F1B00000A0D285700000A6F0D00000A6F0E00000A166F1400000A7302000006285700000A72B50900700672DD090070076F5800000A0809285900000A0A06176F03000006735A00000A2A042A13300500440000000000000072E10900701B8D050000012516048C10000001A22517028C11000001A22518038C11000001A22519058C11000001A2251A0E048C11000001A2285B00000A735C00000A2AE60F00285600000A2D090F01285600000A2C067E5D00000A2A0F00285E00000A0F01285E00000A0F02285E00000A19285F00000A735C00000A2A7A0F00FE16110000016F1B00000A036F6000000A6F6100000A735C00000A2A7A0F00FE16110000016F1B00000A036F6000000A6F6200000A735C00000A2A7A0F00FE16110000016F1B00000A036F6000000A6F6300000A735C00000A2A00133002002C0000000E000011022C2720C59D1C810A160B2B1402076F1400000A066120930100015A0A0717580B07026F1900000A32E3062A1E027B230000042A2202037D230000042A1E027B240000042A2202037D240000042A00001B300500160100000F00001173240000060A06027D280000047E6400000A0B7E6400000A0C170D03280400002B130406036F6600000AA5360000017D2700000411041F142F2603171F14110459286700000A06FE0625000006736800000A280500002B280600002B13052B0303130511056F6A00000A13072B4A11076F6B00000A1308720C0B007007110872600B00706F6C00000A110872660B00706F6C00000A286D00000A0B091F0A5D2D13728C0B00700807286E00000A0C7E6400000A0B0917580D11076F6F00000A2DADDE0C11072C0711076F4D00000ADC72AC0B0070067B270000048C3600000108027B260000048C11000001286D00000A1306732100000625067B27000004287000000A6F1E000006251106287100000A6F200000062A00000110000002006C0057C3000C00000000133004004900000000000000027B280000047B250000046F7200000A2572600B0070168C360000016F7300000A2572990C0070027B270000048C360000016F7300000A2572660B0070178C360000016F7300000A2A2E732700000680290000042A320372990C00706F6C00000A2A000042534A4201000100000000000C00000076342E302E33303331390000000005006C000000940B0000237E0000000C0000EC0B000023537472696E677300000000EC170000AC0C00002355530098240000100000002347554944000000A82400001411000023426C6F620000000000000002000001571DA209090A000000FA01330016000001000000370000000B0000002A0000002800000034000000730000001E000000180000000F0000000100000002000000040000000A000000010000000400000004000000060000000000840501000000000006001A04400906004C0440090600F1032D090F00600900000600720ACE050600F400830106000907CE050600F306CE050600D906CE050600A706CE0506001907CE0506002107CE050600D5073D0B0A00860083010600E100CE050E00B7006F090E0093046F090E00050476080E00650276080600EC02AD090E007F06AB0A0E004D02AB0A0E00A907AB0A0600D60340090E00BC026A011200E8006B070E004D0B6A0106007800830106008E0083010E003A0476080E0063056F090E005F0276080E00F2096F0906000C03CE050600B904CE0506004607340606005207340606009807CE050600C306CE0506001C0BCE0506001B05CE050E0072062B070E004906AB0A0E006008AB0A0E0054082B070E009D076A010600F802CE050E0060066A011200ED026B070A00CD0A6E050600C507CE050A008B0B8E090A00D3098E090600BA00CE0506000209AD090000000010010000000001000100010010004908C004150001000100010010001808990815001E001000010010000D089908150023001300010010004005990815002300150001001000360899081500230017000001000019010000150023001C00030010007E070000150023001D00030110002D0000001500250022000301100042000000150027002400032110007F0100001500290026005180E30718025180FE0718025180EF0718025180440A18025180420A180251804B0A18025180490A18025180AD0B18025180A10218025180A80218025180E50A18025180F00A18025180240B18025180EC0518025180E00918025180900418025180E80418025180EF0418025180EC0418025180F20418025180E00418025180DA05180251806707180251802909180221000A0A1A092100C0091A0921001D0A1A092100F108220901008409250951807E02280951807402280951808B0428095180A30128095180BE031802010010022B0901002A02E201060004032F0906001F03E2010600BD0128090600A700330936000C013709160001003B0950200000000086181C09060001003C220000000086181C0944090100F423000000008600B803490902007424000000008100A6044F090400042500000000810038014F0905008425000000008100FB0554090600D42800000000810018065B090800C429000000008100D30B68090B00F329000000008100EF016E090D00002A000000008100D00B73090E00E42C000000008100CC0378090F00342D000000008100450154091000C42D00000000810058017D09120082310000000081008D068B091400AC31000000008100300A7309160058340000000091005D0B9609170084340000000096007707A1091A00C8350000000086181C0906001C00D035000000009600940AAA091C00C8350000000086181C090600210088360000000096005205B7092100C8350000000086181C0906002600D8360000000096008702C609260012370000000096004502D10929003137000000009600120BD1092B005037000000009600D505D1092D00C8350000000086181C0906002F007037000000009300FF04DB092F00A837000000008608C301E0093000B037000000008608D001E5093000B937000000008608C602EB093100C137000000008608D402F0093100C8350000000086181C0906003200C8350000000086181C0906003200CC370000000083005700F6093200C8350000000086181C09060033000039000000008300C000020A330055390000000091182209080A3400C8350000000086181C090600340061390000000083000A000C0A340000000100F10800000100F00510100200840900000100F00500000100F00500000100F00500000200E40900000100E10500000200B30400000300350500000100E10500000200690700000100E10500000100E10500000100F00500000100F00500000200E40900000100350500000200E105000001009E0100000200E40400000100E105000001002B0502000200DD0102000300E20200000100DD01000002001F03000000000000000001009C00000002000101000003007E0400000400F005000001001F0300000200400300000300DD01000004001303000005009F06000001002E0B000002003E0700000300C10A000001002E0B000002003E07000001002E0B000002003E07000001002E0B000002003E0700000100580A000001007E04000001007E0400000100010200000100550B00000100870B09001C09010011001C09060019001C090A0091001C090600C1001C090600F1001C0906000C001C0906000C00EB011D0011019D04250019015A0A290029001C090600210174032F002101610A35002901D60825003101B8033B0039001C0940001901DC0B530039011C09580069001C0906001901E8095D00310194026200310141086200310191086700690058026C0019012005720039001C09580029009D04250014001C09060014003B058800140063078800690058028D001400080B72000C00A10B9C001901B60BA2000C00BC05A8006900E8095D0031016D08620059001C09580031018C0A620069009207AF0041010A03B40014001605BD001901C20BA2001C001C0906001C00080B72001C006307880019018404E6001101B803B4001C001605BD004901240BEC004901EC05EC0024001C09F8004901E009EC004901DD05EC004901FA04EC0049011105EC004901F504EC004901E004EC0049016707EC0049012909EC0041001C0958004901490BFE004901E004FE002400B502A800A9001C0958005101E705060019016B0A1801B1001C091E01B100FB09250161011C09060069012E035800690174042B015901EB013001B100B7073901C9001C090600C900E6013E017901B0030600C900510A45018901290B4B012C001C09F8008901910B640134001C09F8008901790A96019101B0030600F900B105C1018900B105C10121015F032F0019018C02C50119016B0ACB01F9001C09D60119016B0ADB0189001C0958008900B705E20189006A042500A1018C02E60109016A04F00119014502F5011901120BF5011901D505F5011901E40B180289010C0B1B023C00990B88008901AF022E0244001C09F80089015A0A46024C000E0963025400FC0A8800D900BC05730219016B0A780219016B0A8002B901340BC1018100800A87028900800A8D02C900800B9302D900C50598020E000400A7020E000800AA020E000C00AD0202000D0018090E001000B0020E001400B5020E001800BE020E001C00C3020E002000CC020E002400D1020E002800D6020E002C00DB020E003000E0020E003400E5020E003800F0020E003C00F9020E00400002030E00440009030E00480012030E004C0019030E00500020030E00540027030E00580030030E005C0037030E006000400308007800490308007C004E030800800053030800840049030E00880058032E000B001C0A2E001300250A2E001B00440AE3002B00490323012B00490343012B00490363012B004903200223004D0A600223004903A00223004903E00223004E0B00032300AA0C20032300010E400323005A0F84033300AE10A0032B004903A4033300CF10C0032B004903C4033300CF10E0032B004903E4033300F01000042B00490361042B00490381042B004903100047004B0076009300B900C300C700D700DD0004010901BA01FB010002080001000000D401120A0000D802170A02001D00030001001E00030002001F00050001002000050016008200D100F1005C018801260238025C026C02048000000000000000000000000000000000870300000400000000000000000000009E027601000000000400000000000000000000009E02CE05000000000400000000000000000000009E026A01000000000400000000000000000000009E0253030000000008000300090003000A0003000B0003009F005701A3008201A700AE01CB005701A7004002D300570100000000003C3E395F5F375F30003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F375F30003C3E635F5F446973706C6179436C617373375F30003C3E635F5F446973706C6179436C617373375F31003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F310049456E756D657261626C65603100537461636B60310049456E756D657261746F7260310064696D656E74696F6E31004353243C3E385F5F6C6F63616C73310053716C496E743332003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F320046756E636032004947726F7570696E6760320044696374696F6E61727960320064696D656E74696F6E32003C3E39003C4D6F64756C653E003C50726976617465496D706C656D656E746174696F6E44657461696C733E00436F6E76657274546F52504E004C65786963616C416E616C7973697352504E0053796E746178416E616C7973697352504E0053797374656D2E44617461006D73636F726C6962003C3E630053797374656D2E436F6C6C656374696F6E732E47656E657269630066756E630044656661756C74537461747573436F6E6E656374696F6E496400656E744964006765745F456E746974794964007365745F456E74697479496400656E746974794964004C6F61640041646400497352696768744173736F6369617465640067726F7570526F777342794D6964003C456E7469747949643E6B5F5F4261636B696E674669656C64003C48746D6C5461626C653E6B5F5F4261636B696E674669656C64005472696D456E640053716C436F6D6D616E6400417070656E640053797374656D446174614163636573734B696E640048696768426F756E64004C6F77426F756E640052656745785265706C6163650049735768697465537061636500446976696465004465677265650052616E676500496E766F6B6500446174615461626C65006765745F48746D6C5461626C65007365745F48746D6C5461626C650068746D6C5461626C650049456E756D657261626C650049446973706F7361626C65007461626C6500546F446F75626C6500636F6D6D616E644E616D6500656E74697479547970654E616D65007365745F506172616D657465724E616D6500656E7469747950726F70657274794E616D650053797374656D2E436F7265006765745F496E76617269616E7443756C74757265006765745F43757272656E7443756C7475726500456E657267795465636841756469742E506F7765724163636F756E74696E672E446174616261736500446973706F736500506172736500517565727954656D706C6174650043616C63756C61746500436F6D70696C657247656E6572617465644174747269627574650044656275676761626C654174747269627574650053716C46756E6374696F6E41747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650053716C46616365744174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F56616C7565007365745F56616C75650076616C75650052656D6F76650048616C660054670053716C537472696E6700546F537472696E6700466F726D6174537472696E67006F7574707574537472696E6700456E657267795465636841756469742E506F7765724163636F756E74696E67004C6F6700617267004374670043680053680054680054616E680053696E6800436F6D70757465537472696E674861736800436F73680050757368004D617468006765745F4C656E67746800726573756C744F626A00737461636B005065656B0048746D6C4772696448797065724C696E6B004765744772696448797065726C696E6B0053716C446563696D616C0053797374656D2E436F6D706F6E656E744D6F64656C00456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E646C6C006765745F49734E756C6C006765745F4974656D007365745F4974656D0053797374656D005472696D004C6E0054616E00746F6B656E004F70656E0053696E0065787072657373696F6E004C65786963616C416E616C79736973496E6669784E6F746174696F6E0053796E746178416E616C79736973496E6669784E6F746174696F6E0053797374656D2E476C6F62616C697A6174696F6E0053716C506172616D65746572436F6C6C656374696F6E0044617461526F77436F6C6C656374696F6E004462436F6E6E656374696F6E0053716C436F6E6E656374696F6E004170706C795472696746756E6374696F6E0063617074696F6E00417267756D656E744F75744F6652616E6765457863657074696F6E00417267756D656E744E756C6C457863657074696F6E00496E76616C69644F7065726174696F6E457863657074696F6E0044697669646542795A65726F457863657074696F6E00466F726D6174457863657074696F6E00417267756D656E74457863657074696F6E0053797374656D2E446174612E436F6D6D6F6E007061747465726E0043756C74757265496E666F004E756D626572466F726D6174496E666F00506F70004578700053797374656D2E4C696E710047657448746D6C537461747573436F6E6E656374696F6E42617200436C65617200436861720049446174615265616465720053716C4461746152656164657200457865637574655265616465720049466F726D617450726F766964657200537472696E674275696C646572004E756D6265724D616B65720046756E6374696F6E4D61726B6572004F70657261746F724D61726B6572004D61746848656C7065720048746D6C537461747573436F6E6E656374696F6E42617248656C706572005465787448656C7065720049735570706572004D617468506172736572004462506172616D657465720053716C506172616D657465720049734C6574746572004D6963726F736F66742E53716C5365727665722E53657276657200546F4C6F77657200456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C72006765745F4E756D626572446563696D616C536570617261746F7200646563696D616C536570617261746F720049456E756D657261746F7200476574456E756D657261746F72002E63746F72002E6363746F72004162730053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730053797374656D2E446174612E53716C547970657300697352616469616E730053797374656D2E546578742E526567756C617245787072657373696F6E730053797374656D2E436F6C6C656374696F6E7300737570706F7274656446756E6374696F6E730052656765784F7074696F6E7300436F7300706F73006765745F43686172730053716C4368617273006765745F506172616D657465727300737570706F727465644F70657261746F727300737570706F72746564436F6E7374616E7473004E756D6265724F66417267756D656E747300556E506C757300556E4D696E7573006765745F526F777300436F6E636174006765745F4E756D626572466F726D6174004F626A6563740053656C656374006F705F496D706C69636974004973446967697400436F6E766572744D6561737572656D656E74556E69740053797374656D2E446174612E53716C436C69656E74007265706C6163656D656E74004D61727368616C427956616C7565436F6D706F6E656E74004C656674506172656E74005269676874506172656E74006765745F43757272656E74006765745F436F756E74005472696D537461727400436F6E766572740053717274004361737400696E707574004D6F76654E6578740053797374656D2E5465787400506F770044617461526F770064617461526F770047657448746D6C537461747573436F6E6E656374696F6E4261725F46696C6C526F77004E6577526F7700726F770052656765780047726F75704279006765745F4B657900436F6E7461696E734B6579004D756C7469706C79006F705F457175616C697479006F705F496E657175616C697479004765745072696F726974790049734E756C6C4F72456D70747900000000032B00000524002B0000032D00010524002D0001032A00000524002A0000032F00000524002F0000035E00000524005E00000328000005240028000003290000052400290000097300710072007400000B4000730071007200740000033F000007730069006E0000094000730069006E00000763006F0073000009400063006F007300000574006700000740007400670000076300740067000009400063007400670000057300680000074000730068000005630068000007400063006800000574006800000740007400680000076C006F006700000940006C006F00670000076500780070000009400065007800700000076100620073000009400061006200730000057000690000032300000365000080A74500720072006F0072003A002000630061006E00270074002000720065006100640020006300680061007200200064006500630069006D0061006C00200073006500700061007200610074006F0072002000660072006F006D002000730079007300740065006D002C00200063006800650063006B00200079006F0075007200200072006500670069006F006E0061006C002000730065007400740069006E00670073002E000137450078007000720065007300730069006F006E0020006900730020006E0075006C006C0020006F007200200065006D0070007400790000634E0075006D0062006500720020006F00660020006C00650066007400200061006E006400200072006900670068007400200070006100720065006E0074006800650073006900730020006900730020006E006F007400200065007100750061006C0000032400006F46006F0072006D0061007400200065007800630065007000740069006F006E002C002000740068006500720065002000690073002000660075006E006300740069006F006E00200077006900740068006F0075007400200070006100720065006E007400680065007300690073000009240075006E002B000009240075006E002D00011B55006E006B006E006F0077006E00200074006F006B0065006E00003755006E006B006E006F0077006E00200074006F006B0065006E00200069006E002000650078007000720065007300730069006F006E0000034000000740006C006E00002155006E006B006E006F0077006E0020006F00700065007200610074006F007200001D45007800630065007300730020006F0070006500720061006E006400002F5300650063006F006E006400200061007200670075006D0065006E00740020006900730020007A00650072006F00002F63006F006E007400650078007400200063006F006E006E0065006300740069006F006E003D0074007200750065000085BF530045004C0045004300540020005B00490064005D002C0020005B007B0030007D00490064005D0020005B0045006E007400690074007900490064005D002C0020005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D0020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000460052004F004D0020000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020002000200028000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000530045004C004500430054000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B00490064005D002C000D000A0020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200052004F0057005F004E0055004D004200450052002800290020004F00560045005200280050004100520054004900540049004F004E0020004200590020005B00530043004C0031005D002E005B007B0030007D00490064005D0020004F00520044004500520020004200590020005B00530043004C0031005D002E005B0043006F006E006E0065006300740069006F006E00540069006D0065005D0020004400450053004300290020005B004E0075006D005D002C002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D0020005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D002C0020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B007B0030007D00490064005D0020005B007B0030007D00490064005D00200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000460052004F004D0020005B0042007500730069006E006500730073005D002E005B007B0030007D0053007400610074007500730043006F006E006E0065006300740069006F006E004C006F0067005D0020005B00530043004C0031005D0020005700490054004800200028004E004F004C004F0043004B00290020002000200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000290020005B00530043004C0032005D0020000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020005700480045005200450020005B00530043004C0032005D002E005B004E0075006D005D0020004200450054005700450045004E0020003100200041004E004400200032003000200041004E004400200028005B00530043004C0032005D002E005B007B0030007D00490064005D0020003D002000400065006E0074006900740079004900640020004F0052002000400065006E0074006900740079004900640020004900530020004E0055004C004C0029000013400065006E007400690074007900490064000027280028007B0030007D00290020002A0020007B0031007D00290020002F0020007B0032007D00000378000081293C006100200068007200650066003D0027006A006100760061007300630072006900700074003A003B002700200064006100740061002D0063006F00720065002D0065006E0074006900740079002D00690064003D0027007B0030007D002700200064006100740061002D0063006F00720065002D0065006E0074006900740079002D0074007900700065002D006E0061006D0065003D0027007B0031007D002700200064006100740061002D0063006F00720065002D0065006E0074006900740079002D00700072006F00700065007200740079002D006E0061006D0065003D0027007B0032007D002700200064006100740061002D0063006F00720065002D0063006F006D006D0061006E0064002D007B0033007D003E007B0034007D003C002F0061003E0001537B0030007D003C0074006400200064006100740061002D00690064003D0027007B0031007D002700200064006100740061002D007300690064003D0027007B0032007D0027003E003C002F00740064003E00010549006400002553007400610074007500730043006F006E006E0065006300740069006F006E0049006400001F7B0030007D003C00740072003E007B0031007D003C002F00740072003E000080EB3C007400610062006C006500200064006100740061002D0063006F00720065002D0065006E00740069007400790054007900700065004E0061006D0065003D0027007B0032007D002700200064006100740061002D0063006F00720065002D0065006E007400690074007900490064003D0027007B0030007D002700200063006C006100730073003D00270073007400610074007500730043006F006E006E0065006300740069006F006E0042006100720027003E003C00740062006F00640079003E007B0031007D003C002F00740062006F00640079003E003C002F007400610062006C0065003E00011145006E0074006900740079004900640000002EDA966CDD5C954A8829754417CD236A000420010108032000010520010111110507020D121D06151219020E0E07200201130013010320000E0500020E0E0E050000128091052000128095040001030E062002010E12310307010D0707041235080803040001020E042001010E042001030804000102030400010303052001123503032000080B0704081235151239010E0E05151239010E042000130005200112350E0807051235020E080D052001021300050002020E0E0620011301130004200012350400010D0E0307010E0520010113000307010909070308151239010D0E05151239010D0507021235080807060D0D090D0D0D0520020E08080400010D0D0615123D020D0D052002011C180500020D0D0D04070112200E07061224125512591259125D12510500020E0E1C062002010E12550520001280AD042001011C0820011280B11280B1042000125D062001011280B90520001280C10B100101151271011E001251040A01126D0715123D02126D1C1D10020215127101151269021E011E00151271011E0015123D021E001E01050A02126D1C0D15123D02151269021C126D122017100202151271011E01151271011E0015123D021E001E010B0A02151269021C126D12200607040E0E0E0E032000020520020E0E0E0A00050E1280CD0E1C1C1C042001010D0600020E0E1D1C030611450900040E0E0E0E1180D50420001D030520010E1D03040702090817070912280E0E080815127101126D0E15127501126D126D02060E0A10010108151271011E0007151269021C126D090002151271010808080715123D0208126D050A0208126D15100102151271011E00151271011E00151271011E000615127101126D0820001512750113000615127501126D0420011C0E0700040E0E1C1C1C0600030E0E1C1C05000111410805000111450E042000126D052002010E1C08B77A5C561934E0890223000224000240000424002B0008240075006E002B000424002D0008240075006E002D000424002A000424002F000424005E00042400280004240029000A40007300710072007400084000730069006E0008400063006F007300064000740067000840006300740067000640007300680006400063006800064000740068000840006C006F0067000640006C006E0008400065007800700008400061006200730004010000000414000000040A00000085BE530045004C0045004300540020005B00490064005D002C0020005B007B0030007D00490064005D0020005B0045006E007400690074007900490064005D002C0020005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D0020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000460052004F004D0020000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020002000200028000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000530045004C004500430054000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B00490064005D002C000D000A0020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200052004F0057005F004E0055004D004200450052002800290020004F00560045005200280050004100520054004900540049004F004E0020004200590020005B00530043004C0031005D002E005B007B0030007D00490064005D0020004F00520044004500520020004200590020005B00530043004C0031005D002E005B0043006F006E006E0065006300740069006F006E00540069006D0065005D0020004400450053004300290020005B004E0075006D005D002C002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D0020005B0053007400610074007500730043006F006E006E0065006300740069006F006E00490064005D002C0020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020005B00530043004C0031005D002E005B007B0030007D00490064005D0020005B007B0030007D00490064005D00200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000460052004F004D0020005B0042007500730069006E006500730073005D002E005B007B0030007D0053007400610074007500730043006F006E006E0065006300740069006F006E004C006F0067005D0020005B00530043004C0031005D0020005700490054004800200028004E004F004C004F0043004B00290020002000200020002000200020002000200020002000200020000D000A002000200020002000200020002000200020002000200020002000200020002000200020002000200020002000290020005B00530043004C0032005D0020000D000A00200020002000200020002000200020002000200020002000200020002000200020002000200020005700480045005200450020005B00530043004C0032005D002E005B004E0075006D005D0020004200450054005700450045004E0020003100200041004E004400200032003000200041004E004400200028005B00530043004C0032005D002E005B007B0030007D00490064005D0020003D002000400065006E0074006900740079004900640020004F0052002000400065006E0074006900740079004900640020004900530020004E0055004C004C00290001010706151219020E0E0206030206020206080306114103061265030612240306122C080615123D02126D1C04200101030520020D0E020420010E0E0620020E0E10080C200312350E1235151239010E052002020E0E042001020E042001080E0420010D0E0D2002151239010D151239010D0E0A20020D15123D020D0D0D0A0003011C1011411011450800021251114111450C0004117D117D117D117D11450E00051145114511451141114511450A0003114511451145114509000211451145128085040001090E042000114105200101114104200011450520010111450B20011220151269021C126D052001126D08030000010520011C126D042800114104280011450801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F77730108010002000000000080FF010003005455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A4461746141636365737301000000540E1146696C6C526F774D6574686F644E616D652247657448746D6C537461747573436F6E6E656374696F6E4261725F46696C6C526F77540E0F5461626C65446566696E6974696F6E26456E74697479496420494E542C2048746D6C5461626C65204E56415243484152283138303029815A010005005455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730000000054020F497344657465726D696E69737469630154020949735072656369736501540E044E616D650C52656745785265706C61636554557F4D6963726F736F66742E53716C5365727665722E5365727665722E53797374656D446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038391053797374656D44617461416363657373000000008155010005005455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730000000054020F497344657465726D696E69737469630154020949735072656369736501540E044E616D65075472696D456E6454557F4D6963726F736F66742E53716C5365727665722E5365727665722E53797374656D446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038391053797374656D44617461416363657373000000008157010005005455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730000000054020F497344657465726D696E69737469630154020949735072656369736501540E044E616D65095472696D537461727454557F4D6963726F736F66742E53716C5365727665722E5365727665722E53797374656D446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038391053797374656D44617461416363657373000000008152010005005455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730000000054020F497344657465726D696E69737469630154020949735072656369736501540E044E616D65045472696D54557F4D6963726F736F66742E53716C5365727665722E5365727665722E53797374656D446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038391053797374656D44617461416363657373000000002001000200540809507265636973696F6E260000005408055363616C65070000002001000200540809507265636973696F6E140000005408055363616C65070000002001000200540809507265636973696F6E130000005408055363616C65070000000000000000000026FA095E00000000020000001C010000486F00004851000052534453916AC838C99E4B4BA1F32F08EBEEEA6401000000433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C6F626A5C52656C656173655C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E7064620000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008C7000000000000000000000A670000000200000000000000000000000000000000000000000000098700000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF250020001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058800000CC0200000000000000000000CC0234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B0042C020000010053007400720069006E006700460069006C00650049006E0066006F0000000802000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E00300000007A002D00010049006E007400650072006E0061006C004E0061006D006500000045006E0065007200670079005400650063006800410075006400690074002E0050006F007700650072004100630063006F0075006E00740069006E0067002E00440061007400610062006100730065002E0064006C006C00000000002800020001004C006500670061006C0043006F00700079007200690067006800740000002000000082002D0001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000045006E0065007200670079005400650063006800410075006400690074002E0050006F007700650072004100630063006F0075006E00740069006E0067002E00440061007400610062006100730065002E0064006C006C0000000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000C000000B83000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]></Value>
						</Property>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlAssemblyFile" Name="[EnergyTechAudit.PowerAccounting.Database].[EnergyTechAudit.PowerAccounting.Database.pdb]">
			<Property Name="Source">
				<Value><![CDATA[0x4D6963726F736F667420432F432B2B204D534620372E30300D0A1A44530000000002000002000000430000005C0100000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF3800000000000000FEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0BCA3101380000000010000000100000000000001C00FFFF04000000FFFF03000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA3101380000000010000000100000000000001D00FFFF04000000FFFF0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000942E310126FA095E01000000916AC838C99E4B4BA1F32F08EBEEEA6400000000000000000100000001000000000000000000000000000000DC51330100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC1620000000000000007DB2D4E341C14211042CCC890E77CE6F375BCD17D518B968AA246EBB95F262D2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC162000000000000000B2B5D97B8795072B796367E1F8C33D95813C4F375F2786F6362194B4931D6656000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC162000000000000000F693B685E3F85DF541BF9B6C7241BB7152B6E94E6208284BF54B2548EB7E64AF000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC1620000000000000008B9C9FD3D59D0FE9CA3F110AC445482B2F58AE6F5B268BCE8010150CFB4D0A51000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC1620000000000000003392F3D07A0DEBB80A1F59C07309CF26BC92F601AD17AB9F2E70F3E6E0EB3911000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD0FD02988B8111342878B770E8597AC162000000000000000820D57E19110B281BB9A191D9958391EC159094982937744C3FEB26D48E9929B0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000351700000000000035170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FEEFFEEF010000008A05000000433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E436F6D6D6F6E5C4D6174685C4D6174685061727365722E63730000633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E636F6D6D6F6E5C6D6174685C6D6174687061727365722E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E637300633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C68746D6C737461747573636F6E6E656374696F6E62617268656C7065722E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C4D61746848656C7065722E637300633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C6D61746868656C7065722E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C48746D6C4772696448797065724C696E6B2E637300633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C68746D6C6772696468797065726C696E6B2E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C5465787448656C7065722E637300633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C7465787468656C7065722E637300433A5C55736572735C4D41585C417070446174615C4C6F63616C5C54656D705C2E4E45544672616D65776F726B2C56657273696F6E3D76342E372E53716C436C72417474726962757465732E637300633A5C75736572735C6D61785C617070646174615C6C6F63616C5C74656D705C2E6E65746672616D65776F726B2C76657273696F6E3D76342E372E73716C636C72617474726962757465732E6373001A0000006701000000000000F60100007202000000000000000000006D00000001000000EE020000710300000000000000000000000000000000000000000000000000000000000000000000EC0400003B0500006C00000000000000F40300007004000000000000D80000000D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE230015C01000073A9D03914BFD501010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000A00000001000000C70200000000000067010000280000001BE23001AC45628D68000000D80000006C0000006701000065000000000000000000000071030000280000001BE23001DEECC18F68000000EE0200006C000000710300006500000000000000000000003B050000280000001BE23001154EAB0268000000EC0400006C0000003B05000065000000000000000000000072020000280000001BE23001CE3A9ED568000000F60100006C0000007202000065000000000000000000000070040000280000001BE2300186173C1E68000000F40300006C000000700400006500000000000000000000006D000000280000001BE230018D805B8268000000010000006C0000006D0000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000003A002A1100000000D40000000000000044000000000000000000000015000006D514000001000000004765744772696448797065726C696E6B00000016000311040000009400000044000000D5140000010000001A0024115553797374656D2E446174612E53716C54797065730000001E002411554D6963726F736F66742E53716C5365727665722E53657276657200020006003A000404C93FEAC6B359D649BC250902BBABB460000000004D004400320000000401000004000000180000000600000000000000000000000200000002000600F200000024000000D51400000100010044000000000000000100000018000000000000000D0000880D001400F400000008000000EE020000000000000800000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000004A002A110000000080000000000000000C0000000000000000000000280000062917000001000000003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F375F30002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C0000002300000602000600F20000002400000029170000010001000C000000000000000100000018000000000000005300008021003000F400000008000000D80000000000000008000000380000006C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000002E002A11000000001401000000000000CD0100000000000000000000010000060000000001000000002E63746F7200001600031104000000DC000000CD01000000000000010000000A0024115553797374656D001E0024115553797374656D2E436F6C6C656374696F6E732E47656E65726963001A0024115553797374656D2E476C6F62616C697A6174696F6E000000120024115553797374656D2E54657874000000001600031134000000D80000000D000000BF01000001000000160020110100000001000011000000000000000065780000020006000200060032000404C93FEAC6B359D649BC250902BBABB460000000004D004400320000000401000004000000100000000300000000000400020006002E002A11000000007801000000000000AB010000000000000000000002000006CD01000001000000002E63746F7200002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006002E002A1100000000DC0100000000000025000000000000000000000003000006780300000100000000506172736500002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060036002A11000000001803000000000000840000000000000000000000040000069D0300000100000000466F726D6174537472696E6700000016000311E0010000E4020000840000009D030000010000002200201100000000030000110000000000000000666F726D6174746564537472696E6700260020110100000003000011000000000000000062616C616E63654F66506172656E7468000000001600031118020000E002000054000000B803000001000000160020110200000003000011000000000000000069000000160003117C020000DC02000043000000BC030000010000001600201103000000030000110000000000000000636800000200060002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060036002A1100000000300400000000000072000000000000000000000005000006210400000100000000436F6E76657274546F52504E000000160003111C030000FC0300007200000021040000010000001600201100000000040000110000000000000000706F730022002011010000000400001100000000000000006F7574707574537472696E67000000001A00201102000000040000110000000000000000737461636B0000001600031154030000F80300001400000031040000010000001A00201103000000040000110000000000000000746F6B656E00000002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060046002A11000000001C05000000000000410300000000000000000000060000069304000001000000004C65786963616C416E616C79736973496E6669784E6F746174696F6E0000001600031134040000E80400004103000093040000010000001A00201100000000050000110000000000000000746F6B656E000000160003117C040000E404000072000000BB040000010000001A002011010000000500001100000000000000006973556E6172790002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060046002A1100000000EC05000000000000E4000000000000000000000007000006D4070000010000000053796E746178416E616C79736973496E6669784E6F746174696F6E000000001600031120050000B8050000E4000000D4070000010000001600031168050000B40500004D0000003B080000010000001A00201100000000060000110000000000000000656C656D0000000002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060032002A110000000054060000000000002E000000000000000000000008000006B808000001000000005072696F726974790000002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006003A002A1100000000C4060000000000000C000000000000000000000009000006E60800000100000000497352696768744173736F63696174656400002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060036002A11000000003007000000000000D802000000000000000000000A000006F208000001000000004765745072696F72697479000000002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000010000060200060032002A110000000020080000000000004100000000000000000000000B000006CA0B0000010000000043616C63756C61746500001600031134070000EC07000041000000CA0B0000010000001600201100000000080000110000000000000000706F73001A00201101000000080000110000000000000000737461636B0000001600031168070000E807000013000000D40B0000010000001A00201102000000080000110000000000000000746F6B656E00000002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006003A002A1100000000C8080000000000008400000000000000000000000C0000060B0C000001000000004C65786963616C416E616C7973697352504E00160003112408000094080000840000000B0C0000010000001A00201100000000090000110000000000000000746F6B656E000000020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006003A002A11000000000C0A000000000000B203000000000000000000000D0000068F0C0000010000000053796E746178416E616C7973697352504E000016000311CC080000D8090000B20300008F0C000001000000160003110809000068090000AB020000C80C00000100000016002011000000000A00001100000000000000006172670016002011010000000A000011000000000000000072737400020006001600031108090000D4090000C7000000780F0000010000001A002011030000000A000011000000000000000061726732000000001A002011040000000A0000110000000000000000617267310000000016002011050000000A00001100000000000000007273740002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006003A002A11000000007C0A0000000000002700000000000000000000000E0000064110000001000000004170706C795472696746756E6374696F6E00002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000001000006020006003A002A1100000000EC0A000000000000A002000000000000000000000F0000066810000001000000004E756D6265724F66417267756D656E747300002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C0000000100000602000600F2000000840000000000000001000100CD010000000000000900000078000000000000006C00008A7B0000007B00008F460100008C0000859D010000A1000080A3010000A5000081BD010000A7000080BF010000A8000080C0010000AA000081CC010000AD00008009000F0009000F0009000F0009001C00110060000D000E000D0027001100700009000A00F200000060000000CD01000001000100AB010000000000000600000054000000000000006C00008A7B0000007B00008F460100008C0000859D010000B3000080A3010000B5000080AA010000B600008009000F0009000F0009000F00090031000D00360009000A00F20000008400000078030000010001002500000000000000090000007800000000000000C100008007000000C50000801D000000C90000801E000000CD0000801F000000D100008020000000D500008021000000D900008022000000DD00008023000000E00000800D00280011004A0011001900110019001100190011001900110019001100190009000A00F2000000200100009D030000010001008400000000000000160000001401000000000000E900008008000000EB00008013000000EE00008019000000EF0000801B000000F30000801D000000EEEFFE801F000000F500008027000000F70000802C000000F900008030000000FA00008032000000FB00008037000000FD0000803B0000000001008043000000040100804B0000000601008058000000070100805A0000000A01008062000000F300008066000000F30000806F0000000E01008072000000100100807D000000130100800D003200110050000D0041000D00260012001B00000000001100290011001F001500280011001200160024001500280011002B0016002B0015003E001100120015003000340037001D0032000D002700110060000D002F00F2000000C0000000210400000100010072000000000000000E000000B40000000000000020010080020000002101008008000000220100800E000000EEEFFE8010000000270100801A0000002901008024000000250100802D000000EEEFFE802F00000030010080480000003201008055000000330100805700000036010081620000002D0100806B0000003B0100800D0019000D003E000D0037000000000011005200110058000D002C000000000011003A00150036001100120015005B000D0024000D002C00F2000000040200009304000001000100410300000000000029000000F801000000000000470100800600000048010080150000004B010080280000004E0100803E0000004F01008044000000510100804B000000EEEFFE806A00000054010080790000005601008088000000580100809A0000005B010082D1000000EEEFFE80D300000064010080E20000006101008102010000670100801501000069010080270100006B0100803A0100006D0100804C010000710100805701000075010080770100007A01008085010000EEEFFE80870100007F010080960100007C010081B601000081010080B801000086010080BF0100008A010081D90100008E010081EF010000EEEFFE80F1010000940100800002000091010081200200009901008591020000A0010080A7020000A2010080BF020000A3010080D5020000EEEFFE80D7020000A8010080ED020000A501008106030000AC01008025030000AF01008036030000B30100800D0037000D002B000D004200110047001100170011002A00000000001900380019003A001900450012004A00000000001500330011003A00110046001500410016004B00150041001500420012004D0011002C00000000001900370015003D00110012001500230011003C0015003F00000000001900370015003D00110044001500350015004A0019003900000000001900390015003D0015004D001100370011004C00F200000008010000D407000001000100E40000000000000014000000FC00000000000000C101008014000000C30100801C000000C401008021000000C501008035000000C80100803C000000C901008041000000CA0100804E000000CD01008055000000CE0100805A000000CF01008067000000EEEFFE8069000000D701008071000000D501008085000000DB010081A7000000DE010080B4000000E0010080B6000000E8010080C3000000E5010081DB000000EB010080E2000000EE0100800D002C0011002C000D000E0012003400110023000D000E0012002A00110023000D000E0012002B000000000015002F0011003B0011003A00150036000D000E001500360011003600110023000D002100F200000024000000B8080000010001002E00000000000000010000001800000000000000F60100820D003800F200000024000000E6080000010001000C00000000000000010000001800000000000000000200800D002400F200000078000000F208000001000100D802000000000000080000006C00000000000000EEEFFE80C00200000B020080C20200000E020080C402000011020080C602000014020080C802000017020080CA02000023020080CD020000250200800000000015001E0015001E0015001E0015001E0015001E0015001F0015004500F200000084000000CA0B000001000100410000000000000009000000780000000000000034020080020000003502008008000000EEEFFE800A0000003A020080140000003C0200801D0000003802008026000000400200802F000000420200803A000000450200800D0019000D002D000000000011004800110039000D002C000D00210011003F000D002000F2000000600000000B0C00000100010084000000000000000600000054000000000000005002008006000000540200801C000000EEEFFE801E0000005A02008034000000560200827D0000005D0200800D0037000D002D0000000000110031000D003C000D002500F2000000AC0200008F0C000001000100B20300000000000037000000A00200000000000069020080140000006B020080270000006C0200802C0000006E020080390000007002008040000000EEEFFE801A020000760200801C020000770200802102000079020080240200007A020080290200007C020080300200007D020080350200007F02008049020000800200804E020000820200806202000083020080640200008502008078020000860200807A0200008802008098020000890200809A0200008B020080A10200008C020080A30200008E020081AC02000090020080AE02000092020080B502000093020080B702000095020080BE02000096020080C002000098020080C702000099020080C90200009B020080D00200009C020080D20200009E020080DD020000A1020080E4020000A2020080E9020000A7020080F0020000A8020080F8020000EEEFFE804E030000AF02008054030000B002008056030000B20200805C030000B30200805E030000B502008064030000B602008066030000B802008072030000BA0200807D030000BC02008083030000BD02008085030000BF0200808F030000C002008091030000C20200809B030000C30200809D030000C5020080A8030000C8020080B0030000CB0200800D002C0011003E000D000E001200340011002A00000000001900230019001F001900240019001F0019002E0019001F001900400019001F001900400019001F001900400019001F001900420019001F0019002E0019001F001900320019001F0019002E0019001F0019002D0019001F0019002D0019001F0019002D0019001F0019004900110021000D000E0011002B0011002B000000000019002B0019001F0019002B0019001F001900290019001F00190027001D0058001900290019001F001900340019001F001900340019001F0019004900110021000D001A00F20000003C00000041100000010001002700000000000000030000003000000000000000D602008008000000D80200801F000000DB0200800D001C00110027000D001E00F2000000480000006810000001000100A002000000000000040000003C00000000000000EEEFFE8091020000F202008093020000F902008095020000FB0200800000000015001E0015001E0015004500F4000000080000000100000000000000780000008400000098000000B0000000C4000000DC000000F000000008010000240100003C01000058010000700100009C010000B4010000E0010000F8010000100200002802000048020000600200007C02000094020000AC020000C4020000E8020000000300002003000038030000580300007003000090030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000004A002A1100000000640200000000000016010000000000000000000023000006CA15000001000000003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F3100000016000311040000002402000016010000CA15000001000000160024115553797374656D2E436F6C6C656374696F6E73001E0024115553797374656D2E436F6C6C656374696F6E732E47656E6572696300120024115553797374656D2E44617461000000001A0024115553797374656D2E446174612E53716C436C69656E7400001A0024115553797374656D2E446174612E53716C5479706573000000120024115553797374656D2E4C696E71000000001E002411554D6963726F736F66742E53716C5365727665722E5365727665720022002011000000000F00001100000000000000004353243C3E385F5F6C6F63616C7330001A002011010000000F000011000000000000000063656C6C730000001A002011020000000F0000110000000000000000726F77730000000016002011030000000F0000110000000000000000690000001A002011040000000F0000110000000000000000636F756E740000001E002011050000000F000011000000000000000067726F7570526F77730000001A002011060000000F000011000000000000000068746D6C000000001600031150000000200200004A00000038160000010000001A002011080000000F000011000000000000000064617461526F770002000600020006003A000404C93FEAC6B359D649BC250902BBABB460000000004D004400320000000401000004000000180000000600000000000000000000000700000002000600F20000002C010000CA150000010001001601000000000000170000002001000000000000EEEFFE800D00000056000080130000005700008019000000590000801B0000005B000080230000005D00008034000000610000803A000000640000895E0000006E000080600000007100008063000000740000806C000000EEEFFE806E0000007400008077000000770000829B0000007B000080A10000007D000080AE0000007E000080B400000080000080B800000074000080C3000000EEEFFE80CE000000EEEFFE80CF00000083000087F20000008C0000840000000015002E0015002D0015002600150038001500390015002B001900250015001600190034002D003600000000001E00290019003C00190036001D0052001D00320019001D002A002C00000000000000000015001F0015001700F400000008000000D80000000000000008000000A8030000D8030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000004A002A1100000000800000000000000049000000000000000000000025000006E016000001000000003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F320000002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C0000002300000602000600F200000054000000E0160000010001004900000000000000050000004800000000000000680000801000000069000080210000006A000080370000006B000080480000006C0000802500440025004400250043002500610025003600F400000008000000D80000000000000008000000F003000020040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000F400000008000000EC040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000036002A11000000003C000000000000000700000000000000000000001D000006AC15000001000000006765745F456E7469747949640000000200060036002A110000000078000000000000000800000000000000000000001E000006B315000001000000007365745F456E7469747949640000000200060036002A1100000000B4000000000000000700000000000000000000001F000006BB15000001000000006765745F48746D6C5461626C6500000200060036002A1100000000F00000000000000008000000000000000000000020000006C215000001000000007365745F48746D6C5461626C65000002000600F200000024000000AC1500000100010007000000000000000100000018000000000000002000008028002C00F200000024000000B3150000010001000800000000000000010000001800000000000000200000802D003100F200000024000000BB150000010001000700000000000000010000001800000000000000210000802A002E00F200000024000000C2150000010001000800000000000000010000001800000000000000210000802F003300F400000008000000D8000000000000002000000038040000540400006C04000088040000A0040000BC040000D4040000F004000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000004A002A11000000007C010000000000002000000000000000000000001000000608130000010000000047657448746D6C537461747573436F6E6E656374696F6E4261725F46696C6C526F770016000311040000003C010000200000000813000001000000160024115553797374656D2E436F6C6C656374696F6E73001E0024115553797374656D2E436F6C6C656374696F6E732E47656E6572696300120024115553797374656D2E44617461000000001A0024115553797374656D2E446174612E53716C436C69656E7400001A0024115553797374656D2E446174612E53716C5479706573000000120024115553797374656D2E4C696E71000000001E002411554D6963726F736F66742E53716C5365727665722E536572766572001A002011000000000B0000110000000000000000726573756C740000020006003A000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000400000018000000060000000000000000000000070000000200060042002A1100000000E0020000000000000101000000000000000000001100000628130000010000000047657448746D6C537461747573436F6E6E656374696F6E426172001600031180010000AC02000001010000281300000100000022002011000000000C00001100000000000000004353243C3E385F5F6C6F63616C73300016000311C4010000A80200009B00000035130000010000001E002011010000000C0000110000000000000000636F6E6E656374696F6E00001600031100020000A40200008600000040130000010000001A002011020000000C0000110000000000000000636F6D6D616E64001600031138020000A00200002E0000008E130000010000001A002011040000000C00001100000000000000007265616465720000020006000200060002000600020006002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C0000001000000602000600F20000004800000008130000010001002000000000000000040000003C0000000000000026000080070000002800008013000000290000801F0000002A0000800D0039000D0028000D002A0009000A00F20000002001000028130000010001000101000000000000160000001401000000000000EEEFFE800D00000038000080180000003A0000801E0000003C000080200000003E00008035000000400000803E0000004200008466000000480000806E0000004A000080790000004B000080860000004C00008088000000EEEFFE8093000000EEEFFE8094000000EEEFFE809D000000EEEFFE809E000000EEEFFE80A7000000EEEFFE80A8000000EEEFFE80A9000000520000C0F200000096000080FD00000097000080FE000000980000800000000014005B001100230011002B0011004A0011004400150018001C004A001900310019002C00150016000000000000000000000000000000000000000000000000000000000011001400110021000D000E0009000A00F400000008000000D80000000000000010000000080500003C0500005405000080050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040000003E002A11000000007801000000000000AC000000000000000000000013000006291400000100000000436F6E766572744D6561737572656D656E74556E697400160003110400000038010000AC00000029140000010000001A0024115553797374656D2E446174612E53716C54797065730000001A0024115553797374656D2E476C6F62616C697A6174696F6E0000001E002411554D6963726F736F66742E53716C5365727665722E536572766572001600031144000000340100007D000000561400000100000016002011000000000D00001100000000000000006578700016002011010000000D000011000000000000000076616C001A002011020000000D000011000000000000000064696D31000000001A002011030000000D000011000000000000000064696D320000000002000600020006003A000404C93FEAC6B359D649BC250902BBABB460000000004D004400320000000401000004000000180000000600000000000000000000000300000002000600F2000000900000002914000001000100AC000000000000000A0000008400000000000000140000802D000000160000803B0000001700008049000000180000805700000019000080650000001B0000837F000000200000849D00000026000080A400000027000080AA0000002B0000800D0061001100340011002F0011003500110035001100170011001700110037001100360011001E00F400000008000000F6010000000000000800000098050000C005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000036002A1100000000F4000000000000003900000000000000000000001700000619150000010000000052656745785265706C6163650000001600031104000000B40000003900000019150000010000001A0024115553797374656D2E446174612E53716C5479706573000000220024115553797374656D2E546578742E526567756C617245787072657373696F6E73001E002411554D6963726F736F66742E53716C5365727665722E53657276657200020006003A000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000400000018000000060000000000000000000000030000000200060032002A11000000005C010000000000001E0000000000000000000000180000065215000001000000005472696D456E64000000002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C000000170000060200060032002A1100000000C4010000000000001E0000000000000000000000190000067015000001000000005472696D537461727400002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C00000017000006020006002E002A110000000028020000000000001E00000000000000000000001A0000068E15000001000000005472696D0000002E000404C93FEAC6B359D649BC250902BBABB460000000004D0044003200000004010000040100000C0000001700000602000600F20000003C0000001915000001000100390000000000000003000000300000000000000014000080120000001600008018000000190000890D003000110027000D001300F20000002400000052150000010001001E00000000000000010000001800000000000000300000800D004B00F20000002400000070150000010001001E000000000000000100000018000000000000003E0000800D004D00F2000000240000008E150000010001001E000000000000000100000018000000000000004C0000800D004800F400000008000000F40300000000000020000000D8050000F40500000C060000240600003C060000540600006C06000080060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF1E0010000F0020000C500000001000000AD02000001000000A104000001000000D50400000100000071030000010000002902000001000000F100000001000000E902000001000000C105000001000000D903000001000000550500000100000009010000010000003D050000010000006D06000001000000F1040000010000009905000001000000B100000001000000850000000100000099000000010000007D020000010000008105000001000000810600000100000001030000010000009D010000010000009103000001000000C502000001000000BD040000010000000100000001000000E101000001000000F5050000010000003903000001000000B50100000100000025010000010000002103000001000000550400000100000059010000010000005903000001000000210000000100000089040000010000002104000001000000A90300000100000011020000010000002506000001000000D9050000010000006D00000001000000F901000001000000F10300000100000049020000010000005506000001000000DD000000010000000D0600000100000071010000010000003D0600000100000009050000010000006D04000001000000390400000100000061020000010000003D0100000100000039000000010000009502000001000000010400001000012000000000000000000000000000000000000000000020000001040000020000000400000000000000000010000000000000000000000000080000000002000040040000000010000000020000000000000000000000000000010400000208000000000000000000000000000000000000000001000000000001040000020800000000000000000008000000000000000000000000000000000100000002000000000000000000000000400000000000000000000100000000010400000008000000000000000000000000000000000000000000000000000001040000020800000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000002000000810000000800000000000000000000000000004000000000100000000200000001000000000000000000000000000000000000000000000000000000200000000000408000000001000000000000000000000000000000000100000000000000000800800000000000002000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000002000000000000000000C0000001800000024000000300000003C0000004800000054000000600000006C0000007800000084000000900000009C000000A8000000B4000000C0000000D8000000E4000000F0000000FC0000000801000014010000200100002C0100003801000044010000500100005C0100006801000074010000800100008C01000098010000A4010000B0010000BC010000C8010000D4010000E0010000EC010000F801000004020000100200001C0200002802000034020000400200004C0200005802000064020000700200007C0200008802000094020000A0020000AC020000B8020000C40200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001E002511000000000400000004004765744772696448797065726C696E6B000016002911000000000400000004003036303030303135000032002511000000000400000009003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F375F300000000016002911000000000400000009003036303030303238000012002511000000000400000001002E63746F720016002911000000000400000001003036303030303031000012002511000000001801000001002E63746F720016002911000000001801000001003036303030303032000012002511000000007C010000010050617273650016002911000000007C0100000100303630303030303300001A00251100000000E00100000100466F726D6174537472696E6700001600291100000000E00100000100303630303030303400001A002511000000001C0300000100436F6E76657274546F52504E000016002911000000001C0300000100303630303030303500002A002511000000003404000001004C65786963616C416E616C79736973496E6669784E6F746174696F6E00001600291100000000340400000100303630303030303600002A0025110000000020050000010053796E746178416E616C79736973496E6669784E6F746174696F6E000000160029110000000020050000010030363030303030370000160025110000000010000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F005000001005072696F7269747900001600291100000000F00500000100303630303030303800001E00251100000000580600000100497352696768744173736F636961746564001600291100000000580600000100303630303030303900001A00251100000000C806000001004765745072696F726974790000001600291100000000C8060000010030363030303030610000160025110000000034070000010043616C63756C6174650016002911000000003407000001003036303030303062000022002511000000002408000001004C65786963616C416E616C7973697352504E000000001600291100000000240800000100303630303030306300001E00251100000000CC080000010053796E746178416E616C7973697352504E001600291100000000CC0800000100303630303030306400001E00251100000000100A000001004170706C795472696746756E6374696F6E001600291100000000100A00000100303630303030306500001E00251100000000800A000001004E756D6265724F66417267756D656E7473001600291100000000800A00000100303630303030306600002E002511000000000400000007003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F3100001600291100000000040000000700303630303030323300002E002511000000000400000008003C47657448746D6C537461747573436F6E6E656374696F6E4261723E625F5F3200001600291100000000040000000800303630303030323500001A002511000000000400000006006765745F456E74697479496400001600291100000000040000000600303630303030316400001A002511000000004000000006007365745F456E74697479496400001600291100000000400000000600303630303030316500001A002511000000007C00000006006765745F48746D6C5461626C650016002911000000007C0000000600303630303030316600001A00251100000000B800000006007365745F48746D6C5461626C65001600291100000000B8000000060030363030303032300000320025110000000004000000020047657448746D6C537461747573436F6E6E656374696F6E4261725F46696C6C526F77000000001600291100000000040000000200303630303030313000002A0025110000000080010000020047657448746D6C537461747573436F6E6E656374696F6E426172000000001600291100000000800100000200303630303030313100002600251100000000040000000300436F6E766572744D6561737572656D656E74556E6974000000001600291100000000040000000300303630303030313300001A0025110000000004000000050052656745785265706C61636500001600291100000000040000000500303630303030313700001600251100000000F800000005005472696D456E640000001600291100000000F800000005003036303030303138000016002511000000006001000005005472696D5374617274001600291100000000600100000500303630303030313900001200251100000000C801000005005472696D00001600291100000000C8010000050030363030303031610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF770931010100000019000C8E1A00E6641B000200340600004C0300002C00000018030000000000000000000016000000190000000000EEC00000000000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000001100F00A000000000000B00B000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E4D6174685061727365720031393546434634330000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000001600E4020000000000008801000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C537461747573436F6E6E656374696F6E42617248656C7065720039433036384241340000000000FFFF000000000000FFFFFFFF00000000FFFF00000000000000000000000017007C01000000000000A800000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E4D61746848656C7065720034383430344443330000000000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000000F00D8000000000000003C00000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C4772696448797065724C696E6B0033373542363132310000000000FFFF000000000000FFFFFFFF00000000FFFF00000000000000000000000018002C02000000000000D800000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E5465787448656C7065720042304637413239440000000000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000001500F400000000000000C000000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E537461747573436F6E6E656374696F6E4261720045373842414133450000000000FFFF000000000000FFFFFFFF00000000FFFF000000000000000000000000120068020000000000004401000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E3C3E635F5F446973706C6179436C617373375F300038304135453737310000000000000000FFFF000000000000FFFFFFFF00000000FFFF000000000000000000000000130084000000000000006C00000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E3C3E635F5F446973706C6179436C617373375F310039394245443633300000000000000000FFFF000000000000FFFFFFFF00000000FFFF000000000000000000000000100084000000000000003C00000001000000000000000000000000000000456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173652E50726F6772616D6D6162696C6974792E436C722E48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E3C3E630041374439374533360000000000FFFF000000000000FFFFFFFF00000000FFFF0000000000000000000000001400040000000000000010000000010000000000000000000000000000003C44616E676C696E67446F63756D656E74732A32323333343362642D613835392D343161332D393063302D3964666131303166316139353E0037464244413244320000002DBA2EF10100000000000000CD0100000000000000000000000000000000000001000000CD010000AB0100000000000000000000000000000000000001000000780300002500000000000000000000000000000000000000010000009D0300008400000000000000000000000000000000000000010000002104000072000000000000000000000000000000000000000100000093040000410300000000000000000000000000000000000001000000D4070000E40000000000000000000000000000000000000001000000B80800002E0000000000000000000000000000000000000001000000E60800000C0000000000000000000000000000000000000001000000F2080000D80200000000000000000000000000000000000001000000CA0B00004100000000000000000000000000000000000000010000000B0C00008400000000000000000000000000000000000000010000008F0C0000B203000000000000000000000000000000000000010000004110000027000000000000000000000000000000000000000100000068100000A00200000000000000000000000000000000000001000000081300002000000000000000010000000000000000000000010000002813000001010000000000000100000000000000000000000100000029140000AC0000000000000002000000000000000000000001000000D514000044000000000000000300000000000000000000000100000019150000390000000000000004000000000000000000000001000000521500001E0000000000000004000000000000000000000001000000701500001E00000000000000040000000000000000000000010000008E1500001E0000000000000004000000000000000000000001000000AC150000070000000000000005000000000000000000000001000000B3150000080000000000000005000000000000000000000001000000BB150000070000000000000005000000000000000000000001000000C2150000080000000000000005000000000000000000000001000000CA150000160100000000000006000000000000000000000001000000E0160000490000000000000007000000000000000000000001000000291700000C00000000000000080000000000000000000000020002000D01000000000100FFFFFFFF00000000351700000802000000000000FFFFFFFF00000000FFFFFFFF0A000A00000001000200030004000500060007000800090001000100010001000100010001000100010001001201000083000000CC0100000000000048020000830000008300000083000000830000007D010000433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C48746D6C4772696448797065724C696E6B2E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C48746D6C537461747573436F6E6E656374696F6E42617248656C7065722E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E436F6D6D6F6E5C4D6174685C4D6174685061727365722E637300433A5C55736572735C4D41585C417070446174615C4C6F63616C5C54656D705C2E4E45544672616D65776F726B2C56657273696F6E3D76342E372E53716C436C72417474726962757465732E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C4D61746848656C7065722E637300433A5C50726F6A656374735C456E657267795465636841756469742E506F7765724163636F756E74696E675C4D61696E5C456E657267795465636841756469742E506F7765724163636F756E74696E672E44617461626173655C50726F6772616D6D6162696C6974795C436C725C5465787448656C7065722E637300FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF0E00FFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000942E310126FA095E01000000916AC838C99E4B4BA1F32F08EBEEEA64280300002F4C696E6B496E666F002F6E616D6573002F7372632F686561646572626C6F636B002F7372632F66696C65732F633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E636F6D6D6F6E5C6D6174685C6D6174687061727365722E6373002F7372632F66696C65732F633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C68746D6C737461747573636F6E6E656374696F6E62617268656C7065722E6373002F7372632F66696C65732F633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C6D61746868656C7065722E6373002F7372632F66696C65732F633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C68746D6C6772696468797065726C696E6B2E6373002F7372632F66696C65732F633A5C70726F6A656374735C656E657267797465636861756469742E706F7765726163636F756E74696E675C6D61696E5C656E657267797465636861756469742E706F7765726163636F756E74696E672E64617461626173655C70726F6772616D6D6162696C6974795C636C725C7465787468656C7065722E6373002F7372632F66696C65732F633A5C75736572735C6D61785C617070646174615C6C6F63616C5C74656D705C2E6E65746672616D65776F726B2C76657273696F6E3D76342E372E73716C636C72617474726962757465732E637300090000000E00000001000000F817000000000000CE0200000D000000320100000A0000000A00000006000000B90100000B0000000000000005000000220000000800000011000000070000009800000009000000470200000C00000000000000DC5133010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001C00000020000000AC03000038000000330D00003800000000000000060600005C0100006800000068000000680000006800000068000000680000002800000020010000CC0000001C170000B8030000FC00000018000000D8010000800400003002000028030000E00400002C00000098060000030000003D0000003E00000006000000360000003700000038000000390000003A0000003B0000003C000000070000000F0000001000000011000000120000001300000008000000090000000A0000000B0000000C0000000D0000000E0000001400000015000000160000001700000018000000190000001A0000001B0000001C0000001D0000001E0000001F000000200000002100000022000000230000002400000025000000260000002700000028000000290000002A0000002B0000002C0000002D0000002E0000002F00000030000000320000003100000033000000340000003500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000]]></Value>
			</Property>
			<Relationship Name="Assembly">
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveDay]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveDay.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="1" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_DAY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveFinal]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveFinal.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="1" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_FINAL]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveFinalInstant]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveFinalInstant.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="1" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_FINALINSTANT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveHour]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveHour.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="5" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_HOUR]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveInstant]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveInstant.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="10" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_INSTANT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlFile" Name="[EnergyTechAudit.PowerAccounting.Database.ArchiveMonth]">
			<Property Name="FileName" Value="$(DefaultDataPath)$(DefaultFilePrefix)_ArchiveMonth.ndf" />
			<Property Name="MaxSizeUnit" Value="0" />
			<Property Name="FileGrowth" Value="1" />
			<Relationship Name="Filegroup">
				<Entry>
					<References Name="[ARCHIVE_MONTH]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCertificate" Name="[EnergyTechAudit.PowerAccounting.Database.Certificate]">
			<Property Name="NewKeySubject" Value="[EnergyTechAudit.PowerAccounting.Database]" />
			<Property Name="NewKeyStartDate" Value="2018-04-12" />
			<Property Name="NewKeyExpireDate" Value="2020-04-12" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Annotation Type="GloballyScoped" />
		</Element>
		<Element Type="SqlSymmetricKey" Name="[EnergyTechAudit.PowerAccounting.Database.SymmetricKey]">
			<Property Name="Algorithm" Value="6" />
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
			<Relationship Name="EncryptionCertificates">
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.Certificate]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[Help]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Help].[Article]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Article].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Article].[ParentId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Article].[Title]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Article].[Html]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Help]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="728" />
		</Element>
		<Element Type="SqlTable" Name="[Help].[Picture]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Picture].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Picture].[Caption]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Help].[Picture].[Image]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Help]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="729" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Help].[PK_Help_Article]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Help].[Article].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Help].[Article]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="728" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Help].[PK_Help_Picture]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Help].[Picture].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Help].[Picture]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="729" />
		</Element>
		<Element Type="SqlSchema" Name="[Programmability]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[CalculateTv7StartingPoint]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	CREATE TABLE #Result (SumParamId INT NOT NULL, DiffParamId INT NOT NULL, Name VARCHAR(32) NOT NULL, Summa DECIMAL(19,7))

	INSERT INTO #Result (SumParamId, DiffParamId, Name)
	VALUES (4049, 4083, 'V1Sum'),
	       (4050, 4084, 'V2Sum'),
		   (4051, 4085, 'V3Sum'),
		   (4052, 4086, 'V4Sum'),
		   (4053, 4087, 'V5Sum'),
		   (4054, 4088, 'V6Sum'),
		   (4055, 4089, 'M1Sum'),
		   (4056, 4090, 'M2Sum'),
		   (4057, 4091, 'M3Sum'),
		   (4058, 4092, 'M4Sum'),
		   (4059, 4093, 'M5Sum'),
		   (4060, 4094, 'M6Sum'),
		   (4061, 4095, 'dM1Sum'),
		   (4062, 4096, 'dM2Sum'),
		   (4063, 4097, 'Qtv1Sum'),
		   (4064, 4098, 'Qtv2Sum'),
		   (4065, 4099, 'Q121Sum'),
		   (4066, 4100, 'Q122Sum'),
		   (4067, 4101, 'Qg1Sum'),
		   (4068, 4102, 'Qg2Sum'),
		   (4069, 4103, 'Tnorm1Sum'),
		   (4070, 4104, 'Tnorm2Sum'),
		   (4071, 4105, 'Tden1Sum'),
		   (4072, 4106, 'Tden2Sum')

		    -- из итогового значения вычитаем сумму разностных значений, которые были до периода итогового значения
	        UPDATE #Result SET Summa = (SELECT [FinalArchive].[Value]
                                 FROM [Business].[Archive] [FinalArchive] WITH(NOLOCK)
								 WHERE [FinalArchive].[MeasurementDeviceId] = @measurementDeviceId AND [FinalArchive].[PeriodTypeId] = 3 AND [FinalArchive].[Time] = @finalDate AND [FinalArchive].[DeviceParameterId] = SumParamId) -
								 (SELECT SUM([SumArchive].[Value])
								 FROM [Business].[Archive] [SumArchive] WITH(NOLOCK)
								 WHERE [SumArchive].[MeasurementDeviceId] = @measurementDeviceId AND [SumArchive].[PeriodTypeId] = 2 AND 
								       [SumArchive].[Time] >= @startDate AND [SumArchive].[Time] <= @finalDate AND [SumArchive].[DeviceParameterId] = DiffParamId) 

            DECLARE @PivotFields VARCHAR(512)
            SELECT @PivotFields = ISNULL( @PivotFields + ',' + '[' +Name + ']', '[' +Name + ']')  FROM #Result

	        DECLARE @query VARCHAR (2048) = 'SELECT ' + @PivotFields + ' FROM (SELECT Name, Summa FROM #Result) as MyTable
                                             PIVOT (AVG(Summa) FOR Name IN (' +  @PivotFields +')) PivotTable'
    
	        EXEC (@query)
RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[SumParamId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[DiffParamId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[Summa]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[@finalDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[SumParamId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[@startDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[DiffParamId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[CalculateTv7StartingPoint].[#Result]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[SumParamId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[DiffParamId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[CalculateTv7StartingPoint].[#Result].[Summa]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Property Name="Precision" Value="19" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateTv7StartingPoint].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateTv7StartingPoint].[@startDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateTv7StartingPoint].[@finalDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="448" />
				<Property Name="Length" Value="2768" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 24 November 2015&#xD;&#xA;-- Update date: 24 November 2015&#xD;&#xA;-- Description: Рассчитывает стартовые значения часовых накопительных параметров относительно ближайшего итогового (суточного) архива (ТВ-7)&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[CalculateTv7StartingPoint]&#xD;&#xA;&#x9;@measurementDeviceId INT,&#xD;&#xA;&#x9;@startDate DATETIME,&#xD;&#xA;&#x9;@finalDate DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	DECLARE @FaultValue DECIMAL(19, 7) = -2000000.0;

  DECLARE @periodBegin DATETIME;
  DECLARE @periodEnd DATETIME;


  SET @periodBegin = DATEADD(DAY, 1, @finalDate);

  IF @periodBegin = @date 
    BEGIN
      SELECT
        [FinalArchive].[Value]
      FROM [Business].[Archive] [FinalArchive] WITH (NOLOCK)
      WHERE [FinalArchive].[MeasurementDeviceId] = @measurementDeviceId
      AND [FinalArchive].[PeriodTypeId] = 6
      AND [FinalArchive].[Time] = @finalDate
      AND [FinalArchive].[DeviceParameterId] = @sumParameterId
    END
  
  ELSE
  BEGIN

  SET @periodEnd = DATEADD(DAY, -1, @date);


  -- из итогового значения вычитаем сумму разностных значений, которые были до периода итогового значения
  SELECT
    (SELECT
        [FinalArchive].[Value]
      FROM [Business].[Archive] [FinalArchive] WITH (NOLOCK)
      WHERE [FinalArchive].[MeasurementDeviceId] = @measurementDeviceId
      AND [FinalArchive].[PeriodTypeId] = 6
      AND [FinalArchive].[Time] = @finalDate
      AND [FinalArchive].[DeviceParameterId] = @sumParameterId)
    + (SELECT
        SUM([SumArchive].[Value])
      FROM [Business].[Archive] [SumArchive] WITH (NOLOCK)
      WHERE [SumArchive].[MeasurementDeviceId] = @measurementDeviceId
      AND [SumArchive].[PeriodTypeId] = 3
      AND [SumArchive].[Time] > @finalDate
      AND [SumArchive].[Time] <= @periodEnd
      AND [SumArchive].[DeviceParameterId] = @diffParameterId
      AND [SumArchive].[Value] > @FaultValue)
  END

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@finalDate]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@sumParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@diffParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@diffParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@sumParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CalculateVkt7IntegratorAfterFinalDate].[@finalDate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="446" />
				<Property Name="Length" Value="2187" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 25 April 2018&#xD;&#xA;-- Update date: 25 April 2018&#xD;&#xA;-- Description: Рассчитывает интегратор на заданную дату, относительно заданной даты итогового архива, находящегося раньше рассчитываемой даты&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[CalculateVkt7IntegratorAfterFinalDate]&#xD;&#xA;&#x9;@measurementDeviceId INT,&#xD;&#xA;&#x9;@periodTypeId INT,&#xD;&#xA;&#x9;@diffParameterId INT,&#xD;&#xA;&#x9;@sumParameterId INT,&#xD;&#xA;&#x9;@date DATETIME,&#xD;&#xA;&#x9;@finalDate DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlScalarFunction" Name="[Programmability].[CheckMeasurementUnitConverter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CheckMeasurementUnitConverter].[@measurementUnit1Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CheckMeasurementUnitConverter].[@measurementUnit2Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CheckMeasurementUnitConverter].[@physicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	  DECLARE @physicalParameter1Id INT =
      (
      	SELECT [Pp].[Id] FROM [Dictionaries].[MeasurementUnit] [Mu1]
          INNER JOIN [Dictionaries].[PhysicalParameter] [Pp] ON [Mu1].[PhysicalParameterId] = [Pp].[Id]
          WHERE [Mu1].[Id] = @measurementUnit1Id
      );

    DECLARE @physicalParameter2Id INT =
      (
        SELECT [Pp].[Id] FROM [Dictionaries].[MeasurementUnit] [Mu2]
          INNER JOIN [Dictionaries].[PhysicalParameter] [Pp] ON [Mu2].[PhysicalParameterId] = [Pp].[Id]
          WHERE [Mu2].[Id] = @measurementUnit2Id
      );

    DECLARE @result  BIT = 
      (CASE 
        WHEN ((@physicalParameter1Id = @physicalParameterId) AND (@physicalParameter2Id = @physicalParameterId)) 
          THEN 1
          ELSE 0
      END);

    RETURN @result;
END;]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="393" />
							<Property Name="Length" Value="1395" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: unknown&#xD;&#xA;-- Description: Реализует проверку соответствия между единицами измерения физической величине в таблице [Rules].[MeasurementUnitConverter]&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;CREATE FUNCTION [Programmability].[CheckMeasurementUnitConverter] &#xD;&#xA;  (&#xD;&#xA;    @physicalParameterId INT,  &#xD;&#xA;    @measurementUnit1Id INT,  &#xD;&#xA;    @measurementUnit2Id INT&#xD;&#xA;  )&#xD;&#xA;RETURNS BIT&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CheckMeasurementUnitConverter].[@physicalParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CheckMeasurementUnitConverter].[@measurementUnit1Id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CheckMeasurementUnitConverter].[@measurementUnit2Id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[bit]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Programmability].[CodePullTableType]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[CodePullTableType].[Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="730" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[CodePullTableType].[Code]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Constraints">
				<Entry>
					<Element Type="SqlTableTypePrimaryKeyConstraint">
						<Property Name="IsClustered" Value="True" />
						<Relationship Name="ColumnSpecifications">
							<Entry>
								<Element Type="SqlTableTypeIndexedColumnSpecification">
									<Relationship Name="Column">
										<Entry>
											<References Name="[Programmability].[CodePullTableType].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="730" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Programmability].[ColumnCaptionTableType]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ColumnCaptionTableType].[Table]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ColumnCaptionTableType].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ColumnCaptionTableType].[Caption]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ColumnCaptionTableType].[Visible]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ColumnCaptionTableType].[Order]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[CorrectArchiveTime]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN 
    SET NOCOUNT ON;
		
    BEGIN TRY

		DECLARE @expression NVARCHAR(MAX) = N'SELECT @resultOut =' + (SELECT [Expression] 
											FROM [Rules].[DeviceArchiveTimeConverter] WITH(NOLOCK)
											WHERE [DeviceId] = @deviceId AND [PeriodTypeId] = @periodTypeId);
        -- для суточных ТВ-7 смотрим в динамический параметр отчетного часа
        IF @deviceId = 27 AND @periodTypeId = 3
			BEGIN
				DECLARE @reportHour NVARCHAR(MAX) = (SELECT [DPV].[Value] FROM [Core].[DynamicParameterValue] [DPV] WITH(NOLOCK)
											           WHERE [DPV].[EntityId] = @measurementDeviceId AND [DPV].DynamicParameterId = 216)
	            IF @reportHour IS NOT NULL
                   BEGIN
						SET @expression = N'SELECT @resultOut = DATEADD(HOUR, '+ @reportHour +', @date)';
				   END
			END

    IF @expression IS NULL
		BEGIN
		     ;THROW 500077, N'Отсутствует правило преобразования архивных дат для данной модели прибора', 1;
		END

		
		DECLARE @date DATETIME = @periodBegin;
		DECLARE @paramDefinition NVARCHAR(128) = N'@date DATETIME, @resultOut DATETIME OUTPUT';

		EXEC dbo.sp_executesql @expression, @paramDefinition, @date, @resultOut = @periodBegin OUTPUT

		SET @date = @periodEnd;
		EXEC dbo.sp_executesql @expression, @paramDefinition, @date, @resultOut = @periodEnd OUTPUT
	   
	END TRY
	BEGIN CATCH
	    SET @periodBegin = @periodBegin;
		SET @periodEnd = @periodEnd;

	    DECLARE @lineFeed CHAR(1) = CHAR(13);
		DECLARE @parameterListTrace NVARCHAR(256) =
		  CONCAT
		  (
			'@deviceId: ', @deviceId, @lineFeed,
			'periodTypeId', @periodTypeId, @lineFeed
		  );

		DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

		 INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      
      THROW;
	END CATCH

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CorrectArchiveTime].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CorrectArchiveTime].[@deviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CorrectArchiveTime].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CorrectArchiveTime].[@periodBegin]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[CorrectArchiveTime].[@periodEnd]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="350" />
				<Property Name="Length" Value="3047" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Max&#xD;&#xA;-- Create date: 28 August 2015&#xD;&#xA;-- Description: Корректирует диапазон запрашиваемых архивных дат в представлении прибора&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[CorrectArchiveTime]&#xD;&#xA;    @periodTypeId INT,&#xD;&#xA;&#x9;@deviceId INT,&#xD;&#xA;&#x9;@measurementDeviceId INT,&#xD;&#xA;&#x9;@periodBegin DATETIME OUTPUT,&#xD;&#xA;&#x9;@periodEnd DATETIME OUTPUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[Programmability].[CustomParameterTableType]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[CustomParameterTableType].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[CustomParameterTableType].[Value]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DecryptData]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 
BEGIN
  BEGIN TRY
    OPEN SYMMETRIC KEY  [EnergyTechAudit.PowerAccounting.Database.SymmetricKey] 
      DECRYPTION BY CERTIFICATE [EnergyTechAudit.PowerAccounting.Database.Certificate];

    SET @clearText = DECRYPTBYKEY (@encryptedText);
    CLOSE SYMMETRIC KEY [EnergyTechAudit.PowerAccounting.Database.SymmetricKey];
  END TRY
  BEGIN CATCH
    SET @clearText = NULL;
    CLOSE SYMMETRIC KEY [EnergyTechAudit.PowerAccounting.Database.SymmetricKey];
    RETURN -1;
  END CATCH
  
  RETURN 0;
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.SymmetricKey]" />
				</Entry>
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.Certificate]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DecryptData].[@clearText]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DecryptData].[@encryptedText]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DecryptData].[@encryptedText]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DecryptData].[@clearText]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="659" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[DecryptData]&#xD;&#xA;  @encryptedText VARBINARY(MAX), &#xD;&#xA;  @clearText VARBINARY(MAX) OUT&#xD;&#xA;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoCheckMissingConstraints]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	DECLARE @missingConstraintsCount INT = 0;
	DECLARE @missingConstraintsMessage NVARCHAR(MAX) = '';
	DECLARE @crlf NCHAR(2) = CHAR(13) + CHAR(10);

	
	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'UQ_NetAddress_Port_Identifier_NetPhone'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_NetAddress_Port_Identifier_NetPhone отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'IX_Business_AccessPoint_TransportTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPoint_TransportTypeId отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'IX_Business_AccessPoint_TransportServerModelId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPoint_TransportServerModelId отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'IX_Business_AccessPoint_DeviceReaderId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPoint_DeviceReaderId отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'IX_Business_AccessPoint_LastStatusConnectionId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPoint_LastStatusConnectionId отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
		AND [indexes].[name] = 'IX_Business_AccessPoint_CsdModemId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPoint_CsdModemId отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPoint_TransportTypeId_Dictionaries_TransportType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPoint_TransportTypeId_Dictionaries_TransportType_Id] отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPoint_TransportServerModelId_Dictionaries_TransportServerModel_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPoint_TransportServerModelId_Dictionaries_TransportServerModel_Id] отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPoint_DeviceReaderId_Business_DeviceReader_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPoint_DeviceReaderId_Business_DeviceReader_Id] отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPoint_LastStatusConnectionId_Dictionaries_StatusConnection_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPoint_LastStatusConnectionId_Dictionaries_StatusConnection_Id] отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPoint_CsdModemId_Business_CsdModed_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPoint]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPoint_CsdModemId_Business_CsdModed_Id] отсутствует в таблице [Business].[AccessPoint].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPointLinkBuilding_AccessPointId_Business_AccessPoint_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPointLinkBuilding]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPointLinkBuilding_AccessPointId_Business_AccessPoint_Id] отсутствует в таблице [Business].[AccessPointLinkBuilding].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPointLinkBuilding_BuildingId_Business_Building_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPointLinkBuilding]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPointLinkBuilding_BuildingId_Business_Building_Id] отсутствует в таблице [Business].[AccessPointLinkBuilding].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPointLinkBuilding]')
		AND [indexes].[name] = 'IX_Business_AccessPointLinkBuilding_AccessPointId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPointLinkBuilding_AccessPointId отсутствует в таблице [Business].[AccessPointLinkBuilding].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPointLinkBuilding]')
		AND [indexes].[name] = 'IX_Business_AccessPointLinkBuilding_BuildingId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPointLinkBuilding_BuildingId отсутствует в таблице [Business].[AccessPointLinkBuilding].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPointStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_AccessPointConnectionStatus_ConnectionTime'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPointConnectionStatus_ConnectionTime отсутствует в таблице [Business].[AccessPointStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPointStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_AccessPointConnectionStatus_ConnectionStatusId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPointConnectionStatus_ConnectionStatusId отсутствует в таблице [Business].[AccessPointStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[AccessPointStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_AccessPointConnectionStatus_AccessPointId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_AccessPointConnectionStatus_AccessPointId отсутствует в таблице [Business].[AccessPointStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPointStatusConnectionLog_ConnectionStatusId_Dictionaries_StatusConnection_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPointStatusConnectionLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPointStatusConnectionLog_ConnectionStatusId_Dictionaries_StatusConnection_Id] отсутствует в таблице [Business].[AccessPointStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_AccessPointStatusConnectionLog_AccessPointId_Business_AccessPoint_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[AccessPointStatusConnectionLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_AccessPointStatusConnectionLog_AccessPointId_Business_AccessPoint_Id] отсутствует в таблице [Business].[AccessPointStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[AgreementSystemParameter]')
		AND [indexes].[name] = 'IX_Dictionaries_AgreementSystemParameter_PhysicalParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_AgreementSystemParameter_PhysicalParameterId отсутствует в таблице [Dictionaries].[AgreementSystemParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[AgreementSystemParameter]')
		AND [indexes].[name] = 'IX_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId отсутствует в таблице [Dictionaries].[AgreementSystemParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_AgreementSystemParameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[AgreementSystemParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_AgreementSystemParameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id] отсутствует в таблице [Dictionaries].[AgreementSystemParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId_Dictionaries_SystemType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[AgreementSystemParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_AgreementSystemParameter_ResourceSystemTypeId_Dictionaries_SystemType_Id] отсутствует в таблице [Dictionaries].[AgreementSystemParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Archive_TimeSignatureId_Business_TimeSignature_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Archive]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Archive_TimeSignatureId_Business_TimeSignature_Id] отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Archive_PeriodTypeId_Dictionaries_PeriodType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Archive]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Archive_PeriodTypeId_Dictionaries_PeriodType_Id] отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Archive_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Archive]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Archive_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Archive_DeviceParameterId_Dictionaries_DeviceParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Archive]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Archive_DeviceParameterId_Dictionaries_DeviceParameter_Id] отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'UQ_Business_Archive_PeriodTypeId_Time_MeasurementDeviceId_DeviceParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Business_Archive_PeriodTypeId_Time_MeasurementDeviceId_DeviceParameterId отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'IX_Business_Archive_TimeSignatureId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Archive_TimeSignatureId отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'IX_Business_Archive_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Archive_MeasurementDeviceId отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'IX_Business_Archive_PeriodTypeId_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Archive_PeriodTypeId_MeasurementDeviceId отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Archive]')
		AND [indexes].[name] = 'IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId_Time'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Archive_PeriodTypeId_MeasurementDeviceId_DeviceParameterId_Time отсутствует в таблице [Business].[Archive].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[Audit]')
		AND [indexes].[name] = 'IX_Admin_Audit_UserId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Admin_Audit_UserId отсутствует в таблице [Admin].[Audit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_Audit_UserId_Admin_User_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[Audit]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_Audit_UserId_Admin_User_Id] отсутствует в таблице [Admin].[Audit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_Binary_ContentTypeId_Dictionaries_BinaryContentType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[Binary]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_Binary_ContentTypeId_Dictionaries_BinaryContentType_Id] отсутствует в таблице [Core].[Binary].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[Binary]')
		AND [indexes].[name] = 'UQ_Core_Binary_ItemId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Core_Binary_ItemId отсутствует в таблице [Core].[Binary].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Building]')
		AND [indexes].[name] = 'IX_FK_Business_Building_DistrictId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_FK_Business_Building_DistrictId отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Building]')
		AND [indexes].[name] = 'IX_FK_Business_Building_OrganizationId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_FK_Business_Building_OrganizationId отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Building]')
		AND [indexes].[name] = 'IX_FK_Business_Building_BuildingPurposeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_FK_Business_Building_BuildingPurposeId отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Building]')
		AND [indexes].[name] = 'IX_FK_Business_Building_Id'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_FK_Business_Building_Id отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Building_DistrictId_Dictionaries_District_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Building]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Building_DistrictId_Dictionaries_District_Id] отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Building_BuildingPurposeId_Dictionaries_BuildingPurpose_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Building]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Building_BuildingPurposeId_Dictionaries_BuildingPurpose_Id] отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Building_OrganizationId_Business_Organization_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Building]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Building_OrganizationId_Business_Organization_Id] отсутствует в таблице [Business].[Building].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Channel_ChannelTemplateId_Business_ChannelTemplate_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Channel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Channel_ChannelTemplateId_Business_ChannelTemplate_Id] отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Channel_ResourceSystemTypeId_Dictionaries_SystemType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Channel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Channel_ResourceSystemTypeId_Dictionaries_SystemType_Id] отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Channel_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Channel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Channel_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Channel_PlacementId_Business_Placement_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Channel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Channel_PlacementId_Business_Placement_Id] отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Channel_MnemoschemeId_Business_Mnemoscheme_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Channel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Channel_MnemoschemeId_Business_Mnemoscheme_Id] отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Channel]')
		AND [indexes].[name] = 'IX_Business_Channel_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Channel_MeasurementDeviceId отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Channel]')
		AND [indexes].[name] = 'IX_Business_Channel_PlacementId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Channel_PlacementId отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Channel]')
		AND [indexes].[name] = 'IX_Business_Channel_ChannelTemplateId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Channel_ChannelTemplateId отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Channel]')
		AND [indexes].[name] = 'IX_Business_Channel_ResourceSystemTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Channel_ResourceSystemTypeId отсутствует в таблице [Business].[Channel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ChannelTemplate_ResourceSystemTypeId_Dictionaries_SystemType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ChannelTemplate]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ChannelTemplate_ResourceSystemTypeId_Dictionaries_SystemType_Id] отсутствует в таблице [Business].[ChannelTemplate].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ChannelTemplate_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ChannelTemplate]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ChannelTemplate_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Business].[ChannelTemplate].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ChannelTemplate_MnemoschemeId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ChannelTemplate]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ChannelTemplate_MnemoschemeId] отсутствует в таблице [Business].[ChannelTemplate].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_CheckingAccount_OrganizationId_Business_Organization_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[CheckingAccount]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_CheckingAccount_OrganizationId_Business_Organization_Id] отсутствует в таблице [Business].[CheckingAccount].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_CheckingAccountLinkPlacement_CheckingAccountId_Businnee_CheckingAccount_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[CheckingAccountLinkPlacement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_CheckingAccountLinkPlacement_CheckingAccountId_Businnee_CheckingAccount_Id] отсутствует в таблице [Business].[CheckingAccountLinkPlacement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_CheckingAccountLinkPlacement_PlacementId_Business_Placement_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[CheckingAccountLinkPlacement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_CheckingAccountLinkPlacement_PlacementId_Business_Placement_Id] отсутствует в таблице [Business].[CheckingAccountLinkPlacement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_CsdModem_ComPortId_Dictionaries_ComPort_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[CsdModem]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_CsdModem_ComPortId_Dictionaries_ComPort_Id] отсутствует в таблице [Business].[CsdModem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_CsdModem_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[CsdModem]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_CsdModem_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Business].[CsdModem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[CsdModem]')
		AND [indexes].[name] = 'IX_Business_CsdModem_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_CsdModem_DeviceId отсутствует в таблице [Business].[CsdModem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[CsdModem]')
		AND [indexes].[name] = 'IX_Business_CsdModem_ComPortId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_CsdModem_ComPortId отсутствует в таблице [Business].[CsdModem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_DefaultMeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[DefaultMeasurementUnit]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_DefaultMeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id] отсутствует в таблице [Rules].[DefaultMeasurementUnit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_DefaultMeasurementUnit_MeasurementUnitId_Dictionaries_MeasurementUnit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[DefaultMeasurementUnit]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_DefaultMeasurementUnit_MeasurementUnitId_Dictionaries_MeasurementUnit_Id] отсутствует в таблице [Rules].[DefaultMeasurementUnit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_DefaultMeasurementUnit_DimentionId_Dictionaries_Dimension_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[DefaultMeasurementUnit]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_DefaultMeasurementUnit_DimentionId_Dictionaries_Dimension_Id] отсутствует в таблице [Rules].[DefaultMeasurementUnit].' + @crlf;
	END;
	
	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Device_BaudId_Dictionaries_Baud_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Device_BaudId_Dictionaries_Baud_Id] отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Device_DataId_Dictionaries_DataBit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Device_DataId_Dictionaries_DataBit_Id] отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Device_ParityId_Dictionaries_Parity_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Device_ParityId_Dictionaries_Parity_Id] отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Device_StopBitId_Dictionaries_StopBit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Device_StopBitId_Dictionaries_StopBit_Id] отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
		AND [indexes].[name] = 'UQ_Dictionaries_Device_ItemId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Dictionaries_Device_ItemId отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;
	
	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
		AND [indexes].[name] = 'IX_Dictionaries_Device_BaudId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Device_BaudId отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
		AND [indexes].[name] = 'IX_Dictionaries_Device_DataId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Device_DataId отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
		AND [indexes].[name] = 'IX_Dictionaries_Device_ParityId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Device_ParityId отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Device]')
		AND [indexes].[name] = 'IX_Dictionaries_Device_StopBitId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Device_StopBitId отсутствует в таблице [Dictionaries].[Device].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[DeviceArchiveTimeConverter]')
		AND [indexes].[name] = 'UQ_Rules_DeviceArchiveTimeConverter_DeviceId_PeriodTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Rules_DeviceArchiveTimeConverter_DeviceId_PeriodTypeId отсутствует в таблице [Rules].[DeviceArchiveTimeConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[DeviceArchiveTimeConverter]')
		AND [indexes].[name] = 'IX_Rules_DeviceArchiveTimeConverter_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Rules_DeviceArchiveTimeConverter_DeviceId отсутствует в таблице [Rules].[DeviceArchiveTimeConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[DeviceArchiveTimeConverter]')
		AND [indexes].[name] = 'IX_Rules_DeviceArchiveTimeConverter_PeriodTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Rules_DeviceArchiveTimeConverter_PeriodTypeId отсутствует в таблице [Rules].[DeviceArchiveTimeConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_DeviceArchiveTimeConverter_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[DeviceArchiveTimeConverter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_DeviceArchiveTimeConverter_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Rules].[DeviceArchiveTimeConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_DeviceArchiveTimeConverter_PeriodTypeId_Dictionaries_PeriodType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[DeviceArchiveTimeConverter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_DeviceArchiveTimeConverter_PeriodTypeId_Dictionaries_PeriodType_Id] отсутствует в таблице [Rules].[DeviceArchiveTimeConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceEvent_DeviceEventParameterId_Dictionaries_DeviceEventParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceEvent]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceEvent_DeviceEventParameterId_Dictionaries_DeviceEventParameter_Id] отсутствует в таблице [Business].[DeviceEvent].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceEvent_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceEvent]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceEvent_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[DeviceEvent].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceEvent]')
		AND [indexes].[name] = 'IX_Business_DeviceEvent_DeviceEventParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceEvent_DeviceEventParameterId отсутствует в таблице [Business].[DeviceEvent].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceEvent]')
		AND [indexes].[name] = 'IX_Business_DeviceEvent_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceEvent_MeasurementDeviceId отсутствует в таблице [Business].[DeviceEvent].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceEvent]')
		AND [indexes].[name] = 'IX_Business_DeviceEvent_MeasurementDeviceId_Time'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceEvent_MeasurementDeviceId_Time отсутствует в таблице [Business].[DeviceEvent].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[DeviceEventParameter]')
		AND [indexes].[name] = 'IX_Dictionaries_DeviceEventParameter_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_DeviceEventParameter_DeviceId отсутствует в таблице [Dictionaries].[DeviceEventParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_DeviceEventParameter_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[DeviceEventParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_DeviceEventParameter_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Dictionaries].[DeviceEventParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceLinkDynamicParameter_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceLinkDynamicParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceLinkDynamicParameter_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Business].[DeviceLinkDynamicParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceLinkDynamicParameter_DynamicParameterId_Dictionaries_DynamicParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceLinkDynamicParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceLinkDynamicParameter_DynamicParameterId_Dictionaries_DynamicParameter_Id] отсутствует в таблице [Business].[DeviceLinkDynamicParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceLinkDynamicParameter]')
		AND [indexes].[name] = 'IX_Business_DeviceLinkDynamicParameter_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceLinkDynamicParameter_DeviceId отсутствует в таблице [Business].[DeviceLinkDynamicParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceLinkDynamicParameter]')
		AND [indexes].[name] = 'IX_Business_DeviceLinkDynamicParameter_DynamicParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceLinkDynamicParameter_DynamicParameterId отсутствует в таблице [Business].[DeviceLinkDynamicParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_DeviceParameter_DeviceId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[DeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_DeviceParameter_DeviceId] отсутствует в таблице [Dictionaries].[DeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceParameterSetting_Id_Dictionaries_DeviceParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceParameterSetting]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceParameterSetting_Id_Dictionaries_DeviceParameter_Id] отсутствует в таблице [Business].[DeviceParameterSetting].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceReader_DeviceReaderTypeId_Dictionaries_DeviceReaderType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceReader]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceReader_DeviceReaderTypeId_Dictionaries_DeviceReaderType_Id] отсутствует в таблице [Business].[DeviceReader].' + @crlf;
	END;

    
    IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceReader_UserId_Admin_User_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceReader]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceReader_UserId_Admin_User_Id] отсутствует в таблице [Business].[DeviceReader].' + @crlf;
	END;
	   
	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceReader]')
		AND [indexes].[name] = 'IX_Business_DeviceReader_UserId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceReader_UserId отсутствует в таблице [Business].[DeviceReader].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[DeviceReaderErrorLog]')
		AND [indexes].[name] = 'IX_Business_DeviceReaderErrorLog_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_DeviceReaderErrorLog_MeasurementDeviceId отсутствует в таблице [Business].[DeviceReaderErrorLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceReaderErrorLog_DeviceReaderId_Business_DeviceReader_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceReaderErrorLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceReaderErrorLog_DeviceReaderId_Business_DeviceReader_Id] отсутствует в таблице [Business].[DeviceReaderErrorLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_DeviceReaderErrorLog_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[DeviceReaderErrorLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_DeviceReaderErrorLog_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[DeviceReaderErrorLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Dimension]')
		AND [indexes].[name] = 'UQ_Dictionaries_Dimension_Value'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Dictionaries_Dimension_Value отсутствует в таблице [Dictionaries].[Dimension].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[District]')
		AND [indexes].[name] = 'IX_Dictionaries_District_CityId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_District_CityId отсутствует в таблице [Dictionaries].[District].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_District_CityId_Dictionaries_City_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[District]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_District_CityId_Dictionaries_City_Id] отсутствует в таблице [Dictionaries].[District].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_DynamicParameterValue_DynamicParameterId_Dictionaries_DynamicParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[DynamicParameterValue]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_DynamicParameterValue_DynamicParameterId_Dictionaries_DynamicParameter_Id] отсутствует в таблице [Core].[DynamicParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[DynamicParameterValue]')
		AND [indexes].[name] = 'UQ_EntityId_DynamicParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_EntityId_DynamicParameterId отсутствует в таблице [Core].[DynamicParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[DynamicParameterValue]')
		AND [indexes].[name] = 'IX_Core_DynamicParameterValue_DynamicParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_DynamicParameterValue_DynamicParameterId отсутствует в таблице [Core].[DynamicParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_EntityPropery_EntityId_Core_Entity_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[EntityProperty]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_EntityPropery_EntityId_Core_Entity_Id] отсутствует в таблице [Core].[EntityProperty].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[EntityTree]')
		AND [indexes].[name] = 'IX_Core_EntityTree_Code'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_EntityTree_Code отсутствует в таблице [Core].[EntityTree].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[EntityTreeLinkRole]')
		AND [indexes].[name] = 'IX_Core_EntityTreeLinkRole_EntityTreeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_EntityTreeLinkRole_EntityTreeId отсутствует в таблице [Core].[EntityTreeLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[EntityTreeLinkRole]')
		AND [indexes].[name] = 'IX_Core_EntityTreeLinkRole_RoleId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_EntityTreeLinkRole_RoleId отсутствует в таблице [Core].[EntityTreeLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_EntityTreeLinkRole_EntityTreeId_Core_EntityTree_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[EntityTreeLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_EntityTreeLinkRole_EntityTreeId_Core_EntityTree_Id] отсутствует в таблице [Core].[EntityTreeLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_EntityTreeLinkRole_RoleId_Admin_Role_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[EntityTreeLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_EntityTreeLinkRole_RoleId_Admin_Role_Id] отсутствует в таблице [Core].[EntityTreeLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[ErrorLogEntry]')
		AND [indexes].[name] = 'IX_Admin_ErrorLogEntry_UserName'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Admin_ErrorLogEntry_UserName отсутствует в таблице [Admin].[ErrorLogEntry].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_FaqLinkRole_FaqId_Admin_Faq_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[FaqLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_FaqLinkRole_FaqId_Admin_Faq_Id] отсутствует в таблице [Admin].[FaqLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_FaqLinkRole_RoleId_Admin_Role_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[FaqLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_FaqLinkRole_RoleId_Admin_Role_Id] отсутствует в таблице [Admin].[FaqLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Hub]')
		AND [indexes].[name] = 'IX_Business_Hub_DeviceReaderId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Hub_DeviceReaderId отсутствует в таблице [Business].[Hub].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Hub]')
		AND [indexes].[name] = 'IX_Business_Hub_BuildingId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Hub_BuildingId отсутствует в таблице [Business].[Hub].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Hub_DeviceReaderId_Business_DeviceReader_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Hub]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Hub_DeviceReaderId_Business_DeviceReader_Id] отсутствует в таблице [Business].[Hub].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Hub_BuildingId_Business_Building_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Hub]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Hub_BuildingId_Business_Building_Id] отсутствует в таблице [Business].[Hub].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
		AND [indexes].[name] = 'UQ_DeviceId_FactoryNumber'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_DeviceId_FactoryNumber отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
		AND [indexes].[name] = 'IX_Business_MeasurementDevice_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_MeasurementDevice_DeviceId отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
		AND [indexes].[name] = 'IX_Business_MeasurementDevice_ProtocolSubTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_MeasurementDevice_ProtocolSubTypeId отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
		AND [indexes].[name] = 'IX_Business_MeasurementDevice_AccessPointId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_MeasurementDevice_AccessPointId отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
		AND [indexes].[name] = 'IX_Business_MeasurementDevice_HubId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_MeasurementDevice_HubId отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;
	

	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_AccessPointId_Business_AccessPointId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_AccessPointId_Business_AccessPointId] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_LastStatusConnectionId_Dictionaries_StatusConnection_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_LastStatusConnectionId_Dictionaries_StatusConnection_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_ParityId_Dictionaries_Parity_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_ParityId_Dictionaries_Parity_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_BaudId_Dictionaries_Baud_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_BaudId_Dictionaries_Baud_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_ComPortId_Dictionaries_ComPort_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_ComPortId_Dictionaries_ComPort_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_StopBitId_Dictionaries_StopBit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_StopBitId_Dictionaries_StopBit_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_DataId_Dictionaries_DataBit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_DataId_Dictionaries_DataBit_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_PortTypeId_Dictionaries_PortType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_PortTypeId_Dictionaries_PortType_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_ProtocolSubTypeId_Dictionaries_ProtocolSubType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_ProtocolSubTypeId_Dictionaries_ProtocolSubType_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDevice_HubId_Business_Hub_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDevice_HubId_Business_Hub_Id] отсутствует в таблице [Business].[MeasurementDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDeviceStatusConnectionLog_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDeviceStatusConnectionLog_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_MeasurementDeviceStatusConnectionLog_StatusConnectionId_Dictionaries_StatusConnection_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_MeasurementDeviceStatusConnectionLog_StatusConnectionId_Dictionaries_StatusConnection_Id] отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_Time'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_Time отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_MeasurementDeviceId отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_StatusConnectionId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_StatusConnectionId отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin1'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin1 отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[MeasurementDeviceStatusConnectionLog]')
		AND [indexes].[name] = 'IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin2'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_StatusConnectionLog_MeasurementDeviceCustomInfoListForOperAdmin2 отсутствует в таблице [Business].[MeasurementDeviceStatusConnectionLog].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[MeasurementUnit]')
		AND [indexes].[name] = 'IX_Dictionaries_MeasurementUnit_PhysicalParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_MeasurementUnit_PhysicalParameterId отсутствует в таблице [Dictionaries].[MeasurementUnit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_MeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[MeasurementUnit]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_MeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id] отсутствует в таблице [Dictionaries].[MeasurementUnit].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_MeasurementUnitConverter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_MeasurementUnitConverter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id] отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit2Id_Dictionaries_MeasurementUnit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit2Id_Dictionaries_MeasurementUnit_Id] отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit1Id_Dictionaries_MeasurementUnit_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit1Id_Dictionaries_MeasurementUnit_Id] отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
		AND [indexes].[name] = 'UQ_Rules_MeasurementUnitConverter_PhysicalParameterId_MeasurementUnit1Id_MeasurementUnit2Id'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Rules_MeasurementUnitConverter_PhysicalParameterId_MeasurementUnit1Id_MeasurementUnit2Id отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
		AND [indexes].[name] = 'IX_Rules_MeasurementUnitConverter_PhysicalParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Rules_MeasurementUnitConverter_PhysicalParameterId отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
		AND [indexes].[name] = 'IX_Rules_MeasurementUnitConverter_MeasurementUnit1Id'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Rules_MeasurementUnitConverter_MeasurementUnit1Id отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Rules].[MeasurementUnitConverter]')
		AND [indexes].[name] = 'IX_Rules_MeasurementUnitConverter_MeasurementUnit2Id'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Rules_MeasurementUnitConverter_MeasurementUnit2Id отсутствует в таблице [Rules].[MeasurementUnitConverter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MenuItem]')
		AND [indexes].[name] = 'IX_Core_MenuItem_MenuId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MenuItem_MenuId отсутствует в таблице [Core].[MenuItem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MenuItem]')
		AND [indexes].[name] = 'IX_Core_MenuItem_MetaObjectId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MenuItem_MetaObjectId отсутствует в таблице [Core].[MenuItem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MenuItemId_MenuId_Core_Menu_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MenuItem]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MenuItemId_MenuId_Core_Menu_Id] отсутствует в таблице [Core].[MenuItem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MenuItemId_MetaObjectId_Core_MetaObject_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MenuItem]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MenuItemId_MetaObjectId_Core_MetaObject_Id] отсутствует в таблице [Core].[MenuItem].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_MetaObjectTypeId_Core_MetaObjectType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_MetaObjectTypeId_Core_MetaObjectType_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_DictionaryId_Core_Dictionary_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_DictionaryId_Core_Dictionary_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_PivotId_Core_Pivot_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_PivotId_Core_Pivot_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_QueryId_Core_Query_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_QueryId_Core_Query_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_ReportId_Core_Report_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_ReportId_Core_Report_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_FormId_Core_Form_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_FormId_Core_Form_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_PivotDiagrammId_Core_PivotDiagramm_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_PivotDiagrammId_Core_PivotDiagramm_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_ProcessingId_Core_Processing_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_ProcessingId_Core_Processing_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_DiagrammId_Core_Diagramm_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_DiagrammId_Core_Diagramm_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_ParametricId_Core_Parametric_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_ParametricId_Core_Parametric_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObject_SourceId_Core_Source_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObject]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObject_SourceId_Core_Source_Id] отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_MetaObjectTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_MetaObjectTypeId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_DictionaryId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_DictionaryId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_PivotId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_PivotId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_QueryId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_QueryId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_ReportId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_ReportId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_FormId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_FormId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_PivotDiagrammId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_PivotDiagrammId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_ParametricId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_ParametricId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObject]')
		AND [indexes].[name] = 'IX_Core_MetaObject_SourceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObject_SourceId отсутствует в таблице [Core].[MetaObject].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkDevice]')
		AND [indexes].[name] = 'IX_Core_MetaObjectLinkDevice_MetaObjectId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObjectLinkDevice_MetaObjectId отсутствует в таблице [Core].[MetaObjectLinkDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkDevice]')
		AND [indexes].[name] = 'IX_Core_MetaObjectLinkDevice_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObjectLinkDevice_DeviceId отсутствует в таблице [Core].[MetaObjectLinkDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObjectLinkDevice_MetaObjectId_Core_MetaObject_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObjectLinkDevice_MetaObjectId_Core_MetaObject_Id] отсутствует в таблице [Core].[MetaObjectLinkDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObjectLinkDevice_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObjectLinkDevice_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Core].[MetaObjectLinkDevice].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObjectLinkRole_MetaObjectId_Core_MetaObject_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObjectLinkRole_MetaObjectId_Core_MetaObject_Id] отсутствует в таблице [Core].[MetaObjectLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObjectLinkRole_RoleId_Admin_Role_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObjectLinkRole_RoleId_Admin_Role_Id] отсутствует в таблице [Core].[MetaObjectLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkRole]')
		AND [indexes].[name] = 'IX_Core_MetaObjectLinkRole_MetaObjectId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObjectLinkRole_MetaObjectId отсутствует в таблице [Core].[MetaObjectLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[MetaObjectLinkRole]')
		AND [indexes].[name] = 'IX_Core_MetaObjectLinkRole_RoleId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_MetaObjectLinkRole_RoleId отсутствует в таблице [Core].[MetaObjectLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_MetaObjectReferenceMeasurementDevice_Id_Core_MetaObject_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[MetaObjectReferenceMeasurementDevice]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_MetaObjectReferenceMeasurementDevice_Id_Core_MetaObject_Id] отсутствует в таблице [Core].[MetaObjectReferenceMeasurementDevice].' + @crlf;
	END;
  
	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_News_Core_Binary_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[News]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_News_Core_Binary_Id] отсутствует в таблице [Admin].[News].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_NewsLinkRole_NewsId_Admin_News_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[NewsLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_NewsLinkRole_NewsId_Admin_News_Id] отсутствует в таблице [Admin].[NewsLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_NewsLinkRole_RoleId_Admin_Role_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[NewsLinkRole]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_NewsLinkRole_RoleId_Admin_Role_Id] отсутствует в таблице [Admin].[NewsLinkRole].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Organization_OrganizationTypeId_Dictionaries_OrganizationType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Organization]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Organization_OrganizationTypeId_Dictionaries_OrganizationType_Id] отсутствует в таблице [Business].[Organization].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Parameter]')
		AND [indexes].[name] = 'IX_Dictionaries_Parameter_Code'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Parameter_Code отсутствует в таблице [Dictionaries].[Parameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Parameter]')
		AND [indexes].[name] = 'IX_Dictionaries_Parameter_PhysicalParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Parameter_PhysicalParameterId отсутствует в таблице [Dictionaries].[Parameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[Parameter]')
		AND [indexes].[name] = 'IX_Dictionaries_Parameter_ResourceSystemTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_Parameter_ResourceSystemTypeId отсутствует в таблице [Dictionaries].[Parameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Parameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Parameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Parameter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id] отсутствует в таблице [Dictionaries].[Parameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_Parameter_ResourceSystemTypeId_Dictionaries_SystemType_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[Parameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_Parameter_ResourceSystemTypeId_Dictionaries_SystemType_Id] отсутствует в таблице [Dictionaries].[Parameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DeviceId_Dictionaries_Device_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[ParameterDictionaryValue]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DeviceId_Dictionaries_Device_Id] отсутствует в таблице [Dictionaries].[ParameterDictionaryValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DictionaryId_Dictionaries_ParameterDictionary_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Dictionaries].[ParameterDictionaryValue]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Dictionaries].[FK_Dictionaries_ParameterDictionaryValue_DictionaryId_Dictionaries_ParameterDictionary_Id] отсутствует в таблице [Dictionaries].[ParameterDictionaryValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[ParameterDictionaryValue]')
		AND [indexes].[name] = 'IX_Dictionaries_ParameterDictionaryValue_DeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_ParameterDictionaryValue_DeviceId отсутствует в таблице [Dictionaries].[ParameterDictionaryValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Dictionaries].[ParameterDictionaryValue]')
		AND [indexes].[name] = 'IX_Dictionaries_ParameterDictionaryValue_ParameterDictionaryId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Dictionaries_ParameterDictionaryValue_ParameterDictionaryId отсутствует в таблице [Dictionaries].[ParameterDictionaryValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'UQ_Business_ParameterLinkDeviceParameter_ParameterId_PeriodTypeId_DeviceParameterId_ChannelTemplateId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Business_ParameterLinkDeviceParameter_ParameterId_PeriodTypeId_DeviceParameterId_ChannelTemplateId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_ParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_ParameterId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_PeriodTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_PeriodTypeId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_MeasurementUnitId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_MeasurementUnitId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_DimensionId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_DimensionId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_DeviceParameterId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_DeviceParameterId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_SubsystemTypeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_SubsystemTypeId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_ParameterDictionaryId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_ParameterDictionaryId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
		AND [indexes].[name] = 'IX_Business_ParameterMapDeviceParameter_ChannelTemplateId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ParameterMapDeviceParameter_ChannelTemplateId отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_ParameterId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_ParameterId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_PeriodTypeId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_PeriodTypeId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_MeasurementUnitId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_MeasurementUnitId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_DimensionId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_DimensionId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterMapDeviceParameter_ParameterDictionaryId_Dictionaries_ParameterDictionary_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterMapDeviceParameter_ParameterDictionaryId_Dictionaries_ParameterDictionary_Id] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_DeviceParameterId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_DeviceParameterId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_SubsystemTypeId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_SubsystemTypeId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_ParameterLinkDeviceParameter_ChannelTemplateId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[ParameterMapDeviceParameter]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_ParameterLinkDeviceParameter_ChannelTemplateId] отсутствует в таблице [Business].[ParameterMapDeviceParameter].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Placement]')
		AND [indexes].[name] = 'IX_Business_Placement_PlacementPurposeId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Placement_PlacementPurposeId отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Placement]')
		AND [indexes].[name] = 'IX_Business_Placement_BuildingId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Placement_BuildingId отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Placement]')
		AND [indexes].[name] = 'IX_Business_Placement_UserAdditionalInfoId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Placement_UserAdditionalInfoId отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[Placement]')
		AND [indexes].[name] = 'IX_Business_Placement_OrganizationId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_Placement_OrganizationId отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Placement_PlacementPurposeId_Dictionaries_PlacementPurpose_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Placement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Placement_PlacementPurposeId_Dictionaries_PlacementPurpose_Id] отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Placement_BuildingId_Business_Building_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Placement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Placement_BuildingId_Business_Building_Id] отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Placement_UserAdditionalInfoId_Business_UserAdditionalInfo_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Placement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Placement_UserAdditionalInfoId_Business_UserAdditionalInfo_Id] отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_Placement_OrganizationId_Business_Organization_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[Placement]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_Placement_OrganizationId_Business_Organization_Id] отсутствует в таблице [Business].[Placement].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_RegulatorParameterValue_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[RegulatorParameterValue]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_RegulatorParameterValue_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[RegulatorParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_RegulatorParameterValue_DeviceParameterId_Dictionaries_DeviceParameter_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[RegulatorParameterValue]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_RegulatorParameterValue_DeviceParameterId_Dictionaries_DeviceParameter_Id] отсутствует в таблице [Business].[RegulatorParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[RegulatorParameterValue]')
		AND [indexes].[name] = 'IX_Business_RegulatorParameterValue_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_RegulatorParameterValue_MeasurementDeviceId отсутствует в таблице [Business].[RegulatorParameterValue].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_Report_ReportTypeId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[Report]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_Report_ReportTypeId] отсутствует в таблице [Core].[Report].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_ReportPluginSelector_ReportId_Core_Report_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[ReportPluginSelector]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_ReportPluginSelector_ReportId_Core_Report_Id] отсутствует в таблице [Core].[ReportPluginSelector].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[ReportPluginSelector]')
		AND [indexes].[name] = 'IX_Core_ReportPluginSelector_ReportId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Core_ReportPluginSelector_ReportId отсутствует в таблице [Core].[ReportPluginSelector].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_ReportSelector_SelectorReportId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[ReportSelector]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_ReportSelector_SelectorReportId] отсутствует в таблице [Core].[ReportSelector].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_ReportSelector_TargetReportId]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[ReportSelector]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_ReportSelector_TargetReportId] отсутствует в таблице [Core].[ReportSelector].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_ProcessingLogEntry_ProcessingId_Core_Processing_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[ProcessingLogEntry]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_ProcessingLogEntry_ProcessingId_Core_Processing_Id] отсутствует в таблице [Core].[ProcessingLogEntry].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Core].[FK_Core_ProcessingLogEntry_ProcessingStatusId_Dictionaries_ProcessingStatus_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Core].[ProcessingLogEntry]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Core].[FK_Core_ProcessingLogEntry_ProcessingStatusId_Dictionaries_ProcessingStatus_Id] отсутствует в таблице [Core].[ProcessingLogEntry].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[ProcessingLogEntry]')
		AND [indexes].[name] = 'IX_Business_ProcessingLogEntry_ProcessingId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ProcessingLogEntry_ProcessingId отсутствует в таблице [Core].[ProcessingLogEntry].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Core].[ProcessingLogEntry]')
		AND [indexes].[name] = 'IX_Business_ProcessingLogEntry_ProcessingLogStatusId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_ProcessingLogEntry_ProcessingLogStatusId отсутствует в таблице [Core].[ProcessingLogEntry].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[TimeSignature]')
		AND [indexes].[name] = 'IX_Business_TimeSignature_MeasurementDeviceId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_TimeSignature_MeasurementDeviceId отсутствует в таблице [Business].[TimeSignature].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_TimeSignature_MeasurementDeviceId_Business_MeasurementDevice_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[TimeSignature]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_TimeSignature_MeasurementDeviceId_Business_MeasurementDevice_Id] отсутствует в таблице [Business].[TimeSignature].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_TimeSignature_StatusConnectionId_Dictionaries_StatusConnection_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[TimeSignature]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_TimeSignature_StatusConnectionId_Dictionaries_StatusConnection_Id] отсутствует в таблице [Business].[TimeSignature].' + @crlf;
	END;
  

	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[User]')
		AND [indexes].[name] = 'UQ_Admin_User_UserName'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: UQ_Admin_User_UserName отсутствует в таблице [Admin].[User].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[User]')
		AND [indexes].[name] = 'IX_Admin_User_RoleId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Admin_User_RoleId отсутствует в таблице [Admin].[User].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[User]')
		AND [indexes].[name] = 'IX_Admin_User_UserName'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Admin_User_UserName отсутствует в таблице [Admin].[User].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_UserAdditionalInfo_Id_Admin_User_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[UserAdditionalInfo]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_UserAdditionalInfo_Id_Admin_User_Id] отсутствует в таблице [Business].[UserAdditionalInfo].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_UserAdditionalInfo_Id_Dictionaries_Gender_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[UserAdditionalInfo]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_UserAdditionalInfo_Id_Dictionaries_Gender_Id] отсутствует в таблице [Business].[UserAdditionalInfo].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[UserLinkChannel]')
		AND [indexes].[name] = 'IX_Business_UserLinkChannel_UserId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_UserLinkChannel_UserId отсутствует в таблице [Business].[UserLinkChannel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Business].[UserLinkChannel]')
		AND [indexes].[name] = 'IX_Business_UserLinkChannel_ChannelId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Business_UserLinkChannel_ChannelId отсутствует в таблице [Business].[UserLinkChannel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_UserLinkChannel_UserId_Admin_User_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[UserLinkChannel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_UserLinkChannel_UserId_Admin_User_Id] отсутствует в таблице [Business].[UserLinkChannel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Business].[FK_Business_UserLinkChannel_ChannelId_Business_Channel_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Business].[UserLinkChannel]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Business].[FK_Business_UserLinkChannel_ChannelId_Business_Channel_Id] отсутствует в таблице [Business].[UserLinkChannel].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[indexes] [indexes]
		WHERE [indexes].[object_id] = OBJECT_ID(N'[Admin].[UserMessage]')
		AND [indexes].[name] = 'IX_Admin_UserMessage_UserId'
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Индекс: IX_Admin_UserMessage_UserId отсутствует в таблице [Admin].[UserMessage].' + @crlf;
	END;


	IF NOT EXISTS
	(
		SELECT * FROM [sys].[foreign_keys] [foreign_keys]
		WHERE [foreign_keys].[object_id] = OBJECT_ID(N'[Admin].[FK_Admin_UserMessage_UserId_Admin_User_Id]')
		AND [foreign_keys].[parent_object_id] = OBJECT_ID(N'[Admin].[UserMessage]')
	)
	BEGIN
		SET @missingConstraintsCount = @missingConstraintsCount + 1;
		SET @missingConstraintsMessage = @missingConstraintsMessage + 'Внешний ключ: [Admin].[FK_Admin_UserMessage_UserId_Admin_User_Id] отсутствует в таблице [Admin].[UserMessage].' + @crlf;
	END;



	IF @missingConstraintsCount != 0
	BEGIN
		DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;
		DECLARE @subject NVARCHAR(256) = N'Обнаружены отсутсвующие ключи на сервере ' + @serverName;
		SET @missingConstraintsMessage = CONCAT(N'Найдены отсутствующие ключи: ',	@missingConstraintsCount, @crlf, @crlf, @missingConstraintsMessage);
		EXEC msdb.dbo.sp_send_dbmail 
		 @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
		 @recipients = 'eta.development.dba@yandex.ru',
		 @subject = @subject,
		 @importance = 'High',
		 @body = @missingConstraintsMessage;
	END;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes].[object_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes].[name]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[foreign_keys]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[foreign_keys].[object_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[foreign_keys].[parent_object_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="360" />
				<Property Name="Length" Value="135126" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo (auto generated by BuildMissingConstraintsScript)&#xD;&#xA;-- Create date: 2015-11-17&#xD;&#xA;-- Description: Проверка потерянных ключей и индексов&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoCheckMissingConstraints]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  
	BEGIN TRY      

		DECLARE @safeBoundTime DATETIME; 
	
		DECLARE @safeBoundDaysCount INT = 730, @singleStepProceedingRowCount INT = 500;
	
		SET @safeBoundTime = DATEADD(DAY, -@safeBoundDaysCount,  GETDATE());

		DECLARE @measurementDeviceId INT;
		DECLARE @oldestIdTimeSignature INT;
		DECLARE @oldestTimeSignatureTime DATETIME;

		-- для обеспечения атомарности используем курсор
		DECLARE measurementDeviceCursor CURSOR FORWARD_ONLY READ_ONLY FAST_FORWARD	
		FOR
			SELECT [MeasurementDevice].[Id] 
			FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK);

		OPEN measurementDeviceCursor;
	
		FETCH NEXT FROM measurementDeviceCursor INTO @measurementDeviceId;

		WHILE @@FETCH_STATUS = 0  
		BEGIN 
			SELECT TOP(1)
				@oldestIdTimeSignature = [TimeSignature].[Id], 
				@oldestTimeSignatureTime = FIRST_VALUE (  [TimeSignature].[Time] ) OVER (ORDER BY [TimeSignature].[Time])  
			FROM [Business].[TimeSignature] [TimeSignature] WITH(NOLOCK) 
			WHERE [TimeSignature].[MeasurementDeviceId] = @measurementDeviceId;

			-- Very slow execution
			/*				
			DELETE TOP(@singleStepProceedingRowCount) [Archive]
			FROM [Business].[Archive] [Archive] 
			WHERE [Archive].[MeasurementDeviceId] = @measurementDeviceId AND  [Archive].[TimeSignatureId] IN
			(
				SELECT [Id]
				FROM [Business].[TimeSignature] [TimeSignature] WITH(NOLOCK)
				WHERE [TimeSignature].[MeasurementDeviceId] = @measurementDeviceId AND 
				([TimeSignature].[Time] >= @oldestTimeSignatureTime AND [TimeSignature].[Time] <= @safeBoundTime)
			)
			*/
			FETCH NEXT FROM measurementDeviceCursor INTO @measurementDeviceId;			
			-- PRINT @measurementDeviceId;
		END;

		CLOSE measurementDeviceCursor;  
		DEALLOCATE measurementDeviceCursor; 
	END TRY

	BEGIN CATCH   
	 
		IF(@@TRANCOUNT > 0)
		BEGIN
			ROLLBACK TRANSACTION;
		END;    
    
		DECLARE @errorNumber INT = ERROR_NUMBER();      
		DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
		SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

		DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

		DECLARE @subject NVARCHAR(MAX) = CONCAT
		(
			'Ошибка выполнения процедуры [Programmability].[DoClearArchives] на сервере',               
			@serverName
		);
           
		EXEC msdb.dbo.sp_send_dbmail
			@profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
			@recipients = 'eta.development.dba@yandex.ru',
			@subject = @subject,
			@body = @error
    
		RETURN @@ERROR;  

	END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="273" />
				<Property Name="Length" Value="2967" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20170605&#xD;&#xA;-- Description: &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoClearArchives]&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearAudit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  

  SET TRANSACTION ISOLATION LEVEL SNAPSHOT;

  BEGIN TRANSACTION;
  BEGIN TRY
    SET NOCOUNT ON;
    
    DELETE [Audit] FROM [Admin].[Audit] [Audit]
          
   IF(@@TRANCOUNT > 0)
   BEGIN
      COMMIT TRANSACTION;
    END;
  END TRY

  BEGIN CATCH
    
    IF(@@TRANCOUNT > 0)
    BEGIN
      ROLLBACK TRANSACTION;
    END;    
    
    DECLARE @errorNumber INT = ERROR_NUMBER();      
    DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
    SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

    DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

    DECLARE @subject NVARCHAR(256) = CONCAT
    (
        'Ошибка очистки аудита в процедуре [Programmability].[DoClearAudit] на сервере',               
        @serverName
    );
       
     
    EXEC msdb.dbo.sp_send_dbmail
        @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
        @recipients = 'eta.development.dba@yandex.ru',
        @subject = @subject,
        @body = @error
    
    RETURN @@ERROR;  

  END CATCH;

  RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="313" />
				<Property Name="Length" Value="1546" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-09-03&#xD;&#xA;-- Description: Очистка аудита системы [Admin].[Audit]&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoClearAudit]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearDeviceReaderLogs]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  
				
	BEGIN TRANSACTION;
	BEGIN TRY
		SET NOCOUNT ON;	

		-- Clear DeviceEvent with a records saving for 36 hours deep 
		-- ( стратегия "малого остатка" -  усечение таблицы и сохранение остатка во временной таблице )

		IF(OBJECT_ID('tempdb..#DeviceEvent') IS NOT NULL)
		BEGIN
			DROP TABLE #DeviceEvent;	
		END;
 
		SELECT  
			[Time]
			,[DeviceEventParameterId]
			,[MeasurementDeviceId]
			,[State]       
		INTO #DeviceEvent
		FROM
		(    
			SELECT 
				[DeviceEvent].[Time]
				,[DeviceEvent].[DeviceEventParameterId]
				,[DeviceEvent].[MeasurementDeviceId]
				,[DeviceEvent].[State]
			FROM [Business].[DeviceEvent] [DeviceEvent] WITH (NOLOCK) 
    
			WHERE [DeviceEvent].[Time] BETWEEN DATEADD(HOUR, -@deviceEventSaveDeepInHours, GETDATE()) AND GETDATE() 
		) [DeviceEvent];

		TRUNCATE TABLE [Business].[DeviceEvent];

		INSERT INTO [Business].[DeviceEvent] ([Time], [DeviceEventParameterId], [MeasurementDeviceId], [State])
		SELECT 
			[Time]
			,[DeviceEventParameterId]
			,[MeasurementDeviceId]
			,[State]         
		FROM #DeviceEvent;
        
		-- Clear DeviceReaderErrorLog  with a records saving for 30  days deep
		-- ( стратегия "большого куска" -  сохранение потенциально большого числа записей в зачищаемой таблице без возможности транкейта  )
		DECLARE @allRecordsCount INT =
		(
			SELECT COUNT(*)
			FROM [Business].[DeviceReaderErrorLog] [DeviceReaderErrorLog] WITH(NOLOCK)
		);

		DECLARE @savingRecordsCount INT =
		(
			SELECT COUNT(*)
			FROM [Business].[DeviceReaderErrorLog] [DeviceReaderErrorLog] WITH(NOLOCK)
			WHERE [DeviceReaderErrorLog].[Time] BETWEEN DATEADD(DAY, -@deviceReaderErrorLogSaveDeepInDays, GETDATE()) AND GETDATE() 
		);
		 DECLARE @width INT = 1000;
	
		 DECLARE @cleanerSteps INT = (@allRecordsCount - @savingRecordsCount) / @width;
		 DECLARE @cleanerStepsCounter INT = 1;

		 DECLARE @now DATETIME = GETDATE();
		 DECLARE @saveBound DATETIME = DATEADD(DAY, -@deviceReaderErrorLogSaveDeepInDays, GETDATE());

		 --  no truncting batch deletion without locks 
		 WHILE(@cleanerStepsCounter < @cleanerSteps AND @@ROWCOUNT > 0)
		 BEGIN
			DELETE TOP (@width) FROM [Business].[DeviceReaderErrorLog] 
			WHERE [DeviceReaderErrorLog].[Time] NOT BETWEEN @saveBound AND @now;
			SET @cleanerStepsCounter = @cleanerStepsCounter + 1;
		 END;
		
		IF(@@TRANCOUNT > 0)
		BEGIN
			COMMIT TRANSACTION;
		END;
	END TRY

	BEGIN CATCH   
	 
		IF(@@TRANCOUNT > 0)
		BEGIN
			ROLLBACK TRANSACTION;
		END;    
    
		DECLARE @errorNumber INT = ERROR_NUMBER();      
		DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
		SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

		DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

		DECLARE @subject NVARCHAR(MAX) = CONCAT
		(
			'Ошибка выполнения процедуры [Programmability].[DoClearDeviceReaderLogs] на сервере',               
			@serverName
		);
           
		EXEC msdb.dbo.sp_send_dbmail
			@profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
			@recipients = 'eta.development.dba@yandex.ru',
			@subject = @subject,
			@body = @error
    
		RETURN @@ERROR;  

	END CATCH;

	RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[@deviceReaderErrorLogSaveDeepInDays]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[State]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[@deviceEventSaveDeepInHours]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[State]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceEvent].[State]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[DeviceEventParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[State]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReaderErrorLog].[Time]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceEvent].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[DeviceEventParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceEvent].[DeviceEventParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceEvent].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[DoClearDeviceReaderLogs].[#DeviceEvent].[State]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceEvent].[State]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoClearDeviceReaderLogs].[@deviceEventSaveDeepInHours]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[36]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoClearDeviceReaderLogs].[@deviceReaderErrorLogSaveDeepInDays]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[30]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="331" />
				<Property Name="Length" Value="3794" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20150418&#xD;&#xA;-- Description: The stored procedure clears some logs of device reader(s) &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoClearDeviceReaderLogs]&#xD;&#xA;&#x9;@deviceEventSaveDeepInHours INT = 36, &#xD;&#xA;&#x9;@deviceReaderErrorLogSaveDeepInDays INT = 30&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearEmergencyLogs]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  
				
	BEGIN TRANSACTION;
	BEGIN TRY
		SET NOCOUNT ON;	
		
		DECLARE @emergencySituationParameterId INT;
		DECLARE @oldestEmergencyTimeSignatureTime DATETIME;
		DECLARE @highBoundTime DATETIME;

		DECLARE @oldestRecordsCursor CURSOR;

		SET NOCOUNT ON;

		/* 1. EmergencyLog cleaning */
		--  EmergencySituationParameter identifier and the time of the oldest record emergency log for particular [EmergencySituationParameter].[Id]
		
		SET @highBoundTime = DATEADD(DAY, -@emergencyLogDepthRemovalByDay, GETDATE());

		SET @oldestRecordsCursor = CURSOR FAST_FORWARD READ_ONLY LOCAL FOR
			SELECT
				[Emergency].[EmergencySituationParameterId],
				[Emergency].[EmergencyTimeSignatureTime] 
			FROM 
			(
				SELECT 
					ROW_NUMBER() OVER (PARTITION BY [EmergencySituationParameter].[Id] ORDER BY [EmergencyTimeSignature].[Time] ASC) [Num], 
					[EmergencySituationParameter].[Id] [EmergencySituationParameterId],
					[EmergencyTimeSignature].[Time] [EmergencyTimeSignatureTime]
        
					FROM [Business].[EmergencyLog] [EmergencyLog] WITH(NOLOCK)
        
					INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH(NOLOCK)
						ON [EmergencyLog].[EmergencyTimeSignatureId] = [EmergencyTimeSignature].[Id]
    
					INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH(NOLOCK)
						ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId]    
			) [Emergency]

			WHERE [Emergency].[Num] = 1;

		OPEN @oldestRecordsCursor;

		FETCH NEXT FROM @oldestRecordsCursor INTO @emergencySituationParameterId, @oldestEmergencyTimeSignatureTime;
		
		/* It's the "big piece" strategy deleting with a "step by step" approach. */
		WHILE @@FETCH_STATUS = 0 
		BEGIN	
			-- It has a cascading delete action for EmergencyMessage table 
			DELETE /* TOP(@byStepDeep) It's the most effective way. Deadlocks didn't occur at all. */ [EmergencyLog]
			FROM [Business].[EmergencyLog] 

				INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] 
					ON [EmergencyLog].[EmergencyTimeSignatureId] = [EmergencyTimeSignature].[Id]    
				INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] 
					ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId]		
				WHERE 
					([EmergencySituationParameter].[Id] = @emergencySituationParameterId) AND 
					([EmergencyTimeSignature].[Time] BETWEEN @oldestEmergencyTimeSignatureTime AND @highBoundTime)			

			FETCH NEXT FROM @oldestRecordsCursor INTO @emergencySituationParameterId, @oldestEmergencyTimeSignatureTime;
		END;

		CLOSE @oldestRecordsCursor;
		DEALLOCATE @oldestRecordsCursor;
		
		/* Perform to reoganize all indexes [EmergencyLog] table  */
		ALTER INDEX ALL ON [Business].[EmergencyLog] REORGANIZE;
		
		/* 2. EmergencyMessage cleaning (what's left  after a cascading deleting) */
		SET @highBoundTime = DATEADD(DAY, -@emergencyMessageDepthRemovalByDay, GETDATE());
		
		-- "monolithic" removal
		DELETE [EmergencyMessage] FROM [Business].[EmergencyMessage] 
			WHERE [EmergencyMessage].[Time] <= @highBoundTime

		/* Perform to reoganize all indexes [EmergencyMessage] table */
		ALTER INDEX ALL ON [Business].[EmergencyMessage] REORGANIZE;

		IF(@@TRANCOUNT > 0)
		BEGIN
			COMMIT TRANSACTION;
		END;
	END TRY

	BEGIN CATCH   
	 
		IF(@@TRANCOUNT > 0)
		BEGIN
			ROLLBACK TRANSACTION;
		END;    
    
		DECLARE @errorNumber INT = ERROR_NUMBER();      
		DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
		SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

		DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

		DECLARE @subject NVARCHAR(MAX) = CONCAT
		(
			'Ошибка выполнения процедуры [Programmability].[DoClearEmergencyLogs] на сервере',               
			@serverName
		);
           
		EXEC msdb.dbo.sp_send_dbmail
			@profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
			@recipients = 'eta.development.dba@yandex.ru',
			@subject = @subject,
			@body = @error
    
		RETURN @@ERROR;  

	END CATCH;

	RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[cursor]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearEmergencyLogs].[@emergencyLogDepthRemovalByDay]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoClearEmergencyLogs].[@emergencyMessageDepthRemovalByDay]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage].[Time]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoClearEmergencyLogs].[@emergencyLogDepthRemovalByDay]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[100]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoClearEmergencyLogs].[@emergencyMessageDepthRemovalByDay]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[30]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="338" />
				<Property Name="Length" Value="4887" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20180111&#xD;&#xA;-- Description: The stored procedure clears emergency logs and emergency messages&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoClearEmergencyLogs]&#x9;&#xD;&#xA;&#x9;-- for more than three months (100 days) for EmergencyLog table&#xD;&#xA;&#x9;@emergencyLogDepthRemovalByDay INT = 100, &#xD;&#xA;&#x9;-- for about a month (30 days) for EmergencyMessage table&#xD;&#xA;&#x9;@emergencyMessageDepthRemovalByDay INT = 30 &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearEmergencyTimeSignatures]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  
				
	BEGIN TRANSACTION;
	BEGIN TRY
		SET NOCOUNT ON;	
		
        /* Be courage ! One shot is one corpse! */
        DELETE  [EmergencyTimeSignature] FROM [Business].[EmergencyTimeSignature]
          LEFT JOIN [Business].[EmergencyLog] [EmergencyLog] ON [EmergencyTimeSignature].[Id] = [EmergencyLog].[EmergencyTimeSignatureId]
        WHERE [EmergencyLog].[Id] IS NULL
		
		ALTER INDEX ALL ON [Business].[EmergencyTimeSignature] REORGANIZE;
		
		IF(@@TRANCOUNT > 0)
		BEGIN
			COMMIT TRANSACTION;
		END;
	END TRY

	BEGIN CATCH   
	 
		IF(@@TRANCOUNT > 0)
		BEGIN
			ROLLBACK TRANSACTION;
		END;    
    
		DECLARE @errorNumber INT = ERROR_NUMBER();      
		DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
		SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

		DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

		DECLARE @subject NVARCHAR(MAX) = CONCAT
		(
			'Ошибка выполнения процедуры [Programmability].[[DoClearEmergencyTimeSignatures]] на сервере',               
			@serverName
		);
           
		EXEC msdb.dbo.sp_send_dbmail
			@profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
			@recipients = 'eta.development.dba@yandex.ru',
			@subject = @subject,
			@body = @error
    
		RETURN @@ERROR;  

	END CATCH;

	RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="255" />
				<Property Name="Length" Value="1738" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20190628&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoClearEmergencyTimeSignatures]&#x9;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoClearStatusConnectionLog]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  

  SET TRANSACTION ISOLATION LEVEL SNAPSHOT;

  BEGIN TRANSACTION;
  BEGIN TRY

    SET NOCOUNT ON;
        
    DECLARE @queryBase NVARCHAR(MAX) =

     'DELETE [SLog] FROM [Business].[{CONNECTED_DEVICE}StatusConnectionLog] [SLog] 
      WHERE [SLog].[Id] IN
      (  
	      SELECT [Id]    
		        FROM 
		        (
			      SELECT
				        [SCL1].[Id],
				        ROW_NUMBER() OVER(PARTITION BY [SCL1].[{CONNECTED_DEVICE}Id] ORDER BY [SCL1].[ConnectionTime] DESC) [Num],
				        [SCL1].[ConnectionTime] [Time], 
				        [SCL1].[StatusConnectionId] [StatusConnectionId], 
				        [SCL1].[{CONNECTED_DEVICE}Id] [{CONNECTED_DEVICE}Id]           
				      FROM [Business].[{CONNECTED_DEVICE}StatusConnectionLog] [SCL1]     
		        ) [SCL2] 
		      WHERE [SCL2].[Num] > 30
      );';

      DECLARE @statusConnectionLogQuery NVARCHAR(MAX);

      SET @statusConnectionLogQuery = REPLACE (@queryBase, N'{CONNECTED_DEVICE}', N'MeasurementDevice');
      EXEC sp_executesql @statusConnectionLogQuery;

      SET @statusConnectionLogQuery  = REPLACE (@queryBase, N'{CONNECTED_DEVICE}', N'AccessPoint');
      EXEC sp_executesql @statusConnectionLogQuery;
          
      IF(@@TRANCOUNT > 0)
      BEGIN
        COMMIT TRANSACTION;
      END;
  END TRY

  BEGIN CATCH
    
    IF(@@TRANCOUNT > 0)
    BEGIN
      ROLLBACK TRANSACTION;
    END;    

    DECLARE @errorNumber INT = ERROR_NUMBER();      
    DECLARE @error NVARCHAR(128) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
    SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

    DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

    DECLARE @subject NVARCHAR(256) = CONCAT
    (
        'Ошибка очистки лога статусов соединений устройств в процедуре [Programmability].[DoClearStatusConnectionLog] на сервере ',               
        @serverName
    );
     
    EXEC msdb.dbo.sp_send_dbmail
        @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
        @recipients = 'eta.development.dba@yandex.ru',
        @subject = @subject,
        @body = @error
    
    RETURN @@ERROR;  

  END CATCH;

  ALTER INDEX ALL ON [Business].[MeasurementDeviceStatusConnectionLog]
        REBUILD WITH (FILLFACTOR = 80, SORT_IN_TEMPDB = ON, STATISTICS_NORECOMPUTE = ON);

  ALTER INDEX ALL ON [Business].[AccessPointStatusConnectionLog]
        REBUILD WITH (FILLFACTOR = 80, SORT_IN_TEMPDB = ON, STATISTICS_NORECOMPUTE = ON);

  RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Business].[MeasurementDeviceStatusConnectionLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointStatusConnectionLog]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2658" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[DoClearStatusConnectionLog]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoDifferentialBackup]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  -- снимок активных считывателей архивов 
   DECLARE @activeArchiveDownLoader TABLE 
   (
    [Id] INT
   );
   
   -- отключение активных считывателей архивов на период времени архивации
   UPDATE [Admin].[User] SET [IsApproved] = 0
	 OUTPUT [Inserted].[Id] INTO @activeArchiveDownLoader
   WHERE [RoleId] = 3 AND [IsApproved] = 1;

   BEGIN TRY
      
      BACKUP DATABASE [EnergyTechAudit.PowerAccounting.Database]
      TO [EnergyTechAudit.PowerAccounting.Database.Backup]
      WITH      
         DIFFERENTIAL, 
         COMPRESSION;   

   END TRY 
   BEGIN CATCH

      DECLARE @errorNumber INT = ERROR_NUMBER();      
      DECLARE @error NVARCHAR(MAX) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);    
	    
      SET @error = CONCAT( @error, CHAR(10), CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());
          
      DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;
      DECLARE @subject NVARCHAR(128) = CONCAT
            (
               'Ошибка выполнения дифференциального резервного копирования [Programmability].[DoDifferentialBackup] на сервере ',               
               @serverName
            );

	  /* Уточняем, что ошибка связана с отсутствием медиасета полной резервной копии */
	  IF (@errorNumber = 3013)
      BEGIN      		
			SET @error = CONCAT (@error, CHAR(10), CHAR(13), CHAR(10), CHAR(13), 
				'В устройстве резервного копирования отсутствет медиасет полной резервной копии!',
				'Дифференциальное копирование невозможно и будет запущена попытка формирования полной резервной копии.' )		
	  END;	

      EXEC msdb.dbo.sp_send_dbmail
         @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
         @recipients = 'eta.development.dba@yandex.ru',
         @subject = @subject,
         @body = @error; 

      /* Если отсутствует полная резервная копия или поврежден медиасет устройства резервного копирования */      
      IF (@errorNumber = 3013)
      BEGIN      		
        -- включаем считывателей 
        UPDATE [Admin].[User] SET [IsApproved] = 1
        WHERE [Admin].[User].[Id] IN 
        (
	         SELECT [Id] FROM @activeArchiveDownLoader
        );

        EXEC [Programmability].[DoFullBackup];

        RETURN 0;
      END;	

   END CATCH
   
   -- включаем считывателей 
   UPDATE [Admin].[User] SET [IsApproved] = 1
   WHERE [Admin].[User].[Id] IN 
   (
	    SELECT [Id] FROM @activeArchiveDownLoader
   );
   RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[IsApproved]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoDifferentialBackup].[@activeArchiveDownLoader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoFullBackup]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoDifferentialBackup].[@activeArchiveDownLoader]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoDifferentialBackup].[@activeArchiveDownLoader].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="340" />
				<Property Name="Length" Value="2927" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-20-05&#xD;&#xA;-- Update date 2015-08-18&#xD;&#xA;-- Description: Дифференциальное резервное копирование&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.DoDifferentialBackup&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoFullBackup]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   -- снимок активных считывателей архивов 
   DECLARE @activeArchiveDownLoader TABLE 
   (
    [Id] INT
   );
   
   -- отключение активных считывателей архивов на период времени архивации
   UPDATE [Admin].[User] SET [IsApproved] = 0
	 OUTPUT [Inserted].[Id] INTO @activeArchiveDownLoader
   WHERE [RoleId] = 3 AND [IsApproved] = 1;
       
   BEGIN TRY
      BACKUP DATABASE [EnergyTechAudit.PowerAccounting.Database]
      TO [EnergyTechAudit.PowerAccounting.Database.Backup]
      WITH    
         FORMAT, 
         COMPRESSION         
   END TRY 
   BEGIN CATCH

      DECLARE @errorNumber INT = ERROR_NUMBER();      
      DECLARE @error NVARCHAR(128) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
      SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

      DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;   
      DECLARE @subject NVARCHAR(128) = CONCAT
      (
          'Ошибка выполнения полного резервного копирования [Programmability].[DoFullBackup] на сервере ',               
          @serverName
      );

      EXEC msdb.dbo.sp_send_dbmail
         @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
         @recipients = 'eta.development.dba@yandex.ru',
         @subject = @subject,
         @body = @error
   END CATCH

   -- включаем считывателей 
   UPDATE [Admin].[User] SET [IsApproved] = 1
   WHERE [Admin].[User].[Id] IN 
   (
	    SELECT [Id] FROM @activeArchiveDownLoader
   );
      
   RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[IsApproved]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoFullBackup].[@activeArchiveDownLoader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoFullBackup].[@activeArchiveDownLoader]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoFullBackup].[@activeArchiveDownLoader].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="303" />
				<Property Name="Length" Value="1940" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-04&#xD;&#xA;-- Description: Полное резервное копирование&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoFullBackup]&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoIndexesReorganize]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   -- снимок активных считывателей архивов 
   DECLARE @activeArchiveDownLoader TABLE 
   (
    [Id] INT
   );
   
   -- отключение активных считывателей архивов на период времени архивации
   UPDATE [Admin].[User] SET [IsApproved] = 0
	 OUTPUT [Inserted].[Id] INTO @activeArchiveDownLoader
   WHERE [RoleId] = 3 AND [IsApproved] = 1;

   DECLARE @dataBaseName sysname = N'EnergyTechAudit.PowerAccounting.Database';

   DECLARE @tableName sysname;

   DECLARE @tableSchema sysname;

   DECLARE @tableFullName NVARCHAR(1024);

   DECLARE @averageFragmentation FLOAT = 0;

   DECLARE @infoSchemaTableCursor CURSOR;

   BEGIN TRY

     SET @infoSchemaTableCursor = CURSOR FAST_FORWARD READ_ONLY LOCAL FOR
	     SELECT [T].[TABLE_NAME], [T].[TABLE_SCHEMA]
		     FROM INFORMATION_SCHEMA.TABLES T 
		     WHERE [T].[TABLE_CATALOG] = @dataBaseName;	

     OPEN @infoSchemaTableCursor;

     FETCH NEXT FROM @infoSchemaTableCursor INTO @tableName, @tableSchema;

     WHILE @@FETCH_STATUS = 0 
     BEGIN
	     SET @tableFullName = '[' + @tableSchema + '].[' +  @tableName + ']';

	     SELECT @averageFragmentation = AVG([avg_fragmentation_in_percent])
                 FROM [sys].[dm_db_index_physical_stats]
                    ( 
                       DB_ID(@dataBaseName), 
                       OBJECT_ID(@tableFullName), NULL, NULL, NULL
                    )  [A] 
                    JOIN [sys].[indexes] [B]
                       ON [A].[object_id] = [B].[object_id] AND [A].[index_id] = [B].[index_id]
          

	        IF(@averageFragmentation > 30)
	        BEGIN
	          EXEC ('ALTER INDEX ALL ON ' + @tableFullName + ' REORGANIZE;');	
          
          /*EXEC (
				     'ALTER INDEX ALL ON ' + @tableFullName + ' REBUILD WITH 
				     (
				      ONLINE = ON,
				      FILLFACTOR = 80, 
				      SORT_IN_TEMPDB = ON,
				      STATISTICS_NORECOMPUTE = ON
				     );'
			     );*/
	        END
	        ELSE 
	        BEGIN
		       IF(@averageFragmentation >= 5 AND @averageFragmentation <= 30)
		       BEGIN
			      EXEC ('ALTER INDEX ALL ON ' + @tableFullName + ' REORGANIZE;');			
		       END;
	        END;

	     FETCH NEXT FROM @infoSchemaTableCursor INTO @tableName, @tableSchema;
     END;

     CLOSE @infoSchemaTableCursor;
     DEALLOCATE @infoSchemaTableCursor;

    END TRY

    BEGIN CATCH   
       
      DECLARE @errorNumber INT = ERROR_NUMBER();      
      DECLARE @error NVARCHAR(128) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
      SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());
          
      DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;
      DECLARE @subject NVARCHAR(128) = CONCAT
            (
               'Ошибка выполнения процедуры реорганизации индексов [Programmability].[DoIndexesReorganize]  на сервере ',               
               @serverName
            );

      EXEC msdb.dbo.sp_send_dbmail
         @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
         @recipients = 'eta.development.dba@yandex.ru',
         @subject = @subject,
         @body = @error; 

    END CATCH;

   -- включаем считывателей 
   UPDATE [Admin].[User] SET [IsApproved] = 1
   WHERE [Admin].[User].[Id] IN 
   (
	    SELECT [Id] FROM @activeArchiveDownLoader
   );

   RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[sys].[sysname]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[float]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[cursor]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[IsApproved]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[TABLES]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[TABLES].[TABLE_NAME]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[TABLES].[TABLE_CATALOG]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_db_index_physical_stats]" Type="SqlInlineTableValuedFunction" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_db_index_physical_stats].[object_id]" Type="SqlSimpleColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes].[object_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_db_index_physical_stats].[index_id]" Type="SqlSimpleColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[indexes].[index_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_db_index_physical_stats].[avg_fragmentation_in_percent]" Type="SqlSimpleColumn" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoIndexesReorganize].[@activeArchiveDownLoader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoIndexesReorganize].[@activeArchiveDownLoader]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoIndexesReorganize].[@activeArchiveDownLoader].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="326" />
				<Property Name="Length" Value="3844" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-03&#xD;&#xA;-- Description: Реорганизация индексов таблицы [Business].[Archive]&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoIndexesReorganize]   &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoMeasurementDevicePollingInterval]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
    
	/* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

	INSERT INTO @resultSetName VALUES
		(1, 'MainData'),			-- стандартное имя набора для отображения в решетке
		(2, 'ColumnCaption');		-- набор с необязательной расшифровкой расшифровка имен столбцов наборов

	SELECT [ResultSetName].[Order], [ResultSetName].[Name]
		FROM @resultSetName [ResultSetName]
	/**/

	/* 2. Выполнение задачи  */
	DECLARE @rowCountAffected INT = 0;
	DECLARE @statusMessage NVARCHAR(128) = N'Задача не была выполнена';
	DECLARE @errorMessage NVARCHAR(1024) = N'';  
	DECLARE @deliter VARCHAR(4) = ',';

	DECLARE @taskOperation TABLE 
	(
		[Id] INT NOT NULL PRIMARY KEY,
		[StatusMessage] NVARCHAR(128),
		[RowCountAffected] INT,
		[ErrorMessage] NVARCHAR(1024)
	);
     
	 IF(OBJECT_ID('[tempdb].[guest].[DoMeasurementDevicePollingInterval]') IS NULL)
	 BEGIN 
		CREATE TABLE [tempdb].[guest].[DoMeasurementDevicePollingInterval]
		(
			 [Id] INT IDENTITY (1, 1) NOT NULL,

			 [OperationUniqueId] UNIQUEIDENTIFIER NOT NULL,
			 [Reguestor] NVARCHAR(32) NOT NULL,

			 [MeasurementDeviceId] INT NOT NULL,

			 [OriginalValue] INT  NOT NULL,
			 [CurrentValue] INT  NOT NULL,

			 CONSTRAINT PK_Guest_DoMeasurementDevicePollingIntervalOutput_Id PRIMARY KEY ([Id])   
		) ;
	 END;

	-- получим уид последней операции текущего реквестора
	DECLARE @lastOperationUniqueId UNIQUEIDENTIFIER =
    (
		SELECT TOP 1 [OperationUniqueId] 
		FROM [tempdb].[guest].[DoMeasurementDevicePollingInterval] WITH(NOLOCK)
		WHERE [Reguestor] = @userName
    );

	-- уид последней операции найден
	IF (@lastOperationUniqueId IS NOT NULL)
	BEGIN  
		-- если уид последней операции не совпадает с уид-ом текущей операции (формируется на стороне клиента)
		IF (@lastOperationUniqueId <> @operationUniqueId)
		BEGIN
			-- сброс таблицы последних результатов для текущего реквестора			
			DELETE FROM [tempdb].[guest].[DoMeasurementDevicePollingInterval]
			WHERE [Reguestor] = @userName;
		END
		ELSE
		BEGIN
			-- если уид не менялся, то обработка повторно не выполняется, 
			-- но возвращаются результаты предыдущей операции
			GOTO ToOut; 
		END;
	END;
     
  BEGIN TRAN

  BEGIN TRY
	SET NOCOUNT OFF;     
     
    UPDATE [MeasurementDevice] SET [PollingInterval] = @pollingInterval
        
	OUTPUT @operationUniqueId, @userName, inserted.[Id], deleted.[PollingInterval], inserted.[PollingInterval]
    INTO [tempdb].[guest].[DoMeasurementDevicePollingInterval]

	FROM [Business].[MeasurementDevice] [MeasurementDevice]

	WHERE 
		[MeasurementDevice].[DeviceId] IN
		(
			SELECT CONVERT(INT, [Item]) [DeviceId]
			FROM [Business].[StringSplitToArray]  (@deviceIdArray, @deliter)
		) 
		AND 		
		ISNULL([MeasurementDevice].[AccessPointId], 0) IN 
		(
			SELECT DISTINCT([AccessPointLinkBuilding].[AccessPointId]) 
			FROM [Business].[Building] [Building] WITH(NOLOCK)

			INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK)
				ON [Building].[Id] = [AccessPointLinkBuilding].[BuildingId] 

			WHERE [Building].[DistrictId] IN 
			(
				SELECT CONVERT(INT, [Item]) [DistrictId]
				FROM [Business].[StringSplitToArray]  (@districtIdArray, @deliter)
			)  
		)
           
	SET @rowCountAffected = @@ROWCOUNT;
	COMMIT TRAN;
	SET @statusMessage = 'Задача успешно выполнена';      
	SET NOCOUNT ON;
   END TRY
   BEGIN CATCH       
      IF(@@TRANCOUNT > 0) ROLLBACK TRAN;
      SET @errorMessage = ERROR_MESSAGE();
   END CATCH;
   /**/
  
  ToOut: 

   /* Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

   /* 3. Формирование статусной информации задачи */

   IF (@showOutputLinksInfo = 0)
   BEGIN
     
      /* Краткий статус операции (сколько записей затронуто операцией) */
      INSERT INTO @taskOperation 
      VALUES (1, @statusMessage, @rowCountAffected, @errorMessage);
   
      SELECT 
        [TaskOperation].[Id], 
        [TaskOperation].[StatusMessage], 
        [TaskOperation].[RowCountAffected], 
        [TaskOperation].[ErrorMessage]  

      FROM @taskOperation [TaskOperation];

      INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES  
		 ('MainData', 'Id', 'Ид', 1, 1)
        ,('MainData', 'StatusMessage', 'Статус', 1, 2)
        ,('MainData', 'RowCountAffected', 'Затронуто записей', 1, 3)
        ,('MainData', 'ErrorMessage', 'Ошибка', 1, 4)
   END
   ELSE
   BEGIN

    /* Список устройств затронутых изменениями */
	SELECT 
		ROW_NUMBER() OVER (ORDER BY [ProcessingResult].[MeasurementDeviceId]) [Id],
		[ProcessingResult].[MeasurementDeviceId] [MeasurementDeviceId],

		[City].[Description] [CityDescription],
		[District].[Description] [DistrictDescription],
		[Building].[FullAddress] [BuildingDescription],
		[MeasurementDevice].[Description] [MeasurementDeviceDescription],
		
		[ProcessingResult].[OriginalValue] [OriginalValue],
		[ProcessingResult].[CurrentValue] [CurrentValue]

	FROM  [tempdb].[guest].[DoMeasurementDevicePollingInterval] [ProcessingResult] WITH(NOLOCK) 
		
	INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
		ON [MeasurementDevice].[Id] = [ProcessingResult].[MeasurementDeviceId]

	INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK) 
		ON [AccessPoint].[Id] = [MeasurementDevice].[AccessPointId]

	INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK)
		ON [AccessPointLinkBuilding].[AccessPointId] = [AccessPoint].[Id]

	INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
		ON [Building].[Id] = [AccessPointLinkBuilding].[BuildingId]

	INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
		ON [District].[Id] = [Building].[DistrictId]
	
	INNER JOIN [Dictionaries].[City] [City] WITH(NOLOCK)
		ON [City].[Id] = [District].[CityId]

	WHERE 
		[ProcessingResult].[OperationUniqueId] = @operationUniqueId AND 
		[ProcessingResult].[Reguestor] = @userName;

    INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES  
        ('MainData', 'Id', 'Ид', 0, 1),		    
        ('MainData', 'MeasurementDeviceId', 'Ид. устройства', 0, 2),  
		      
        ('MainData', 'CityDescription', 'Населенный пункт', 1, 3),
        ('MainData', 'DistrictDescription', 'Район', 1, 4),
        ('MainData', 'BuildingDescription', 'Строение', 1, 5),
		('MainData', 'MeasurementDeviceDescription', 'Устройство', 1, 6),

        ('MainData', 'OriginalValue', 'Исходное значение', 1, 7),
        ('MainData', 'CurrentValue', 'Текущее значение', 1, 8);        
  END;
  	  			
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@resultSetName].[Name]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@operationUniqueId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[PollingInterval]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@pollingInterval]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@deviceIdArray]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@districtIdArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@showOutputLinksInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[StatusMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[RowCountAffected]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[ErrorMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Order]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[StatusMessage]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[RowCountAffected]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@taskOperation].[ErrorMessage]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1024" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@operationUniqueId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@deviceIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@districtIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@pollingInterval]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMeasurementDevicePollingInterval].[@showOutputLinksInfo]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="7275" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[DoMeasurementDevicePollingInterval]&#xD;&#xA;   @userName NVARCHAR(32),&#xD;&#xA;   @operationUniqueId UNIQUEIDENTIFIER,   &#xD;&#xA;&#xD;&#xA;   @deviceIdArray NVARCHAR(1024), &#xD;&#xA;   @districtIdArray NVARCHAR(1024),&#xD;&#xA;   @pollingInterval INT,    &#xD;&#xA;   @showOutputLinksInfo BIT = 1&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoMemoryPressure]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  BEGIN TRY    

      DECLARE @maxMemory INT = 
      (
	      SELECT [physical_memory_kb] / 1024 FROM [sys].[dm_os_sys_info]
      );
           
      -- CHECKPOINT;
           
      DECLARE @minMemory  INT;

      SET @minMemory = CAST( (@maxMemory * @minBound) AS INT);

      EXEC sp_configure  'max server memory', @minMemory
        
      RECONFIGURE WITH OVERRIDE;

      WAITFOR DELAY @delay;

      SET @minMemory = CAST( ( @maxMemory * @maxBound ) AS INT);

      EXEC sp_configure  'max server memory', @minMemory

      RECONFIGURE WITH OVERRIDE;
      
      -- DBCC DROPCLEANBUFFERS;
      -- CHECKPOINT;
  END TRY
  BEGIN CATCH

    DECLARE @errorNumber INT = ERROR_NUMBER();      
    DECLARE @error NVARCHAR(256) = CONCAT( ERROR_MESSAGE(), ' ', 'Код ошибки: ', @errorNumber);      
    SET @error = CONCAT( @error, CHAR(13), 'Время возникновения ошибки на сервере: ', GETDATE());

    DECLARE @serverName  NVARCHAR(128) = @@SERVERNAME;

    DECLARE @subject NVARCHAR(256) = CONCAT
    (
        'Ошибка выполнения процедуры опрессовки памяти SQL SERVER на сервере ',               
        @serverName
    );
            
    EXEC msdb.dbo.sp_send_dbmail
        @profile_name = 'EnergyTechAudit.PowerAccounting.Database.MailProfile',
        @recipients = 'eta.development.dba@yandex.ru',
        @subject = @subject,
        @body = @error
    
    RETURN @@ERROR; 

  END CATCH;    
  
  RETURN 0;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_os_sys_info]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[dm_os_sys_info].[physical_memory_kb]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMemoryPressure].[@minBound]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_configure]" Type="SqlProcedure" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMemoryPressure].[@delay]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoMemoryPressure].[@maxBound]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMemoryPressure].[@minBound]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMemoryPressure].[@maxBound]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Precision" Value="53" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[float]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoMemoryPressure].[@delay]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['00:03:00']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="298" />
				<Property Name="Length" Value="1921" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2016-12-21&#xD;&#xA;-- Description: Cброс памяти SQL Server&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[DoMemoryPressure] &#xD;&#xA;  @minBound FLOAT,&#xD;&#xA;  @maxBound FLOAT,&#xD;&#xA;  @delay VARCHAR(32) = '00:03:00'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[DoUserLinkChannel]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 
BEGIN
   SET NOCOUNT ON;
    	
   /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName VALUES
	  (1, 'MainData'),			-- стандартное имя набора для отображения в решетке
	  (2, 'ColumnCaption');		-- набор с необязательной расшифровкой расшифровка имен столбцов наборов

  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	  FROM @resultSetName [ResultSetName]
  /**/

  /* 2. Выполнение задачи  */
  DECLARE @rowCountAffected INT = 0;
  DECLARE @statusMessage NVARCHAR(128) = N'Задача не была выполнена';
  DECLARE @errorMessage NVARCHAR(1024) = N'';  
  DECLARE @deliter VARCHAR(4) = ',';

  DECLARE @taskOperation TABLE 
  (
      [Id] INT NOT NULL PRIMARY KEY,
      [StatusMessage] NVARCHAR(128),
      [RowCountAffected] INT,
      [ErrorMessage] NVARCHAR(1024)
  );
     
	 IF(OBJECT_ID('[tempdb].[guest].[DoUserLinkChannelOutput]') IS NULL)
	 BEGIN 
		CREATE TABLE [tempdb].[guest].[DoUserLinkChannelOutput]
		(
			 [Id] INT IDENTITY (1, 1) NOT NULL,

			 [OperationUniqueId] UNIQUEIDENTIFIER NOT NULL,
			 [Reguestor] NVARCHAR(32) NOT NULL,

			 [UserId] INT NOT NULL,
			 [ChannelId] INT NOT NULL,

			 CONSTRAINT PK_Guest_DoUserLinkChannelOutput_Id PRIMARY KEY ([Id])   
		) ;
	 END;

	-- получим уид последней операции текущего реквестора
	DECLARE @lastOperationUniqueId UNIQUEIDENTIFIER =
    (
		SELECT TOP 1 [OperationUniqueId] 
		FROM [tempdb].[guest].[DoUserLinkChannelOutput] WITH(NOLOCK)
		WHERE [Reguestor] = @userName
    );

	-- уид последней операции найден
	IF (@lastOperationUniqueId IS NOT NULL)
	BEGIN  
		-- если уид последней операции не совпадает с уид-ом текущей операции (формируется на стороне клиента)
		IF (@lastOperationUniqueId <> @operationUniqueId)
		BEGIN
			-- сброс таблицы последних результатов для текущего реквестора			
			DELETE FROM [tempdb].[guest].[DoUserLinkChannelOutput]
			WHERE [Reguestor] = @userName;
		END
		ELSE
		BEGIN
			-- если уид не менялся, то обработка повторно не выполняется, 
			-- но возвращаются результаты предыдущей операции
			GOTO ToOut; 
		END;
	END;
     
  BEGIN TRAN

  BEGIN TRY
     SET NOCOUNT OFF;

	 DECLARE @startWatch DATETIME = GETDATE();

     -- присоединение устройств к пользователю
     IF(@operationType = 1)
     BEGIN
		-- using Briefcase 
		IF(@useBriefcase = 1)
		BEGIN
			INSERT INTO [Business].[UserLinkChannel] ([UserId], [ChannelId])        
			OUTPUT @operationUniqueId, @userName, inserted.[UserId], inserted.[ChannelId]
			INTO [tempdb].[guest].[DoUserLinkChannelOutput]
			SELECT  CONVERT(INT, [Item])  [UserId], [BriefcaseChannels].[ChannelId] [ChannelId]    
			FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
			CROSS JOIN
			(
				SELECT 
					[BriefcaseItem].[EntityId] [ChannelId]     
				FROM [Core].[BriefcaseItem] [BriefcaseItem] 
					INNER JOIN [Core].[Briefcase] [Briefcase] ON [BriefcaseItem].[BriefcaseId] = [Briefcase].[Id]
				WHERE 
					[Briefcase].[Id] = @briefcaseId AND 
					[BriefcaseItem].[EntityTypeName] = 'Channel' AND 
					EXISTS 
					(
						SELECT [Channel].[Id] 
						FROM [Business].[Channel] [Channel] 
						WHERE [Channel].[Id] = [BriefcaseItem].[EntityId] AND [Channel].[Activated] = 1
					)
			) [BriefcaseChannels]
			EXCEPT            
			SELECT [Link].[UserId], [Link].[ChannelId]
			FROM [Business].[UserLinkChannel] [Link] 
			WHERE [Link].[UserId] IN 
			(
				SELECT CONVERT(INT, [Item]) [UserId]
				FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
			)
		END
		ELSE
		BEGIN
			INSERT INTO [Business].[UserLinkChannel] ([UserId], [ChannelId])        
			OUTPUT @operationUniqueId, @userName, inserted.[UserId], inserted.[ChannelId]
			INTO [tempdb].[guest].[DoUserLinkChannelOutput]
			  SELECT  CONVERT(INT, [Item]) [UserId], [UserLink].[ChannelId]
				FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)            
						  CROSS JOIN
						  (                 
							SELECT [Ch].[Id] [ChannelId]
              
							FROM [Business].[Channel] [Ch] WITH(NOLOCK)
							  INNER JOIN [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
							  ON [Md].[Id] = [Ch].[MeasurementDeviceId]

							WHERE 
                          
							  /* только активизированные каналы */
							  [Ch].[Activated] = 1 AND
                          
							  /* районы и организации */
							  ISNULL([Md].[AccessPointId], 0) IN 
							  (
								  SELECT DISTINCT([BuildingLink].[AccessPointId]) 
								  FROM [Business].[Building] [Building] WITH(NOLOCK)

								  INNER JOIN Business.AccessPointLinkBuilding [BuildingLink] WITH(NOLOCK)
									 ON [Building].[Id] = [BuildingLink].[BuildingId] 

								  WHERE [Building].[DistrictId] IN 
									 (
										SELECT CONVERT(INT, [Item]) [DistrictId]
										FROM [Business].[StringSplitToArray]  (@districtIdArray, @deliter)
									 ) AND 

									 ISNULL([Building].[OrganizationId], 0) IN
													 (
														  SELECT CONVERT(INT, [Item]) [OrganizarionId]
														  FROM [Business].[StringSplitToArray] (@organizationIdArray, @deliter)
													 )
							   )/**/

							   /* типы измерительных устройств */
							   AND                            
							   [Md].[DeviceId] IN 
							   (
								  SELECT CONVERT(INT, [Item]) [DeviceId]
								  FROM [Business].[StringSplitToArray]  (@deviceIdArray, @deliter)
							   )/**/

							   /* типы ресурсных систем */
							   AND 
							   [Ch].[ResourceSystemTypeId] IN 
							   (
								  SELECT CONVERT(INT, [Item]) [ResourceSystemTypeId]
								  FROM [Business].[StringSplitToArray]  (@resourceSystemTypeIdArray, @deliter)
							   )/**/
				)[UserLink]
                        
				EXCEPT
            
				-- исключим из выборки уже существующие аналогичные ссылки
				SELECT [Link].[UserId], [Link].[ChannelId]
				FROM [Business].[UserLinkChannel] [Link] 
				WHERE [Link].[UserId] IN 
				(
					SELECT CONVERT(INT, [Item]) [UserId]
					FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
				)
			END;
      END
      -- отсоединение устройств от пользователя
     ELSE IF(@operationType = 2)
     BEGIN
		-- using Briefcase 
		IF(@useBriefcase = 1)
		BEGIN
			DELETE [UserLinkChannel]         
			OUTPUT @operationUniqueId, @userName, deleted.[UserId], deleted.[ChannelId]  
			INTO [tempdb].[guest].[DoUserLinkChannelOutput]        
			FROM [Business].[UserLinkChannel] [UserLinkChannel]
			WHERE [UserLinkChannel].[UserId] IN 
				(
					SELECT CONVERT(INT, [Item]) [UserId]
					FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
				)
				AND [UserLinkChannel].[ChannelId] IN
				(
					SELECT       
					[BriefcaseItem].[EntityId] [ChannelId] 
    
					FROM [Core].[BriefcaseItem] [BriefcaseItem] 
						INNER JOIN [Core].[Briefcase] [Briefcase] ON [BriefcaseItem].[BriefcaseId] = [Briefcase].[Id]
					WHERE [Briefcase].[Id] = @briefcaseId AND [BriefcaseItem].[EntityTypeName] = 'Channel'	
				);
		END
		ELSE
		BEGIN 
			DELETE [Link] 
        
			OUTPUT @operationUniqueId, @userName, deleted.[UserId], deleted.[ChannelId]  
			INTO [tempdb].[guest].[DoUserLinkChannelOutput]
        
			FROM [Business].[UserLinkChannel] [Link]

			WHERE 
				[Link].[UserId] IN 
				(
					SELECT CONVERT(INT, [Item]) [UserId]
					FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
				)
				AND 
				[Link].[ChannelId] IN
				(
				   SELECT [Ch].[Id] 

				   FROM [Business].[Channel] [Ch] WITH(NOLOCK)

				   INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType]
					  ON [ResourceSystemType].[Id] = [Ch].[ResourceSystemTypeId]

				   INNER JOIN [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
					  ON [Md].[Id] = [Ch].[MeasurementDeviceId]

				   INNER JOIN [Business].[AccessPoint] [AP] WITH(NOLOCK)
					  ON [Md].[AccessPointId] = [AP].[Id]

				   INNER JOIN [Business].[AccessPointLinkBuilding] [ApBL] WITH(NOLOCK)
					  ON [AP].[Id] = [ApBL].[AccessPointId]

				   INNER JOIN [Business].[Building] [B] WITH(NOLOCK)
					  ON [B].[Id] = [ApBL].[BuildingId]

				   WHERE 
				   /* операция затрагивает только активизированные каналы */
				   [Ch].[Activated] = 1 AND

				   [Md].[DeviceId] IN 
						 (
							SELECT CONVERT(INT, [Item]) [DeviceId]
							FROM [Business].[StringSplitToArray]  (@deviceIdArray, @deliter)
						 ) AND 
				   [B].[DistrictId] IN 
				   (
					  SELECT CONVERT(INT, [Item]) [DistrictId]
					  FROM [Business].[StringSplitToArray]  (@districtIdArray, @deliter)
				   ) AND 
				   ISNULL([B].[OrganizationId], 0) IN
				   (
					  SELECT CONVERT(INT, [Item]) [OrganizationId]
					  FROM [Business].[StringSplitToArray] (@organizationIdArray, @deliter)
				   )
				   AND
				   [Ch].[ResourceSystemTypeId] IN 
				   (
					  SELECT CONVERT(INT, [Item]) [ResourceSystemTypeId]
					  FROM [Business].[StringSplitToArray]  (@resourceSystemTypeIdArray, @deliter)
				   )
				);
			END; 
      END
	  -- detatch all inactive channels or all channels
	  ELSE IF(@operationType = 3 OR @operationType = 4)
	  BEGIN
		DELETE [UserLinkChannel]         
			OUTPUT @operationUniqueId, @userName, deleted.[UserId], deleted.[ChannelId]  
			INTO [tempdb].[guest].[DoUserLinkChannelOutput]        
			FROM [Business].[UserLinkChannel] [UserLinkChannel]
			WHERE [UserLinkChannel].[UserId] IN 
				(
					SELECT CONVERT(INT, [Item]) [UserId]
					FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
				)
				AND [UserLinkChannel].[ChannelId] IN
				(
					SELECT [Channel].[Id] 
					FROM [Business].[Channel] [Channel] WITH (NOLOCK) 
					WHERE [Channel].Activated = 0 OR @operationType = 4				
				);					
	  END;
	  

	  SET @rowCountAffected = @@ROWCOUNT;

	  /**/
	  DECLARE @userId INT;
	  DECLARE @roleCode NVARCHAR(64);

	  EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

	  DECLARE @actionParameter XML =
	  (
		SELECT   
			@rowCountAffected [RowCountAffected],
			(
				SELECT [User].[Id], [User].[UserName] FROM [Admin].[User] [User] WHERE [User].[Id] IN 
				(
					SELECT CONVERT(INT, [Item]) [Id]
					FROM [Business].[StringSplitToArray]  (@userIdArray, @deliter)
				) FOR XML AUTO, ELEMENTS, TYPE, ROOT('Users')
			), 
			(
				SELECT [Device].[Id], [Device].[Code] FROM [Dictionaries].[Device] [Device] WHERE [Device].[Id] IN 
				(
					SELECT CONVERT(INT, [Item]) [Id]
					FROM [Business].[StringSplitToArray]  (@deviceIdArray, @deliter)
				) FOR XML AUTO, ELEMENTS, TYPE, ROOT('Devices')
			),
			(
				SELECT [District].[Id], [District].[CityId], [District].[Description], [City].[Description] FROM [Dictionaries].[District] [District]
				INNER JOIN [Dictionaries].[City] [City] ON [District].[CityId] = [City].[Id]
				 WHERE [District].[Id] IN 
				(
					SELECT CONVERT(INT, [Item]) [Id]
					FROM [Business].[StringSplitToArray]  (@districtIdArray, @deliter)
				) FOR XML AUTO, ELEMENTS, TYPE, ROOT('Districts')
			),
			(
				SELECT [Organization].[Id], [Organization].[Description] FROM [Business].[Organization] [Organization] WHERE [Organization].[Id] IN 
				(
					SELECT CONVERT(INT, [Item]) [Id]
					FROM [Business].[StringSplitToArray]  (@organizationIdArray, @deliter)
				) FOR XML AUTO, ELEMENTS, TYPE, ROOT('Organizations')
			),
			(
				SELECT [ResourceSystemType].[Id], [ResourceSystemType].[Code] FROM [Dictionaries].[ResourceSystemType] [ResourceSystemType] WHERE [ResourceSystemType].[Id] IN 
				(
					SELECT CONVERT(INT, [Item]) [Id]
					FROM [Business].[StringSplitToArray]  (@resourceSystemTypeIdArray, @deliter)
				) FOR XML AUTO, ELEMENTS, TYPE, ROOT('ResourceSystemTypes')
			)
			FOR XML PATH('RequestParams')
		);

	  INSERT INTO [Admin].[Audit] 
	  (
		[Area],  
		[Controller],  
		[Action],	
		[UserId],	
		[Time],
		[Elapsed],  
		[ActionParams] 
	  )	  
	  VALUES('InternalSqlServer', 'DoUserLinkChannel',  IIF(@operationType = 1, 'AttachUserLinkChannel', 'DetachUserLinkChannel'),  @userId, GETDATE(), DATEDIFF(ms, @startWatch, GETDATE()), CAST( @actionParameter AS NVARCHAR(MAX) ) );

	  /**/

      
      COMMIT TRAN;
      SET @statusMessage = 'Задача успешно выполнена';      
      SET NOCOUNT ON;
   END TRY
   BEGIN CATCH       
      IF(@@TRANCOUNT > 0) ROLLBACK TRAN;
      SET @errorMessage = ERROR_MESSAGE();
   END CATCH;
   /**/
  
  ToOut: 

   /* Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

   /* 3. Формирование статусной информации задачи */

   IF (@showOutputLinksInfo = 0)
   BEGIN
     
      /* Краткий статус операции (сколько записей затронуто операцией) */
      INSERT INTO @taskOperation 
      VALUES (1, @statusMessage, @rowCountAffected, @errorMessage);
   
      SELECT 
        [TaskOperation].[Id], 
        [TaskOperation].[StatusMessage], 
        [TaskOperation].[RowCountAffected], 
        [TaskOperation].[ErrorMessage]  

      FROM @taskOperation [TaskOperation];

      INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES  
		 ('MainData', 'Id', 'Ид', 1, 1)
        ,('MainData', 'StatusMessage', 'Статус', 1, 2)
        ,('MainData', 'RowCountAffected', 'Затронуто записей', 1, 3)
        ,('MainData', 'ErrorMessage', 'Ошибка', 1, 4)
   END
   ELSE
   BEGIN

     /* Полный список присоединенных или отсоединенных ссылок */
     SELECT 
		ROW_NUMBER() OVER (ORDER BY [ProcessingResult].[ChannelId], [ProcessingResult].[UserId]) [Id],
	  
		[ProcessingResult].[ChannelId] [ChannelId],
		[ProcessingResult].[UserId] [UserId],

		[City].[Description] [CityDescription],
		[District].[Description] [DistrictDescription],
		[Building].[FullAddress] [BuildingDescription],

		[User].[Description] [UserDescription],
		[Channel].[Description] [ChannelDescription]

     FROM  [tempdb].[guest].[DoUserLinkChannelOutput] [ProcessingResult] WITH(NOLOCK) 

     INNER  JOIN [Admin].[User] [User] WITH(NOLOCK) 
        ON [User].[Id] = [ProcessingResult].[UserId]

     INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) 
        ON [Channel].[Id] = [ProcessingResult].[ChannelId] 

     INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK) 
        ON [Placement].[Id] = [Channel].[PlacementId]

     INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
        ON [Building].[Id] = [Placement].[BuildingId]
	
	 INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
		ON [District].[Id] = [Building].[DistrictId]
	
	 INNER JOIN [Dictionaries].[City] [City] WITH(NOLOCK)
		ON [City].[Id] = [District].[CityId]				
    WHERE 
      [ProcessingResult].[OperationUniqueId] = @operationUniqueId AND 
      [ProcessingResult].[Reguestor] = @userName;

    INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES  
        ('MainData', 'Id', 'Ид', 0, 1),		    
        ('MainData', 'ChannelId', 'Ид. канала', 0, 2),
        ('MainData', 'UserId', 'Ид. пользователя', 0, 3),
		
		('MainData', 'CityDescription', 'Населенный пункт', 1, 4),
        ('MainData', 'DistrictDescription', 'Район', 1, 5),
        ('MainData', 'BuildingDescription', 'Строение', 1, 6),
		('MainData', 'ChannelDescription', 'Канал', 1, 7),
        ('MainData', 'UserDescription', 'Пользователь', 1, 8)
  END;
  	  			
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@userIdArray]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@deviceIdArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@districtIdArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@organizationIdArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@resourceSystemTypeIdArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@resultSetName].[Name]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@operationUniqueId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@operationType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@useBriefcase]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Briefcase]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[BriefcaseId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Briefcase].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@briefcaseId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Activated]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Activated]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[BriefcaseId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Briefcase].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[BriefcaseItem].[EntityTypeName]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Activated]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry />
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Activated]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Area]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Controller]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Action]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Elapsed]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[ActionParams]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@showOutputLinksInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[StatusMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[RowCountAffected]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[ErrorMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Order]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry />
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoUserLinkChannel].[@taskOperation]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[StatusMessage]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[RowCountAffected]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@taskOperation].[ErrorMessage]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="1024" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoUserLinkChannel].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[DoUserLinkChannel].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[DoUserLinkChannel].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@operationUniqueId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@operationType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@userIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@deviceIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@districtIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@organizationIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@resourceSystemTypeIdArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@showOutputLinksInfo]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@useBriefcase]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[DoUserLinkChannel].[@briefcaseId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="16276" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[DoUserLinkChannel]&#x9;&#xD;&#xA;   @userName NVARCHAR(32),&#xD;&#xA;&#xD;&#xA;   @operationUniqueId UNIQUEIDENTIFIER,&#xD;&#xA;   @operationType INT,&#xD;&#xA;   @userIdArray NVARCHAR(1024),&#xD;&#xA;   @deviceIdArray NVARCHAR(1024), &#xD;&#xA;   @districtIdArray NVARCHAR(1024),&#xD;&#xA;   @organizationIdArray NVARCHAR(1024),&#xD;&#xA;   @resourceSystemTypeIdArray NVARCHAR(1024),&#xD;&#xA;   @showOutputLinksInfo BIT = 1,&#xD;&#xA;   @useBriefcase BIT = 0,&#xD;&#xA;   @briefcaseId INT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[EncryptData]">
			<Property Name="BodyScript">
				<Value><![CDATA[ 
BEGIN
  BEGIN TRY
    OPEN SYMMETRIC KEY  [EnergyTechAudit.PowerAccounting.Database.SymmetricKey] 
      DECRYPTION BY CERTIFICATE [EnergyTechAudit.PowerAccounting.Database.Certificate];

    SET @encryptedText = ENCRYPTBYKEY(KEY_GUID(N'[EnergyTechAudit.PowerAccounting.Database.SymmetricKey]'), @clearText);

    CLOSE SYMMETRIC KEY [EnergyTechAudit.PowerAccounting.Database.SymmetricKey];
  END TRY
  BEGIN CATCH
    SET @encryptedText = NULL;
    CLOSE SYMMETRIC KEY [EnergyTechAudit.PowerAccounting.Database.SymmetricKey];
    RETURN -1;
  END CATCH
  
  RETURN 0;
END]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.SymmetricKey]" />
				</Entry>
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.Certificate]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[EncryptData].[@encryptedText]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[EncryptData].[@clearText]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[EncryptData].[@clearText]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[EncryptData].[@encryptedText]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varbinary]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="734" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[EncryptData]&#xD;&#xA;  @clearText VARBINARY(MAX), &#xD;&#xA;  @encryptedText VARBINARY(MAX) OUT&#xD;&#xA;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetAccountingParamSheet]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN   
   SET NOCOUNT ON;
  
   SET XACT_ABORT ON;

   BEGIN TRY

      /* все выборки в составе хранимой процедуры имеют статус "грязных" */
      SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

      BEGIN TRANSACTION;

      DECLARE @measurementDeviceId INT = 
      (
        SELECT TOP(1) [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );

	    DECLARE @deviceId INT;
	    DECLARE @deviceCode NVARCHAR(64);
      
      SELECT TOP(1) 
        @deviceId = [MeasurementDevice].[DeviceId], 
        @deviceCode = [Device].[Code]
      
      FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)

      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
        ON [MeasurementDevice].[DeviceId] = [Device].[Id]

      WHERE [MeasurementDevice].[Id] = @measurementDeviceId
      

      /* Обнуление временной части */
	  IF NOT(@periodTypeId = 2 AND (@deviceCode = 'EK270' OR @deviceCode = 'Irvis' OR @deviceCode = 'VIST'))
	  BEGIN
      SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME);
      SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME);
	  END;

	  /* Коррекция времени в стиле архивного времени модели прибора (например, Взлет имеет вид 01.03.2015 23:59:59)*/
	   EXEC [Programmability].[CorrectArchiveTime] @periodTypeId, @deviceId, @measurementDeviceId, @periodBegin OUTPUT, @periodEnd OUTPUT

     IF(@includePeriodEnd = 1 AND @deviceCode <> 'TV7' AND @deviceCode <> 'Elf')
      BEGIN 
         SET @periodEnd = DATEADD (day , 1, @periodEnd);
      END;

	  IF(@includePeriodEnd = 0 AND (@deviceCode = 'VZLJOT_024' OR @deviceCode = 'VZLJOT_024M' OR @deviceCode = 'VZLJOT_026M'))
      BEGIN 
         SET @periodEnd = DATEADD (day , 1, @periodEnd);
      END;

	  IF (@periodTypeId = 3 AND (@deviceCode = 'Spt943' OR @deviceCode = 'Spt941_10_11' OR @deviceCode = 'Spt941_20'))
      BEGIN
         SET @periodEnd = DATEADD (day , 1, @periodEnd);
      END;

	  IF (@periodTypeId = 2 AND (@deviceCode = 'Spt943' OR @deviceCode = 'Spt941_10_11' OR @deviceCode = 'Spt941_20' OR @deviceCode = 'EK270' OR @deviceCode = 'Irvis' OR @deviceCode = 'Pramer710'))
      BEGIN
         SET @periodEnd = DATEADD (hour , 1, @periodEnd);
      END;
     
 
    /* Поиск ближайшей даты к @periodBegin (т.к. не всегда на заданную дату есть архивная запись) */
     DECLARE @realPeriodBegin DATETIME = (SELECT TOP 1 [Archive].[Time] FROM [Business].[Archive] [Archive] WITH(NOLOCK) 
         INNER JOIN [Business].[MeasurementDevice] [Device] WITH(NOLOCK) 
           ON [Device].[Id] = @measurementDeviceId AND [Device].[Id] = [Archive].[MeasurementDeviceId]

         INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
           ON [Channel].[Id] = @channelId AND [Channel].[MeasurementDeviceId] = [Device].[Id]
         
         INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK)
            ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]

         INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH(NOLOCK)
            ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
         
         INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] WITH(NOLOCK)
            ON [Map].[DeviceParameterId] = [DeviceParameter].[Id] 
               AND [Map].[ChannelTemplateId] = [ChannelTemplate].[Id]
               AND [Map].[PeriodTypeId] = @periodTypeId

       WHERE [Archive].[PeriodTypeId] = @periodTypeId AND [Archive].[Time] >= @periodBegin
       ORDER BY [Archive].[Time] ASC)

      /* Если на дату @periodBegin нет архивов, то корректируем на ту, с которой действительно начинаются архивы */
      IF (@periodBegin <> @realPeriodBegin)
      BEGIN
         IF (@periodTypeId = 3)
         BEGIN
            IF(@deviceCode = 'Mercury230' OR @deviceCode = 'Mercury234')
            BEGIN
              SET @periodBegin = @realPeriodBegin
            END
            ELSE
            BEGIN
              SET @periodBegin = DATEADD (day,  1, @realPeriodBegin)
            END
         END
        
         IF (@periodTypeId = 2)
         BEGIN
		    IF(@deviceCode = 'KM5' OR @deviceCode = 'RM5')
			BEGIN
			  SET @periodBegin = @realPeriodBegin
			END
			ELSE
			BEGIN
              SET @periodBegin = DATEADD (hour, 1, @realPeriodBegin)
            END
         END
      END

      /* Сдвиг для безынтеграции накопительных значений */
	  IF (@deviceCode <> 'VZLJOT_033-034' AND @deviceCode <> 'VZLJOT_024' AND @deviceCode <> 'VZLJOT_024M' 
	      AND @deviceCode <> 'VZLJOT_026M' AND @deviceCode <> 'VKT9')
	  BEGIN
		IF (@periodTypeId = 3)
		BEGIN
			SET @periodBegin = DATEADD (day , -1, @periodBegin);
		END
      
		IF (@periodTypeId = 2 AND @deviceCode <> 'EK270' AND @deviceCode <> 'Irvis' AND @deviceCode <> 'VKT7' AND @deviceCode <> 'Pulsar2M' AND @deviceCode <> 'VZLJOT_043' AND @deviceCode <> 'VZLJOT_025'
		                      AND @deviceCode <> 'KM5' AND @deviceCode <> 'RM5' AND @deviceCode <> 'EskoTm3E' AND @deviceCode <> 'VIST')
		BEGIN
			SET @periodBegin = DATEADD (hour, -1, @periodBegin);
		END
	  END
   
      /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
      DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

      INSERT INTO @resultSetName VALUES
         (1, 'ReportParameter'),
         (2, 'ReportFieldInfo'),
         (3, 'MainData'),
         (4, 'SummaryData');

      IF (@deviceCode = 'KM5' OR @deviceCode = 'RM5')
      BEGIN
          INSERT INTO @resultSetName VALUES
            (5, 'ErrorsData')     
		  INSERT INTO @resultSetName VALUES
		    (6, 'DynamicParameters')
      END

      SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName]
      /**/

      /* 2. Проверка соотвествия принадлежность прибора пользователю */
      DECLARE @userId  INT;    
      DECLARE @roleCode NVARCHAR(64);

      EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

     -- если пользователю не принадлежит прибор 
     IF(NOT EXISTS(SELECT 1 FROM [Business].[UserLinkChannel] [Link] WITH(NOLOCK) WHERE [Link].[UserId] = @userId AND [Link].[ChannelId] = @channelId))
     BEGIN    
        DECLARE @errorPermissionMsg  NVARCHAR(2048) 
         = [Programmability].[GetSysMessage](297, 1033);
        -- то возбуждаем исключение с сообщением 297                 
        THROW 500001, @errorPermissionMsg, 1;
     END;
     
      /**/

     /* 3. Отбор параметров архива в соответствии с типом прибора */
     -- код типа устройства
     
     -- проверка существования шаблона канала
     IF(NOT EXISTS (SELECT 1 FROM [Business].[Channel] [Channel] WITH (NOLOCK)
          INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
        WHERE [Channel].[Id] = @channelId)
     )
     BEGIN
      ;THROW 500001, N'Не назначен шаблон канала', 1;
     END;

     -- таблица со списком параметров в соответствии с типом прибора 
     DECLARE @deviceParameterCodePull [Programmability].[CodePullTableType];
            
     INSERT INTO @deviceParameterCodePull 		    
	      SELECT   
          [Parameter].[Id] [Id],
          [Parameter].[Code] [Code]
          FROM [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK)
              INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] WITH (NOLOCK)
              ON [Parameter].[Id] = [Map].[ParameterId] AND [Map].[PeriodTypeId] = @periodTypeId 
              INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
              ON [ChannelTemplate].[Id] = [Map].[ChannelTemplateId]
              INNER JOIN [Business].[Channel]  WITH (NOLOCK)
              ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id] AND [Channel].[Id] = @channelId
          WHERE [Channel].[MeasurementDeviceId] = @measurementDeviceId
     
     -- проверка наличия параметров из матрицы сопоставления
     IF(NOT EXISTS(SELECT 1 FROM @deviceParameterCodePull))
     BEGIN
        ;THROW 500001, N'Отсутствуют параметры в матрице сопоставленния параметров.', 1;
     END
    
     -- собираем строку со списком параметров отчета для возможности динамического из разворота 
     DECLARE @deviceParameterCodeFields NVARCHAR(MAX) = '';  
     DECLARE @deviceParameterCodeFieldsWithNext NVARCHAR(MAX) = '';  

     SELECT 
       @deviceParameterCodeFields = 
         @deviceParameterCodeFields 
           + CONCAT('[', [D].[Code], ']') + ', ',

       @deviceParameterCodeFieldsWithNext = 
         @deviceParameterCodeFieldsWithNext 
           + CONCAT('[', [D].[Code], ']') + ', '
           + CONCAT('LEAD([', [D].[Code], ']) OVER(ORDER BY [Time]) [', [D].[Code], '.Next', ']') + ','   

     FROM @deviceParameterCodePull [D];

     SET @deviceParameterCodeFields = LEFT(@deviceParameterCodeFields, LEN(@deviceParameterCodeFields) - 1);
     SET @deviceParameterCodeFieldsWithNext = LEFT(@deviceParameterCodeFieldsWithNext, LEN(@deviceParameterCodeFieldsWithNext) - 1);
  
     /**/

      /* 4. Формирование таблицы параметрии отчета*/
      DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
      INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (SELECT             
               
               CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode],
			   CAST([Md].[SubModel] AS NVARCHAR(128)) [DeviceSubModel],
			   CAST([Md].[Id] AS NVARCHAR(128)) [MeasurementDeviceId],
			   CAST([D].[IsIntegralArchiveValue] AS NVARCHAR(128)) [IsIntegralArchiveValue],
               CAST([District].[Description] AS NVARCHAR(128)) [District],
               CAST([Building].[FullAddress] AS NVARCHAR(128)) [FullAddress],
			   CAST([Building].[Description] AS NVARCHAR(128)) [BuildingDescription],			   
			   CAST([Building].[BuildingPurposeId] AS NVARCHAR(128)) [BuildingPurposeId],
			   CAST ([BuildingPurpose].[Code] AS NVARCHAR(128) ) [BuildingPurposeCode],

               CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber],
               CAST([ResourceSystemType].[Code] AS NVARCHAR(128)) [ResourceSystemTypeCode],
			   CAST(ISNULL([ResourceSubsystemType].[Code], 'NULL') AS NVARCHAR(128)) [ResourceSubsystemTypeCode],
			   CAST(ISNULL([ResourceSubsystemType].[Description], 'NULL') AS NVARCHAR(128)) [ResourceSubsystemTypeDescription],
               CAST([D].[ShortName] AS NVARCHAR(128)) [DeviceShortName],
			   CAST([Channel].[ChannelTemplateId] AS NVARCHAR(128)) [ChannelTemplateId],
			   CAST(0 AS NVARCHAR(128)) [InfoBandVisible],
			   CAST('' AS NVARCHAR(128)) [Info]

		      FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
			      INNER JOIN [Dictionaries].[Device] [D] 
              ON [D].[Id] = [Md].[DeviceId]
			      
            INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
              ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT

			INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
             ON [Channel].[PlacementId] = [Placement].[Id]

            INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
             ON [Building].[Id] = [Placement].[BuildingId]
			
			INNER JOIN [Dictionaries].[BuildingPurpose] [BuildingPurpose] WITH (NOLOCK)
				ON [Building].[BuildingPurposeId] = [BuildingPurpose].[Id]

            INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
              ON [District].[Id] = [Building].[DistrictId]

            INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK)
              ON [Channel].[ResourceSystemTypeId] = [ResourceSystemType].[Id]

			LEFT JOIN [Dictionaries].[ResourceSubsystemType] [ResourceSubsystemType] WITH (NOLOCK)
			  ON [Channel].[ResourceSubsystemTypeId] = [ResourceSubsystemType].[Id]

            INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
              ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]

		      WHERE [Md].[Id] = @measurementDeviceId) [MeasurementDeviceInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
              [DeviceCode],
			  [DeviceSubModel], 
			  [MeasurementDeviceId],
			  [IsIntegralArchiveValue],
              [District], 
              [FullAddress], 
			  [BuildingDescription],
			  [BuildingPurposeId],
			  [BuildingPurposeCode],
              [FactoryNumber], 
              [ResourceSystemTypeCode],
			  [ResourceSubsystemTypeCode],
			  [ResourceSubsystemTypeDescription],
              [DeviceShortName],
			  [ChannelTemplateId],
			  [InfoBandVisible],
			  [Info]
            ) 
         ) [ReportParameter];
   
      INSERT INTO @reportParameter    
         SELECT TOP(1) 'PeriodTypeCode' [Name], [PeriodType].[Code] [Value]
             FROM [Dictionaries].[PeriodType] [PeriodType] WITH (NOLOCK)
             WHERE [PeriodType].[Id] = @periodTypeId;
            
       IF(@deviceCode = 'Mercury230' OR @deviceCode = 'CET_4TM_03M' OR @deviceCode = 'Mercury234' OR @deviceCode = 'PSCH_4TM_05MK'
	      OR @deviceCode = 'CE301' OR @deviceCode = 'CE303')
	   BEGIN
	        DECLARE @designFactor NVARCHAR(8) = (SELECT  [DPV].[Value] [Value] FROM [Core].[DynamicParameterValue] [DPV]
		          WHERE [DPV].[DynamicParameterId] = 166 AND [DPV].[EntityId] = @measurementDeviceId)
            IF @designFactor IS NULL
	        BEGIN
			   SET @designFactor = 1
			END

			INSERT INTO @reportParameter ([Name],[Value])
			VALUES ('DesignFactor', @designFactor)
	   END

	   DECLARE @buildingId INT = (SELECT [Placement].[BuildingId] FROM [Business].[Placement] [Placement] WITH(NOLOCK)
	            INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
	            ON [Placement].[Id] = [Channel].[PlacementId] AND [Channel].[Id] = @channelId)

       -- поиск динамического параметра "UseDescriptionInReports"
	   DECLARE @useDescriptionInReports NVARCHAR(8) = (SELECT  [DPV].[Value] [Value] FROM [Core].[DynamicParameterValue] [DPV]
		          WHERE [DPV].[DynamicParameterId] = 181 AND [DPV].[EntityId] = @buildingId)
       
	   IF @useDescriptionInReports IS NULL
	   BEGIN
	         SET @useDescriptionInReports = 'false'
       END
	    
	   INSERT INTO @reportParameter ([Name],[Value])
		    VALUES ('UseBuildingDescriptionInReports', @useDescriptionInReports)


	   -- поиск динамического параметра "Начало газового дня" для EK270 и Ирвис
	   IF(@deviceCode = 'EK270' OR @deviceCode = 'Irvis')
	   BEGIN
	        DECLARE @gasHour NVARCHAR(16) = (SELECT  [DPV].[Value] [Value] FROM [Core].[DynamicParameterValue] [DPV]
		          WHERE [DPV].[DynamicParameterId] = 171 AND [DPV].[EntityId] = @measurementDeviceId)
            IF @gasHour IS NULL
	        BEGIN
			   SET @gasHour = CAST(10 as nvarchar(16));
			END

			INSERT INTO @reportParameter ([Name],[Value])
			VALUES ('GasHour', @gasHour)
	   END

      SELECT 
         [ReportParameter].[Name], 
         [ReportParameter].[Value] 
      FROM @reportParameter [ReportParameter];
      /**/
   
      /* 4а. Абстрактные параметры из шаблона канала - фактичестки базовые имена полей отчета */
      SELECT 
             [Parameter].[Code] [Name]
             ,[Parameter].[IntegrableValue] [IntegrableValue]
      FROM  @deviceParameterCodePull [ReportFieldInfo] 

      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
        ON [Parameter].[Id] = [ReportFieldInfo].[Id]
      /**/
            
     /* 5. Основная выборка*/
     DECLARE @minDate DATETIME = 
     (
        SELECT MIN(Time) 
        FROM [Business].[Archive] WITH (NOLOCK)
        WHERE MeasurementDeviceId = @measurementDeviceId AND PeriodTypeId = @periodTypeId
     );

	 DECLARE @shift INT = IIF(@deviceCode = 'TV7' OR @deviceCode = 'VZLJOT_033-034' OR @deviceCode = 'VZLJOT_024' OR @deviceCode = 'VZLJOT_024M' OR @deviceCode = 'VZLJOT_026M' OR @deviceCode = 'EK270' OR @deviceCode = 'VKT9' OR @deviceCode = 'Irvis' OR @deviceCode = 'VIST', 0, IIF(DATEADD(day, 1, @periodBegin) <= @minDate, 0, 1));

     DECLARE @periodTypeBeforeShift INT = IIF(@periodTypeId = 3, @shift, IIF(@deviceCode = 'TV7' OR @deviceCode = 'KM5' OR @deviceCode = 'RM5' OR @deviceCode = 'VZLJOT_033-034' OR @deviceCode = 'VZLJOT_024' OR @deviceCode = 'VZLJOT_024M' OR @deviceCode = 'VZLJOT_026M' OR @deviceCode = 'CET_4TM_03M' OR @deviceCode = 'PSCH_4TM_05MK' OR @deviceCode = 'Mercury230' OR @deviceCode = 'Mercury234' OR @deviceCode = 'CE301' OR @deviceCode = 'CE303' OR @deviceCode = 'VKT9' OR @deviceCode= 'VKT7' OR @deviceCode = 'EskoTm3E' OR @deviceCode = 'Pramer710' OR @deviceCode = 'VIST', 0, IIF(@periodTypeId = 2, 24, 1)));

	 SET @periodTypeBeforeShift = IIF (@periodTypeId = 2 AND (@deviceCode = 'EK270' OR @deviceCode = 'Irvis' OR @deviceCode = 'Pulsar2M' OR @deviceCode = 'VZLJOT_043' OR @deviceCode = 'VZLJOT_025'), 0, @periodTypeBeforeShift);

     DECLARE @mainDataQuery NVARCHAR(MAX) = 
     'WITH [Archive]
     AS
     (
       SELECT 
  	      [Archive].[Time] [Time]	  
  	     ,[Parameter].[Code] [ParameterCode]        
         ,[dbo].[ConvertMeasurementUnit]
          (
              [Dimension].[Value], 
              [Muc].[DimensionValue2], 
              [Archive].[Value], 
              [Muc].[Expression]
          ) [Value]      
       FROM [Business].[Archive] [Archive] WITH(NOLOCK) 
         
         INNER JOIN [Business].[MeasurementDevice] [Device] WITH(NOLOCK) 
           ON [Device].[Id] = @measurementDeviceId AND [Device].[Id] = [Archive].[MeasurementDeviceId]

         INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
           ON [Channel].[Id] = @channelId AND [Channel].[MeasurementDeviceId] = [Device].[Id]
         
         INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK)
            ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]

         INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH(NOLOCK)
            ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
         
         INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] WITH(NOLOCK)
            ON [Map].[DeviceParameterId] = [DeviceParameter].[Id] 
               AND [Map].[ChannelTemplateId] = [ChannelTemplate].[Id]
               AND [Map].[PeriodTypeId] = @periodTypeId

        INNER JOIN [Dictionaries].[Dimension] [Dimension] WITH(NOLOCK)
            ON [Map].[DimensionId] = [Dimension].[Id]

          INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] WITH(NOLOCK)
            ON [Map].[MeasurementUnitId] = [MeasurementUnit].[Id]

        LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 

          /* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
          ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

         INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH(NOLOCK) 
           ON [Parameter].[Id] = [Map].[ParameterId]

         WHERE          
           ([Archive].[Time] >= @periodBegin AND  [Archive].[Time] <= @periodEnd)
           AND [Archive].[PeriodTypeId] = @periodTypeId                   
     )
     SELECT * INTO #ResultPivotArchive FROM (
        SELECT [Time], CAST(1 AS BIT) [IsValidRowState], {deviceParameterCodeFieldsWithNext} FROM
          (
            SELECT [Time], {deviceParameterCodeFields}           
            FROM [Archive]
                PIVOT
                (
                  AVG([Value])
                  FOR [ParameterCode] IN ( {deviceParameterCodeFields} )                  
                ) [MainData]
          ) [PrePivotArchive] ORDER BY [PrePivotArchive].[Time] OFFSET @periodTypeBeforeShift ROW
       ) [PivotArchive];

       /* главная часть выборки */

       DECLARE @resultPivotArchiveCount INT = 
       (
         SELECT COUNT(*) - 1 FROM #ResultPivotArchive
       );

       IF(@resultPivotArchiveCount < 0)
       BEGIN
         SET @resultPivotArchiveCount = 0;
       END;

	   DECLARE @isReturnAllMainDataForVkt7 BIT = 0;
       IF (@deviceCode = ''VKT7'')
         BEGIN
            DECLARE @lastTime DATETIME;
            SELECT @lastTime = [Time] FROM #ResultPivotArchive [R] ORDER BY [Time] ASC
            IF (@periodEnd > @lastTime)
            BEGIN
               SET @isReturnAllMainDataForVkt7 = 1;
            END 
         END

	   IF(@resultPivotArchiveCount = 0 OR (@includePeriodEnd = 1 AND (@deviceCode = ''VZLJOT_026M'' OR @deviceCode = ''VZLJOT_024'' OR @deviceCode = ''VZLJOT_024M'' OR @deviceCode = ''Irvis'' OR @deviceCode = ''Elf'')) 
	     OR @isReturnAllMainDataForVkt7 = 1)
	   BEGIN
	       SELECT * FROM #ResultPivotArchive [R] ORDER BY [Time]
	   END
	   ELSE
	   BEGIN
			-- убираем из выборки последнюю (LEAD) запись 
            SELECT * FROM #ResultPivotArchive [R] 
            ORDER BY [Time] OFFSET IIF(@deviceCode = ''TV7'' OR @deviceCode = ''Spt943'' OR @deviceCode = ''Spt941_10_11'' OR @deviceCode = ''Spt941_20'', 1, 0) ROWS FETCH NEXT @resultPivotArchiveCount ROWS ONLY;
	   END
     
       /* выборка для части "Показания счетчика" */
       SET @periodBegin = 
       (
         SELECT [R].[Time] 
         FROM #ResultPivotArchive [R] 
         ORDER BY [R].[Time] ASC OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
       );
       
       -- в качестве конечной даты выберем последнюю дату из основной выборки
       -- для Взлет-26М, когда не включаем конечную дату, отступаем на одну дату 
       IF((@deviceCode = ''VZLJOT_026M'' OR @deviceCode = ''VZLJOT_024'' OR @deviceCode = ''VZLJOT_024M'') AND @includePeriodEnd = 0)
       BEGIN
          SET @periodEnd = 
          (
             SELECT [R].[Time] 
             FROM #ResultPivotArchive [R] 
             ORDER BY [R].[Time] DESC OFFSET 1 ROWS FETCH NEXT 1 ROWS ONLY
          );
       END
       ELSE
       BEGIN
         SET @periodEnd = 
         (
             SELECT [R].[Time] 
             FROM #ResultPivotArchive [R] 
             ORDER BY [R].[Time] DESC OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
         );
       END

       SELECT * FROM #ResultPivotArchive [R]
         WHERE [R].[Time] = @periodBegin OR [R].[Time] = @periodEnd
		 ORDER BY [R].[Time];

	   IF(@deviceCode = ''KM5'' OR @deviceCode = ''RM5'')
       BEGIN
          SELECT [Id],[InternalDeviceEventId],[Time],[OriginalValue] FROM [Business].[MeasurementDeviceJournal]
              WHERE [MeasurementDeviceId] = @measurementDeviceId AND [Time] >= @periodBegin AND [Time] <= @periodEnd      
	      SELECT [DynamicParameterId],[Value] FROM [Core].[DynamicParameterValue] 
		      WHERE [DynamicParameterId] = 116 AND [EntityId] = @measurementDeviceId
       END
	   ';

    
       SET @mainDataQuery = REPLACE(@mainDataQuery, '{deviceParameterCodeFields}', @deviceParameterCodeFields);
       SET @mainDataQuery = REPLACE(@mainDataQuery, '{deviceParameterCodeFieldsWithNext}', @deviceParameterCodeFieldsWithNext);
 
       EXEC [sys].[sp_executesql] @mainDataQuery, 
    
          N'@measurementDeviceId INT, @channelId INT, @periodTypeId INT, 
          @periodBegin DATETIME, @periodEnd DATETIME, @periodTypeBeforeShift INT,
          @deviceParameterCodePull [Programmability].[CodePullTableType] READONLY,          
		  @deviceCode NVARCHAR(32), @includePeriodEnd BIT',

          @measurementDeviceId = @measurementDeviceId,
          @channelId = @channelId, 
          @periodTypeId = @periodTypeId,       
          @periodBegin = @periodBegin,
          @periodEnd = @periodEnd,
          @periodTypeBeforeShift = @periodTypeBeforeShift,
          @deviceParameterCodePull = @deviceParameterCodePull,          
		  @deviceCode = @deviceCode,
          @includePeriodEnd = @includePeriodEnd
            
      COMMIT TRANSACTION;
   END TRY
   BEGIN CATCH
       
      /* транзакция имеет активную внутреннюю ошибку и дожна быть откатится */
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;

      -- !IMPORTANT
      /* транзакция валидна, но подтверждение  не наступило, 
         например в силу генерации пользовательской ошибки */ 
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;
          
      DECLARE @lineFeed CHAR(1) = CHAR(13);

      DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed, 
                '@measurementDeviceId: ',  @measurementDeviceId, @lineFeed, 
                '@channelId: ',            @channelId, @lineFeed, 
                '@periodBegin: ',          @periodBegin, @lineFeed, 
                '@periodEnd: ',            @periodEnd, @lineFeed, 
                '@periodTypeId: ',         @periodTypeId, @lineFeed
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      
      THROW;
   END CATCH

/**/

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CodePullTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[EntityId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CorrectArchiveTime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@includePeriodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@deviceParameterCodePull].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[BuildingPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SubModel]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[IsIntegralArchiveValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[BuildingPurposeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheet].[@deviceParameterCodePull].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheet].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheet].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheet].[@deviceParameterCodePull]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@deviceParameterCodePull].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@deviceParameterCodePull].[Code]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheet].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheet].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@includePeriodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheet].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="339" />
				<Property Name="Length" Value="26744" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-01-23&#xD;&#xA;-- Description: Возвращает набор данных для отчета 'Ведомость учета параметров'&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetAccountingParamSheet]&#xD;&#xA;  @userName NVARCHAR(32),  &#xD;&#xA;  @channelId INT,&#xD;&#xA;  @periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME,&#xD;&#xA;  @includePeriodEnd BIT,&#xD;&#xA;  @periodTypeId INT &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetAccountingParamSheetEmergencySituations]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
	SET XACT_ABORT ON;
	
	BEGIN TRY
	
	/* все выборки в составе хранимой процедуры имеют статус "грязных" */
      SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

      BEGIN TRANSACTION;
	  
	  DECLARE @measurementDeviceId INT = 
      (
        SELECT TOP(1) [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );
	  DECLARE @channelTemplateId INT = 
      (
        SELECT TOP(1) [Channel].[ChannelTemplateId]
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );

		DECLARE @deviceCode NVARCHAR(64);

	  SELECT TOP(1) 
      @deviceCode = [Device].[Code]
      
      FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)

      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
        ON [MeasurementDevice].[DeviceId] = [Device].[Id]

      WHERE [MeasurementDevice].[Id] = @measurementDeviceId

  /* Обнуление временной части */
  SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME);
  SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME);

  IF (@deviceCode = 'Elf' AND @periodTypeId = 2)
    BEGIN
       SET @periodEnd = DATEADD(HOUR, -1, @periodEnd);
    END

  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
      DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

      INSERT INTO @resultSetName VALUES
         (1, 'ReportParameter'),
         (2, 'MainData')
		     
      
	  SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName]

       DECLARE @userId  INT;    
      DECLARE @roleCode NVARCHAR(64);

      EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

     -- если пользователю не принадлежит прибор 
     IF(NOT EXISTS(SELECT 1 FROM [Business].[UserLinkChannel] [Link] WITH(NOLOCK) WHERE [Link].[UserId] = @userId AND [Link].[ChannelId] = @channelId))
     BEGIN    
        DECLARE @errorPermissionMsg  NVARCHAR(2048) 
         = [Programmability].[GetSysMessage](297, 1033);
        -- то возбуждаем исключение с сообщением 297                 
        THROW 500001, @errorPermissionMsg, 1;
     END;

    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
      INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (SELECT  
			   CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode],           
               CAST([Z].[Description] AS NVARCHAR(128)) [District],
               CAST([B].[FullAddress] AS NVARCHAR(128)) [FullAddress],
               CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber],
               CONVERT(NVARCHAR(128), [Md].[Id], 0) [MeasurementDeviceId]

		      FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
			      INNER JOIN [Dictionaries].[Device] [D] 
              ON [D].[Id] = [Md].[DeviceId]
			      
            INNER JOIN [Business].[AccessPoint] [Ap] WITH (NOLOCK)
              ON [Ap].[Id] = [Md].[AccessPointId]
			      
            INNER JOIN [Business].[AccessPointLinkBuilding] [ApBL] WITH (NOLOCK)  
              ON [ApBL].[AccessPointId] = [Ap].[Id]
			      
            INNER JOIN [Business].[Building] [B] WITH (NOLOCK)
              ON [B].[Id] = [ApBL].[BuildingId]
			      
            INNER JOIN [Dictionaries].[District] [Z] WITH (NOLOCK)
              ON [Z].[Id] = [B].[DistrictId] 
            
            INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
              ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT

		      WHERE [Md].[Id] = @measurementDeviceId) [MeasurementDeviceInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
			  [DeviceCode],
              [District], 
              [FullAddress], 
              [FactoryNumber],
              [MeasurementDeviceId]
            ) 
         ) [ReportParameter];

      SELECT 
         [ReportParameter].[Name], 
         [ReportParameter].[Value] 
      FROM @reportParameter [ReportParameter];


      IF @deviceCode = 'Elf'
      BEGIN
      -- поиск девайсового параметра ошибки системы на базе шаблона канала
      DECLARE @deviceParameterId INT = (SELECT pmdp.DeviceParameterId FROM [Business].[ParameterMapDeviceParameter] pmdp WITH (NOLOCK)
        WHERE pmdp.ParameterId = 5000 AND pmdp.ChannelTemplateId = @channelTemplateId AND pmdp.PeriodTypeId = @periodTypeId);

      SELECT a.Time, a.[Value] FROM [Business].[Archive] a WITH (NOLOCK)
        WHERE a.PeriodTypeId = @periodTypeId AND a.MeasurementDeviceId = @measurementDeviceId AND 
              a.Time >= @periodBegin AND a.Time <= @periodEnd AND a.DeviceParameterId = @deviceParameterId
      END
      ELSE
        BEGIN
          SELECT 1;
          END
        
	  COMMIT TRANSACTION;

	  END TRY

  /* Логирование ошибки хранимой процедуры */
  BEGIN CATCH
    DECLARE @lineFeed CHAR(1) = CHAR(13);

       DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed, 
                '@measurementDeviceId: ',  @measurementDeviceId, @lineFeed, 
                '@channelId: ',            @channelId, @lineFeed
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      -- пробрасываем исключение на верх
      THROW;    
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetEmergencySituations].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="371" />
				<Property Name="Length" Value="6958" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Maxim Okulin&#xD;&#xA;-- Create date: 26 September 2018&#xD;&#xA;-- Description: Возвращает набор данных для отчета &quot;Нештатные ситуации ведомостей учета ресурсов&quot;&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetAccountingParamSheetEmergencySituations]&#xD;&#xA;&#x9;@userName NVARCHAR(32),&#xD;&#xA;&#x9;@channelId INT,&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;&#x9;@periodEnd DATETIME,&#xD;&#xA;&#x9;@periodTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetAccountingParamSheetStub]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN    
    DECLARE @parameterCodePull [Programmability].[CodePullTableType];
                
    INSERT INTO @parameterCodePull 		    
        SELECT   
            [Parameter].[Id] [Id],
            [Parameter].[Code] [Code]
        FROM [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK)
        
        INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)    
            ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId] AND [ParameterMapDeviceParameter].[PeriodTypeId] = @periodTypeId 
    
        INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
            ON [ChannelTemplate].[Id] = [ParameterMapDeviceParameter].[ChannelTemplateId] AND [ChannelTemplate].[Id] = @channelTemplateId
             
    DECLARE @parameterCodeFields NVARCHAR(MAX) = '';
    
    SELECT @parameterCodeFields =  CONCAT(@parameterCodeFields, 'CAST(NULL AS DECIMAL(19, 7)) [', [ParameterCodePull].[Code], '], ')  
        FROM @parameterCodePull [ParameterCodePull];
    
    SET @parameterCodeFields = LEFT(@parameterCodeFields, LEN(@parameterCodeFields) - 1);
    
    SET @parameterCodeFields = CONCAT( N'SELECT CAST(NULL AS BIT) [IsValidRowState], CAST(NULL AS DATETIME) [Time], ',  @parameterCodeFields, ' WHERE NULL IS NOT NULL');
    
    EXEC [sys].[sp_executesql] @parameterCodeFields;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[CodePullTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub].[@channelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub].[@parameterCodePull].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetAccountingParamSheetStub].[@parameterCodePull]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetStub].[@parameterCodePull].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetAccountingParamSheetStub].[@parameterCodePull].[Code]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetStub].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAccountingParamSheetStub].[@channelTemplateId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="286" />
				<Property Name="Length" Value="1808" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2017-06-15&#xD;&#xA;-- Update date: 2017-06-15&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROC [Programmability].[GetAccountingParamSheetStub]      &#xD;&#xA;    @periodTypeId INT,&#xD;&#xA;    @channelTemplateId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetAllDeviceTechnicalParameters]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  SELECT
    dp.Code [Name]
   ,dtp.StringValue [Value]
  FROM Business.DeviceTechnicalParameter dtp
  INNER JOIN Dictionaries.DeviceParameter dp
    ON dtp.DeviceParameterId = dp.Id
  WHERE dtp.MeasurementDeviceId = @measurementDeviceId]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[StringValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAllDeviceTechnicalParameters].[@measurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetAllDeviceTechnicalParameters].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="362" />
				<Property Name="Length" Value="704" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 18 April 2018&#xD;&#xA;-- Update date: 18 April 2018&#xD;&#xA;-- Description: Возвращает все технические параметры прибора&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetAllDeviceTechnicalParameters] @measurementDeviceId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetArchiveRowByDate]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET NOCOUNT ON;

  SET XACT_ABORT ON;

  BEGIN TRY

    /* все выборки в составе хранимой процедуры имеют статус "грязных" */
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

    BEGIN TRANSACTION;

    -- таблица со списком параметров в соответствии с типом прибора 
    DECLARE @deviceParameterCodePull [Programmability].[CodePullTableType];

    INSERT INTO @deviceParameterCodePull
      SELECT
        [Parameter].[Id] [Id]
       ,[Parameter].[Code] [Code]
      FROM [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK)
      INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] WITH (NOLOCK)
        ON [Parameter].[Id] = [Map].[ParameterId]
          AND [Map].[PeriodTypeId] = @periodTypeId
      INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
        ON [ChannelTemplate].[Id] = [Map].[ChannelTemplateId]
      INNER JOIN [Business].[Channel] WITH (NOLOCK)
        ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
          AND [Channel].[Id] = @channelId
      WHERE [Channel].[MeasurementDeviceId] = @measurementDeviceId

    -- собираем строку со списком параметров отчета для возможности динамического из разворота 
    DECLARE @deviceParameterCodeFields NVARCHAR(MAX) = '';
    DECLARE @deviceParameterCodeFieldsWithNext NVARCHAR(MAX) = '';

    SELECT
      @deviceParameterCodeFields =
      @deviceParameterCodeFields
      + CONCAT('[', [D].[Code], ']') + ', '
     ,@deviceParameterCodeFieldsWithNext =
      @deviceParameterCodeFieldsWithNext
      + CONCAT('[', [D].[Code], ']') + ', '
      + CONCAT('LEAD([', [D].[Code], ']) OVER(ORDER BY [Time]) [', [D].[Code], '.Next', ']') + ','

    FROM @deviceParameterCodePull [D];

    SET @deviceParameterCodeFields = LEFT(@deviceParameterCodeFields, LEN(@deviceParameterCodeFields) - 1);
    SET @deviceParameterCodeFieldsWithNext = LEFT(@deviceParameterCodeFieldsWithNext, LEN(@deviceParameterCodeFieldsWithNext) - 1);

    DECLARE @mainDataQuery NVARCHAR(MAX) =
    'WITH [Archive]
     AS
     (
       SELECT 
  	      [Archive].[Time] [Time]	  
  	     ,[Parameter].[Code] [ParameterCode]        
         ,[dbo].[ConvertMeasurementUnit]
          (
              [Dimension].[Value], 
              [Muc].[DimensionValue2], 
              [Archive].[Value], 
              [Muc].[Expression]
          ) [Value]      
       FROM [Business].[Archive] [Archive] WITH(NOLOCK) 
         
         INNER JOIN [Business].[MeasurementDevice] [Device] WITH(NOLOCK) 
           ON [Device].[Id] = @measurementDeviceId AND [Device].[Id] = [Archive].[MeasurementDeviceId]

         INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
           ON [Channel].[Id] = @channelId AND [Channel].[MeasurementDeviceId] = [Device].[Id]
         
         INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK)
            ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]

         INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH(NOLOCK)
            ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
         
         INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] WITH(NOLOCK)
            ON [Map].[DeviceParameterId] = [DeviceParameter].[Id] 
               AND [Map].[ChannelTemplateId] = [ChannelTemplate].[Id]
               AND [Map].[PeriodTypeId] = @periodTypeId

        INNER JOIN [Dictionaries].[Dimension] [Dimension] WITH(NOLOCK)
            ON [Map].[DimensionId] = [Dimension].[Id]

          INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] WITH(NOLOCK)
            ON [Map].[MeasurementUnitId] = [MeasurementUnit].[Id]

        LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 

          /* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
          ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

         INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH(NOLOCK) 
           ON [Parameter].[Id] = [Map].[ParameterId]

         WHERE          
            [Archive].[Time] = @date AND [Archive].[PeriodTypeId] = @periodTypeId                   
     )
     SELECT * INTO #ResultPivotArchive FROM (
        SELECT [Time], CAST(1 AS BIT) [IsValidRowState], {deviceParameterCodeFieldsWithNext} FROM
          (
            SELECT [Time], {deviceParameterCodeFields}           
            FROM [Archive]
                PIVOT
                (
                  AVG([Value])
                  FOR [ParameterCode] IN ( {deviceParameterCodeFields} )                  
                ) [MainData]
          ) [PrePivotArchive] ORDER BY [PrePivotArchive].[Time] OFFSET 0 ROW
       ) [PivotArchive];

       /* главная часть выборки */
 	    SELECT * FROM #ResultPivotArchive [R] 
	   ';

    SET @mainDataQuery = REPLACE(@mainDataQuery, '{deviceParameterCodeFields}', @deviceParameterCodeFields);
    SET @mainDataQuery = REPLACE(@mainDataQuery, '{deviceParameterCodeFieldsWithNext}', @deviceParameterCodeFieldsWithNext);

    EXEC [sys].[sp_executesql] @mainDataQuery
                              ,N'@measurementDeviceId INT, @channelId INT, @periodTypeId INT, 
          @date DATETIME, @deviceParameterCodePull [Programmability].[CodePullTableType] READONLY'
                              ,@measurementDeviceId = @measurementDeviceId
                              ,@channelId = @channelId
                              ,@periodTypeId = @periodTypeId
                              ,@date = @date
                              ,@deviceParameterCodePull = @deviceParameterCodePull

    COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH

    /* транзакция имеет активную внутреннюю ошибку и дожна быть откатится */
    IF (XACT_STATE()) = -1
    BEGIN
      ROLLBACK TRANSACTION;
    END;

    -- !IMPORTANT
    /* транзакция валидна, но подтверждение  не наступило, 
       например в силу генерации пользовательской ошибки */
    IF (XACT_STATE()) = 1
    BEGIN
      COMMIT TRANSACTION;
    END;

    THROW;
  END CATCH

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[CodePullTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchiveRowByDate].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchiveRowByDate].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchiveRowByDate].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchiveRowByDate].[@deviceParameterCodePull].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Programmability].[GetArchiveRowByDate].[@date]" />
				</Entry>
				<Entry />
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetArchiveRowByDate].[@deviceParameterCodePull]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchiveRowByDate].[@deviceParameterCodePull].[Id]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchiveRowByDate].[@deviceParameterCodePull].[Code]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchiveRowByDate].[@channelTemplateId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchiveRowByDate].[@date]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchiveRowByDate].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchiveRowByDate].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchiveRowByDate].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="6339" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetArchiveRowByDate]&#xD;&#xA;@channelTemplateId INT,&#xD;&#xA;@date DATETIME,&#xD;&#xA;@channelId INT,&#xD;&#xA;@measurementDeviceId INT,&#xD;&#xA;@periodTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET DATEFORMAT dmy;
    SET NOCOUNT ON;

	SET @periodTypeId = IIF(@periodTypeId = 0, NULL, @periodTypeId);

	/* 1. Формирование имен резалтсетов для отчета*/
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
   INSERT INTO @resultSetName VALUES 
       (1, 'MainData')
      ,(2, 'ColumnCaption');

    SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	   FROM @resultSetName [ResultSetName]
	   
	SET @measurementDeviceId = IIF(@measurementDeviceId = 0, NULL, @measurementDeviceId)

	-- если пользователь не знает идентификатора, но знает заводской номер и тип прибора
	IF (@measurementDeviceId IS NULL AND @factoryNumber > 0 AND @deviceId > 0)
	BEGIN
	  SET @measurementDeviceId = 
    (
      SELECT [MeasurementDevice].[Id] 
	    FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
	    WHERE [MeasurementDevice].[FactoryNumber] = @factoryNumber AND [MeasurementDevice].[DeviceId] = @deviceId
    );
	END;  

	DECLARE @count INT = (SELECT COUNT(*) [Count] FROM [Business].[Archive] [Archive] WITH(NOLOCK)
	WHERE [Archive].[MeasurementDeviceId] = @measurementDeviceId AND 
      ([Archive].[PeriodTypeId] = @periodTypeId OR @periodTypeId IS NULL) AND
	  [Archive].[Time] BETWEEN @periodBegin AND @periodEnd)

	/* 2. Основная выборка данных */ 
	IF (@count <= 5000)
	BEGIN
	SELECT 
	  [PeriodType].[Description] [PeriodDescription], 
	  [Archive].[Time], 
		[Archive].[Value] [Value], 
		[Dp].[Description] [ParameterDescription]
  FROM [Business].[Archive] [Archive] WITH(NOLOCK)
    INNER JOIN [Dictionaries].[PeriodType] [PeriodType] WITH (NOLOCK)
	    ON [Archive].[PeriodTypeId] = [PeriodType].[Id]
    INNER JOIN [Business].[MeasurementDevice] [Device] WITH (NOLOCK)
	    ON [Archive].[MeasurementDeviceId] = [Device].[Id]
    INNER JOIN [Dictionaries].[DeviceParameter] [Dp] WITH (NOLOCK)
	    ON [Dp].[Id] = [Archive].[DeviceParameterId]

	WHERE [Archive].[MeasurementDeviceId] = @measurementDeviceId AND 
      ([Archive].[PeriodTypeId] = @periodTypeId OR @periodTypeId IS NULL) AND 
	  [Archive].[Time] BETWEEN @periodBegin AND @periodEnd
	ORDER BY [Archive].[Time] DESC
     END
	 ELSE
	 BEGIN
	   ;THROW 500001, 'Число архивных записей превышает заданный предел. Измените критерии отбора', 1;
	 END

/* 3. Вспомогательная таблица с расшифровками столбцов */
   DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

   INSERT INTO @columnCaption 
   OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
   VALUES
      ('MainData', 'PeriodDescription', 'Период', 1, 1)
	   ,('MainData', 'Time', 'Время', 1, 2)
	   ,('MainData', 'ParameterDescription', 'Параметр', 1, 3) 
	   ,('MainData',  'Value', 'Значение', 1, 4)	   

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@factoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetArchives].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetArchives].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetArchives].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@factoryNumber]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@deviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetArchives].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="355" />
				<Property Name="Length" Value="3368" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Max&#xD;&#xA;-- Create date: 10 July 2015&#xD;&#xA;-- Description: Источник для построения таблицы архивных данных устройства (админская консоль)&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetArchives]&#xD;&#xA;&#x9;@measurementDeviceId INT,&#xD;&#xA;&#x9;@factoryNumber INT,&#xD;&#xA;&#x9;@deviceId INT,&#xD;&#xA;&#x9;@periodTypeId INT,&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;&#x9;@periodEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetBuildingListForOperAdminMobile]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    DECLARE @userId INT = 
    (
        SELECT
            [Id]
        FROM [Admin].[User] [User] WITH(NOLOCK)
        WHERE [User].[UserName] = @userName
    );

    SELECT
        [Building].[Id] [BuildingId]
       ,[Building].[Description] [BuildingDescription] 
       
       ,[Channel].[Id] [ChannelId]       
       ,[Channel].[Description] [ChannelDescription]
       ,[Channel].[MeasurementDeviceId] [MeasurementDeviceId]             
       ,[Channel].[ResourceSystemTypeId]

       ,[ChannelTemplate].[Description] [ChannelTemplateDescription]  
       
       ,[MeasurementDevice].[LastStatusConnectionId] [LastStatusConnectionId]       
       ,[MeasurementDevice].[AccessPointId] [AccessPointId]
       ,[MeasurementDevice].[SuccessConnectionPercent] [MeasurementDeviceSuccessConnectionPercent]
       ,IIF
       ( 
            [MeasurementDevice].[LastSuccessConnectionTime] < '20000101', 
            NULL, 
            [MeasurementDevice].[LastSuccessConnectionTime]
       ) [MeasurementDeviceLastSuccessConnectionTime]

    FROM [Business].[Channel] [Channel] WITH(NOLOCK)
    
    INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
        ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]

    INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
        ON [Channel].[PlacementId] = [Placement].[Id] AND [Placement].[HasIndividualAccounting] = 0

    INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
        ON [Placement].[BuildingId] = [Building].[Id]

    INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK) 
      ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
    
    WHERE [Channel].[Id] IN 
        (
            SELECT [UserLinkChannel].[ChannelId]
            FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
            WHERE [UserLinkChannel].[UserId] = @userId
        )  AND ([MeasurementDevice].[LastStatusConnectionId] = @statusConnectionId OR @statusConnectionId = 0)
		
      ORDER BY [Building].[Id], ISNULL([Channel].[Order], 1000),  [Channel].[Id];
    
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetBuildingListForOperAdminMobile].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastSuccessConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetBuildingListForOperAdminMobile].[@statusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetBuildingListForOperAdminMobile].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetBuildingListForOperAdminMobile].[@statusConnectionId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2284" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE    PROCEDURE Programmability.GetBuildingListForOperAdminMobile&#xD;&#xA;@userName NVARCHAR(32),&#xD;&#xA;@statusConnectionId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetChannelDistribution]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   SET @cityId = IIF(@cityId = 0, NULL, @cityId);
   
   DECLARE @userId  INT;    
   DECLARE @roleCode NVARCHAR(64);
   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;
     
	SELECT 
     1 [Count]
     ,[Channel].[Id] [Id]
     ,[City].[Description] [City]
     ,[District].[Description] [District]
     ,[Building].[Description] [Building]     
     ,[Device].[Code] [Device]
     ,[ResourceSystemType].[ShortName] [ResourceSystemType]
     ,[Channel].[Description] [Channel]
     ,[Organization].[Description] [Organization]
              
     FROM [Business].[Channel] [Channel] WITH(NOLOCK)
  
        INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
          ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        INNER JOIN [Dictionaries].[Device] [Device]  WITH(NOLOCK)
          ON [MeasurementDevice].[DeviceId] = [Device].[Id] 
                          
        INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
          ON [AccessPoint].[Id] = [MeasurementDevice].[AccessPointId]

        INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
          ON [UserLink].[ChannelId] = [Channel].[Id] AND 
          ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))		

        INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH(NOLOCK)
          ON [Channel].[ResourceSystemTypeId] = [ResourceSystemType].[Id]

        INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK)
          ON [AccessPoint].[Id] =  [AccessPointLinkBuilding].[AccessPointId]

        INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
          ON [Building].[Id] = [AccessPointLinkBuilding].[BuildingId]

        INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
          ON [Building].[DistrictId] = [District].[Id] 
  
        LEFT JOIN [Business].[Organization]  [Organization] WITH(NOLOCK)
        ON [Organization].[Id] = [Channel].[OrganizationId]

        INNER JOIN [Dictionaries].[City] [City] WITH(NOLOCK)
          ON [City].[Id] = [District].[CityId]
        

      WHERE ([City].[Id] = @cityId OR @cityId IS NULL) 
   
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelDistribution].[@cityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelDistribution].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelDistribution].[@cityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelDistribution].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="371" />
				<Property Name="Length" Value="2770" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-23&#xD;&#xA;-- Edit date: 2015-10-28&#xD;&#xA;-- Description: Источник для построения сводной таблицы распределения каналов приборов&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetChannelDistribution]&#xD;&#xA;&#x9;@cityId INT,&#xD;&#xA;  @userName NVARCHAR(64)   &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetChannelsEmergencySituationParameters]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET DATEFORMAT dmy;
    SET LANGUAGE N'русский';
    SET NOCOUNT ON;

	  SET @resourceSystemTypeId = ISNULL(@resourceSystemTypeId, 0);

    DECLARE @empty NCHAR(1) = '';

	  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

    INSERT INTO @resultSetName VALUES
     (1, 'ReportParameter'),
	   (2, 'MainData'),		      -- стандартное имя набора для отображения в решетке
	   (3, 'ColumnCaption')     -- набор с расшифровками имен столбцов
	 
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	   FROM @resultSetName [ResultSetName]
       
   /* Формирование таблицы параметрии отчета */
   DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 

   INSERT INTO @reportParameter
    OUTPUT inserted.[Name], inserted.[Value]
    SELECT [Name], [Value] FROM 
    (
        SELECT [Name], [Value] 
        FROM (
            SELECT 
              CAST([User].[UserName] AS NVARCHAR(128)) [UserName]
              ,CAST(ISNULL([UserInfo].[FirstName], @empty) AS NVARCHAR(128)) [FirstName]
              ,CAST(ISNULL([UserInfo].[LastName], @empty) AS NVARCHAR(128)) [LastName]
              ,CAST(ISNULL([UserInfo].[Description], @empty) AS NVARCHAR(128)) [UserInfoDescription]

            FROM [Admin].[User] [User] WITH (NOLOCK) 
            LEFT OUTER JOIN [Business].[UserAdditionalInfo] [UserInfo] WITH (NOLOCK) 
              ON [User].[Id] = [UserInfo].[Id]
            WHERE [User].[UserName] = @userName)
          [A]
          UNPIVOT
          (
            [Value] FOR [Name] IN 
            (
              [UserName], 
              [FirstName], 
              [LastName],
              [UserInfoDescription] 
            )
          ) [B]   
    ) [C]

    UNION ALL
    
    SELECT 
	    'ResourceSystemTypeDescription' [Name], 
      [ResourceSystemType].[Description] [Value] 
    FROM 
	  (
		  SELECT [Id], [Code], [Description] FROM [Dictionaries].[ResourceSystemType] 
			  UNION ALL 
		  SELECT 0, 'All', 'Все типы ресурсных систем'

	  )  [ResourceSystemType] 
    WHERE  [ResourceSystemType].[Id] = @resourceSystemTypeId;
    
   /* 2. Основная выборка */

   DECLARE @userId  INT;    
   DECLARE @roleCode NVARCHAR(64);

   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

   SET @resourceSystemTypeId = IIF(@resourceSystemTypeId = 0, NULL, @resourceSystemTypeId);
   SET @districtId = IIF(@districtId = 0, NULL, @districtId);

   WITH Result AS
   (
      --выборка по каналам
      SELECT
	   [EntityId],
	   [ChannelId],
	   [ChannelDescription],
     NULL [EmergencyDescription],
     [BuildingId],
     [DistrictId],
     CASE WHEN @fillAllData = 1 THEN [Ch].[Address] ELSE  NULL END [Address],
     [DistrictDescription],
     1 [ChannelMarker],
	   NULL [EmergencyTurnOn],
     NULL [IsEmail],
     NULL [IsWhatsApp],
     NULL [IsBrowser]     
	   FROM
	   (
	    SELECT
      ROW_NUMBER() OVER(PARTITION BY [Ch].[Id] ORDER BY [Ch].[Id]) [ChId],
      [Ch].[Id] [EntityId],
      [Ch].[Id] [ChannelId],
      [Ch].[Description] [ChannelDescription],
      [b].[Id] [BuildingId],
      [b].[DistrictId] [DistrictId],
	  [b].[Description] [Address],
      [d].[Description] [DistrictDescription]  
		  FROM [Business].[Channel] [Ch] WITH(NOLOCK)
		  
      INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
          ON [UserLink].[ChannelId] = [Ch].[Id] AND 
          ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	

      INNER JOIN [Dictionaries].[ResourceSystemType] [Rst] WITH(NOLOCK)  ON [Rst].[Id] = [Ch].[ResourceSystemTypeId]
      INNER JOIN [Business].[EmergencySituationParameter] [Esp] WITH(NOLOCK)  ON [Esp].[ChannelId] = [Ch].[Id]
      INNER JOIN [Business].[Placement] [P] WITH(NOLOCK)  ON [Ch].[PlacementId] = [P].[Id]
      INNER JOIN [Business].[Building] [b] WITH(NOLOCK)   ON [P].[BuildingId] = [b].[Id]
      INNER JOIN [Dictionaries].[District] d  WITH(NOLOCK) ON b.DistrictId = d.Id 

	  WHERE  (d.Id = @districtId OR @districtId IS NULL) AND ([Rst].[Id] = @resourceSystemTypeId OR @resourceSystemTypeId IS NULL)
     )[Ch]
    WHERE [Ch].[ChId] = 1
   ), 
   Result2 AS
   (
      -- выборка по нештатным ситуациям
     SELECT
	     [EntityId],
	     [ChannelId],
	    CASE WHEN @fillAllData = 1 THEN [B].[ChannelDescription] ELSE  NULL END [ChannelDescription],
       [EmergencyDescription],
       [BuildingId],
       [DistrictId],
       CASE WHEN @fillAllData = 1 THEN [B].[BuildingDescription] ELSE NULL END [Address],
       [DistrictDescription],
       NULL [ChannelMarker],
	    [EmergencyTurnOn],
      [IsEmail],
      [IsWhatsApp],
      [IsBrowser]    
	  FROM
	  (
	     SELECT 
		     ROW_NUMBER() OVER(PARTITION BY [Esp].[Id] ORDER BY [Esp].[Id]) [EspId],
		     [Esp].[Id] [EntityId],
		     [Channel].[Description] [ChannelDescription],
		     [Esp].[ChannelId] [ChannelId],
		     [Esp].[Description] [EmergencyDescription],
             [b].[Id] [BuildingId],
             [b].[DistrictId] [DistrictId],
             [d].[Description] [DistrictDescription],
		     [b].[Description] [BuildingDescription],
		 
         CASE WHEN [Esp].[TurnOn] = 1 THEN  N'Вкл' ELSE  N'Выкл' END [EmergencyTurnOn],
             CASE WHEN emailNotificaion.[Id] IS NOT NULL 
		          THEN CAST(CONCAT('+/', emailNotificaion.RepetitionMinutes) AS NVARCHAR(12)) 
		          ELSE CAST('-' AS NVARCHAR(12)) 
	         END [IsEmail],

         CASE WHEN whatsAppNotificaion.[Id] IS NOT NULL 
		          THEN CAST(CONCAT('+/', whatsAppNotificaion.RepetitionMinutes) AS NVARCHAR(12)) 
		          ELSE CAST('-' AS NVARCHAR(12)) 
	       END [IsWhatsApp],

         CASE WHEN browserNotificaion.[Id] IS NOT NULL 
		          THEN CAST(CONCAT('+/', browserNotificaion.RepetitionMinutes) AS NVARCHAR(12)) 
			      ELSE CAST('-' AS NVARCHAR(12)) 
	       END [IsBrowser]
     
		 FROM [Business].[EmergencySituationParameter] [Esp] WITH(NOLOCK)
		
         INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
			ON [Channel].[Id] = [Esp].[ChannelId]
         INNER JOIN [Business].[Placement] [P] WITH(NOLOCK)
			ON [Channel].[PlacementId] = [P].[Id]
         INNER JOIN [Business].[Building] [b] WITH(NOLOCK)
			ON [P].[BuildingId] = [b].[Id]
         INNER JOIN [Dictionaries].[District] d WITH(NOLOCK) 
		    ON b.DistrictId = d.Id
      LEFT JOIN [Business].[UserLinkEmergencyNotificationType] emailNotificaion WITH(NOLOCK)
        ON emailNotificaion.EmergencySituationParameterId = [Esp].[Id] AND 
           emailNotificaion.UserAdditionalInfoId = @userId AND emailNotificaion.NotificationTypeId = 2        --email
        LEFT JOIN [Business].[UserLinkEmergencyNotificationType] whatsAppNotificaion WITH(NOLOCK)
        ON whatsAppNotificaion.EmergencySituationParameterId = [Esp].[Id] AND 
           whatsAppNotificaion.UserAdditionalInfoId = @userId AND whatsAppNotificaion.NotificationTypeId = 3  --whatsApp
        LEFT JOIN [Business].[UserLinkEmergencyNotificationType] browserNotificaion WITH(NOLOCK)
        ON browserNotificaion.EmergencySituationParameterId = [Esp].[Id] AND 
           browserNotificaion.UserAdditionalInfoId = @userId AND browserNotificaion.NotificationTypeId = 1    --browser

		 WHERE [Esp].[ChannelId] IN (SELECT [EntityId] FROM [Result])
       ) [B]
	   WHERE [B].[EspId] = 1
    ),
    Result3 AS
    (
     SELECT
	   [EntityId],
	   NULL [ChannelId],
	   NULL [ChannelDescription],
     NULL [EmergencyDescription],
     [BuildingId],
     [DistrictId],
     [Address],
     [DistrictDescription],
     NULL [ChannelMarker],
	   NULL [EmergencyTurnOn],
     NULL [IsEmail],
     NULL [IsWhatsApp],
     NULL [IsBrowser]
     FROM (
      SELECT b.Id [EntityId],
             b.Id [BuildingId],
             d.Id [DistrictId],
             b.[Description] [Address],
             d.[Description] [DistrictDescription]
       FROM [Business].[Building] b WITH(NOLOCK)
       INNER JOIN [Dictionaries].[District] d WITH(NOLOCK) ON b.DistrictId = d.Id
       WHERE b.Id IN (SELECT [BuildingId] FROM [Result])
    ) [C]
   ) 
    
   
   SELECT
    [EntityId],
		[ChannelId],
		[ChannelDescription],
    [EmergencyDescription],
    [BuildingId],
    [DistrictId],
    [Address],
    [DistrictDescription],
    [ChannelMarker],
	  [EmergencyTurnOn],
    [IsEmail],
    [IsWhatsApp],
    [IsBrowser]   
   FROM [Result]

   UNION ALL
   SELECT
    [EntityId],
		[ChannelId],
		[ChannelDescription], 
    [EmergencyDescription],
    [BuildingId],
    [DistrictId],
    [Address],
    [DistrictDescription],
    [ChannelMarker],
	  [EmergencyTurnOn],
    [IsEmail],
    [IsWhatsApp],
    [IsBrowser]
   FROM [Result2] 

  UNION ALL
   SELECT
    [EntityId],
    [ChannelId],
	[ChannelDescription], 
    [EmergencyDescription],
    [BuildingId],
    [DistrictId],
    [Address],
    [DistrictDescription],
    [ChannelMarker],
	[EmergencyTurnOn],
    [IsEmail],
    [IsWhatsApp],
    [IsBrowser]
   FROM [Result3] 

  ORDER BY [DistrictId] ASC, [BuildingId] ASC, [ChannelId] ASC, [ChannelMarker] DESC

  /* 3. Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

	INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
	  ('MainData', 'EntityId', 'Ид объекта', 1, 1)
    ,('MainData', 'DistrictId', 'Ид района', 1, 2)
    ,('MainData', 'DistrictDescription', 'Район', 1, 3)     
	  ,('MainData', 'Address', 'Адрес', 1, 4)    
    ,('MainData', 'ChannelDescription', 'Канал', 1, 5)
	  ,('MainData', 'ChannelId', 'Ид канала', 1, 6)
	  ,('MainData', 'EmergencyDescription', 'Параметр нештатной ситуации', 1, 7)
	  ,('MainData', 'EmergencyTurnOn', 'Вкл/выкл', 1, 8)
    ,('MainData', 'IsEmail', 'Email', 1, 9)
    -- поле WhatsApp временно упразднено, но не удалено
    -- ,('MainData', 'IsWhatsApp', 'WhatsApp', 0, 10)
    ,('MainData', 'IsBrowser', 'Browser', 1, 11)  
	
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@fillAllData]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[TurnOn]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[RepetitionMinutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[PV1].[B].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[EntityId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[ChannelDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[EmergencyDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[BuildingId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[DistrictId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[DistrictId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[Address]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[DistrictDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[District].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[ChannelMarker]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[EmergencyTurnOn]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[IsEmail]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[IsWhatsApp]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result].[IsBrowser]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[EntityId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[EmergencySituationParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[ChannelDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[EmergencyDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[EmergencySituationParameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[BuildingId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[DistrictId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[DistrictId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[Address]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[DistrictDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[District].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[ChannelMarker]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[EmergencyTurnOn]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[IsEmail]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[IsWhatsApp]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result2].[IsBrowser]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[EntityId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[ChannelId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[ChannelDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[EmergencyDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[BuildingId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[DistrictId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[District].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[Address]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Building].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[DistrictDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[District].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[ChannelMarker]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[EmergencyTurnOn]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[IsEmail]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[IsWhatsApp]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[CTE2].[Result3].[IsBrowser]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@resourceSystemTypeId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@districtId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetChannelsEmergencySituationParameters].[@fillAllData]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="10513" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetChannelsEmergencySituationParameters]&#xD;&#xA;&#x9;@userName NVARCHAR(64),&#xD;&#xA;&#x9;@resourceSystemTypeId INT = NULL,&#xD;&#xA;&#x9;@districtId INT = NULL,&#xD;&#xA;&#x9;@fillAllData BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetDashboardDiagrammArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN  
  SET NOCOUNT ON;
  
  SET XACT_ABORT ON;

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

    BEGIN TRANSACTION;
       	 
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES 
         (1, 'MainData'),    
         (2, 'ConvertableUnit');   

    SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	  FROM @resultSetName [ResultSetName];
  
    SELECT 
      [Archive].[Time] [Time],
      [Archive].[TimeSignatureId] [TimeSignatureId],
      [dbo].[ConvertMeasurementUnit]
      (
        [ParameterMapDeviceParameterWithUnitCovertor].[DimensionValue], 
        [ParameterMapDeviceParameterWithUnitCovertor].[DimensionValue2], 
        [Archive].[Value], 
        [ParameterMapDeviceParameterWithUnitCovertor].[Expression]
      ) [Value]

    FROM [Business].[Archive] [Archive] 

    CROSS APPLY [Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor] 
    (
      @parameterMapDeviceParameterId
    ) [ParameterMapDeviceParameterWithUnitCovertor]
      
    WHERE      
       [Archive].[MeasurementDeviceId] = @measurementDeviceId AND 
       [Archive].[PeriodTypeId] = [ParameterMapDeviceParameterWithUnitCovertor].[PeriodTypeId] AND 
       [Archive].[DeviceParameterId] = [ParameterMapDeviceParameterWithUnitCovertor].[DeviceParameterId] AND 
       ([Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEnd) AND
       [Archive].[IsValid] = 1

    ORDER BY [Archive] .[Time]

    SELECT  
      [ParameterMapDeviceParameterWithUnitCovertor].[Id],
      [Parameter].[Description] [ParameterDescription],
      [ParameterMapDeviceParameterWithUnitCovertor].[MeasurementUnitDescription],
      [ParameterMapDeviceParameterWithUnitCovertor].[DimensionPrefix],
      [PhysicalParameter].[Code] [PhysicalParameterCode]

    FROM [Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor]
    (
      @parameterMapDeviceParameterId
    ) [ParameterMapDeviceParameterWithUnitCovertor]

    INNER JOIN [Dictionaries].[Parameter] [Parameter]
      ON [Parameter].[Id] = [ParameterMapDeviceParameterWithUnitCovertor].[ParameterId]
    
    INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter]
      ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId];

    COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH    

    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;      
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;

    RETURN (3);
  END CATCH;   	   	                     

  RETURN (0);

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@parameterMapDeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionValue]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ConvertMeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammArchives].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[MeasurementUnitDescription]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionPrefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetDashboardDiagrammArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDashboardDiagrammArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDashboardDiagrammArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDashboardDiagrammArchives].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDashboardDiagrammArchives].[@parameterMapDeviceParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDashboardDiagrammArchives].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDashboardDiagrammArchives].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="276" />
				<Property Name="Length" Value="3181" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2014-11-23&#xD;&#xA;-- Description: &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetDashboardDiagrammArchives]&#xD;&#xA;  @measurementDeviceId INT,  &#xD;&#xA;  @parameterMapDeviceParameterId INT,  &#xD;&#xA;  @periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnit1Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnitDescription2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionPrefix2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[@parameterMapDeviceParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[ParameterId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DeviceParameterId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[PeriodTypeId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionValue]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Dimension].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[MeasurementUnitDescription]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionPrefix]" />
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[DimensionValue2]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[Expression]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
(
  SELECT 
        [ParameterMapDeviceParameter].[Id],
        [ParameterMapDeviceParameter].[ParameterId],
        [ParameterMapDeviceParameter].[DeviceParameterId],
        [ParameterMapDeviceParameter].[PeriodTypeId],
        [Dimension].[Value] [DimensionValue],
        
        COALESCE([Muc].[MeasurementUnitDescription2], [MeasurementUnit].[Description]) [MeasurementUnitDescription],
        COALESCE([Muc].[DimensionPrefix2], [Dimension].[Prefix]) [DimensionPrefix],

        [Muc].[DimensionValue2],        
        [Muc].[Expression]

      FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]

      INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
        ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]

      INNER JOIN [Dictionaries].[Dimension] [Dimension]
        ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId] 

      /* конвертация единиц измерения */
      LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 
      /* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
      ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 
      /**/ 
     
     WHERE
       [ParameterMapDeviceParameter].[Id] = @parameterMapDeviceParameterId

)]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1530" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor]&#xD;&#xA;(  &#xD;&#xA;  @parameterMapDeviceParameterId INT&#xD;&#xA;)&#xD;&#xA;RETURNS TABLE AS&#xD;&#xA;RETURN" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDashboardDiagrammParameterMapDeviceParameterWithUnitCovertor].[@parameterMapDeviceParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetDeviceSettings]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET NOCOUNT ON;
  SET XACT_ABORT ON;

  BEGIN TRY

    /* все выборки в составе хранимой процедуры имеют статус "грязных" */
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

    BEGIN TRANSACTION;

    DECLARE @measurementDeviceId INT = (SELECT TOP (1)
        [Channel].[MeasurementDeviceId]
      FROM [Business].[Channel] [Channel] WITH (NOLOCK)
      WHERE [Channel].[Id] = @channelId);

    DECLARE @deviceCode NVARCHAR(64);

    SELECT TOP (1)
      @deviceCode = [Device].[Code]

    FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)

    INNER JOIN [Dictionaries].[Device] [Device] WITH (NOLOCK)
      ON [MeasurementDevice].[DeviceId] = [Device].[Id]

    WHERE [MeasurementDevice].[Id] = @measurementDeviceId

    /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

    INSERT INTO @resultSetName
      VALUES (1, 'ReportParameter'),
      (2, 'MainData')


    SELECT
      [ResultSetName].[Order]
     ,[ResultSetName].[Name]
    FROM @resultSetName [ResultSetName]

    DECLARE @userId INT;
    DECLARE @roleCode NVARCHAR(64);

    EXEC [Programmability].[GetUserInfo] @userName
                                        ,@userId OUT
                                        ,@roleCode OUT;

    -- если пользователю не принадлежит прибор 
    IF (NOT EXISTS (SELECT
          1
        FROM [Business].[UserLinkChannel] [Link] WITH (NOLOCK)
        WHERE [Link].[UserId] = @userId
        AND [Link].[ChannelId] = @channelId)
      )
    BEGIN
      DECLARE @errorPermissionMsg NVARCHAR(2048)
      = [Programmability].[GetSysMessage](297, 1033);
      -- то возбуждаем исключение с сообщением 297                 
      THROW 500001, @errorPermissionMsg, 1;
    END;

    DECLARE @reportParameter [Programmability].[CustomParameterTableType];

    INSERT INTO @reportParameter
      SELECT
        [Name]
       ,[Value]
      FROM (SELECT
          CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode]
         ,CAST([Z].[Description] AS NVARCHAR(128)) [District]
         ,CAST([B].[FullAddress] AS NVARCHAR(128)) [FullAddress]
         ,CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber]
         ,CONVERT(NVARCHAR(128), [Md].[Id], 0) [MeasurementDeviceId]
         ,CAST([Md].[SubModel] AS NVARCHAR(128)) [SubModel]

        FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
        INNER JOIN [Dictionaries].[Device] [D]
          ON [D].[Id] = [Md].[DeviceId]

        INNER JOIN [Business].[AccessPoint] [Ap] WITH (NOLOCK)
          ON [Ap].[Id] = [Md].[AccessPointId]

        INNER JOIN [Business].[AccessPointLinkBuilding] [ApBL] WITH (NOLOCK)
          ON [ApBL].[AccessPointId] = [Ap].[Id]

        INNER JOIN [Business].[Building] [B] WITH (NOLOCK)
          ON [B].[Id] = [ApBL].[BuildingId]

        INNER JOIN [Dictionaries].[District] [Z] WITH (NOLOCK)
          ON [Z].[Id] = [B].[DistrictId]

        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
          ON [Channel].[MeasurementDeviceId] = [Md].[Id]
          AND [Channel].[Id] = @channelId --!IMPORTANT

        WHERE [Md].[Id] = @measurementDeviceId) [MeasurementDeviceInfo]
      UNPIVOT
      (
      [Value] FOR [Name] IN
      (
      [DeviceCode],
      [District],
      [FullAddress],
      [FactoryNumber],
      [MeasurementDeviceId],
      [SubModel]
      )
      ) [ReportParameter];

    SELECT
      [ReportParameter].[Name]
     ,[ReportParameter].[Value]
    FROM @reportParameter [ReportParameter];


    SELECT
      [dp].[Description]
     ,[dtp].[Time]
     ,[dtp].[StringValue]
     ,[dp].[Code]
    FROM [Business].[DeviceTechnicalParameter] [dtp] WITH (NOLOCK)
    INNER JOIN [Dictionaries].[DeviceParameter] [dp] WITH (NOLOCK)
      ON [dtp].[DeviceParameterId] = [dp].[Id]
    WHERE [dtp].[MeasurementDeviceId] = @measurementDeviceId

    COMMIT TRANSACTION;

  END TRY

  /* Логирование ошибки хранимой процедуры */
  BEGIN CATCH
    DECLARE @lineFeed CHAR(1) = CHAR(13);

    DECLARE @parameterListTrace NVARCHAR(256) =
    CONCAT
    (
    '@userName: ', @userName, @lineFeed,
    '@measurementDeviceId: ', @measurementDeviceId, @lineFeed,
    '@channelId: ', @channelId, @lineFeed
    );

    DECLARE @errorMessage NVARCHAR(MAX) =
    CONCAT
    (
    'ErrorNumber: ', ERROR_NUMBER(), @lineFeed,
    'ErrorSeverity: ', ERROR_SEVERITY(), @lineFeed,
    'ErrorState: ', ERROR_STATE(), @lineFeed,
    'ErrorProcedure: ', ERROR_PROCEDURE(), @lineFeed,
    'ErrorLine: ', ERROR_LINE(), @lineFeed,
    'ErrorMessage: ', ERROR_MESSAGE()
    );

    INSERT INTO [Admin].[ErrorLogEntry] ([Time],
    [Exception],
    [Message],
    [UserName],
    [StackTrace])
      VALUES (GETDATE(), 'InternalSqlServerException', @errorMessage, SUSER_NAME(), @parameterListTrace);
    -- пробрасываем исключение на верх
    THROW;
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SubModel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetDeviceSettings].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[StringValue]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceTechnicalParameter].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetDeviceSettings].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetDeviceSettings].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetDeviceSettings].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetDeviceSettings].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDeviceSettings].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDeviceSettings].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetDeviceSettings].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDeviceSettings].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetDeviceSettings].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDeviceSettings].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetDeviceSettings].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="354" />
				<Property Name="Length" Value="5514" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Maxim Okulin&#xD;&#xA;-- Create date: 02 October 2018&#xD;&#xA;-- Description: Возвращает набор данных для отчета &quot;Настроечные параметры прибора&quot;&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetDeviceSettings&#xD;&#xA;@userName NVARCHAR(32),&#xD;&#xA;@channelId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetEmergencyLogList]">
			<Property Name="BodyScript">
				<Value><![CDATA[
  
BEGIN

  SET DATEFORMAT dmy;
  SET LANGUAGE N'русский';
  SET NOCOUNT ON;
  
  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
  
  DECLARE @periodBegin DATETIME = GETDATE();
  DECLARE @periodEnd DATETIME = GETDATE();
  
  IF (@filterType = 'ByLastDay' OR @filterType = 'ByLastDayTop1')
  BEGIN
    SET @periodBegin = DATEADD(DAY,DATEDIFF(DAY, 0, GETDATE()), 0);
  END
  ELSE IF (@filterType = 'ByLastWeek')
  BEGIN     
     SET @periodBegin = DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()) / 7 * 7, 0);
  END
  ELSE IF (@filterType = 'By7Days')
  BEGIN 
     SET @periodBegin = DATEADD(DAY, -7, GETDATE());    
  END;
  ELSE IF (@filterType = 'ByLast10MinutesTop1')
  BEGIN
    SET @periodBegin = DATEADD(MINUTE, -10, GETDATE())
  END;

  IF (@filterType != 'ByCount')
  BEGIN
  	SET @top = 10000;
  END;
  IF (@filterType = 'ByLastDayTop1' OR @filterType = 'ByLast10MinutesTop1')
  BEGIN
  	SET @top = 1;
  END;

  INSERT INTO @resultSetName VALUES
	(1, 'MainData'),		    -- стандартное имя набора для отображения в решетке
	(2, 'ColumnCaption');	    -- набор с необязательной расшифровкой расшифровка имен столбцов наборов

  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]
  /**/
  
  /* 2. Формирование основной выборки*/

  SELECT 
    [EmergencySituationParameter].[Description] [EmergencySituationParameterDescription]
    
    ,[Channel].[Id] [ChannelId]
    ,[Channel].[MeasurementDeviceId] [MeasurementDeviceId]
    ,[Channel].[Description] [ChannelDescription]
    ,[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId]

    ,[MeasurementDevice].[AccessPointId] [AccessPointId]
    ,[MeasurementDevice].[SuccessConnectionPercent] [MeasurementDeviceSuccessConnectionPercent]
    ,[MeasurementDevice].[LastSuccessConnectionTime] [MeasurementDeviceLastSuccessConnectionTime]
    ,[MeasurementDevice].[LastStatusConnectionId] [LastStatusConnectionId]

    ,[ChannelTemplate].[Description] [ChannelTemplateDescription]

    
    ,[Building].[Description] [BuildingDescription]
	,[Building].[Id] [BuildingId]
    
    ,[EmergencyLog].[EmergencyLogId] [Id]
    ,[EmergencyLog].[EmergencyLogTime] [EmergencyLogTime]
    ,[EmergencyLog].[EmergencyLogDescription] [EmergencyLogDescription]
    ,[EmergencyLog].[IsAcknowledgement] [IsAcknowledgement]
    ,[EmergencyLog].[AcknowledgementDate] [AcknowledgementDate]
    ,[EmergencyLog].[AcknowledgementUserName] [AcknowledgementUserName]
    
    FROM [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH (NOLOCK)
        
    INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) 
      ON [Channel].[Id] = [EmergencySituationParameter].[ChannelId]
  
    INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK) ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]

    INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK) ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
   
    INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK) 
      ON [Placement].[Id] = [Channel].[PlacementId]
    
    INNER JOIN [Business].[Building] [Building] WITH(NOLOCK) 
      ON [Building].[Id] = [Placement].[BuildingId]
  
    INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK) 
      ON [Channel].[Id] = [UserLinkChannel].[ChannelId]
  
    INNER JOIN [Admin].[User] [User]  WITH(NOLOCK) 
      ON [User].[Id] = [UserLinkChannel].[UserId]
  
    CROSS APPLY 
    (
      SELECT                 
        [EmergencyLog].[Id] [EmergencyLogId],
        [EmergencyLog].[Value] [EmergencyLogDescription], 
        [EmergencyTimeSignature].[Time] [EmergencyLogTime],
        [EmergencyLog].[IsAcknowledgement] [IsAcknowledgement],
        [EmergencyLog].[AcknowledgementDate] [AcknowledgementDate],
        [EmergencyLog].[AcknowledgementUserName] [AcknowledgementUserName] 

        FROM [Business].[EmergencyLog] [EmergencyLog] WITH(NOLOCK) 

        /* INNER JOIN трансформируется оптимизатором MERGE JOIN, про приводит к просадке для TOP 1 */
        /* помогает замена на HASH MATCH или, еще лучще, пока немного элементов LOOP */

        INNER  JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH(NOLOCK) 
          ON [EmergencyTimeSignature].[Id] = [EmergencyLog].[EmergencyTimeSignatureId]
        
        WHERE 
        [EmergencyLog].[RecoveryTime] IS NULL AND
        [EmergencyLog].[EmergencySituationParameterId] = [EmergencySituationParameter].[Id] AND 
        (
              @filterType = 'ByCount' OR ([EmergencyTimeSignature].[Time] BETWEEN @periodBegin AND @periodEnd )          
        )

        ORDER BY [EmergencyLogTime] DESC OFFSET 0 ROWS FETCH NEXT @top ROWS ONLY
        --ORDER BY [EmergencyLogTime] DESC OFFSET 0 ROWS FETCH FIRST @top ROWS ONLY

    ) [EmergencyLog]

    WHERE [User].[UserName] = @userName

    --OPTION ( OPTIMIZE FOR ( @filterType = 'ByCount', @top = 1) );
    
    /* 3. Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

	INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
	  ('MainData', 'Id', 'Ид', 1, 1)      
      ,('MainData', 'ChannelId', 'Ид. канала', 1, 2)      
      ,('MainData', 'ChannelDescription', 'Наименование канала', 1, 3)		 
	  ,('MainData', 'EmergencyLogDescription', 'Наименование', 1, 4)  
      ,('MainData', 'IsAcknowledgement', 'Квитирование', 1, 5)            
      ,('MainData', 'EmergencyLogTime', 'Время возникновения', 1, 6)          
      ,('MainData', 'AcknowledgementDate', 'Время квитирования', 1, 7)            
      ,('MainData', 'AcknowledgementUserName', 'Пользователь', 1, 8)

	/**/
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@filterType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@top]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[RecoveryTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastSuccessConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetEmergencyLogList].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetEmergencyLogList].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencyLogList].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencyLogList].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencyLogList].[@filterType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencyLogList].[@top]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="6123" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE   PROCEDURE Programmability.GetEmergencyLogList&#xD;&#xA;  @userName NVARCHAR(32),&#xD;&#xA;  @filterType NVARCHAR(32),&#xD;&#xA;  @top INTEGER  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetEmergencySituationSummary]">
			<Property Name="BodyScript">
				<Value><![CDATA[
    SET NOCOUNT ON;

    DECLARE @empty NCHAR(1) = '';

    /* Выравнивание по границам суток входных параметров */
    SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME ); 
    SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME ); 

    /* Имена выходных резалтсетов возвращаемых в отчет */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES
         (1, 'ReportParameter'),
         (2, 'MainData'),
         (3, 'SummaryData');         
    
    /* Формирование таблицы параметрии отчета */
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
    OUTPUT inserted.[Name], inserted.[Value]
    SELECT [Name], [Value] FROM 
    (
        SELECT [Name], [Value] 
        FROM (
            SELECT 
              CAST([User].[UserName] AS NVARCHAR(128)) [UserName]
              ,CAST(ISNULL([UserInfo].[FirstName], @empty) AS NVARCHAR(128)) [FirstName]
              ,CAST(ISNULL([UserInfo].[LastName], @empty) AS NVARCHAR(128)) [LastName]
              ,CAST(ISNULL([UserInfo].[Description], @empty) AS NVARCHAR(128)) [UserInfoDescription]

            FROM [Admin].[User] [User] WITH (NOLOCK) 
            LEFT OUTER JOIN [Business].[UserAdditionalInfo] [UserInfo] WITH (NOLOCK) 
              ON [User].[Id] = [UserInfo].[Id]
            WHERE [User].[UserName] = @userName)
          [A]
          UNPIVOT
          (
            [Value] FOR [Name] IN 
            (
              [UserName], 
              [FirstName], 
              [LastName],
              [UserInfoDescription] 
            )
          ) [B]   
    ) [C]

    UNION ALL
    
    SELECT 
            'ResourceSystemTypeDescription' [Name], 
            [ResourceSystemType].[Description] [Value] 
      FROM [Dictionaries].[ResourceSystemType]  [ResourceSystemType] 
      WHERE [ResourceSystemType].[Id] = @resourceSystemTypeId
    ;
    
    /* Получаем имя и код роли пользователя */
    DECLARE @userId  INT;    
    DECLARE @roleCode NVARCHAR(64);    
  
    EXEC [Programmability].[GetUserInfo] 
          @userName = @userName, 
          @userId = @userId OUT, 
          @roleCode = @roleCode OUT;
    
  /*---------------------------*/
    /* Основная секция */     
    SELECT              
           [MainData].[MeasurementDeviceId]
           ,[MainData].[ChannelId]
           ,[MainData].[EmergencySituationParameterId]
           ,[MainData].[BuildingId]

           ,[MainData].[BuildingDescription]
           ,[MainData].[UserAdditionalInfoDescription]
           ,[MainData].[MeasurementDeviceDescription]
           ,[MainData].[EmergencySituationParameterDescription]

           ,[MainData].[EmergencyTimeSignatureFirstTime]
           ,[MainData].[EmergencyTimeSignatureLastTime]

           ,[MainData].[EmergencyLogLastRecoveryTime]
                       
           ,[MainData].[EmergencyLogCount]           
           ,[MainData].[EmergencyLogIsAcknowledgementCount]

           ,[MainData].[EmergencyLogAcknowledgementUserName]
           ,[MainData].[EmergencyLogAcknowledgementLastTime]
    FROM
    (
      SELECT 
    	  ROW_NUMBER() OVER(PARTITION BY [Channel].[Id], [EmergencySituationParameter].[Id]  ORDER BY [Channel].[Id])	Num, 
    		  
        /* Идентификаторы */
        [MeasurementDevice].[Id] [MeasurementDeviceId]
    
        , [Channel].[Id] [ChannelId]
    
        , [EmergencySituationParameter].[Id] [EmergencySituationParameterId]

        , [Building].[Id] [BuildingId]
        
        , [Building].[FullAddress] [BuildingDescription]

        /* Устройство */
        , [MeasurementDevice].[Description] [MeasurementDeviceDescription]
        , [UserAdditionalInfo].[Description] [UserAdditionalInfoDescription]

        /* Наименование НС */
        , [EmergencySituationParameter].[Description] [EmergencySituationParameterDescription]
      
        /* Время генерации первой НС [EmergencyTimeSignature].[Time]*/
        , FIRST_VALUE ( [EmergencyTimeSignature].[Time] ) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyTimeSignature].[Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING )  [EmergencyTimeSignatureFirstTime]
    
        /* Время генерации последней НС [EmergencyTimeSignature].[Time]*/
        , LAST_VALUE ( [EmergencyTimeSignature].[Time] ) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyTimeSignature].[Time]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING )  [EmergencyTimeSignatureLastTime]
        
        /* Время последнего восстановления [EmergencyLog].[RecoveryTime] */
        , LAST_VALUE ( [EmergencyLog].[RecoveryTime] ) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyTimeSignature].[Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING ) [EmergencyLogLastRecoveryTime]
                 
        /* Кол-во регистраций события */
        , COUNT(*) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyTimeSignature].[Time]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [EmergencyLogCount]
      
        /* Число квитирований !!!(посчет по "конскому"  скоррелированому запросу)*/        
        ,(
          SELECT COUNT(*) 
          FROM [Business].[EmergencyLog] [InnerEmergencyLog] WITH (NOLOCK)

            INNER JOIN [Business].[EmergencySituationParameter] [InnerEmergencySituationParameter] WITH (NOLOCK)
              ON [InnerEmergencySituationParameter].[Id] = [InnerEmergencyLog].[EmergencySituationParameterId]

            INNER JOIN [Business].[Channel] [InnerChannel] WITH (NOLOCK)
    		      ON [InnerChannel].[Id] = [InnerEmergencySituationParameter].[ChannelId] AND [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId

          WHERE [InnerEmergencyLog].[EmergencySituationParameterId] = [EmergencySituationParameter].[Id] 
              AND [InnerChannel].[Id] = [Channel].[Id]
              AND [InnerEmergencyLog].[IsAcknowledgement] = 1
            -- обязательно учетываем по диапазону времени, когда было квитирование
              
              AND (ISNULL([InnerEmergencyLog].[AcknowledgementDate], '19000101') >= @periodBegin AND ISNULL([InnerEmergencyLog].[AcknowledgementDate], '19000101') <= @periodEnd)

        ) [EmergencyLogIsAcknowledgementCount]

        /* Последний квитировавший */                
        , LAST_VALUE ( [EmergencyLog].[AcknowledgementUserName] ) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyLog].[AcknowledgementDate]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING)  [EmergencyLogAcknowledgementUserName]
        /* Дата последнего квитирования */
        , LAST_VALUE ( [EmergencyLog].[AcknowledgementDate] ) OVER ( PARTITION BY [MeasurementDevice].[Id], [EmergencySituationParameter].[Id] ORDER BY [EmergencyLog].[AcknowledgementDate]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING)  [EmergencyLogAcknowledgementLastTime]   
        

      FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
    
        /* Каналы */
    	  INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
    		  ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id] AND [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId
        
        /* Помещение */
        INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
          ON [Placement].[Id] = [Channel].[PlacementId]
        
        /* Строение */
        INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
          ON [Building].[Id] = [Placement].[BuildingId]
        
        /* Ответственное лицо */
        LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH (NOLOCK)
          ON [UserAdditionalInfo].[Id] = [Building].[UserAdditionalInfoId] 

        /* Ссылки на пользователя */
    	  INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH (NOLOCK)
    		  ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = @userId
    
         /* Нештатная ситуация*/
        INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH (NOLOCK)
            ON [Channel].[Id] = [EmergencySituationParameter].[ChannelId]
      
        /* Лог нештатной ситуациий */
        INNER JOIN [Business].[EmergencyLog] [EmergencyLog] WITH (NOLOCK)
    
          ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId] 
        
        /* Временная сигнатура лога нештатной ситуации */
        INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH (NOLOCK)
          ON [EmergencyTimeSignature].[Id] = [EmergencyLog].[EmergencyTimeSignatureId]
          AND ([EmergencyTimeSignature].[Time] >= @periodBegin AND [EmergencyTimeSignature].[Time] <= @periodEnd)      
    ) [MainData]
    
    WHERE [MainData].[Num] = 1

    ORDER BY [MainData].[MeasurementDeviceId], [MainData].[EmergencyTimeSignatureFirstTime]
    
    /* Сведение параллелизма к минимуму (при очень больших наборах имеет смысл пересмотреть)*/
    OPTION (MAXDOP 1);
   
   /*---------------------------*/
    /* Итоговая секция */
  
    SELECT 
      
      [SummaryData].[EmergencySituationParameterId]      
      ,[SummaryData].[EmergencySituationParameterTemplateDescription]
      ,[SummaryData].[BuildingCount]
      ,[SummaryData].[BuildingUserAdditionalInfoId]
      ,[SummaryData].[UserAdditionalInfoDescription]
      ,[SummaryData].[EmergencyLogCount]
      FROM
    (
      SELECT 
        ROW_NUMBER() OVER(PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id] ORDER BY [EmergencySituationParameterTemplate].[Id])	[Num], 
          
          [Building].[UserAdditionalInfoId] [BuildingUserAdditionalInfoId]
                       
          ,[EmergencySituationParameterTemplate].[Id] [EmergencySituationParameterTemplateId]

          ,[EmergencySituationParameter].[Id] [EmergencySituationParameterId]
          
          /*Наименование шаблона НС*/       
         ,[EmergencySituationParameterTemplate].[Description] [EmergencySituationParameterTemplateDescription]
        
         /* Количество объектов, на которых сгенерирована НС*/
         /* Вместо COUNT  по скорреллерованнму запросу  */
         ,(
            DENSE_RANK() OVER (PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id] ORDER BY [Building].[Id]) 
              + DENSE_RANK() OVER (PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id] ORDER BY [Building].[Id] DESC) 
              - 1
          ) [BuildingCount] 

          /*Кол-во объектов с действием НС на текущий момент*/
          
          /* Кол-во регистраций события */
        , COUNT(*) OVER ( PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id] ORDER BY [Building].[Id]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [EmergencyLogCount]

          /* Ответственное лицо */
          ,[UserAdditionalInfo].[Description] [UserAdditionalInfoDescription]

        FROM [Business].[EmergencySituationParameterTemplate] [EmergencySituationParameterTemplate] WITH (NOLOCK)
        
        INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH (NOLOCK)
          ON [EmergencySituationParameterTemplate].[Id] = [EmergencySituationParameter].[EmergencySituationParameterTemplateId]

        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
          ON [Channel].[Id] = [EmergencySituationParameter].[ChannelId] AND [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId
        
        /* Ссылки на пользователя */
      	  INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH (NOLOCK)
      		  ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = @userId
  
        
        INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
          ON [Placement].[Id] = [Channel].[PlacementId]
        
        INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
          ON [Building].[Id] = [Placement].[BuildingId]
        
        LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo]  WITH (NOLOCK)
          ON [UserAdditionalInfo].[Id] = [Building].[UserAdditionalInfoId]

        INNER JOIN [Business].[EmergencyLog] [EmergencyLog] WITH (NOLOCK)
          ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId]
  
        /* Временная сигнатура лога нештатной ситуации */
          INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH (NOLOCK)
            ON [EmergencyTimeSignature].[Id] = [EmergencyLog].[EmergencyTimeSignatureId]
            AND ([EmergencyTimeSignature].[Time] >= @periodBegin AND [EmergencyTimeSignature].[Time] <= @periodEnd)
    ) [SummaryData]

    WHERE [SummaryData].[Num] = 1  
    OPTION (MAXDOP 1);

    /*
      Основа для поиска  
      "Кол-во объектов с действием НС на текущий момент"
    */

  SELECT 
	   [BuildingUserAdditionalInfoId]
                       
	  ,[EmergencySituationParameterTemplateId] 
		
	  ,[BuildingId]

	  ,[EmergencySituationParameterTemplateDescription]
	
	  ,[EmergencyTimeSignatureLastTime]	

	  ,[EmergencyLogLastRecoveryTime]

	  , COUNT (*) OVER (PARTITION BY  [BuildingUserAdditionalInfoId], [EmergencySituationParameterTemplateId] ) [Count]

	  ,ROW_NUMBER() OVER (PARTITION BY  [BuildingUserAdditionalInfoId], [EmergencySituationParameterTemplateId] ORDER BY [BuildingId] ) [Num]
  FROM 
  (
	  SELECT 	
		  ROW_NUMBER() OVER
		  (
			  PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id], [Building].[Id] 
			  ORDER BY [EmergencySituationParameterTemplate].[Id]
		  ) [Num],	

		  [Building].[UserAdditionalInfoId] [BuildingUserAdditionalInfoId]
                       
		  ,[EmergencySituationParameterTemplate].[Id] [EmergencySituationParameterTemplateId] 
		
		  ,[Building].[Id] [BuildingId]

		  ,[EmergencySituationParameterTemplate].[Description] [EmergencySituationParameterTemplateDescription]

		  /* Время последеного восстановления */
		  , LAST_VALUE ( [EmergencyLog].[RecoveryTime]) 
		  OVER 
		  ( 
			  PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id], [Building].[Id] 
			  ORDER BY [EmergencyLog].[RecoveryTime]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING 
		  ) 
		  [EmergencyLogLastRecoveryTime]


		  /* Время генерации последней НС [EmergencyTimeSignature].[Time] */
      ,LAST_VALUE ([EmergencyTimeSignature].[Time] ) 
		  OVER 
		  ( 
			  PARTITION BY [Building].[UserAdditionalInfoId], [EmergencySituationParameterTemplate].[Id], [Building].[Id] 
			  ORDER BY [EmergencyTimeSignature].[Time]  ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING 
		  )  [EmergencyTimeSignatureLastTime]
		
			
          FROM [Business].[EmergencySituationParameterTemplate] [EmergencySituationParameterTemplate] WITH (NOLOCK)
        
          INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH (NOLOCK)
            ON [EmergencySituationParameterTemplate].[Id] = [EmergencySituationParameter].[EmergencySituationParameterTemplateId]

          INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
            ON [Channel].[Id] = [EmergencySituationParameter].[ChannelId] AND [Channel].[ResourceSystemTypeId] = 4
        
          /* Ссылки на пользователя */
      	    INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH (NOLOCK)
      		    ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = 7
          
          INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
            ON [Placement].[Id] = [Channel].[PlacementId]
        
          INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
            ON [Building].[Id] = [Placement].[BuildingId]
        
          LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo]  WITH (NOLOCK)
            ON [UserAdditionalInfo].[Id] = [Building].[UserAdditionalInfoId]

          INNER JOIN [Business].[EmergencyLog] [EmergencyLog] WITH (NOLOCK)
            ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId]
  
          /* Временная сигнатура лога нештатной ситуации */
            INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH (NOLOCK)
              ON [EmergencyTimeSignature].[Id] = [EmergencyLog].[EmergencyTimeSignatureId]
              AND ([EmergencyTimeSignature].[Time] >= '20160801' AND [EmergencyTimeSignature].[Time] <= '20161220')
		
  ) [A] 
  WHERE [A].[Num] = 1

  RETURN 0;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetEmergencySituationSummary].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@roleCode]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[RecoveryTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[IsAcknowledgement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[AcknowledgementUserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[EmergencySituationParameterTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[RecoveryTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameterTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetEmergencySituationSummary].[PV1].[B].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetEmergencySituationSummary].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencySituationSummary].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencySituationSummary].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetEmergencySituationSummary].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencySituationSummary].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetEmergencySituationSummary].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencySituationSummary].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencySituationSummary].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencySituationSummary].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetEmergencySituationSummary].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="17450" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE Programmability.GetEmergencySituationSummary&#xD;&#xA;  @userName NVARCHAR(32),&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;  @periodBegin DATETIME, &#xD;&#xA;  @periodEnd DATETIME  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetFlatHolderAccountingParamSheet]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN   
   SET NOCOUNT ON;
  
   BEGIN TRY
    SET @periodEnd = DATEADD(DAY, 1, @periodEnd);

    SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME);
    SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME);
    
    DECLARE @measurementDeviceId INT = 0;
    DECLARE @channelTemplateId INT = 0;
    DECLARE @userId  INT = NULL;
    DECLARE @periodTypeId INT = 5;
        
    /* 1. Определение соответствия между учетной записью и 
          принадлежностью каналов на основе соотвествия "пользователь-помещение"
    */
    
    SELECT @userId = [User].[Id] FROM [Admin].[User] [User] 
      INNER JOIN [Admin].[Role] [Role] ON       
      [User].[RoleId] = [Role].[Id] AND [User].[UserName] = @userName AND [Role].[Code] = 'HOLDER'
    
    IF(@userId IS NULL)
    BEGIN
      -- генерировать исключение    	
      ;THROW 500001, N'Пользователь не существует или не принадлежит к группе "Владелец помещения"', 1;    	    	
    END;
    
    IF NOT EXISTS
    (
    	SELECT 1 [Ch] FROM [Business].[Channel] [Channel] WITH (NOLOCK)
      INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
      ON [Channel].[PlacementId] = [Placement].[Id]
      WHERE (ISNULL([Placement].[UserAdditionalInfoId], 0) = @userId) AND [Channel].[Id] = @channelId
    ) 
    BEGIN
      -- генерировать исключение
      ;THROW 500001, N'Отсутствует привязки канала помещения и владельца помещения.', 1;    	    	
    END;
    
    /* 2. Определение идентификаторов устройства и шаблона канала */
    SELECT 
      @measurementDeviceId = [Channel].[MeasurementDeviceId],
      @channelTemplateId = [Channel].[ChannelTemplateId]
    
      FROM [Business].[Channel] [Channel] WITH (NOLOCK)
    
      INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
        ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
      WHERE [Channel].[Id] = @channelId
    
    IF(NOT EXISTS
      (
        SELECT 1
          FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
          WHERE [ParameterMapDeviceParameter].[ChannelTemplateId] = @channelTemplateId
      ))
    BEGIN
      	-- генерировать исключение
      ;THROW 500001, N'Отсутствуют параметры в матрице сопоставления параметров.', 1;    	
    END;
    
     /* 1. Таблица с наименованиями результирующих наборов*/
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES 
      (1, 'ReportParameter')
      ,(2, 'MainData')      
      ,(3, 'ColumnCaption')

    SELECT [ResultSetName].[Order], [ResultSetName].[Name] FROM @resultSetName [ResultSetName]
    /**/
      
    /* 2. Формирование таблицы параметрии отчета*/
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
        SELECT [Name], [Value]
        FROM
		    (SELECT                            
              CAST([Device].[Code] AS NVARCHAR(128)) [DeviceCode],
              CAST(CONCAT([UserAdditionalInfo].[LastName], ' ', [UserAdditionalInfo].[FirstName], ' ', [UserAdditionalInfo].[Patronimic]) AS NVARCHAR(128)) [HolderDescription],
              CAST(CONCAT([PlacementPurpose].[Description], ' ', [Placement].[Number]) AS NVARCHAR(128)) [PlacementDescription],
              CAST([Building].[FullAddress] AS NVARCHAR(128)) [FullAddress],
              CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber],
              CAST([ResourceSystemType].[ShortName] AS NVARCHAR(128)) [ResourceSystemTypeShortName],
              CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [ResourceSystemTypeDescription]

		    FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)

			    INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
            ON [Device].[Id] = [Md].[DeviceId]
			    
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
            ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT
          
			    INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
            ON [Placement].[Id] = [Channel].[PlacementId]
          
          INNER JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH(NOLOCK)
            ON [UserAdditionalInfo].[Id] = [Placement].[UserAdditionalInfoId]

          INNER JOIN [Dictionaries].[PlacementPurpose] [PlacementPurpose] WITH(NOLOCK)
            ON [PlacementPurpose].[Id] = [Placement].[PlacementPurposeId]
                                  
          INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
            ON [Building].[Id] = [Placement].[BuildingId]
			      
          INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
            ON [District].[Id] = [Building].[DistrictId] 
          
          INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH(NOLOCK)
            ON [Channel].[ResourceSystemTypeId] = [ResourceSystemType].[Id]

          INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK)
            ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]

		    WHERE [Md].[Id] = @measurementDeviceId) [ReportParameterInfo]
        UNPIVOT 
        (  
          [Value] FOR [Name] IN 
          (
            [DeviceCode], 
            [HolderDescription], 
            [FullAddress], 
            [FactoryNumber], 
            [ResourceSystemTypeShortName], 
            [ResourceSystemTypeDescription],
            [PlacementDescription]
          ) 
        ) [ReportParameter];
            
    SELECT 
        [ReportParameter].[Name], 
        [ReportParameter].[Value] 
    FROM @reportParameter [ReportParameter];
    /**/
     
    /* 3. Основная выборка данных */
    SELECT [Archive].[Num],
            [Archive].[ParameterId],
            [Archive].[DeviceParameterId],
            [Archive].[Time],
            [Archive].[Value],
            [Archive].[NextValue],
            [Archive].[NextValue] - [Archive].[Value] [Delta],
            [Archive].[ParameterDescription],
            [Archive].[MeasurementUnitDescription],
            [Archive].[DimentionPrefix] INTO #Result  FROM
       (
        SELECT  TOP 100 PERCENT
          [Archive].[Num],
          [Archive].[ParameterId],
          [Archive].[DeviceParameterId],
          [Archive].[Time],
          [Archive].[Value],
          LEAD([Archive].[Value]) OVER (PARTITION BY [Archive].[DeviceParameterId] ORDER BY [Archive].[Time]) [NextValue],
          [Archive].[ParameterDescription],
          [Archive].[MeasurementUnitDescription],
          [Archive].[DimentionPrefix]
        FROM
        (
            SELECT ROW_NUMBER() OVER 
              (
                PARTITION BY [A].[DeviceParameterId], CONVERT(DATE, [A].[Time]) 
                ORDER BY [A].[Time] DESC, [A].[DeviceParameterId] ASC
              ) [Num],
              [A].[Time], 
              [A].[Value], 
              [A].[DeviceParameterId],
              [Parameter].[Id] [ParameterId],
              [Parameter].[Description] [ParameterDescription], 
              [MeasurementUnit].[Description] [MeasurementUnitDescription],
              [Dimention].[Prefix] [DimentionPrefix]
            FROM [Business].[Archive] [A] WITH(NOLOCK)
              
              INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH(NOLOCK)
                ON [A].[DeviceParameterId] = [DeviceParameter].[Id]
    
              INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH(NOLOCK)
                ON [ParameterMapDeviceParameter].[ChannelTemplateId] = @channelTemplateId
                  AND [ParameterMapDeviceParameter].[DeviceParameterId] = [A].[DeviceParameterId]
                  AND [ParameterMapDeviceParameter].[PeriodTypeId] = @periodTypeId
    
              INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH(NOLOCK)
                ON [ParameterMapDeviceParameter].[ParameterId] = [Parameter].[Id]
    
              INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] 
                ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]
    
              INNER JOIN [Dictionaries].[Dimension] [Dimention] WITH(NOLOCK)
                ON [Dimention].[Id] = [ParameterMapDeviceParameter].[DimensionId]
    
            WHERE 
            	[A].[MeasurementDeviceId] = @measurementDeviceId AND 
            	[A].[DeviceParameterId] IN 
              (
                SELECT [ParameterMapDeviceParameter].[DeviceParameterId]
                FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH(NOLOCK)
                WHERE 
                  [ParameterMapDeviceParameter].[ChannelTemplateId] = @channelTemplateId 
                  AND [ParameterMapDeviceParameter].[PeriodTypeId] = @periodTypeId
              ) 
              AND 
            	[A].[PeriodTypeId] = @periodTypeId 
            	AND	([A].[Time] >= @periodBegin AND [A].[Time] <= @periodEnd)
        ) [Archive] 
        
        WHERE [Archive].[Num] = 1 ORDER BY [Archive].[Time], [Archive].[DeviceParameterId] ASC 
      ) [Archive] 
    ORDER BY [Archive].[DeviceParameterId];

    DECLARE @count INT = 
    (
      SELECT COUNT(*) [Count] FROM #Result
    );

    SELECT [Archive].[Num]
            ,[Archive].[ParameterId]
            ,[Archive].[DeviceParameterId]
            ,[Archive].[Time]
            ,[Archive].[Value]
            ,[Archive].[NextValue]
            ,[Archive].[NextValue] - [Archive].[Value] [Delta]
            ,[Archive].[ParameterDescription]
            ,[Archive].[MeasurementUnitDescription]
            ,[Archive].[DimentionPrefix]
			
        
     FROM #Result [Archive] WHERE [Archive].[NextValue] IS NOT NULL AND [Archive].[Delta] IS NOT NULL;

   /**/ 

   /*4. Наименования столбцов для решетки */
   DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

   INSERT INTO @columnCaption 
   OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
   VALUES
		('MainData', 'ParameterDescription', 'Параметр', 1, 1)       
		,('MainData', 'Value', 'Итоговое значение', 1, 2)		
		,('MainData', 'Delta', 'Значение за период', 1, 3)		
	    ,('MainData', 'Time', 'Время измерения', 1, 4)		
		,('MainData',  'DeviceParameterId', 'Ид параметра прибора', 0, 5)	   
	    ,('MainData',  'ParameterId', 'Ид параметра', 0, 6)	   	   
		,('MainData', 'DimentionPrefix', 'Размерность', 1, 7) 	   
	   ,('MainData', 'MeasurementUnitDescription', 'Единица измерения', 1, 8) 	   
	   
  /**/

  END TRY

  /* Логирование ошибки хранимой процедуры */
  BEGIN CATCH
    DECLARE @lineFeed CHAR(1) = CHAR(13);

       DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed, 
                '@measurementDeviceId: ',  @measurementDeviceId, @lineFeed, 
                '@channelId: ',            @channelId, @lineFeed, 
                '@periodBegin: ',          @periodBegin, @lineFeed, 
                '@periodEnd: ',            @periodEnd, @lineFeed                 
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      -- пробрасываем исключение на верх
      THROW;    
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Patronimic]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Num]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[NextValue]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[ParameterDescription]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[MeasurementUnitDescription]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[DimentionPrefix]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Delta]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Num]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[NextValue]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[Delta]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[ParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[MeasurementUnitDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[#Result].[DimentionPrefix]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Dimension].[Prefix]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccountingParamSheet].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="12475" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetFlatHolderAccountingParamSheet]&#xD;&#xA;  @userName NVARCHAR(32),  &#xD;&#xA;  @channelId INT,&#xD;&#xA;  @periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetFlatHolderAccounts]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN   
   
   SET NOCOUNT ON;
   
   /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

   INSERT INTO @resultSetName VALUES
    (1, 'ReportParameter'),
	  (2, 'MainData'),		    
	  (3, 'ColumnCaption');	
  
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	 FROM @resultSetName [ResultSetName]

  /**/

  /* 2. Формирование таблицы параметрии отчета*/
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
        SELECT [Name], [Value]
        FROM
		    (SELECT                            
              CAST([Organization].[Description] AS NVARCHAR(128)) [OrganizationDescription],
              CAST([OrganizationType].[Description] AS NVARCHAR(128)) [OrganizationTypeDescription],
              CAST(@isBeginBuildingWithNewPage AS NVARCHAR(128)) [IsBeginBuildingWithNewPage]

		    FROM [Business].[Organization] [Organization] WITH(NOLOCK)

        INNER JOIN [Dictionaries].[OrganizationType] [OrganizationType] WITH(NOLOCK)		  
          ON [Organization].[OrganizationTypeId] = [OrganizationType].[Id]  
        
        WHERE [Organization].[Id] = @organizationId

        ) [ReportParameterInfo]
        UNPIVOT 
        (  
          [Value] FOR [Name] IN 
          (
            [OrganizationDescription], 
            [OrganizationTypeDescription],
            [IsBeginBuildingWithNewPage]
          ) 
        ) [ReportParameter];
                   
    SELECT 
        [ReportParameter].[Name], 
        [ReportParameter].[Value] 
    FROM @reportParameter [ReportParameter];

    /**/

  /*2.   Основная выборка */
   OPEN SYMMETRIC KEY  [EnergyTechAudit.PowerAccounting.Database.SymmetricKey] 
      DECRYPTION BY CERTIFICATE [EnergyTechAudit.PowerAccounting.Database.Certificate];

   SELECT 
      [Building].[FullAddress] [Address],
      [Placement].[Number] [FlatNumber],

      [UserAdditionalInfo].[LastName] [LastName],
      [UserAdditionalInfo].[FirstName] [FirstName],      
      [UserAdditionalInfo].[Patronimic] [Patronimic],

      [User].[UserName] [Login],
      CONVERT(NVARCHAR(32), DECRYPTBYKEY ([User].[EncryptedPassword])) [Password],
      [Building].[Id] [BuildingId]

      FROM [Admin].[User] [User] WITH (NOLOCK)
      
      INNER JOIN [Admin].[Role] [Role] WITH (NOLOCK)
        ON [User].[RoleId] = [Role].[Id] 
          AND [Role].[Code] = 'HOLDER'

      INNER JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH (NOLOCK)
        ON [User].[Id] = [UserAdditionalInfo].[Id]
      
      INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
        ON [Placement].[UserAdditionalInfoId] = [UserAdditionalInfo].[Id]

      INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
        ON [Building].[OrganizationId] = @organizationId 
          AND [Building].[Id] = [Placement].[BuildingId]

  CLOSE SYMMETRIC KEY [EnergyTechAudit.PowerAccounting.Database.SymmetricKey];

  /* 3. Вспомогательная таблица с расшифровками столбцов */
  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType]; 
  
  INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES  
  	('MainData', 'Address', 'Адрес', 1, 1)
  	,('MainData', 'FlatNumber', 'Квартира', 1, 2)

    ,('MainData', 'LastName', 'Фамилия', 1, 3)
  	,('MainData', 'FirstName', 'Имя', 1, 4)
  	,('MainData', 'Patronimic', 'Oтчество', 1, 5)
  	
  	,('MainData', 'Login', 'Логин', 1, 6)
  	,('MainData', 'Password', 'Пароль', 1, 7)
  	,('MainData', 'BuildingId', 'Ид строения', 1, 8)
  	  
  /**/

   RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsCaller" Value="False" />
			<Property Name="IsOwner" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[OrganizationType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[OrganizationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[OrganizationType].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[OrganizationType].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@isBeginBuildingWithNewPage]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@organizationId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.SymmetricKey]" />
				</Entry>
				<Entry>
					<References Name="[EnergyTechAudit.PowerAccounting.Database.Certificate]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Patronimic]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[EncryptedPassword]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccounts].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccounts].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetFlatHolderAccounts].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccounts].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccounts].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetFlatHolderAccounts].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccounts].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccounts].[@organizationId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetFlatHolderAccounts].[@isBeginBuildingWithNewPage]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="319" />
				<Property Name="Length" Value="4299" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-07-16&#xD;&#xA;-- Description: Выборка учетных записей владельцев квартир &#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetFlatHolderAccounts]   &#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;  @organizationId INT,&#xD;&#xA;  @isBeginBuildingWithNewPage BIT&#xD;&#xA;WITH EXECUTE AS OWNER&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN   
	SET NOCOUNT ON;  
	SET XACT_ABORT ON;

	BEGIN TRY      
		SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

		BEGIN TRANSACTION;
		
		DECLARE  @errorMsg1 NVARCHAR(2048) = CONCAT
			(
				N'Отсутствуют или имеют неверное содержимое связанные с ресурсоснабжающей организацией (Organization) динамические параметры ',
				N'Organization.HeatCurveSupplyPipe и/или Organization.HeatCurveReturnPipe, ',
				N'описывающие температурные графики.'
			),
			@resultSetName [Programmability].[ResultSetNameTableType],
			@cityCode NVARCHAR(32), 
			@minimalTemperature INT;
		
		IF(@isPreload = 1)
		BEGIN
			INSERT INTO @resultSetName 
				OUTPUT inserted.[Order], inserted.[Name]
				VALUES 
                    (1, 'HeatSysChannels'),
                    (2, 'DiagnosticOrganizationHeatCurves')

			SELECT 
				[Channel].[Id] [Id], 
				[Channel].[Description] [Code],				
				[Channel].[Description] [Description]				
			FROM [Business].[Placement] [Placement] WITH(NOLOCK)    
				INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [Placement].[Id] = [Channel].[PlacementId]				
			WHERE [Placement].[BuildingId] = @buildingId 
				AND [Placement].[PlacementPurposeId] = 2	-- AccountingNode	
				AND [Channel].[ResourceSystemTypeId] = 4	-- HeatSys
				AND [Channel].[ResourceSubsystemTypeId] IS NULL
            
            DECLARE @isValidOrganizationHeatCurves BIT;

            EXEC [Programmability].[GetOrganizationHeatCurves]
                @buildingId = @buildingId, 
                @onlyDiagnostic = @isPreload,
                @isValid = @isValidOrganizationHeatCurves OUTPUT

            SELECT @isValidOrganizationHeatCurves [IsValid];

			COMMIT TRANSACTION;   
			RETURN ;
		END;

	    SELECT @cityCode = [City].[LatinCode], @minimalTemperature = [City].[MinimalTemperature]
			FROM [Business].[Building] [Building] WITH(NOLOCK)
		        INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK) ON [Building].[DistrictId] = [District].[Id]
			    INNER JOIN [Dictionaries].[City] [City] ON [District].[CityId] = [City].[Id]    
				WHERE [Building].[Id] = @buildingId;
        IF(@minimalTemperature IS NULL)
		BEGIN
			SET @minimalTemperature	= @defaultMinimalTemperature;
		END;

		DECLARE @hourlyConsumptionHeat DECIMAL(9,4) = 
		TRY_CAST
		(
			(
			   SELECT TOP (1) [Value] FROM [Core].[DynamicParameterValue] [DynamicParameterValue]
			   WHERE [EntityId] = @buildingId AND [DynamicParameterId] = 180	-- 'Building.HourlyConsumptionHeat'
			) 
			AS DECIMAL(9,4)
		);  		
		IF(@hourlyConsumptionHeat IS NULL)
		BEGIN
			SET @hourlyConsumptionHeat = @defaultHourlyConsumptionHeat;
		END;

		DECLARE @cwsForHwsHeatingFactor DECIMAL(9,4) = 
		TRY_CAST
		(
			(
			   SELECT TOP (1) [Value] FROM [Core].[DynamicParameterValue] [DynamicParameterValue]
			   WHERE [EntityId] = @buildingId AND [DynamicParameterId] = 182	-- 'Building.CwsForHwsHeatingFactor'
			) 
			AS DECIMAL(9,4)
		);   
        IF(@cwsForHwsHeatingFactor IS NULL)
		BEGIN
			SET @cwsForHwsHeatingFactor = @defaultCwsForHwsHeatingFactor;
		END;

		DECLARE @useDeductionHwsHeat BIT = 
		TRY_CAST
		(
			(
			   SELECT TOP (1) [Value] FROM [Core].[DynamicParameterValue] [DynamicParameterValue]
			   WHERE [EntityId] = @buildingId AND [DynamicParameterId] = 183	-- 'Building.UseDeductionHwsHeat'
			) 
			AS BIT
		);   
        IF(@useDeductionHwsHeat IS NULL)
		BEGIN
			SET @useDeductionHwsHeat = @defaultUseDeductionHwsHeat;
		END;
				
		INSERT INTO @resultSetName 
		OUTPUT inserted.[Order], inserted.[Name]
		VALUES
			(1, 'ReportParameter'),         			
			(2, 'HeatCurvesData'),
			(3, 'MeteoData'),
			(4, 'HwsChannel')
               		
		DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 	

		INSERT INTO @reportParameter 
		OUTPUT inserted.[Name], inserted.[Value]
		VALUES	
			('UserName', @userName),
			('ChannelId', CAST( @heatSysChannelId AS NVARCHAR )),
			('FullAddress', (SELECT  [FullAddress] FROM [Business].[Building] [Building] WITH(NOLOCK) WHERE [Building].[Id] = @buildingId)),

			('MinimalTemperature', CAST( @minimalTemperature AS NVARCHAR )),
			('HourlyConsumptionHeat', CAST( @hourlyConsumptionHeat AS NVARCHAR )),
			('CwsForHwsHeatingFactor', CAST( @hourlyConsumptionHeat AS NVARCHAR )),			
			('UseDeductionHwsHeat', CAST(IIF(@useDeductionHwsHeat = 1, 'true', 'false') AS NVARCHAR )),

			('DefaultHourlyConsumptionHeat', CAST( @defaultHourlyConsumptionHeat AS NVARCHAR )),			
			('DefaultUseDeductionHwsHeat', CAST(IIF(@defaultUseDeductionHwsHeat = 1, 'true', 'false') AS NVARCHAR ));
		        	 
        EXEC [Programmability].[GetOrganizationHeatCurves]
                @buildingId = @buildingId, 
                @onlyDiagnostic = @isPreload,
                @isValid = @isValidOrganizationHeatCurves OUTPUT
        
		/* Обнуление временной части */
		 DECLARE @today DATETIME  = CAST( CAST( GETDATE() AS DATE ) AS DATETIME);		
		 SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME);
		 SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME);		 
		 SET @periodEnd = DATEADD(DAY, 1, @periodEnd);

		 IF(@periodEnd >= @today)
		 BEGIN
			SET @periodEnd = @today;
		 END;

		DECLARE @meteoStationMeasurementDeviceId INT = 
		(
			SELECT TOP(1) [Id]
			FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
			WHERE [MeasurementDevice].[DeviceId] = 52
		);

		DECLARE @meteoStationOutdoorAirDeviceParameterId INT = 
		(
			SELECT TOP(1) [DeviceParameter].[Id] FROM [Dictionaries].[DeviceParameter] [DeviceParameter]  WITH(NOLOCK)
			WHERE 
				[DeviceParameter].[DeviceId] = 52 AND
				[DeviceParameter].[Code] = 'Monitoring_Temper_MeteoOutdoorAir_' + @cityCode 
		);

		SELECT CONVERT(DATE, [Archive].[Time]) [Time], 
			   AVG([Archive].[Value]) [AverageTemperature]
			FROM [Business].[Archive] [Archive] WITH(NOLOCK)
			WHERE [PeriodTypeId] = 1 
			AND [MeasurementDeviceId] = @meteoStationMeasurementDeviceId
			AND [DeviceParameterId] = @meteoStationOutdoorAirDeviceParameterId
			AND [Time] >= @periodBegin
			AND [Time] < @periodEnd
		GROUP BY CONVERT(DATE, [Archive].[Time])
		ORDER BY [Time]
		
		SELECT 
			[Channel].[Id] [Id], 					
			[Channel].[Description] [Description],

			[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId],
			[Channel].[ResourceSubsystemTypeId] [ResourceSubsystemTypeId]

		FROM [Business].[Placement] [Placement] WITH(NOLOCK)    
			INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [Placement].[Id] = [Channel].[PlacementId]				
		WHERE [Placement].[BuildingId] = @buildingId 
			AND [Placement].[PlacementPurposeId] = 2	-- AccountingNode	
			AND 
			(
				[Channel].[ResourceSystemTypeId] = 3 OR -- Hws
				(
					[Channel].[ResourceSystemTypeId] = 2 AND [Channel].[ResourceSubsystemTypeId] = 6 -- Cws + CwsForHws
				)
			)			
		COMMIT TRANSACTION;   
	END TRY
	BEGIN CATCH
		
	  IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;
	       
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;
          
      DECLARE @lineFeed CHAR(1) = CHAR(13);

      DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed,                 
                '@buildingId: ',           @buildingId, @lineFeed, 
                '@periodBegin: ',          @periodBegin, @lineFeed, 
                '@periodEnd: ',            @periodEnd, @lineFeed                 
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      
      THROW;	
	END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@isPreload]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@onlyDiagnostic]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@isValid]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[LatinCode]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[MinimalTemperature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultMinimalTemperature]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultHourlyConsumptionHeat]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultCwsForHwsHeatingFactor]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultUseDeductionHwsHeat]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@heatSysChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@heatSysChannelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@calcIndoorAirTemperature]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@thermalEnergyRate]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultHourlyConsumptionHeat]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultMinimalTemperature]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultUseDeductionHwsHeat]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@defaultCwsForHwsHeatingFactor]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="4" />
									<Property Name="Precision" Value="9" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[decimal]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetHeatEnergyConsumptionAnalysis].[@isPreload]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="9015" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE Programmability.GetHeatEnergyConsumptionAnalysis&#xD;&#xA;  @userName NVARCHAR(32),  &#xD;&#xA;  @buildingId INT,&#xD;&#xA;  @heatSysChannelId INT,&#xD;&#xA;&#xD;&#xA;  @periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME,&#xD;&#xA;  @calcIndoorAirTemperature INT,&#xD;&#xA;  @thermalEnergyRate INT,&#xD;&#xA;&#xD;&#xA;  @defaultHourlyConsumptionHeat DECIMAL(9,4),&#xD;&#xA;  @defaultMinimalTemperature INT,&#xD;&#xA;  @defaultUseDeductionHwsHeat BIT, &#xD;&#xA;  @defaultCwsForHwsHeatingFactor DECIMAL(9,4),&#xD;&#xA;&#xD;&#xA;  @isPreload BIT = 0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingBalanceSheet]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  DECLARE @finalInstancePeriodType INT = 5;       -- const
  SET NOCOUNT ON;
  SET XACT_ABORT ON;
    
  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
  	BEGIN TRANSACTION;    
  
    DECLARE @isDebug BIT = 1;
  
    SET @periodBegin = CAST(CAST(@periodBegin AS DATE) AS DATETIME);
    SET @periodEnd = CAST(CAST(@periodEnd AS DATE) AS DATETIME);
    
    DECLARE @periodEndWithInclude DATETIME = DATEADD(DAY, 1, @periodEnd);
    
    DECLARE 
      @resourceSystemTypeMapParametrer TABLE 
      (
        ResourceSystemType INT NOT NULL,
        ParameterId INT NOT NULL    
      );
      
      INSERT INTO @resourceSystemTypeMapParametrer VALUES 
        (2, 40), 
        (5, 469);
    
    /* Let's build table with result sets names that will be returned from the stored procedure */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    
    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES    
        (1, 'ReportParameter'),
        (2, 'MainData'),
        (3, 'SummaryData');
          
    /* Report parameters resultset */    
    
    DECLARE @reportParameter [Programmability].[CustomParameterTableType];
    
    INSERT INTO @reportParameter SELECT [Name], [Value] FROM
      (        
        SELECT TOP 1
          CAST([Dimension].[Prefix] AS NVARCHAR(128)) [DimensionPrefix],
          CAST([MeasurementUnit].[Description] AS NVARCHAR(128)) [MeasurementUnitDescription],
          CAST([ResourceSystemType].[ShortName] AS NVARCHAR(128)) [ResourceSystemTypeShortName],
          CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [ResourceSystemTypeDescription]
      
        FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] 
        INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]
        INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] ON [ChannelTemplate].[ResourceSystemTypeId] = [ResourceSystemType].[Id]

        INNER JOIN [Dictionaries].[Parameter] [Parameter] ON [ParameterMapDeviceParameter].[ParameterId] = [Parameter].[Id]
        INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]
        INNER JOIN [Dictionaries].[Dimension] [Dimension] ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]
      
        WHERE  [ParameterMapDeviceParameter].[ParameterId] IN      
            (
              SELECT [ResourceSystemTypeMapParametrer].[ParameterId] 
                FROM @resourceSystemTypeMapParametrer [ResourceSystemTypeMapParametrer] 
              WHERE [ResourceSystemTypeMapParametrer].[ResourceSystemType] =  @resourceSystemTypeId
            )        
      ) [MeasurementUnitInfo]
      UNPIVOT 
      (  
        [Value] FOR [Name] IN 
        (
          [DimensionPrefix],
    			[MeasurementUnitDescription],
          [ResourceSystemTypeShortName],
        [ResourceSystemTypeDescription]		  
        ) 
    ) [ReportParameter];
    
    INSERT INTO @reportParameter SELECT [Name], [Value] FROM
    (
      SELECT 
        CAST([Building].[Description] AS NVARCHAR(128)) [BuildingDescription] , 
        CAST([District].[Description] AS NVARCHAR(128)) [District]          
      FROM [Business].[Building] [Building] WITH(NOLOCK)
      INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
        ON [Building].[DistrictId] = [District].[Id]
    
      WHERE [Building].[Id] = @buildingId
    ) [BuildingInfo]   
    UNPIVOT 
    (
    	[Value] FOR [Name] IN ([BuildingDescription], [District])
    ) [ReportParameter];
          
    SELECT [ReportParameter].[Name], [ReportParameter].[Value]  FROM @reportParameter [ReportParameter];
    
    ;WITH [IndividualAccountingArchive]
     AS
     (
        SELECT
          [Archive].[Id]
         ,[Archive].[Time]
         ,[Archive].[Value]
         ,[Archive].[MeasurementDeviceId]
         ,[Archive].[DeviceParameterId]
         ,[Archive].[TimeSignatureId]
        FROM [Business].[Archive] [Archive] WITH (NOLOCK)
        WHERE [Archive].[PeriodTypeId] = @finalInstancePeriodType AND 
          -- the most preferred and the fastest way (excluding TimeSignature) 
          [Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEndWithInclude  
      )
      SELECT 
            [IndividualAccountingResult].[PlacementNumber]
            ,[IndividualAccountingResult].[ChannelDescription]
            ,[IndividualAccountingResult].[Diff]
            ,[IndividualAccountingResult].[Value]        
               
        FROM
      (
        SELECT       
        ROW_NUMBER() OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [IndividualAccountingArchive].[Time] DESC) [Num]    

       ,LAST_VALUE([IndividualAccountingArchive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [IndividualAccountingArchive].[Time] ASC) 
          - FIRST_VALUE([IndividualAccountingArchive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [IndividualAccountingArchive].[Time] ASC) [Diff]   
       ,LAST_VALUE([IndividualAccountingArchive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [IndividualAccountingArchive].[Time] ASC) [Value]
       ,[IndividualAccountingArchive].[Time]   
       ,[Channel].[Description] [ChannelDescription]  
       ,[Placement].[Number] [PlacementNumber]   
           	 
      FROM [Business].[Channel] [Channel] WITH (NOLOCK)
    
    
      INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
        ON [Placement].[BuildingId] = @buildingId
          AND [Placement].[HasIndividualAccounting] = 1
          AND [Placement].[Id] = [Channel].[PlacementId]
      
      INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
        ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
    
      INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
        ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
          AND [ParameterMapDeviceParameter].[PeriodTypeId] = @finalInstancePeriodType
        
        -- Let them be selected achive values for the given ParamerterId's from ResourceSystemTypeMapParametrer
          AND [ParameterMapDeviceParameter].[ParameterId] IN      
          (
            SELECT [ResourceSystemTypeMapParametrer].[ParameterId] 
              FROM @resourceSystemTypeMapParametrer [ResourceSystemTypeMapParametrer] 
            WHERE [ResourceSystemTypeMapParametrer].[ResourceSystemType] =  @resourceSystemTypeId
          )  
    
      
      INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
        ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]
     
      LEFT JOIN [IndividualAccountingArchive] WITH (NOLOCK)
        ON [IndividualAccountingArchive].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
          AND [IndividualAccountingArchive].[DeviceParameterId] = [DeviceParameter].[Id]
    
      WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId
      )[IndividualAccountingResult] WHERE [IndividualAccountingResult].[Num] = 1
    
    /* Channels list of measuring devices of common house accounting */
    
    ;WITH [CommonHouseAccountingChannel]
    AS
    (
      SELECT 
      
        [Channel].[Id], 
        [Channel].[ChannelTemplateId],
        [Channel].[MeasurementDeviceId], 
        [Channel].[Description] [ChannelDescription], 
           
        [ParameterMapDeviceParameter].[ParameterId] [ParameterId]
     
      FROM [Business].[Channel] [Channel] WITH(NOLOCK)
      
      INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK) 
        ON [Channel].[PlacementId] = [Placement].[Id] AND [Placement].[PlacementPurposeId] = 2
    
      INNER JOIN [Business].[Building] [Building] WITH(NOLOCK) 
        ON [Placement].[BuildingId] = [Building].[Id] AND [Building].[Id] = @buildingId
      
      INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK) 
        ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
    
      INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH(NOLOCK) 
        ON [ChannelTemplate].[Id] = [ParameterMapDeviceParameter].[ChannelTemplateId] 
        
        AND [ParameterMapDeviceParameter].[PeriodTypeId] = @finalInstancePeriodType 
        AND [ParameterMapDeviceParameter].[ParameterId]  IN 
        (
            SELECT [ResourceSystemTypeMapParametrer].[ParameterId] 
              FROM @resourceSystemTypeMapParametrer [ResourceSystemTypeMapParametrer] 
            WHERE [ResourceSystemTypeMapParametrer].[ResourceSystemType] =  @resourceSystemTypeId
        )
    
      WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId
    ),
    
    /* Measuring results of common house accounting devices */
    [CommonHouseAccountingArchive]
    AS
    (
       SELECT       
         [Archive].[Time]
         ,[Archive].[Value]
         ,[Archive].[MeasurementDeviceId]
         ,[Archive].[DeviceParameterId]
         
        FROM [Business].[Archive] [Archive] WITH (NOLOCK)
        WHERE [Archive].[PeriodTypeId] = @finalInstancePeriodType AND
          -- the most preferred and the fastest way (excluding TimeSignature) 
          [Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEndWithInclude  
    )
     
    SELECT 
      [CommonHouseAccountingResult].[Num] [MeasurementDeviceNumber]
      ,[CommonHouseAccountingResult].[ChannelDescription]
      ,[CommonHouseAccountingResult].[Diff]
      ,[CommonHouseAccountingResult].[Value]  
           
    FROM 
    (
    SELECT    
      ROW_NUMBER() OVER (PARTITION BY [CommonHouseAccountingChannel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [CommonHouseAccountingArchive].[Time] DESC) [Num]          
      
      ,LAST_VALUE([CommonHouseAccountingArchive].[Value]) OVER (PARTITION BY [CommonHouseAccountingChannel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [CommonHouseAccountingArchive].[Time] ASC) 
        - FIRST_VALUE([CommonHouseAccountingArchive].[Value]) OVER (PARTITION BY [CommonHouseAccountingChannel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [CommonHouseAccountingArchive].[Time] ASC) [Diff]
      
      ,LAST_VALUE([CommonHouseAccountingArchive].[Value]) OVER (PARTITION BY [CommonHouseAccountingChannel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [CommonHouseAccountingArchive].[Time] ASC)  [Value]
      ,[CommonHouseAccountingArchive].[Time]      
      ,[CommonHouseAccountingChannel].[ChannelDescription]
      
    
      FROM [CommonHouseAccountingArchive]
    
      INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
        ON [MeasurementDevice].[Id] = [CommonHouseAccountingArchive].[MeasurementDeviceId]
    
      INNER JOIN [CommonHouseAccountingChannel] 
        ON [MeasurementDevice].[Id] = [CommonHouseAccountingChannel].[MeasurementDeviceId]
    
      INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
        ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [CommonHouseAccountingChannel].[ChannelTemplateId]
    
          AND [ParameterMapDeviceParameter].[PeriodTypeId] = @finalInstancePeriodType 
          AND [CommonHouseAccountingArchive].[DeviceParameterId] = [ParameterMapDeviceParameter].[DeviceParameterId]
    
          -- Let them be selected achive values for the given ParamerterId's from ResourceSystemTypeMapParametrer
          AND [ParameterMapDeviceParameter].[ParameterId] IN      
          (
            SELECT [ResourceSystemTypeMapParametrer].[ParameterId] 
              FROM @resourceSystemTypeMapParametrer [ResourceSystemTypeMapParametrer] 
            WHERE [ResourceSystemTypeMapParametrer].[ResourceSystemType] =  @resourceSystemTypeId
          )  
    ) [CommonHouseAccountingResult] WHERE [CommonHouseAccountingResult].[Num] = 1
    ;
  
    COMMIT TRANSACTION;
  END TRY

  BEGIN CATCH
    PRINT ERROR_MESSAGE();
         
    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;
        
   
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;
  
    IF (@isDebug = 0)
    BEGIN
  
          DECLARE @lineFeed CHAR(1) = CHAR(13);
          
          DECLARE @parameterListTrace NVARCHAR(256) = 
          CONCAT
          (  
            '@userName: ' ,            @userName, @lineFeed, 
            '@resourceSystemTypeId: ', @resourceSystemTypeId, @lineFeed, 
            '@buildingId: ',           @buildingId, @lineFeed, 
            '@periodBegin: ',          @periodBegin, @lineFeed, 
            '@periodEnd: ',            @periodEnd, @lineFeed
          );
          
          DECLARE @errorMessage NVARCHAR(MAX) = 
          CONCAT
          (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
          );
          
          INSERT INTO [Admin].[ErrorLogEntry] 
          (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
          )
          VALUES
          (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
          );
          
          THROW;
    END;
  
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV2].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV2].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ResourceSystemType]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeMapParametrer].[ParameterId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV2].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV2].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[PV2].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE3].[IndividualAccountingArchive].[TimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[TimeSignatureId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel].[ChannelTemplateId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[ChannelTemplateId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel].[ChannelDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingChannel].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingArchive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingArchive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingArchive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingArchive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[CTE4].[CommonHouseAccountingArchive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingBalanceSheet].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="304" />
				<Property Name="Length" Value="14700" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2019-07-22&#xD;&#xA;-- Update date: 2019-07-23&#xD;&#xA;-- Description: &#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetIndividualAccountingBalanceSheet] &#xD;&#xA;    @userName NVARCHAR(64),&#xD;&#xA;    @buildingId INT,&#xD;&#xA;    @resourceSystemTypeId INT,&#xD;&#xA;    @periodBegin DATETIME,&#xD;&#xA;    @periodEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  SET NOCOUNT ON;
  /* 1. Формирование имен резалтсетов для отчета*/

  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
  INSERT INTO @resultSetName
    VALUES (1, 'MainData')
    , (2, 'ColumnCaption');

  SELECT
    [ResultSetName].[Order]
   ,[ResultSetName].[Name]
  FROM @resultSetName [ResultSetName];

  /* 2. Основная выборка */
  WITH [Archive]
  AS
  (SELECT
      [Archive].[Id]
     ,[Archive].[Time]
     ,[Archive].[Value]
     ,[Archive].[MeasurementDeviceId]
     ,[Archive].[DeviceParameterId]
     ,[Archive].[TimeSignatureId]
    FROM [Business].[Archive] [Archive] WITH (NOLOCK)
    WHERE [Archive].[PeriodTypeId] = 5 /* FinalInstant */ AND
    [Archive].[TimeSignatureId] IN (SELECT
        [TimeSignatureId]
      FROM (SELECT
          ROW_NUMBER() OVER
          (
          PARTITION BY [TimeSignature].[MeasurementDeviceId]
          ORDER BY [TimeSignature].[Time] DESC
          ) [RowNumber]
         ,[TimeSignature].[Id] [TimeSignatureId]
        FROM [Business].[TimeSignature] [TimeSignature] WITH (NOLOCK)
        WHERE EXISTS (SELECT
            1
          FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
          WHERE [MeasurementDevice].[Id] = [TimeSignature].[MeasurementDeviceId]
          AND EXISTS (SELECT
              1
            FROM [Business].[Channel] [Channel]
            WHERE [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
            AND EXISTS (SELECT
                1
              FROM [Business].[Placement] [Placement] WITH (NOLOCK)
              WHERE [Placement].[BuildingId] = @buildingId
              AND [Placement].[HasIndividualAccounting] = 1
              AND [Placement].[Id] = [Channel].[PlacementId])))) [TimeSignature]
      WHERE [TimeSignature].[RowNumber] = 1))
  SELECT
    
    ROW_NUMBER() OVER (ORDER BY [Placement].[Id], [Channel].[Id], [ParameterMapDeviceParameter].[Id]) [Id]
   ,[Placement].[Id] [PlacementId]
   ,[Channel].[Id] [ChannelId]
   ,[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId]
   ,[Archive].[TimeSignatureId]
   ,[ParameterMapDeviceParameter].[Id] [ParameterMapDeviceParameterId]
   ,[Archive].[Value]
   ,[Archive].[Time]
   ,[Placement].[Number] [PlacementNumber]

   ,[PlacementPurpose].[Description] [PlacementPurposeDescription]

   ,COALESCE([Organization].[Description], [UserAdditionalInfo].[Description]) [PlacementHolderDescription]
   ,[MeasurementDevice].[FactoryNumber] [MeasurementDeviceFactoryNumber]

   ,[Channel].[Description] [ChannelDescription]
   ,[Parameter].[Description] [ParameterDescription]
   ,[ResourceSystemType].[ShortName] [ResourceSystemTypeDescription]
   ,[Dimension].[Prefix] [DimensionDescription]
   ,[MeasurementUnit].[Description] [MeasurementUnitDescription]
   ,[PhysicalParameter].Code [PhysicalParameterCode]
   	 
  FROM [Business].[Channel] [Channel] WITH (NOLOCK)

  INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
    ON [Placement].[BuildingId] = @buildingId
      AND [Placement].[HasIndividualAccounting] = 1
      AND [Placement].[Id] = [Channel].[PlacementId]

  INNER JOIN [Dictionaries].[PlacementPurpose] [PlacementPurpose]
    ON [PlacementPurpose].[Id] = [Placement].[PlacementPurposeId]

  INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
    ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

  INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
    ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5

  INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK)
    ON [ParameterMapDeviceParameter].[ParameterId] = [Parameter].[Id]

  INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter] WITH (NOLOCK)
      ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId]

  INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
    ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]

  INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK)
    ON [ResourceSystemType].[Id] = [Channel].[ResourceSystemTypeId]

  INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] WITH (NOLOCK)
    ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]

  INNER JOIN [Dictionaries].[Dimension] [Dimension] WITH (NOLOCK)
    ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]

  LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH (NOLOCK)
    ON [UserAdditionalInfo].[Id] = [Placement].[UserAdditionalInfoId]

  LEFT JOIN [Business].[Organization] [Organization] WITH (NOLOCK)
    ON [Organization].[Id] = [Placement].[OrganizationId]

  LEFT JOIN [Archive] WITH (NOLOCK)
    ON [Archive].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
      AND [Archive].[DeviceParameterId] = [DeviceParameter].[Id]

  ORDER BY [PlacementId], [ResourceSystemTypeId], [ParameterMapDeviceParameterId];

  /* 3. Вспомогательная таблица с расшифровками столбцов */

  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

  INSERT INTO @columnCaption
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
    VALUES 
    ('MainData', 'Id', 'Ид', 0, 1)
    , ('MainData', 'PlacementNumber', 'Помещение', 1, 0)
    , ('MainData', 'PlacementPurposeDescription', 'Назначение помещения', 0, 1)
    , ('MainData', 'PlacementHolderDescription', 'Владелец', 1, 2)
    , ('MainData', 'ChannelDescription', 'Канал', 1, 3)
    , ('MainData', 'MeasurementDeviceFactoryNumber', 'Завод. номер', 1, 4)
    , ('MainData', 'ParameterDescription', 'Параметр', 1, 5)
    , ('MainData', 'ResourceSystemTypeDescription', 'Ресурс', 1, 6)
    , ('MainData', 'Value', 'Значение', 1, 7)
    , ('MainData', 'Time', 'Время', 1, 8)

  RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[CTE1].[Archive].[TimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[TimeSignatureId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@periodBegin]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantArchives].[@periodEnd]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="351" />
				<Property Name="Length" Value="6592" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2014-10-08&#xD;&#xA;-- Description: Возвращает архивные по группе устройств связанных с квартирами в строении&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE   PROCEDURE Programmability.GetIndividualAccountingFinalInstantArchives @buildingId INT,&#xD;&#xA;@periodBegin DATETIME = NULL,&#xD;&#xA;@periodEnd DATETIME = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  SET NOCOUNT ON;
  SET XACT_ABORT ON;

  DECLARE @buildingId INT = (SELECT
      [Placement].[BuildingId]
    FROM [Business].[Channel] [Channel] WITH (NOLOCK)
    INNER JOIN [Business].[Placement] [Placement]
      ON [Channel].[PlacementId] = [Placement].[Id]
    WHERE @channelId = [Channel].[Id]);

  SET @periodBegin = CAST(CAST(@periodBegin AS DATE) AS DATETIME);
  SET @periodEnd = CAST(CAST(@periodEnd AS DATE) AS DATETIME);

  DECLARE @periodEndWithInclude DATETIME = DATEADD(DAY, 1, @periodEnd);

  /* Perform checking the channel on individual accounting */
  IF NOT EXISTS (SELECT
        1
      FROM [Business].[Channel] [Channel]
      WHERE [Channel].[Id] = @channelId
      AND EXISTS (SELECT
          1
        FROM [Business].[Placement] [Placement]
        WHERE [Placement].[Id] = [Channel].[PlacementId]
        AND [Placement].[HasIndividualAccounting] = 1))
  BEGIN
    DECLARE @errorPermissionMsg NVARCHAR(2048) = [Programmability].[GetSysMessage](297, 1033);
    THROW 500001, @errorPermissionMsg, 1;
  END

  /* Make table with resultset names */

  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
  INSERT INTO @resultSetName
  OUTPUT inserted.[Order], inserted.[Name]
    VALUES (1, 'MainData'),
    (2, 'ColumnCaption');

  /* Extract last TimeSignature Id */

  DECLARE @lastTimeSignatureId INT = (SELECT
      [MeasurementDevice].[LastTimeSignatureId]
    FROM [Business].[MeasurementDevice] [MeasurementDevice]
    INNER JOIN [Business].[Channel] WITH (NOLOCK)
      ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
    WHERE [Channel].[Id] = @channelId);

  IF @lastTimeSignatureId IS NULL
  BEGIN
    SET @lastTimeSignatureId = (SELECT
        [TimeSignature].[Id]
      FROM (SELECT
          ROW_NUMBER() OVER (ORDER BY [TimeSignature].[Time] DESC) [Num]
         ,[TimeSignature].[Id]
        FROM [Business].[TimeSignature] [TimeSignature] WITH (NOLOCK)
        WHERE [TimeSignature].[MeasurementDeviceId] IN (SELECT
            [Channel].[MeasurementDeviceId]
          FROM [Business].[Channel] [Channel] WITH (NOLOCK)
          WHERE [Channel].[Id] = @channelId)) [TimeSignature]
      WHERE [Num] = 1);
  END;

  BEGIN TRY
    /* Will read dirty */
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

    BEGIN TRANSACTION;
    /* Extract main data */
    WITH [Archive]
    AS
    (SELECT
        [Archive].[Time]
       ,[Archive].[Value]
       ,[Archive].[DeviceParameterId]
       ,[Archive].[MeasurementDeviceId]

      FROM [Business].[Archive] [Archive]
      WHERE [Archive].[PeriodTypeId] = 5
      AND [Archive].[TimeSignatureId] = @lastTimeSignatureId),

    [ParameterMapDeviceParameter]
    AS
    (SELECT
        [ParameterMapDeviceParameter].[Id]
       ,[ParameterMapDeviceParameter].[ParameterId]
       ,[ParameterMapDeviceParameter].[MeasurementUnitId]
       ,[ParameterMapDeviceParameter].[DimensionId]
       ,[ParameterMapDeviceParameter].[DeviceParameterId]

      FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]

      WHERE [ParameterMapDeviceParameter].[PeriodTypeId] = 5
      AND [ParameterMapDeviceParameter].[ChannelTemplateId] IN (SELECT
          [Channel].[ChannelTemplateId]
        FROM [Business].[Channel] [Channel]
        WHERE [Channel].[Id] = @channelId)),

    [Archive1]
    AS
    (SELECT
        [Archive].[Id]
       ,[Archive].[Time]
       ,[Archive].[Value]
       ,[Archive].[MeasurementDeviceId]
       ,[Archive].[DeviceParameterId]

      FROM [Business].[Archive] [Archive] WITH (NOLOCK)
      WHERE [Archive].[PeriodTypeId] = 5 /* FinalInstant */
      AND [Archive].[Time] >= @periodBegin
      AND [Archive].[Time] <= @periodEndWithInclude)

    /* Final selection from CTEs */

    SELECT
      [Parameter].[Id] [ParameterId1]
     ,[Parameter].[Description] [ParameterDescription]
     ,[Archive].[Time]
     ,[Archive].[Value]
     ,[Archive].[MeasurementDeviceId]
     ,[Dimension].[Prefix] [DimensionPrefix]
     ,[MeasurementUnit].[Description] [MeasurementUnitDescription]
     ,[PhysicalParameter].[Code] [PhysicalParameterCode]
     ,[ParameterMapDeviceParameter].[Id] [ParameterMapDeviceParameterId]
     
     ,[C].[AverageResourceConsumption]

     ,[E].[DiffValue]
     ,[E].[DiffPeriodBegin] 
     ,[E].[DiffPeriodEnd] 

     ,@channelId [ChannelId]
     ,@periodBegin [PeriodBegin]
     ,@periodEnd [PeriodEnd]

    FROM [Archive]

    INNER JOIN [ParameterMapDeviceParameter]
      ON [ParameterMapDeviceParameter].[DeviceParameterId] = [Archive].[DeviceParameterId]

    INNER JOIN [Dictionaries].[Parameter] [Parameter]
      ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

    INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
      ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]

    INNER JOIN [Dictionaries].[Dimension] [Dimension]
      ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]

    INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter]
      ON [PhysicalParameter].[Id] = [Parameter].PhysicalParameterId

    LEFT JOIN (SELECT
        [D].[Num]
       ,[D].[ParameterId]
       ,[D].[DiffValue]
       ,[D].[DiffPeriodBegin]
       ,[D].[DiffPeriodEnd]
      FROM (SELECT
          ROW_NUMBER() OVER (PARTITION BY [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] DESC) [Num]
         ,[ParameterMapDeviceParameter].[ParameterId] [ParameterId]

         ,LAST_VALUE([Archive1].[Value]) OVER (PARTITION BY [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC)
          - FIRST_VALUE([Archive1].[Value]) OVER (PARTITION BY [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC) [DiffValue]

         ,LAST_VALUE([Archive1].[Time]) OVER (PARTITION BY [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC) [DiffPeriodEnd]
         ,FIRST_VALUE([Archive1].[Time]) OVER (PARTITION BY [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC) [DiffPeriodBegin]

        FROM [Business].[Channel] [Channel] WITH (NOLOCK)

        INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
          ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
          AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5

        INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
          ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]

        LEFT JOIN [Archive1] WITH (NOLOCK)
          ON [Archive1].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
          AND [Archive1].[DeviceParameterId] = [DeviceParameter].[Id]

        WHERE @channelId = [Channel].[Id]) [D]
      WHERE [Num] = 1) [E]
      ON [E].[ParameterId] = [ParameterMapDeviceParameter].[ParameterId]

    LEFT JOIN (SELECT
        [B].[ParameterId]
       ,[B].[AverageResourceConsumption]
      FROM (SELECT
          [A].[ParameterId]
         ,AVG([A].[Value]) OVER (PARTITION BY [A].[ParameterId]) [AverageResourceConsumption]
         ,ROW_NUMBER() OVER (PARTITION BY [A].[ParameterId] ORDER BY [A].[ParameterId]) [Num]

        FROM (SELECT
            ROW_NUMBER() OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] DESC) [Num]
           ,[ParameterMapDeviceParameter].[ParameterId] [ParameterId]

           ,LAST_VALUE([Archive1].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC)
            - FIRST_VALUE([Archive1].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive1].[Time] ASC) [Value]

          FROM [Business].[Channel] [Channel] WITH (NOLOCK)

          INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
            ON [Placement].[BuildingId] = @buildingId
            AND [Placement].[HasIndividualAccounting] = 1
            AND [Placement].[Id] = [Channel].[PlacementId]

          INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
            ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
            AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5

          INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
            ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]

          LEFT JOIN [Archive1] WITH (NOLOCK)
            ON [Archive1].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
            AND [Archive1].[DeviceParameterId] = [DeviceParameter].[Id]) [A]

        WHERE [A].[Num] = 1) [B]
      WHERE [B].[Num] = 1) [C]
      ON [C].[ParameterId] = [ParameterMapDeviceParameter].[ParameterId] ;

    COMMIT TRANSACTION;

    DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

    INSERT INTO @columnCaption
    OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES ('MainData', 'ParameterDescription', 'Параметр', 1, 1)
      , ('MainData', 'Time', 'Время', 0, 2)
      , ('MainData', 'Value', 'Значение', 1, 3)      
      , ('MainData', 'DiffValue', 'Разница за период', 1, 4)
      , ('MainData', 'AverageResourceConsumption', 'Среднее потребление по дому за период', 1, 5)
      , ('MainData', 'DimensionPrefix', 'Размерность', 0, 6)
      , ('MainData', 'MeasurementUnitDescription', 'Единица измерения', 0, 7)

  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN
      COMMIT TRANSACTION;
    END;

    RETURN (3);
  END CATCH;

  RETURN (0);

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter].[MeasurementUnitId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter].[DimensionId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[ParameterMapDeviceParameter].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[CTE1].[Archive1].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByChannel].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="374" />
				<Property Name="Length" Value="10484" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2015-11-05&#xD;&#xA;-- Description: This stored procedure returns last measurements by the channel identifier of individual accounting&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetIndividualAccountingFinalInstantByChannel &#xD;&#xA;@channelId INT,&#xD;&#xA;@periodBegin DATETIME,&#xD;&#xA;@periodEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  SET NOCOUNT ON;

  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
  INSERT INTO @resultSetName
    VALUES (1, 'MainData')
    , (2, 'ColumnCaption');

  SELECT
    [ResultSetName].[Order]
   ,[ResultSetName].[Name]
  FROM @resultSetName [ResultSetName];

  SET @periodBegin = CAST(CAST(@periodBegin AS DATE) AS DATETIME);
  SET @periodEnd = CAST(CAST(@periodEnd AS DATE) AS DATETIME);

  DECLARE @periodEndWithInclude DATETIME = DATEADD(DAY, 1, @periodEnd);

  DECLARE @now DATETIME = CAST(CAST(GETDATE() AS DATE) AS DATETIME);

  WITH [Archive]
  AS
  (SELECT
      [Archive].[Id]
     ,[Archive].[Time]
     ,[Archive].[Value]
     ,[Archive].[MeasurementDeviceId]
     ,[Archive].[DeviceParameterId]
     ,[Archive].[TimeSignatureId]
    FROM [Business].[Archive] [Archive] WITH (NOLOCK)
    WHERE [Archive].[PeriodTypeId] = 5 /* FinalInstant */ AND [Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEndWithInclude
    )

  SELECT

    ROW_NUMBER() OVER (ORDER BY [A].[PlacementId], [A].[ChannelId], [A].[ParameterMapDeviceParameterId]) [Id]
   ,[A].[PlacementId]
   ,[A].[ChannelId]
   ,[A].[ParameterMapDeviceParameterId]
   ,[A].[FirstValue]
   ,[A].[LastValue]
   ,[A].[Value]
   ,[A].[Start]
   ,[A].[End]
   ,[A].[PlacementNumber]
   ,[A].[PlacementPurposeDescription]
   ,[A].[PlacementHolderDescription]
   ,[A].[MeasurementDeviceFactoryNumber]
   ,[A].[ChannelDescription]
   ,[A].[ParameterDescription]
   ,[A].[ResourceSystemTypeDescription]
   ,[A].[DimensionDescription]
   ,[A].[MeasurementUnitDescription]
   ,[A].PhysicalParameterCode
  FROM (SELECT

      ROW_NUMBER() OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] DESC) [Num]
     ,[Channel].[Id] [ChannelId]
     ,[Channel].[Description] [ChannelDescription]
     ,[Channel].[MeasurementDeviceId] [MeasurementDeviceId]
     ,[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId]

     ,[Placement].[Id] [PlacementId]
     ,[Placement].[Number] [PlacementNumber]
     ,[ParameterMapDeviceParameter].[Id] [ParameterMapDeviceParameterId]

     ,FIRST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [FirstValue]
     ,LAST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [LastValue]

     ,LAST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) - FIRST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [Value]

     ,FIRST_VALUE([Archive].[Time]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [Start]
     ,LAST_VALUE([Archive].[Time]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [End]

     ,[PlacementPurpose].[Description] [PlacementPurposeDescription]

     ,COALESCE([Organization].[Description], [UserAdditionalInfo].[Description]) [PlacementHolderDescription]
     
     ,[MeasurementDevice].[FactoryNumber] [MeasurementDeviceFactoryNumber]

     ,[Parameter].[Description] [ParameterDescription]
     ,[ResourceSystemType].[ShortName] [ResourceSystemTypeDescription]
     ,[Dimension].[Prefix] [DimensionDescription]
     ,[MeasurementUnit].[Description] [MeasurementUnitDescription]
     ,[PhysicalParameter].Code [PhysicalParameterCode]

    FROM [Business].[Channel] [Channel] WITH (NOLOCK)

    INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
      ON [Placement].[BuildingId] = @buildingId
      AND [Placement].[HasIndividualAccounting] = 1
      AND [Placement].[Id] = [Channel].[PlacementId]

    INNER JOIN [Dictionaries].[PlacementPurpose] [PlacementPurpose]
      ON [PlacementPurpose].[Id] = [Placement].[PlacementPurposeId]

    INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
      ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

    INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
      ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5

    INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK)
      ON [ParameterMapDeviceParameter].[ParameterId] = [Parameter].[Id]

    INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter] WITH (NOLOCK)
      ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId]

    INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
      ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]

    INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK)
      ON [ResourceSystemType].[Id] = [Channel].[ResourceSystemTypeId]

    INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] WITH (NOLOCK)
      ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]

    INNER JOIN [Dictionaries].[Dimension] [Dimension] WITH (NOLOCK)
      ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]

   
    LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH (NOLOCK)
      ON [UserAdditionalInfo].[Id] = [Placement].[UserAdditionalInfoId]

    LEFT JOIN [Business].[Organization] [Organization] WITH (NOLOCK)
      ON [Organization].[Id] = [Placement].[OrganizationId]

    LEFT JOIN [Archive] WITH (NOLOCK)
      ON [Archive].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
      AND [Archive].[DeviceParameterId] = [DeviceParameter].[Id]       
      
    ) [A]

  WHERE [A].[Num] = 1
  ORDER BY [A].[PlacementId], [A].[ResourceSystemTypeId], [A].[ParameterMapDeviceParameterId];


  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

  INSERT INTO @columnCaption
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
    VALUES ('MainData', 'Id', 'Ид', 0, 1)
    , ('MainData', 'PlacementNumber', 'Помещение', 1, 2)
    , ('MainData', 'PlacementPurposeDescription', 'Назначение помещения', 0, 3)
    , ('MainData', 'PlacementHolderDescription', 'Владелец', 1, 4)
    , ('MainData', 'ChannelDescription', 'Канал', 1, 5)
    , ('MainData', 'MeasurementDeviceFactoryNumber', 'Завод. номер', 1, 6)
    , ('MainData', 'ParameterDescription', 'Параметр', 1, 7)
    , ('MainData', 'ResourceSystemTypeDescription', 'Ресурс', 1, 8)
    , ('MainData', 'Value', 'Значение', 1, 9)
    , ('MainData', 'FirstValue', 'На начало', 1, 10)
    , ('MainData', 'LastValue', 'На конец', 1, 11)
    , ('MainData', 'Start', 'Начало периода', 1, 12)
    , ('MainData', 'End', 'Конец периода', 1, 13);

  RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[CTE1].[Archive].[TimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[TimeSignatureId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingFinalInstantByPeriodArchives].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="421" />
				<Property Name="Length" Value="7587" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2014-10-08&#xD;&#xA;-- Update date: 2018-09-18&#xD;&#xA;-- Description: Возвращает архивные по группе устройств связанных &#xD;&#xA;-- с квартирами в строении (разность между показаниями за период)&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE   PROCEDURE Programmability.GetIndividualAccountingFinalInstantByPeriodArchives @buildingId INT,&#xD;&#xA;@periodBegin DATETIME,&#xD;&#xA;@periodEnd DATETIME&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  SET NOCOUNT ON;

  SET @periodBegin = CAST(CAST(@periodBegin AS DATE) AS DATETIME);
  SET @periodEnd = CAST(CAST(@periodEnd AS DATE) AS DATETIME);

  DECLARE @periodEndWithInclude DATETIME = DATEADD(DAY, 1, @periodEnd);

  WITH [Archive]
  AS
  (SELECT
      [Archive].[Id]
     ,[Archive].[Time]
     ,[Archive].[Value]
     ,[Archive].[MeasurementDeviceId]
     ,[Archive].[DeviceParameterId]
    
    FROM [Business].[Archive] [Archive] WITH (NOLOCK)
    WHERE [Archive].[PeriodTypeId] = 5 /* FinalInstant */ 
    AND [Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEndWithInclude
  )

  SELECT TOP(1) AVG([A].[Value]) OVER (PARTITION BY  [A].[ParameterId])
   
  FROM 
   (
    SELECT
      ROW_NUMBER() OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] DESC) [Num]     
    ,[ParameterMapDeviceParameter].[ParameterId] [ParameterId]
     
     ,LAST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) 
      - FIRST_VALUE([Archive].[Value]) OVER (PARTITION BY [Channel].[Id], [ParameterMapDeviceParameter].[Id] ORDER BY [Archive].[Time] ASC) [Value]

    FROM [Business].[Channel] [Channel] WITH (NOLOCK)

    INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
      ON [Placement].[BuildingId] = @buildingId
      AND [Placement].[HasIndividualAccounting] = 1
      AND [Placement].[Id] = [Channel].[PlacementId]

    INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
      ON [ParameterMapDeviceParameter].[ChannelTemplateId] = [Channel].[ChannelTemplateId]
      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5 AND [ParameterMapDeviceParameter].ParameterId = @parameterId

    INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
      ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]

    LEFT JOIN [Archive] WITH (NOLOCK)
      ON [Archive].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]
      AND [Archive].[DeviceParameterId] = [DeviceParameter].[Id]     
   ) [A]
      
  WHERE [A].[Num] = 1

  RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@parameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive].[Value]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[CTE1].[Archive].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@parameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="2450" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE Programmability.GetIndividualAccountingPeriodicalAverageResourceConsumptionByParameter &#xD;&#xA;  @buildingId INT,&#xD;&#xA;  @parameterId INT,&#xD;&#xA;  @periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetIndividualAccountingPlacementInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

  /*Список имен выходных резалтсетов*/
  SET NOCOUNT ON;
  SET XACT_ABORT ON;

  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName
  OUTPUT inserted.[Order], inserted.[Name]
    VALUES (1, 'MainData'),
    (2, 'ColumnCaption');

  /* Список групп параметров*/
  DECLARE @group TABLE (
    [Id] INT
   ,[Name] NVARCHAR(32)
   ,[IconClass] NVARCHAR(32)
  );

  INSERT INTO @group
    VALUES (1, 'Строение и помещение', 'font-icon-building'),
    (2, 'Владелец и ресурс', 'font-icon-resourcesystemtype'),
    (3, 'Устройство', 'font-icon-measurement-device');

  /* Ссылочная таблица между параметром и группой */
  DECLARE @groupLink TABLE (
    [GroupId] INT
   ,[PlacementInfoId] INT
  );
  DECLARE @measurementDeviceId INT = (SELECT
      [Channel].[MeasurementDeviceId]
    FROM [Business].[Channel] [Channel]
    WHERE [Channel].[Id] = @channelId)

  INSERT INTO @groupLink
    VALUES (1, 1), (1, 2), (1, 3), (2, 4), (2, 5), (3, 6), (3, 7), (3, 8), (3, 9), (3, 10), (3, 11), (3, 12);

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    BEGIN TRANSACTION;

    /* Основной список информационных параметров */
    (
    SELECT
      [GroupLink].[GroupId]
     ,[Group].[Name] [Group]
     ,[Group].[IconClass] [IconClass]
     ,[PlacementInfo].[PlacementInfoId]
     ,[PlacementInfo].[Name]
     ,[PlacementInfo].[Value]
    FROM (SELECT
        ROW_NUMBER() OVER (ORDER BY (SELECT
            NULL)
        ) [PlacementInfoId]
       ,[Name]
       ,[Value]
      FROM (SELECT

          CAST([Building].[FullAddress] AS NVARCHAR(MAX)) [Полный адрес]

         ,CAST(ISNULL([ServiceOrganization].[Description], 'Нет данных для отображения') AS NVARCHAR(MAX)) [Эксплуатационная организация]

         ,CAST([Placement].[Description] AS NVARCHAR(MAX)) [Помещение]

         ,CAST(ISNULL(COALESCE([Organization].[Description], [UserAdditionalInfo].[Description]), 'Нет данных для отображения') AS NVARCHAR(MAX)) [Владелец]

         ,CAST([ResourceSystemType].[ShortName] AS NVARCHAR(MAX)) [Ресурс]

         ,CAST([MeasurementDevice].[Description] AS NVARCHAR(MAX)) [Измерительное устройство]

         ,CAST([MeasurementDevice].[FactoryNumber] AS NVARCHAR(MAX)) [Серийный номер]

         ,CAST([StatusConnection].[Description] AS NVARCHAR(MAX)) [Статус последнего подключения]

         ,CAST(ISNULL([StatusConnectionBar].[HtmlTable], 'Нет данных для отображения') AS NVARCHAR(MAX)) [Статусы подключений]

         ,CAST(FORMAT([MeasurementDevice].[LastConnectionTime], 'dd.MM.yyyy HH:mm:ss') AS NVARCHAR(MAX)) [Время последнего опроса]

         ,CAST(FORMAT([MeasurementDevice].[CurrentAccreditationDate], 'dd.MM.yyyy') AS NVARCHAR(MAX)) [Дата поверки]

         ,CAST(FORMAT([MeasurementDevice].[NextAccreditationDate], 'dd.MM.yyyy') AS NVARCHAR(MAX)) [Дата следующей поверки]


        FROM [Business].[Placement] [Placement] WITH (NOLOCK)

        INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
          ON [Placement].[BuildingId] = [Building].[Id]

        LEFT OUTER JOIN [Business].[Organization] [ServiceOrganization] WITH (NOLOCK)
          ON [ServiceOrganization].[Id] = [Building].[OrganizationId]

        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
          ON [Channel].[PlacementId] = [Placement].[Id]
          /* по выбранному каналу*/
          AND [Channel].[Id] = @channelId

        INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK)
          ON [ResourceSystemType].[Id] = [Channel].[ResourceSystemTypeId]

        INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
          ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] WITH (NOLOCK)
          ON [StatusConnection].[Id] = [MeasurementDevice].[LastStatusConnectionId]

        LEFT OUTER JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH (NOLOCK)
          ON [UserAdditionalInfo].[Id] = [Placement].[UserAdditionalInfoId]

        LEFT OUTER JOIN [Business].[Organization] [Organization] WITH (NOLOCK)
          ON [Organization].[Id] = [Placement].[OrganizationId]

        LEFT OUTER JOIN [dbo].GetHtmlStatusConnectionBar(@measurementDeviceId, 'MeasurementDevice') [StatusConnectionBar]
          ON [StatusConnectionBar].[EntityId] = [MeasurementDevice].[Id]     
      ) [PlacementInfo]

      UNPIVOT
      (
      [Value] FOR [Name] IN
      (
      [Полный адрес],
      [Эксплуатационная организация],
      [Помещение],
      [Владелец],
      [Ресурс],
      [Измерительное устройство],
      [Серийный номер],
      [Статус последнего подключения],
      [Статусы подключений],

      [Время последнего опроса],
      [Дата поверки],
      [Дата следующей поверки]
      )
      ) [PlacementInfo]) [PlacementInfo]

    INNER JOIN @groupLink [GroupLink]
      ON [PlacementInfo].[PlacementInfoId] = [GroupLink].[PlacementInfoId]

    INNER JOIN @group [Group]
      ON [Group].[Id] = [GroupLink].[GroupId]
    )

    UNION ALL

    /* Присоединяем расчетные счета */
    (
    SELECT
      2 [GroupId]
     ,'Расчетные счета' [Group]
     ,''
     ,12
     ,'Cчет' [Name]
     ,[CheckingAccount].[Description] [Value]

    FROM [Business].[CheckingAccount] [CheckingAccount]

    INNER JOIN [Business].[CheckingAccountLinkPlacement] [CheckingAccountLinkPlacement]
      ON [CheckingAccount].[Id] = [CheckingAccountLinkPlacement].[CheckingAccountId]

    INNER JOIN [Business].[Placement] [Placement]
      ON [Placement].[Id] = [CheckingAccountLinkPlacement].[PlacementId]
    INNER JOIN [Business].[Channel] [Channel]
      ON [Placement].[Id] = [Channel].[PlacementId]
    WHERE [Channel].[Id] = @channelId
    );

    COMMIT TRANSACTION;

    DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

    /* Список столбцов для визуальной решетки */
    INSERT INTO @columnCaption

    OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]

      VALUES ('MainData', 'GroupId', 'Ид. группы', 1, 0)
      , ('MainData', 'Group', 'Группа', 1, 1)
      , ('MainData', 'Name', 'Наименование', 1, 2)
      , ('MainData', 'Value', 'Значение', 1, 3);
  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN
      COMMIT TRANSACTION;
    END;

    RETURN (3);
  END CATCH;

  RETURN (0);
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar].[HtmlTable]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastConnectionTime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[CurrentAccreditationDate]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[NextAccreditationDate]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@groupLink].[PlacementInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@groupLink].[GroupId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[IconClass]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccount]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccount].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement].[CheckingAccountId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccountLinkPlacement].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[CheckingAccount].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[Id]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[Name]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@group].[IconClass]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@groupLink]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@groupLink].[GroupId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@groupLink].[PlacementInfoId]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[PV1].[PlacementInfo].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetIndividualAccountingPlacementInfo].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="404" />
				<Property Name="Length" Value="7156" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-10-23&#xD;&#xA;-- Update date: 2018-09-20&#xD;&#xA;-- Description: Сводная информация  по индивидуальному учету о помещении, владельце, расчетном счете и устройстве  &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetIndividualAccountingPlacementInfo @channelId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetLostMeasurementDevices]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  

  SET NOCOUNT ON;
  
  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName VALUES
	   (1, 'MainData'),		   -- стандартное имя набора для отображения в решетке
	   (2, 'ColumnCaption');	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов
  
  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName];

  /* 2. Основная выборка данных */
  SELECT 
    [MeasurementDevice].[Id] [Id],
    [MeasurementDevice].[FactoryNumber] [FactoryNumber],
    [MeasurementDevice].[Description] [Description],    
    N'Отсутствуют связанные каналы' [Mark]

    FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)

    WHERE NOT EXISTS 
    (
      SELECT [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH(NOLOCK) 
        WHERE [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
    )

UNION ALL

  SELECT 
    [MeasurementDevice].[Id] [Id],
    [MeasurementDevice].[FactoryNumber] [FactoryNumber],
    [MeasurementDevice].[Description] [Description],    
    N'Точка доступа не связана со строением' [Mark]

  FROM [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
  
    INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK) 
    ON [MeasurementDevice].[AccessPointId] = [AccessPoint].[Id]
    WHERE NOT EXISTS 
    (
      SELECT [AccessPointId] 
      FROM [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK) 
      WHERE [AccessPoint].[Id] = [AccessPointLinkBuilding].[AccessPointId]
    )

UNION ALL

  SELECT 
    [MeasurementDevice].[Id] [Id],
    [MeasurementDevice].[FactoryNumber] [FactoryNumber],
    [MeasurementDevice].[Description] [Description],    
    N'Устройство не связано с точкой доступа' [Mark]

  FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK) 

  WHERE [MeasurementDevice].[AccessPointId] IS NULL

UNION ALL

  SELECT 
    [Md].[Id] [Id],
    [Md].[FactoryNumber] [FactoryNumber],
    [Md].[Description] [Description],    
    'Точка доступа не соответствует привязке cвязанных каналов со строениями' [Mark]  
  
  FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)

  WHERE EXISTS 
  ( 
    (
    /* Связи MeasurementDevice - Building (Channel) */
      SELECT   
        [Building].[Id] [BuildingId]
       
      FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
    
      INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
        ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
    
      INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
        ON [Placement].[Id] = [Channel].[PlacementId]
    
      INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
        ON [Building].[Id] = [Placement].[BuildingId]
    
      WHERE [MeasurementDevice].[Id] = [Md].[Id]
    )
    EXCEPT
    (        
        (
          /* Связи MeasurementDevice - Building (AccessPoint) */
          SELECT 
       
            [AccessPointLinkBuilding].[BuildingId] [BuildingId]
      
          FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
        
          INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
            ON [AccessPoint].[Id] = [MeasurementDevice].[AccessPointId]
        
          INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK)
            ON [AccessPoint].[Id] = [AccessPointLinkBuilding].[AccessPointId]
          
          WHERE [MeasurementDevice].[Id] = [Md].[Id]
        )
        INTERSECT
        (
          /* Связи MeasurementDevice - Building (Channel) */
          SELECT   
            [Building].[Id] [BuildingId]
           
          FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
        
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
            ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
        
          INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
            ON [Placement].[Id] = [Channel].[PlacementId]
        
          INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
            ON [Building].[Id] = [Placement].[BuildingId]
        
          WHERE [MeasurementDevice].[Id] = [Md].[Id]
        )
     )
  )
  
  /**/

  /* 3. Вспомогательная таблица с расшифровками столбцов */
  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType]; 
  
  INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES  
  	  ('MainData', 'Id', 'Ид.', 1, 1)
      ,('MainData', 'FactoryNumber', 'Заводской номер', 1, 2)
  	  ,('MainData', 'Description', 'Наименование', 1, 3)  	 
  	  ,('MainData', 'Mark', 'Отметка', 1, 4)  	 
  /**/

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetLostMeasurementDevices].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetLostMeasurementDevices].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="428" />
				<Property Name="Length" Value="5532" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-12-18&#xD;&#xA;-- Description: Измерительные устройства, которые недоступны для конченого доступа &#xD;&#xA;-- (отсутствуют каналы, нет точки доступа, точка доступа не связана со строениями)  &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetLostMeasurementDevices  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMeasurementDeviceDistribution]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   SET @cityId = IIF(@cityId = 0, NULL, @cityId);
   
   DECLARE @userId  INT;    
   DECLARE @roleCode NVARCHAR(64);

   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

  WITH [MeasurementDeviceWithChannelLink]
  AS
  (
    SELECT [MeasurementDevice].[Id] 
    FROM [Business].[MeasurementDevice] [MeasurementDevice]
    
    INNER JOIN [Business].[Channel] [Channel]
      ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

    INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
          ON [UserLink].[ChannelId] = [Channel].[Id] AND 
          ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))		
  )

	SELECT 
     1 [Count]
     ,[MeasurementDevice].[Id] [Id]
     ,[City].[Description] [City]
     ,[District].[Description] [District]
     ,[Building].[Description] [Building]
     ,[AccessPoint].[Description] [AccessPoint]
     ,[Device].[Code] [Device]     
     ,[MeasurementDevice].[Description] [MeasurementDevice]
     ,[DeviceReader].[Description] [DeviceReaderDescription]
         
     FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
  
        INNER JOIN [Dictionaries].[Device] [Device]  WITH(NOLOCK)
          ON [MeasurementDevice].[DeviceId] = [Device].[Id] 
                                    
        INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
          ON [AccessPoint].[Id] = [MeasurementDevice].[AccessPointId]

        LEFT OUTER JOIN [Business].[DeviceReader] [DeviceReader] WITH(NOLOCK)
          ON [DeviceReader].[Id] = [AccessPoint].[DeviceReaderId]                

       INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH(NOLOCK)
          ON [AccessPoint].[Id] =  [AccessPointLinkBuilding].[AccessPointId]

        INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
          ON [Building].[Id] = [AccessPointLinkBuilding].[BuildingId]

        INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
          ON [Building].[DistrictId] = [District].[Id] 
  
        INNER JOIN [Dictionaries].[City] [City] WITH(NOLOCK)
          ON [City].[Id] = [District].[CityId]

      WHERE 
        [MeasurementDevice].[Id] IN (SELECT [Id] FROM [MeasurementDeviceWithChannelLink]) AND 
        ([City].[Id] = @cityId OR @cityId IS NULL);
      
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceDistribution].[@cityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceDistribution].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReader]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[DeviceReaderId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceReader].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceDistribution].[CTE1].[MeasurementDeviceWithChannelLink]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceDistribution].[CTE1].[MeasurementDeviceWithChannelLink].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceDistribution].[@cityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceDistribution].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="371" />
				<Property Name="Length" Value="2921" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-23&#xD;&#xA;-- Edit date: 2015-10-28&#xD;&#xA;-- Description: Источник для построения сводной таблицы распределения каналов приборов&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetMeasurementDeviceDistribution]&#xD;&#xA;&#x9;@cityId INT,&#xD;&#xA;  @userName NVARCHAR(64)   &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMeasurementDeviceSignalQuality]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET DATEFORMAT dmy;
  SET LANGUAGE N'русский';
  SET NOCOUNT ON;

   /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

   INSERT INTO @resultSetName VALUES
	   (1, 'MainData'),		    -- стандартное имя набора для отображения в решетке
	   (2, 'ColumnCaption'),	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов
	   (3, 'ReportParameter') -- свободные параметры отчета

   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	   FROM @resultSetName [ResultSetName]
   /**/

   /* 2. Основная выборка */

   DECLARE @userId  INT;    
   DECLARE @roleCode NVARCHAR(64);

   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

   SET @buildingId = IIF(@buildingId = 0, NULL, @buildingId);
   SET @resourceSystemTypeId = IIF(@resourceSystemTypeId = 0, NULL, @resourceSystemTypeId);
   SET @districtId = IIF(@districtId = 0, NULL, @districtId);
   SET @deviceId = IIF(@deviceId = 0, NULL, @deviceId);
   SET @transportServerModelId = IIF(@transportServerModelId = 0, NULL, @transportServerModelId);
   SET @transportServerModelStatusId = IIF(@transportServerModelStatusId = 0, NULL, @transportServerModelStatusId);
   SET @deviceStatusId = IIF(@deviceStatusId = 0, NULL, @deviceStatusId);
   
   -- дата доступа к прибору по-умолчанию
   DECLARE @defaultStartDateTime DATETIME 
      = CONVERT(DATETIME, '1900-01-01 00:00:00.000');
   
   WITH Result AS
   (
    -- выборка по измерительным приборам 
    SELECT 
	  [PlacementNumber],
	  [EntityId],
      [Address], 
      [DistrictDescription], 
      [IpAddress],
      [MeasurementDeviceId],
      [AccessPointId],
      [LastConnectionTime],
      [DeviceCode],
      [NetworkAddress],
      [StatusConnectionDescription],
      [SuccessConnectionPercent]
    FROM
    (
    SELECT 
	  -- для устранения появления дубликатов, т.к. INNER JOIN пригонит много дубликатов
      ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [MdId],
	  ISNULL(TRY_CAST([Placement].[Number] AS INT), 0) [PlacementNumber],
	  [Md].[Id] [EntityId],
      NULL [Address],
      NULL [DistrictDescription],
      IIF ([Placement].[PlacementPurposeId] = 2, 'Узел учета', 
	       IIF ([Placement].[PlacementPurposeId] = 1, 'Квартира ' + IIF([Placement].[Number] IS NULL, '', [Placement].[Number]), NULL)) [IpAddress],      
      [Md].[Id] [MeasurementDeviceId],
      [AccessPoint].[Id] [AccessPointId],
      IIF([Md].[LastConnectionTime] = @defaultStartDateTime, NULL, [Md].[LastConnectionTime]) 
      [LastConnectionTime],       
      [Device].[Code] + '-' + CAST([Md].[FactoryNumber] AS NVARCHAR) [DeviceCode],
      [Md].[NetworkAddress] [NetworkAddress],
      [StatusConnection].[Description] [StatusConnectionDescription],
      [Md].[SuccessConnectionPercent] [SuccessConnectionPercent],
	  [AccessPoint].[TransportServerModelId] [TransportServerModelId],
	  [Md].[LastStatusConnectionId] [MdLastStatusConnectionId],
	  [AccessPoint].[LastStatusConnectionId] [ApLastStatusConnectionId]
   FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
      
      INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
          ON [Channel].[MeasurementDeviceId] = [Md].[Id]
      
	  INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
	      ON [Channel].[PlacementId] = [Placement].[Id]

      INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
          ON [UserLink].[ChannelId] = [Channel].[Id] AND 
          ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	
   
      INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH (NOLOCK)
          ON [AccessPoint].[Id] = [Md].[AccessPointId]
   
      INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] WITH (NOLOCK)
          ON [Md].[LastStatusConnectionId] = [StatusConnection].[Id]

     INNER JOIN [Dictionaries].[Device] [Device] WITH (NOLOCK)
          ON [Md].[DeviceId] = [Device].[Id]
     
    WHERE ([Md].[DeviceId] = @deviceId OR @deviceId IS NULL) 
	       AND ([Channel].[ResourceSystemTypeId] = @resourceSystemTypeId OR @resourceSystemTypeId IS NULL) 
		   
		   AND ((@isFlatAccounting = 0) OR
		        (@isFlatAccounting = 1 AND @buildingId IS NULL AND [Placement].[PlacementPurposeId] = 1)
		        OR (@isFlatAccounting = 1 AND @buildingId IS NOT NULL AND [Placement].[BuildingId] = @buildingId AND [Placement].[PlacementPurposeId] = 1))
    ) [Md] 
    WHERE [Md].[MdId] = 1 AND ([Md].[TransportServerModelId] = @transportServerModelId OR @transportServerModelId IS NULL)
	AND ([Md].[MdLastStatusConnectionId] = @deviceStatusId OR @deviceStatusId IS NULL)
	AND ([Md].[ApLastStatusConnectionId] = @transportServerModelStatusId OR @transportServerModelStatusId IS NULL)

   UNION ALL
   
   -- выборка по точкам доступа
   SELECT 
    [PlacementNumber],
    [EntityId],
    [Address], 
    [DistrictDescription], 
    [IpAddress],
    [MeasurementDeviceId],
    [AccessPointId],
    [LastConnectionTime],
    [DeviceCode],
    [NetworkAddress],
    [StatusConnectionDescription],
    [SuccessConnectionPercent]
    FROM
    (
       SELECT 
          ROW_NUMBER() OVER(PARTITION BY [Ap].[Id] ORDER BY [Ap].[Id]) [ApId],
		  0 [PlacementNumber],
		  [Ap].[Id] [EntityId],
          [Building].[FullAddress] [Address],
          [District].[Description] [DistrictDescription],
          IIF([Ap].[TransportServerModelId] = 6, '', [Ap].[NetAddress]) [IpAddress],
          NULL [MeasurementDeviceId], 
          [Ap].[Id] [AccessPointId],
          IIF([Ap].[LastConnectionTime] = @defaultStartDateTime, NULL, [Ap].[LastConnectionTime]) [LastConnectionTime],
          [Tsm].[Code] [DeviceCode],
          NULL [NetworkAddress],
          [StatusConnection].[Description] [StatusConnectionDescription],
          [Ap].[SuccessConnectionPercent][SuccessConnectionPercent],
          [Ap].[TransportServerModelId] [TransportServerModelId], 
		  [Md].[LastStatusConnectionId] [MdLastStatusConnectionId],
	      [Ap].[LastStatusConnectionId] [ApLastStatusConnectionId]     
          FROM [Business].[AccessPoint] [Ap] WITH (NOLOCK)
          
          INNER JOIN [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
             ON [Ap].[Id] = [Md].[AccessPointId] AND ([Md].[DeviceId] = @deviceId OR @deviceId IS NULL)
			    AND ([Md].[LastStatusConnectionId] = @deviceStatusId OR @deviceStatusId IS NULL) /*!*/
          
          INNER JOIN [Business].[AccessPointLinkBuilding] [BuildingLink] WITH (NOLOCK)
             ON [BuildingLink].[AccessPointId] = [Ap].[Id]
    
          INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
             ON [Building].[Id] = [BuildingLink].[BuildingId]
          
          INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
            ON [Building].[DistrictId] = [District].[Id]
          
          INNER JOIN [Dictionaries].[TransportServerModel] [Tsm] WITH (NOLOCK)
            ON [Ap].[TransportServerModelId] = [Tsm].[Id]
    
          INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] WITH (NOLOCK)
            ON [Ap].[LastStatusConnectionId] = [StatusConnection].[Id]
    
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
            ON [Channel].[MeasurementDeviceId] = [Md].[Id]

		  INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
		    ON [Placement].[Id] = [Channel].[PlacementId]
			    AND ((@isFlatAccounting = 0) OR
		        (@isFlatAccounting = 1 AND @buildingId IS NULL AND [Placement].[PlacementPurposeId] = 1)
		        OR (@isFlatAccounting = 1 AND @buildingId IS NOT NULL AND [Placement].[BuildingId] = @buildingId AND [Placement].[PlacementPurposeId] = 1))

          INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
            ON [UserLink].[ChannelId] = [Channel].[Id] AND 
            ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	
          
		  WHERE ([Channel].[ResourceSystemTypeId] = @resourceSystemTypeId OR @resourceSystemTypeId IS NULL)		  
          ) [Ap]
    WHERE [Ap].[ApId] = 1 AND ([Ap].[TransportServerModelId] = @transportServerModelId OR @transportServerModelId IS NULL)
	      AND ([Ap].[MdLastStatusConnectionId] = @deviceStatusId OR @deviceStatusId IS NULL)
	      AND ([Ap].[ApLastStatusConnectionId] = @transportServerModelStatusId OR @transportServerModelStatusId IS NULL)
   )
   
   SELECT   
            ROW_NUMBER() OVER (ORDER BY [DistrictId] ASC, [Result].[AccessPointId] ASC, [Result].[MeasurementDeviceId] ASC) [Id],
            [DistrictId],
			[EntityId],
            [Address],
            [BuildingLink].[DistrictDescription],
            [IpAddress],
            [MeasurementDeviceId],
            [Result].[AccessPointId],
            [LastConnectionTime],
            [DeviceCode],
            [NetworkAddress],
            [StatusConnectionDescription],
            [SuccessConnectionPercent],
			[BuildingLink].[BuildingId]
    FROM [Result]
    
    INNER JOIN 
      (
        SELECT [L].[DistrictId], [L].[AccessPointId], [L].[DistrictDescription],
		[L].[BuildingId]  FROM
        (
          SELECT 
            ROW_NUMBER() OVER(PARTITION BY [AccessPointId] ORDER BY [AccessPointId]) [Num],
            [AccessPointId],
            [District].[Id] [DistrictId],
            [District].[Description] [DistrictDescription],
			[Building].[Id] [BuildingId]
          FROM [Business].[AccessPointLinkBuilding] [BuildingLink]  WITH (NOLOCK)

          INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
            ON [Building].[Id] = [BuildingLink].[BuildingId]
    
          INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
            ON [Building].[DistrictId] = [District].[Id]

        ) [L] WHERE [L].[Num] = 1      
      )[BuildingLink]

      ON [BuildingLink].[AccessPointId] = [Result].[AccessPointId]

    WHERE  ([DistrictId] = @districtId OR  @districtId IS NULL)	AND 
	       ([BuildingId] = @buildingId OR @buildingId IS NULL)             

    ORDER BY [DistrictId] ASC, [Result].[AccessPointId] ASC, [Result].[PlacementNumber] ASC, [Result].[MeasurementDeviceId]

  /* 3. Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

	INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
     ('MainData', 'Id', 'Ид', 1, 1)
	,('MainData', 'EntityId', 'Ид объекта', 1, 2)
    ,('MainData', 'DistrictId', 'Ид района', 1, 3)
    ,('MainData', 'DistrictDescription', 'Район', 1, 4)     
	  ,('MainData', 'Address', 'Адрес', 1, 5)    
    ,('MainData', 'IpAddress', 'IP-адрес', 1, 6)
	  ,('MainData', 'LastConnectionTime', 'Дата', 1, 7)
	  ,('MainData', 'DeviceCode', 'Тип устройства', 1, 8)
    ,('MainData', 'NetworkAddress', 'Сетевой адрес', 1, 9)
    ,('MainData', 'StatusConnectionDescription', 'Статус', 1, 10)
    ,('MainData', 'SuccessConnectionPercent', 'Процент успешных соединений', 1, 11);
		
	/**/

	/* 4. Формирование таблицы параметрии отчета */
  DECLARE @empty NCHAR(1) = '';
	DECLARE @reportParameter [Programmability].[CustomParameterTableType];
	
  INSERT INTO @reportParameter
    OUTPUT inserted.[Name], inserted.[Value]
    SELECT [Name], [Value] FROM 
    (
        SELECT [Name], [Value] 
        FROM (
            SELECT 
              CAST([User].[UserName] AS NVARCHAR(128)) [UserName]
              ,CAST(ISNULL([UserInfo].[FirstName], @empty) AS NVARCHAR(128)) [FirstName]
              ,CAST(ISNULL([UserInfo].[LastName], @empty) AS NVARCHAR(128)) [LastName]
              ,CAST(ISNULL([UserInfo].[Description], @empty) AS NVARCHAR(128)) [UserInfoDescription]

            FROM [Admin].[User] [User] WITH (NOLOCK) 
            LEFT OUTER JOIN [Business].[UserAdditionalInfo] [UserInfo] WITH (NOLOCK) 
              ON [User].[Id] = [UserInfo].[Id]
            WHERE [User].[UserName] = @userName)
          [A]
          UNPIVOT
          (
            [Value] FOR [Name] IN 
            (
              [UserName], 
              [FirstName], 
              [LastName],
              [UserInfoDescription] 
            )
          ) [B]   
    ) [C]

    UNION ALL 

    SELECT 'IsFlatAccounting' [Name], CAST(@isFlatAccounting AS NVARCHAR(128)) [Value]
   
	
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@transportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@transportServerModelStatusId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@deviceStatusId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[NetworkAddress]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@isFlatAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[NetworkAddress]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[NetAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastConnectionTime]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[TransportServerModel].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[StatusConnection].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[TransportServerModelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[LastStatusConnectionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@reportParameter].[Value]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[PlacementNumber]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[EntityId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[Address]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[DistrictDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[IpAddress]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[AccessPointId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[AccessPoint].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[LastConnectionTime]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[DeviceCode]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[NetworkAddress]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[NetworkAddress]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[StatusConnectionDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[StatusConnection].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[CTE1].[Result].[SuccessConnectionPercent]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[PV2].[B].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@buildingId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@resourceSystemTypeId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@districtId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@transportServerModelId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@deviceId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@transportServerModelStatusId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@deviceStatusId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementDeviceSignalQuality].[@isFlatAccounting]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="13000" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetMeasurementDeviceSignalQuality]&#xD;&#xA;(&#xD;&#xA;   @userName NVARCHAR(64),&#xD;&#xA;   @buildingId INT = NULL,&#xD;&#xA;   @resourceSystemTypeId INT = NULL,&#xD;&#xA;   @districtId INT = NULL,&#xD;&#xA;   @transportServerModelId INT = NULL,&#xD;&#xA;   @deviceId INT = NULL,&#xD;&#xA;   @transportServerModelStatusId INT = NULL,&#xD;&#xA;   @deviceStatusId INT = NULL,&#xD;&#xA;   @isFlatAccounting BIT = 0&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMeasurementResultArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
   SET XACT_ABORT ON;

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    BEGIN TRANSACTION;

    /* 1. Формирование имен резалтсетов */   	 
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES 
        (1, 'MainData'),
        (2, 'ColumnCaption'),
        (3, 'PeriodTypes'),
        (4, 'LastTimeSignature');    

      SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	     FROM @resultSetName [ResultSetName];
  
  
    /*2. Основная выборка */
   
    /* Идентификатор шаблона канала */
    DECLARE @channelTemplateId INT = 
    (
      SELECT [ChannelTemplateId] 
      FROM [Business].[Channel] [Channel] 
      WHERE [Channel].[Id] = @channelId
    );

    /* Последняя временная сигнатура */
    DECLARE @lastTimeSignatureId INT = 
    (      
      SELECT [MeasurementDevice].[LastTimeSignatureId] 
      FROM [Business].[MeasurementDevice] [MeasurementDevice] 
      WHERE [MeasurementDevice].[Id] = @measurementDeviceId    
    );

    IF @lastTimeSignatureId IS NULL
    BEGIN 
      SET @lastTimeSignatureId = 
      (
        SELECT [TimeSignature].[Id] FROM
          (
              SELECT 
                [TimeSignature].[Id], 
                ROW_NUMBER() OVER(ORDER BY [TimeSignature].[Time] DESC) [Num]
  
              FROM [Business].[TimeSignature] [TimeSignature]
  
              WHERE [TimeSignature].[MeasurementDeviceId] = @measurementDeviceId
  
          ) [TimeSignature]
          WHERE [Num]= 1
      );
    END;
    
    /* Матрица сопоставления в соответствии с шаблоном канала */
    WITH [ParameterMapDeviceParameter]
    AS
    (
      SELECT 
        [ParameterMapDeviceParameter].[Id], 
        [ParameterMapDeviceParameter].[DeviceParameterId],       
        [ParameterMapDeviceParameter].[ParameterId], 
        [ParameterMapDeviceParameter].[ParameterDictionaryId], 
        [ParameterMapDeviceParameter].[Order],
        
        [Parameter].[Description] [ParameterDescription], 

        COALESCE([Muc].[DimensionPrefix2], [Dimension].[Prefix]) [DimensionPrefix],
      
        COALESCE([Muc].[MeasurementUnitDescription2], [MeasurementUnit].[Description]) [MeasurementUnitDescription],

        [PhysicalParameter].[Id] [PhysicalParameterId],
        [PhysicalParameter].[Code] [PhysicalParameterCode],
        [PhysicalParameter].[Description] [PhysicalParameterDescription],
        [PhysicalParameter].[Order] [PhysicalParameterOrder],

        [Muc].[DimensionValue2] [DimensionValue2],
        [Dimension].[Value] [DimensionValue],
        [Muc].[Expression] [Expression]
    
      FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
    
      
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
        ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]
  
      INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter]
        ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId]
    
      INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] 
        ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]
  
      INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] 
        ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]
  
      /* конвертация единиц измерения */
      LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc]     
        /* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
        ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 
      /**/

      INNER JOIN [Dictionaries].[Dimension] [Dimension]
        ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]
    
      WHERE [ParameterMapDeviceParameter].[PeriodTypeId] = @periodTypeId 
        AND [ParameterMapDeviceParameter].[ChannelTemplateId] = @channelTemplateId    
    )
   
      /* Выборка из архива */
      SELECT 
            
        [ParameterMapDeviceParameter].[Id],
        [ParameterMapDeviceParameter].[ParameterId],
            
        [ParameterMapDeviceParameter].[ParameterDescription],  
        [ParameterMapDeviceParameter].[DimensionPrefix],
        [ParameterMapDeviceParameter].[MeasurementUnitDescription], 
        
        [ParameterMapDeviceParameter].[PhysicalParameterId],
        [ParameterMapDeviceParameter].[PhysicalParameterCode], 
        [ParameterMapDeviceParameter].[PhysicalParameterDescription], 
        [ParameterMapDeviceParameter].[PhysicalParameterOrder],

        [Archive].[Time],
        [Archive].[IsValid],
        [dbo].[ConvertMeasurementUnit]
        (
                [DimensionValue], 
                [DimensionValue2], 
                [Archive].[Value], 
                [Expression]
        ) [Value]  

        ,[ParameterDictionaryValue].[Description] [DictionaryValueDescription]
        ,[ParameterDictionaryValue].[Code] [DictionaryValueCode]

      FROM [Business].[Archive] [Archive]
  
      INNER JOIN [ParameterMapDeviceParameter] 
        ON [ParameterMapDeviceParameter].[DeviceParameterId] = [Archive].[DeviceParameterId]

      LEFT JOIN [Dictionaries].[ParameterDictionaryValue] [ParameterDictionaryValue]
        ON [ParameterDictionaryValue].[ParameterDictionaryId] = [ParameterMapDeviceParameter].[ParameterDictionaryId]
        AND [Archive].[Value] = [ParameterDictionaryValue].[Value]

      WHERE 
          [Archive].[PeriodTypeId] = @periodTypeId 
          AND [Archive].[TimeSignatureId] = @lastTimeSignatureId 
          AND [Archive].[MeasurementDeviceId] = @measurementDeviceId
   
     ORDER BY [ParameterMapDeviceParameter].[Order];

     /* 3. Вспомогательная таблица с расшифровками столбцов */
   
     DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

     INSERT INTO @columnCaption 
     OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
     VALUES     
	     
       ('MainData', 'PhysicalParameterCode', 'Код физ. величины', 0, 20)
       ,('MainData', 'PhysicalParameterId', 'Ид. физ. величины', 0, 20)
       ,('MainData', 'PhysicalParameterOrder', 'Порядок физ. величины', 0, 20)       	     
	   ,('MainData',  'ParameterDescription', 'Параметр', 1, 40)	   
       ,('MainData',  'DimensionPrefix', 'Размерность', 0, 50)	   
	   ,('MainData',  'MeasurementUnitDescription', 'Ед. измерения', 0, 60)
	   ,('MainData',  'PhysicalParameterCode', 'Код физ. величина', 0, 70)
	   ,('MainData',  'PhysicalParameterDescription', 'Физ. величина', 0, 80)
	   ,('MainData',  'IsValid', 'Физ. величина', 0, 85)       
       ,('MainData',  'Value', 'Значение', 1, 90);
       
       SELECT [Id] ,
              [Code] ,
              [Description] 
       FROM [Dictionaries].[PeriodType] [PeriodType]
       WHERE [PeriodType].[Id] IN (1, 5);     
    
       SELECT 
            [TimeSignature].[Id]
            ,[TimeSignature].[MeasurementDeviceId]
            ,[TimeSignature].[Time]
            ,[TimeSignature].[DeviceTime]
            ,[TimeSignature].[PollingDuration]
            ,[TimeSignature].[StatusConnectionId] 
        FROM [Business].[TimeSignature] [TimeSignature]
        WHERE [TimeSignature].[Id] = @lastTimeSignatureId        
         
       COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;

    RETURN (3); 
  END CATCH;
	   	   	                     
  RETURN 0;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnit1Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionPrefix2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnitDescription2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ConvertMeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[DeviceTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[PollingDuration]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[StatusConnectionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterDictionaryId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[Order]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionPrefix]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[MeasurementUnitDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Order]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionValue2]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionValue]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Dimension].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMeasurementResultArchives].[CTE1].[ParameterMapDeviceParameter].[Expression]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementResultArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMeasurementResultArchives].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementResultArchives].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementResultArchives].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMeasurementResultArchives].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="385" />
				<Property Name="Length" Value="8329" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2014-10-08&#xD;&#xA;-- Description: Возвращает архивные в соответствии с каналом измерительного устройства&#xD;&#xA;-- для виджета &quot;Результаты измерений&quot;&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetMeasurementResultArchives&#xD;&#xA;  @measurementDeviceId INT,&#xD;&#xA;  @channelId INT,  &#xD;&#xA;  @periodTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMnemoschemeArchives]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
   SET XACT_ABORT ON;

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    BEGIN TRANSACTION;

    /* 1. Формирование имен резалтсетов */   	 
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES 
         (1, 'MainData');  
  
    /*2. Основная выборка */
   
    WITH [MeasurementDevices] AS
    (
      SELECT 
        [MeasurementDevice].[Id] [MeasurementDeviceId], 
        [MeasurementDevice].[LastTimeSignatureId],
        [Channel].[Id] [ChannelId],
        [Channel].[ChannelTemplateId],
        [MeasurementDevice].[DeviceId] [DeviceId]

      FROM [Business].[Placement] [Placement] 

      INNER JOIN [Business].[Channel] [Channel] 
        ON [Channel].[PlacementId] = [Placement].[Id]

      INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] 
        ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        WHERE         
          [Placement].[Id] = @placementId 
          OR [Channel].[Id] = @channelId 
          OR [MeasurementDevice].[Id] = @measurementDeviceId
    ), 
      
    /* Матрица сопоставления в соответствии с шаблоном канала */
    [ParameterMapDeviceParameter]
    AS
    (
      SELECT 
        [ParameterMapDeviceParameter].[Id], 
        [ParameterMapDeviceParameter].[DeviceParameterId],       
        [ParameterMapDeviceParameter].[ParameterId], 
        [ParameterMapDeviceParameter].[ParameterDictionaryId], 
        
                
        [MeasurementDevices].[MeasurementDeviceId],
        [MeasurementDevices].[LastTimeSignatureId],
        [MeasurementDevices].[ChannelId],
        [MeasurementDevices].[ChannelTemplateId],
        [MeasurementDevices].[DeviceId],

        [Parameter].[Description] [ParameterDescription], 
        [Parameter].[Code] [ParameterCode], 

        COALESCE([Muc].[DimensionPrefix2], [Dimension].[Prefix]) [DimensionPrefix],
      
        COALESCE([Muc].[MeasurementUnitDescription2], [MeasurementUnit].[Description]) [MeasurementUnitDescription],

        [PhysicalParameter].[Id] [PhysicalParameterId],
        [PhysicalParameter].[Code] [PhysicalParameterCode],
        [PhysicalParameter].[Description] [PhysicalParameterDescription],
        [PhysicalParameter].[Order] [PhysicalParameterOrder],

        [Muc].[DimensionValue2] [DimensionValue2],
        [Dimension].[Value] [DimensionValue],
        [Muc].[Expression] [Expression]
    
      FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
    
      
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
        ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]
  
      INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter]
        ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId]
    
      INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] 
        ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]
  
      INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] 
        ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]
  
      /* конвертация единиц измерения */
      LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc]     
        /* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
        ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 
      /**/

      INNER JOIN [Dictionaries].[Dimension] [Dimension]
        ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]
      
       INNER JOIN [MeasurementDevices] 
        ON [MeasurementDevices].[ChannelTemplateId] = [ParameterMapDeviceParameter].[ChannelTemplateId]
    
      WHERE         
        [ParameterMapDeviceParameter].[PeriodTypeId] IN (1, 5)
    )
   
      /* Выборка из архива */
      SELECT 
        [ParameterMapDeviceParameter].[Id],

        [ParameterMapDeviceParameter].[ParameterCode],
        [ParameterMapDeviceParameter].[ParameterDescription],
        [ParameterMapDeviceParameter].[DimensionPrefix],
        [ParameterMapDeviceParameter].[MeasurementUnitDescription],                 
        [Archive].[MeasurementDeviceId],
        [Archive].[Time],        
        [dbo].[ConvertMeasurementUnit]
        (
                [DimensionValue], 
                [DimensionValue2], 
                [Archive].[Value], 
                [Expression]
        ) [Value]
       
       ,[ParameterMapDeviceParameter].[ChannelId] [ChannelId]
       ,[ParameterMapDeviceParameter].[ChannelTemplateId] [ChannelTemplateId]
       ,[ParameterMapDeviceParameter].[DeviceId] [DeviceId]
         
       ,[PhysicalParameter].[Code] [PhysicalParameterCode]

       ,[ParameterDictionaryValue].[Description] [DictionaryValueDescription]
       ,[ParameterDictionaryValue].[Code] [DictionaryValueCode]
                  
      FROM [Business].[Archive] [Archive]
  
      INNER JOIN [ParameterMapDeviceParameter] 
        ON [ParameterMapDeviceParameter].[DeviceParameterId] = [Archive].[DeviceParameterId] 
        AND [ParameterMapDeviceParameter].[MeasurementDeviceId] = [Archive].[MeasurementDeviceId] 
        AND [ParameterMapDeviceParameter].[LastTimeSignatureId] = [Archive].[TimeSignatureId]        
      INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter]

        ON [PhysicalParameter].[Id] = [ParameterMapDeviceParameter].[PhysicalParameterId]

      LEFT JOIN [Dictionaries].[ParameterDictionaryValue] [ParameterDictionaryValue] 
        ON [ParameterMapDeviceParameter].[ParameterDictionaryId] = [ParameterDictionaryValue].[ParameterDictionaryId]
        AND [Archive].[Value] = [ParameterDictionaryValue].[Value]
       
       WHERE 
          [Archive].[PeriodTypeId] IN (1,5) AND 
          [Archive].[IsValid] = 1

       ORDER BY [Archive].[Time] DESC

       OPTION (MAXDOP 3, OPTIMIZE FOR ( @placementId = NULL, @measurementDeviceId = NULL, @channelId UNKNOWN) );
                     
       COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;

    RETURN (3); 
  END CATCH;
	   	   	                     
  RETURN 0;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeArchives].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeArchives].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeArchives].[@placementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeArchives].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeArchives].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnit1Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionPrefix2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnitDescription2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[ConvertMeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionaryValue].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices].[LastTimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices].[ChannelTemplateId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[ChannelTemplateId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[MeasurementDevices].[DeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[DeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[DeviceParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterDictionaryId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[LastTimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ChannelTemplateId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[ChannelTemplateId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[DeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[DeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[ParameterCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionPrefix]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[MeasurementUnitDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterOrder]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Order]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionValue2]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[DimensionValue]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Dimension].[Value]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetMnemoschemeArchives].[CTE1].[ParameterMapDeviceParameter].[Expression]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMnemoschemeArchives].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMnemoschemeArchives].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMnemoschemeArchives].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeArchives].[@placementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeArchives].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeArchives].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeArchives].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="323" />
				<Property Name="Length" Value="7004" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2016-09-05&#xD;&#xA;-- Description: Выборка архивов для мнемосхемы уровня помещения&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetMnemoschemeArchives]&#xD;&#xA;  @placementId INT,  &#xD;&#xA;  @measurementDeviceId INT,&#xD;&#xA;  @channelId INT,&#xD;&#xA;  @periodTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
   SET XACT_ABORT ON;

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
    BEGIN TRANSACTION;

    /* 1. Формирование имен резалтсетов */   	 
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES 
         (1, 'MainData');
    
    /*2. Основная выборка */
      
      SELECT 
        [MeasurementDevice].[Id] [MeasurementDeviceId], 
        [MeasurementDevice].[Description] [MeasurementDeviceDescription], 
        [MeasurementDevice].[LastTimeSignatureId],
        [MeasurementDevice].[FactoryNumber],
        
        [TimeSignature].[Time] [LastTimeSignatureTime],
        
        [Device].[Description] [DeviceDescription],
        [Device].[ShortName] [DeviceShortName],
        [Channel].[Id] [ChannelId],
        [Channel].[Description] [ChannelDescription],

        [Channel].[ChannelTemplateId]

      FROM [Business].[Placement] [Placement]  WITH(NOLOCK)

      INNER JOIN [Business].[Channel] [Channel]  WITH(NOLOCK)
        ON [Channel].[PlacementId] = [Placement].[Id]

      INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]  WITH(NOLOCK)
        ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
        ON  [Device].[Id] = [MeasurementDevice].[DeviceId]

      INNER JOIN [Business].[TimeSignature] [TimeSignature] WITH(NOLOCK)
        ON  [TimeSignature].[Id] = [MeasurementDevice].[LastTimeSignatureId] 
        
        WHERE 
          [Placement].[Id] = @placementId 
          OR [Channel].[Id] = @channelId 
          OR [MeasurementDevice].[Id] = @measurementDeviceId
       
       -- ограничение параллелизма на основе исследования 
       OPTION(MAXDOP 2);      
        
       COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;

    RETURN (3); 
  END CATCH;
	   	   	                     
  RETURN 0;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@placementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@measurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@placementId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMnemoschemeMeasurementDeviceSummaryInfo].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="276" />
				<Property Name="Length" Value="2631" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2016-09-05&#xD;&#xA;-- Description: &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetMnemoschemeMeasurementDeviceSummaryInfo&#xD;&#xA;  @placementId INT,  &#xD;&#xA;  @measurementDeviceId INT,&#xD;&#xA;  @channelId INT  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetMultipleToMultipleInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN 

  DECLARE @linkScheme NVARCHAR(128) = [Programmability].[GetSchemaTableByName](@linkName); 

  SET @linkName = REPLACE(@linkName, 'Link', N'|');

  DECLARE @leftName NVARCHAR(128) = LEFT(@linkName, CHARINDEX(N'|', @linkName) - 1);
  DECLARE @rightName NVARCHAR(128) = RIGHT(@linkName, LEN(@linkName) - CHARINDEX(N'|', @linkName));

  DECLARE @leftScheme NVARCHAR(128) = [Programmability].[GetSchemaTableByName](@leftName);
  DECLARE @rightScheme NVARCHAR(128) = [Programmability].[GetSchemaTableByName](@rightName);

  DECLARE @leftNameFull NVARCHAR(128) = CONCAT('[', @leftScheme, '].', '[', @leftName, ']');
  DECLARE @rightNameFull NVARCHAR(128) = CONCAT('[', @rightScheme, '].', '[', @rightName, ']');

  DECLARE @query NVARCHAR(MAX) = '';
  DECLARE @temp NVARCHAR(MAX);

  DECLARE @link NVARCHAR(MAX) = CONCAT(@leftName, 'Link', @rightName);
  SET @linkName = CONCAT('[', @linkScheme, '].', '[', @link, ']');

  DECLARE @queryBase NVARCHAR(MAX) = 

  'SELECT  
    ''{LEFT} -> {RIGHT}'' [Direction],
    [R].[C] [CountId],      
    CONCAT(''{LEFT}Id: '', [R].[LeftId]) [Ld],
    CONCAT(''{RIGHT}Id: '', [R].[RightId]) [Rd],
    [R].[LeftDescription] [LeftDescription],       
    [R].[RightDescription] [RightDescription]
  FROM
    (  
      SELECT         
          COUNT(*) OVER(PARTITION BY [Left].[Id] ORDER BY [Left].[Id]) [C],
          [Left].[Id] [LeftId],
          [Right].[Id] [RightId],
          [Left].[Description] [LeftDescription],
          [Right].[Description] [RightDescription]
      FROM {LINK} [Link] WITH (NOLOCK)   
        INNER JOIN {LEFT_FULL} [Left] WITH (NOLOCK) ON [Link].[{LEFT}Id] = [Left].[Id]
        INNER JOIN {RIGHT_FULL} [Right] WITH (NOLOCK) ON [Link].[{RIGHT}Id] = [Right].[Id]
    ) [R]  WHERE [R].[C] > 1';

  SET @queryBase = REPLACE(@queryBase, '{LINK}', @linkName);

  IF(@direction = 'Both')
  BEGIN
    SET @temp = REPLACE(@queryBase, '{LEFT}', @leftName);
    SET @temp = REPLACE(@temp, '{RIGHT}', @rightName);
    SET @temp = REPLACE(@temp, '{LEFT_FULL}', @leftNameFull);
    SET @temp = REPLACE(@temp, '{RIGHT_FULL}', @rightNameFull);
  
    SET @query = CONCAT(@query, @temp);
    SET @query = CONCAT(@query, ' UNION ALL ');
  
    SET @temp = REPLACE(@queryBase, '{RIGHT}', @leftName);
    SET @temp = REPLACE(@temp, '{LEFT}', @rightName);
    SET @temp = REPLACE(@temp, '{LEFT_FULL}', @rightNameFull);
    SET @temp = REPLACE(@temp, '{RIGHT_FULL}', @leftNameFull);      
  END
  ELSE 
  BEGIN
    IF(@direction = 'Right')
    BEGIN
    	  DECLARE @swap NVARCHAR(128);

        SET @swap = @leftName;
        SET @leftName = @rightName;
        SET @rightName = @swap;

        SET @swap = @leftNameFull;
        SET @leftNameFull = @rightNameFull;
        SET @rightNameFull = @swap;
    END;
         
	  SET @temp = REPLACE(@queryBase, '{LEFT}', @leftName);
    SET @temp = REPLACE(@temp, '{RIGHT}', @rightName);
    SET @temp = REPLACE(@temp, '{LEFT_FULL}', @leftNameFull);
    SET @temp = REPLACE(@temp, '{RIGHT_FULL}', @rightNameFull);     
  END;

  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

   INSERT INTO @resultSetName VALUES
	   (1, 'MainData'),		    -- стандартное имя набора для отображения в решетке
	   (2, 'ColumnCaption');	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов
  
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]

  /* Основная выборка*/
  SET @query = CONCAT(@query, @temp);
  EXEC sp_executesql @query;

  /* Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

	INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
     ('MainData', 'Direction', 'Направление', 1, 1)
    ,('MainData', 'CountId', 'Количество', 1, 2)
    ,('MainData', 'Ld', 'Левая', 1, 3)     
	  ,('MainData', 'Rd', 'Правая', 1, 4)    
    ,('MainData', 'LeftDescription', 'Наименование левой', 1, 5)
	  ,('MainData', 'RightDescription', 'Наименование правой', 1, 6)	  		
	/**/
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSchemaTableByName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@linkName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@direction]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMultipleToMultipleInfo].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetMultipleToMultipleInfo].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMultipleToMultipleInfo].[@linkName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetMultipleToMultipleInfo].[@direction]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="330" />
				<Property Name="Length" Value="4746" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-04-08&#xD;&#xA;-- Description: Анализ связей сущностей с типом связи многие-ко-многим &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetMultipleToMultipleInfo] &#xD;&#xA;  @linkName NVARCHAR(128),&#xD;&#xA;  @direction NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetOrganizationHeatCurves]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	SET @isValid = 1;
	
	DECLARE @heatCurveJson NVARCHAR(MAX) = '';

	SELECT @heatCurveJson = @heatCurveJson + CONCAT(' "object', [DynamicParameter].[Id], '": ', [DynamicParameterValue].[Value], ', ')

	FROM [Dictionaries].[DynamicParameter] [DynamicParameter] WITH(NOLOCK)

		INNER JOIN [Core].[DynamicParameterValue] [DynamicParameterValue] WITH(NOLOCK)
			ON [DynamicParameterValue].[DynamicParameterId] = [DynamicParameter].[Id]        
	WHERE 
		[DynamicParameter].[Id] IN (61, 62)     -- Organization.HeatCurveSupplyPipe, Organization.HeatCurveReturnPipe 
		AND [DynamicParameter].[EntityTypeName] = 'Organization' 
		AND [DynamicParameterValue].[EntityId] IN 
		(
			SELECT 
				[Organization].[Id] [OrganizationId]
                
			FROM [Business].[Building] [Building] WITH(NOLOCK)
				INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK) ON [Building].[Id] = [Placement].[BuildingId]
				INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [Placement].[Id] = [Channel].[PlacementId]
				INNER JOIN [Business].[Organization] [Organization] WITH(NOLOCK) ON [Channel].[OrganizationId] = [Organization].[Id]            
			WHERE 
				[Building].[Id] = @buildingId 
				AND [Channel].[ResourceSystemTypeId] = 4        -- HeatSys
				AND [Organization].[OrganizationTypeId] = 3     -- Rsc
		)
		 
	IF (@heatCurveJson IS NOT NULL AND @heatCurveJson != '')		
	BEGIN			
		SET @heatCurveJson =  '{'  +  LEFT(@heatCurveJson, LEN(@heatCurveJson) - 1) + '}';
		IF (ISJSON(@heatCurveJson) != 1)
		BEGIN 
			-- Json ia not valid!
			SET @isValid = 0;
		END		
	END
	ELSE
	BEGIN
		-- There are no associated Organization.HeatCurveSupplyPipe or Organization.HeatCurveReturnPipe dynamic parameters				
		SET @isValid = 0;
	END;

	IF(@isValid = 1 AND @onlyDiagnostic = 0)
	BEGIN
		SELECT [HeatCurveSupplyPipe].[Temper.OutdoorAir]    
				,[HeatCurveSupplyPipe].[Organization.HeatCurveSupplyPipe]
				,[HeatCurveReturnPipe].[Organization.HeatCurveReturnPipe]        
		FROM 
			(
				SELECT [Organization.HeatCurveSupplyPipe], CAST(REPLACE([Temperature], '°С', '') AS DECIMAL(9,4)) [Temper.OutdoorAir]
				FROM OPENJSON(@heatCurveJson, '$.object61.userInputValues')
				WITH 
				(   	
					[Organization.HeatCurveSupplyPipe] DECIMAL(9,4) '$.value',  
					[Temperature]	NVARCHAR(32)   '$.caption'        
				) 
			) [HeatCurveSupplyPipe]
			INNER JOIN 
			(
				SELECT [Organization.HeatCurveReturnPipe], CAST(REPLACE([Temperature], '°С', '') AS DECIMAL(9,4)) [Temper.OutdoorAir]
				FROM OPENJSON(@heatCurveJson, '$.object62.userInputValues')
				WITH 
				(   	
					[Organization.HeatCurveReturnPipe] DECIMAL(9,4) '$.value',  
					[Temperature]	NVARCHAR(32) '$.caption'        
					)
			) [HeatCurveReturnPipe] ON [HeatCurveSupplyPipe].[Temper.OutdoorAir] = [HeatCurveReturnPipe].[Temper.OutdoorAir] 
	END;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@isValid]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DynamicParameter].[EntityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[OrganizationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetOrganizationHeatCurves].[@onlyDiagnostic]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetOrganizationHeatCurves].[@buildingId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetOrganizationHeatCurves].[@onlyDiagnostic]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetOrganizationHeatCurves].[@isValid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3045" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetOrganizationHeatCurves]&#xD;&#xA;&#x9;@buildingId INT,&#xD;&#xA;&#x9;@onlyDiagnostic BIT,&#xD;&#xA;&#x9;@isValid BIT OUTPUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetParametersInfoByDevice]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET DATEFORMAT dmy;
  SET LANGUAGE N'русский';
  SET NOCOUNT ON;

  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName VALUES
	(1, 'MainData'),		-- стандартное имя набора для отображения в решетке
	(2, 'ColumnCaption');	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов

  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]
  /**/


  /* 2. Таблица с агрегированными кодами единиц измерения*/
  DECLARE @unitCodesTable TABLE 
    (
      [PhysicalParameterId] INT NOT NULL,  
      [Description] NVARCHAR(128) NULL, 
      [UnitCodes] NVARCHAR(128) NULL
    );
  
  INSERT INTO @unitCodesTable SELECT 
      [PhysicalParameter].[Id] [PhysicalParameterId], 
      [PhysicalParameter].[Description] [Description], 
      LEFT([MeasurementUnit].[Codes], LEN([MeasurementUnit].[Codes]) - 1) [UnitCodes]

      FROM [Dictionaries].[PhysicalParameter] [PhysicalParameter] WITH(NOLOCK)
          INNER JOIN (SELECT DISTINCT([Mu1].[PhysicalParameterId])[PhysicalParameterId],
                  (SELECT CONCAT('[', [Mu2].[Description], '], ')  AS [text()]
                    FROM [Dictionaries].[MeasurementUnit] [Mu2] WITH(NOLOCK)
                    WHERE [Mu1].[PhysicalParameterId] = [Mu2].[PhysicalParameterId]
                    ORDER BY [Mu2].[PhysicalParameterId]
                    FOR XML PATH ('')) [Codes] 
          
                    FROM [Dictionaries].[MeasurementUnit] [Mu1] WITH(NOLOCK)) [MeasurementUnit] 
          ON [PhysicalParameter].[Id] = [MeasurementUnit].[PhysicalParameterId];
   /**/

  /* 3. Основная выборка*/
  SET @deviceId = IIF(@deviceId = 0 /*ALL*/, NULL, @deviceId);

  SELECT
		ROW_NUMBER() OVER(ORDER BY [Device].[Id]) [RowNumber],
		[Device].[Code] [DeviceCode], 
		[Parameter].[Code] [ParameterCode], 
      [PeriodType].[Code] [PeriodTypeCode],
		[PhysicalParameter].[Description] [PhysicalParameterDescription],
		[Parameter].[Description] [ParameterDescription],
		[Unit].[UnitCodes] [UnitCodes]
    FROM [Business].[ParameterMapDeviceParameter] [Map] WITH(NOLOCK)

    INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK)
      ON [DeviceParameter].[Id] = [Map].[DeviceParameterId] 

    INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
		  ON [Device].[Id] = [DeviceParameter].[DeviceId]

    INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH(NOLOCK)
		  ON [Map].[ParameterId] =[Parameter].[Id]
    
    INNER JOIN [Dictionaries].[PeriodType] [PeriodType] WITH(NOLOCK)
      ON [Map].[PeriodTypeId] = [PeriodType].[Id]

	  INNER JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter] WITH(NOLOCK)
		  ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId]
   
    INNER JOIN @unitCodesTable [Unit] 
     ON [Unit].[PhysicalParameterId] = [PhysicalParameter].[Id]
      
  WHERE ([Device].[Id] = @deviceId OR @deviceId IS NULL)
  /**/

  /* 4. Вспомогательная таблица с расшифровками столбцов */
  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType]; 
  
  INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
  	 ('MainData', 'RowNumber', '№', 1, 1)
  	,('MainData', 'DeviceCode', 'Код устройства', 1, 2)
  	,('MainData', 'ParameterCode', 'Код параметра', 1, 3)
  	,('MainData', 'PeriodTypeCode', 'Код периода', 1, 4)
  	,('MainData', 'ParameterDescription', 'Наименование параметра', 1, 5)
   ,('MainData', 'PhysicalParameterDescription', 'Физическая величина', 1, 6)
   ,('MainData', 'UnitCodes', 'Единицы измерения', 1, 7)
    
  /**/

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable].[UnitCodes]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable].[PhysicalParameterId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable].[Description]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@unitCodesTable].[UnitCodes]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetParametersInfoByDevice].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetParametersInfoByDevice].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetParametersInfoByDevice].[@deviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="404" />
				<Property Name="Length" Value="4319" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-01-23&#xD;&#xA;-- Description: Возвращает набор данных  c таблицей соотвествий параметров типам приборов, &#xD;&#xA;-- включая расшифровки единиц измерения параметров  &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetParametersInfoByDevice]&#xD;&#xA;  @deviceId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPhysicalParameter]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET @physicalParameterId = IIF(@physicalParameterId = 0, NULL, @physicalParameterId);
	
   /*1. Формирование имен резалтсетов для отчета*/
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
   INSERT INTO @resultSetName VALUES 
      (1, 'MainData');

   SELECT [ResultSetName].[Order], [ResultSetName].[Name] FROM @resultSetName [ResultSetName];
   /**/

   /* 2. Основная выборка */
   SELECT 
      [Unit].[Id]
      ,[Unit].[Code]
		,[Unit].[Description]
		,[Parameter].[Description] [PhysicalParameter]
      ,[Parameter].[Id] [PhysicalParameterId]

   FROM [Dictionaries].[MeasurementUnit] [Unit]

   INNER JOIN Dictionaries.PhysicalParameter Parameter	
      ON [Unit].[PhysicalParameterId] = [Parameter].[Id] 

   WHERE [Parameter].[Id] = @physicalParameterId OR @physicalParameterId IS NULL;
   /**/
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPhysicalParameter].[@physicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPhysicalParameter].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPhysicalParameter].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPhysicalParameter].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPhysicalParameter].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPhysicalParameter].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPhysicalParameter].[@physicalParameterId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="2" />
				<Property Name="Length" Value="962" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetPhysicalParameter]&#xD;&#xA;&#x9;@physicalParameterId INT NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPivotDiagrammByConnectionQuality]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN      
    SET NOCOUNT ON;

    SET @districtId = IIF(@districtId = 0, NULL, @districtId);
    SET @deviceId = IIF(@deviceId = 0, NULL, @deviceId);

    DECLARE @userId INT;
    DECLARE @roleCode NVARCHAR(64);
        
    EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

    /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES        
        (1, 'MainData')        
    SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName];
                     
    /* 2. Основной набор данных */
    SELECT       
      [Range].[Range] [Arg], 
      COUNT(*) [Value], 
      ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*)) OVER() AS DECIMAL(8, 1)), 2)  [Percentage]
		FROM 
		    (
		    SELECT 
			    CASE      
			      WHEN [SuccessConnectionPercent] BETWEEN 1 AND 10 THEN '1-10%'
			      WHEN [SuccessConnectionPercent] BETWEEN 11 AND 20 THEN '11-20%'
			      WHEN [SuccessConnectionPercent] BETWEEN 21 AND 30 THEN '21-30%'
			      WHEN [SuccessConnectionPercent] BETWEEN 31 AND 40 THEN '31-40%'
			      WHEN [SuccessConnectionPercent] BETWEEN 41 AND 50 THEN '41-50%'
			      WHEN [SuccessConnectionPercent] BETWEEN 51 AND 60 THEN '51-60%'
			      WHEN [SuccessConnectionPercent] BETWEEN 61 AND 70 THEN '61-70%'
			      WHEN [SuccessConnectionPercent] BETWEEN 71 AND 80 THEN '71-80%'
			      WHEN [SuccessConnectionPercent] BETWEEN 81 AND 90 THEN '81-90%'
			      WHEN [SuccessConnectionPercent] BETWEEN 91 AND 100 THEN '91-100%'
			      ELSE ' < 1 %'
			    END AS [Range]
		    FROM 
		      (
            SELECT [Md].[SuccessConnectionPercent]  FROM 
            (
			        SELECT 
                ROW_NUMBER() OVER (PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], 
                [Md].[SuccessConnectionPercent] 
            
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
			        
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))		
            
              LEFT OUTER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [Md].[AccessPointId]

              LEFT OUTER  JOIN [Business].[AccessPointLinkBuilding] [LinkBuilding] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [LinkBuilding].[AccessPointId]

              LEFT OUTER  JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [Building].[Id] = [LinkBuilding].[BuildingId]

              WHERE ([Md].[DeviceId] = @deviceId OR @deviceId IS NULL) AND 
                    ([Building].[DistrictId] = @districtId OR @districtId IS NULL)

            ) [Md] WHERE [Md].[Num] = 1

		      ) [Md]
		    ) [Range]
		GROUP BY  [Range].[Range]

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@deviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByConnectionQuality].[@districtId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3329" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetPivotDiagrammByConnectionQuality]&#xD;&#xA;  @userName NVARCHAR(32),&#xD;&#xA;  @deviceId INT,&#xD;&#xA;  @districtId INT  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPivotDiagrammByDevice]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN      
    SET NOCOUNT ON;

    SET @districtId = IIF(@districtId = 0, NULL, @districtId);

    DECLARE @userId INT;
    DECLARE @roleCode NVARCHAR(64);

    EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

    /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES        
        (1, 'MainData')        
    SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName];
                     
    /* 2. Основной наборн данных */
    SELECT  
      [Device].[Code] [Arg], 
      [MeasurementDeviceGroupByDevice].[Value] [Value],
      [MeasurementDeviceGroupByDevice].[Percentage] [Percentage]       
      FROM
      (        
        SELECT           
          [Md].[DeviceId], 
          COUNT(*) [Value],
          ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*))  OVER() AS DECIMAL(8, 1)), 2) [Percentage]
          FROM
          (
           SELECT [Md].[DeviceId] FROM
           (
              SELECT ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], [Md].[DeviceId]
          
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
        
              LEFT OUTER JOIN [Business].[AccessPoint]  WITH(NOLOCK)
                ON [AccessPoint].[Id] = [Md].[AccessPointId]
        
              LEFT OUTER JOIN [Business].[AccessPointLinkBuilding] [LinkBuilding] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [LinkBuilding].[AccessPointId]
        
              LEFT OUTER JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [Building].[Id] = [LinkBuilding].[BuildingId] 
                    
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	


              WHERE ([Building].[DistrictId] = @districtId OR @districtId IS NULL) 
              ) [Md]
            WHERE [Md].[Num] = 1
          ) [Md]
        
        GROUP BY [Md].[DeviceId]

      ) [MeasurementDeviceGroupByDevice]
  
      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)  
        ON [MeasurementDeviceGroupByDevice].[DeviceId] = [Device].[Id] 

      ORDER BY [Device].[Code]
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDevice].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDevice].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDevice].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDevice].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPivotDiagrammByDevice].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByDevice].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByDevice].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByDevice].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByDevice].[@districtId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2707" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetPivotDiagrammByDevice]&#xD;&#xA;  @userName NVARCHAR(32),&#xD;&#xA;  @districtId INT  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPivotDiagrammByDistrict]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN  
    SET NOCOUNT ON;

    DECLARE @userId INT;
    DECLARE @roleCode NVARCHAR(64);
        
    SET @deviceId = IIF(@deviceId = 0, NULL, @deviceId);

    EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

    /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName VALUES        
        (1, 'MainData')        
    SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName];
    
    /* 2. Основной набор данных */
    SELECT        
      [District].[Description] [Arg], 
      [MeasurementDeviceGroupByDistrict].[Value],
      [MeasurementDeviceGroupByDistrict].[Percentage]      
      FROM
      (
        SELECT 
          [Building].[DistrictId],
          COUNT(*) [Value], 
          ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*)) OVER() AS DECIMAL(8, 1)), 2)  [Percentage]    
          FROM
          (
            SELECT [Building].[Num], [Building].[DistrictId] 
            FROM
            (
              SELECT ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], [Building].[DistrictId]
              
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
    
              LEFT OUTER JOIN [Business].[AccessPoint] [Ap] WITH(NOLOCK)
                ON [Md].[AccessPointId] = [Ap].[Id]
  
              LEFT OUTER JOIN [Business].[AccessPointLinkBuilding] [BuildingLink] WITH(NOLOCK)
                ON [Ap].[Id] = [BuildingLink].[AccessPointId] 
  
              LEFT OUTER JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [BuildingLink].[BuildingId] = [Building].[Id]
  
              LEFT OUTER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
                ON [Building].[DistrictId] = [District].[Id]
          
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	

        
              WHERE ([Md].[DeviceId] = @deviceId OR @deviceId IS NULL)  
           ) [Building] WHERE [Building].[Num] = 1
          ) [Building] 
                  
        GROUP BY [Building].[DistrictId]

      ) [MeasurementDeviceGroupByDistrict]
  
    INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
      ON [MeasurementDeviceGroupByDistrict].[DistrictId] = [District].[Id] 

    ORDER BY [District].[Description]

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDistrict].[@deviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDistrict].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDistrict].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammByDistrict].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPivotDiagrammByDistrict].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByDistrict].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPivotDiagrammByDistrict].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByDistrict].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammByDistrict].[@deviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2873" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetPivotDiagrammByDistrict]&#xD;&#xA;  @userName NVARCHAR(32),  &#xD;&#xA;  @deviceId  INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPivotDiagrammDatasource]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  
  SET NOCOUNT ON;

  DECLARE @userId  INT;    
  DECLARE @roleCode NVARCHAR(64);

  EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

  IF(@datasourceCode = 'byConnectionQuality')
  BEGIN
    
    SELECT       
      [Range].[Range] [Arg], 
      COUNT(*) [Value], 
      ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*)) OVER() AS DECIMAL(8, 1)), 2)  [Percentage]
		FROM 
		    (
		    SELECT 
			    CASE      
			      WHEN [SuccessConnectionPercent] BETWEEN 1 AND 10 THEN '1-10%'
			      WHEN [SuccessConnectionPercent] BETWEEN 11 AND 20 THEN '11-20%'
			      WHEN [SuccessConnectionPercent] BETWEEN 21 AND 30 THEN '21-30%'
			      WHEN [SuccessConnectionPercent] BETWEEN 31 AND 40 THEN '31-40%'
			      WHEN [SuccessConnectionPercent] BETWEEN 41 AND 50 THEN '41-50%'
			      WHEN [SuccessConnectionPercent] BETWEEN 51 AND 60 THEN '51-60%'
			      WHEN [SuccessConnectionPercent] BETWEEN 61 AND 70 THEN '61-70%'
			      WHEN [SuccessConnectionPercent] BETWEEN 71 AND 80 THEN '71-80%'
			      WHEN [SuccessConnectionPercent] BETWEEN 81 AND 90 THEN '81-90%'
			      WHEN [SuccessConnectionPercent] BETWEEN 91 AND 100 THEN '91-100%'
			      ELSE ' < 1 %'
			    END AS [Range]
		    FROM 
		      (
            SELECT [Md].[SuccessConnectionPercent]  FROM 
            (
			        SELECT 
                ROW_NUMBER() OVER (PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], 
                [Md].[SuccessConnectionPercent] 
            
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
			        
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))		
            
              LEFT OUTER JOIN [Business].[AccessPoint] [AccessPoint] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [Md].[AccessPointId]

              LEFT OUTER  JOIN [Business].[AccessPointLinkBuilding] [LinkBuilding] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [LinkBuilding].[AccessPointId]

              LEFT OUTER  JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [Building].[Id] = [LinkBuilding].[BuildingId]
              
            ) [Md] WHERE [Md].[Num] = 1

		      ) [Md]
		    ) [Range]
		GROUP BY  [Range].[Range]

  END
  
  ELSE  IF(@datasourceCode = 'byDistrict')

  BEGIN
    SELECT        
      [District].[Description] [Arg], 
      [MeasurementDeviceGroupByDistrict].[Value],
      [MeasurementDeviceGroupByDistrict].[Percentage]      
      FROM
      (
        SELECT 
          [Building].[DistrictId],
          COUNT(*) [Value], 
          ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*)) OVER() AS DECIMAL(8, 1)), 2)  [Percentage]    
          FROM
          (
            SELECT [Building].[Num], [Building].[DistrictId] 
            FROM
            (
              SELECT ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], [Building].[DistrictId]
              
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
    
              LEFT OUTER JOIN [Business].[AccessPoint] [Ap] WITH(NOLOCK)
                ON [Md].[AccessPointId] = [Ap].[Id]
  
              LEFT OUTER JOIN [Business].[AccessPointLinkBuilding] [BuildingLink] WITH(NOLOCK)
                ON [Ap].[Id] = [BuildingLink].[AccessPointId] 
  
              LEFT OUTER JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [BuildingLink].[BuildingId] = [Building].[Id]
  
              LEFT OUTER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
                ON [Building].[DistrictId] = [District].[Id]
          
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	

           ) [Building] WHERE [Building].[Num] = 1
          ) [Building] 
                  
        GROUP BY [Building].[DistrictId]

      ) [MeasurementDeviceGroupByDistrict]
  
    INNER JOIN [Dictionaries].[District] [District] WITH(NOLOCK)
      ON [MeasurementDeviceGroupByDistrict].[DistrictId] = [District].[Id] 

    ORDER BY [District].[Description]

  END
  
  ELSE  IF(@datasourceCode = 'byDevice')

  BEGIN  
    SELECT  
      [Device].[Code] [Arg], 
      [MeasurementDeviceGroupByDevice].[Value] [Value],
      [MeasurementDeviceGroupByDevice].[Percentage] [Percentage]       
      FROM
      (        
        SELECT           
          [Md].[DeviceId], 
          COUNT(*) [Value],
          ROUND(COUNT(*) * 100.0 / CAST(SUM(COUNT(*))  OVER() AS DECIMAL(8, 1)), 2) [Percentage]
          FROM
          (
           SELECT [Md].[DeviceId] FROM
           (
              SELECT ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num], [Md].[DeviceId]
          
              FROM [Business].[MeasurementDevice] [Md] WITH(NOLOCK)
        
              LEFT OUTER JOIN [Business].[AccessPoint]  WITH(NOLOCK)
                ON [AccessPoint].[Id] = [Md].[AccessPointId]
        
              LEFT OUTER JOIN [Business].[AccessPointLinkBuilding] [LinkBuilding] WITH(NOLOCK)
                ON [AccessPoint].[Id] = [LinkBuilding].[AccessPointId]
        
              LEFT OUTER JOIN [Business].[Building] [Building] WITH(NOLOCK)
                ON [Building].[Id] = [LinkBuilding].[BuildingId] 
                    
              INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                ON [Channel].[MeasurementDeviceId] = [Md].[Id]

              INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
                ON [UserLink].[ChannelId] = [Channel].[Id] AND ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	
                              
              ) [Md]
            WHERE [Md].[Num] = 1
          ) [Md]
        
        GROUP BY [Md].[DeviceId]

      ) [MeasurementDeviceGroupByDevice]
  
      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)  
        ON [MeasurementDeviceGroupByDevice].[DeviceId] = [Device].[Id] 

      ORDER BY [Device].[Code]

  END;  
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammDatasource].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPivotDiagrammDatasource].[@datasourceCode]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[decimal]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammDatasource].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPivotDiagrammDatasource].[@datasourceCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="6759" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE Programmability.GetPivotDiagrammDatasource&#xD;&#xA;  @userName NVARCHAR(32),&#xD;&#xA;  @datasourceCode NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
      
	  DECLARE @measurementDeviceId INT = 
      (
        SELECT TOP(1) [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );

	    DECLARE @deviceId INT;
	    DECLARE @deviceCode NVARCHAR(64);
      
      SELECT TOP(1) 
        @deviceId = [MeasurementDevice].[DeviceId], 
        @deviceCode = [Device].[Code]
      
      FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)

      INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK)
        ON [MeasurementDevice].[DeviceId] = [Device].[Id]

      WHERE [MeasurementDevice].[Id] = @measurementDeviceId


	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

      INSERT INTO @resultSetName VALUES
         (1, 'ReportParameter'),
		 (2, 'MainData'),
		 (3, 'ActivePowerSecondData'),
		 (4, 'ActivePowerSummaryData'),
		 (5, 'ReactivePowerFirstData'),
		 (6, 'ReactivePowerSecondData')
		 
	  SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName]

	  DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 

	  INSERT INTO @reportParameter ([Name], [Value]) VALUES ('UserName', @userName);

	  INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (SELECT             
               
               CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode],
			   CAST([D].[ShortName] AS NVARCHAR(128)) [DeviceShortName],
			   CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber],
			   CAST([Building].[Description] AS NVARCHAR(128)) [BuildingDescription]
			  
		      FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
			      INNER JOIN [Dictionaries].[Device] [D] 
              ON [D].[Id] = [Md].[DeviceId]
			      
            INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
              ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT
		    
			INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
             ON [Channel].[PlacementId] = [Placement].[Id]

            INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
             ON [Building].[Id] = [Placement].[BuildingId])  [MeasurementDeviceInfo]  
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
              [DeviceCode],
			  [DeviceShortName],
			  [FactoryNumber],
			  [BuildingDescription]
            ) 
         ) [ReportParameter];
  
      IF(@deviceCode = 'Mercury230' OR @deviceCode = 'CET_4TM_03M' OR @deviceCode = 'Mercury234')
	   BEGIN
	        DECLARE @designFactor NVARCHAR(8) = (SELECT  [DPV].[Value] [Value] FROM [Core].[DynamicParameterValue] [DPV]
		          WHERE [DPV].[DynamicParameterId] = 166 AND [DPV].[EntityId] = @measurementDeviceId)
            IF @designFactor IS NULL OR @withDesignFactor = 0
	        BEGIN
			   SET @designFactor = 1
			END

			INSERT INTO @reportParameter ([Name],[Value])
			VALUES ('DesignFactor', @designFactor)
	   END

	  SELECT 
         [ReportParameter].[Name], 
         [ReportParameter].[Value] 
      FROM @reportParameter [ReportParameter];
         
      SELECT 1;
	  SELECT 1;
	  SELECT 1;
	  SELECT 1;
	  SELECT 1;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[DynamicParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[DynamicParameterValue].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@withDesignFactor]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Value]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource].[@withDesignFactor]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="401" />
				<Property Name="Length" Value="3894" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 28 November 2017&#xD;&#xA;-- Description: Формирует предварительные данные для отчета &quot;График потребления активной и реактивной мощности в рабочий день&quot;&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetPreliminaryElectroWorkingDayGraphDataSource]&#xD;&#xA;@userName NVARCHAR(32),&#xD;&#xA;@channelId INT,&#xD;&#xA;@withDesignFactor BIT&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetRegulatorParameterValues]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET NOCOUNT ON;
  SET XACT_ABORT ON;

  /* Проверка пользователя на предмет принадлежности канала */
  /* Проверка канала на предмет шаблона с типом "Мониторинг" */

  DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
  
  INSERT INTO @resultSetName OUTPUT inserted.[Order], inserted.[Name]
  VALUES
  	   (1, 'MainData'),		    
  	   (2, 'ColumnCaption');	

  BEGIN TRY
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;  
    BEGIN TRANSACTION;

    WITH 
    /* Шаблон канала */
    [Channel]
    AS
    (
      SELECT

        /* Информация о помещении и его владельще */
        [Placement].[Id] [PlacementId],
        [Placement].[Number] [PlacementNumber],
        [PlacementPurpose].[Description] [PlacementPurposeDescription],

        COALESCE([UserAdditionalInfo].[Description], [Organization].[FullAddress]) [PlacementHolderDescription],
        /**/

        [Channel].[Id] [ChannelId],
        [Channel].[MeasurementDeviceId] [MeasurementDeviceId],
        [Channel].[ChannelTemplateId] [ChannelTemplateId]       
      FROM [Business].[Channel] [Channel] 

        INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
        ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] AND 
           [ChannelTemplate].[ResourceSystemTypeId] = 6 /* Система регулирования */

        INNER JOIN [Business].[Placement] [Placement] 
        ON [Placement].[Id] = [Channel].[PlacementId]
          
        INNER JOIN [Business].[Building]  [Building]
        ON [Building].[Id] = [Placement].[BuildingId]

        INNER JOIN [Dictionaries].[PlacementPurpose] [PlacementPurpose]
        ON  [PlacementPurpose].[Id] = [Placement].[PlacementPurposeId]

        /**/
        LEFT JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] 
        ON [Placement].[UserAdditionalInfoId] = [UserAdditionalInfo].[Id]

        LEFT JOIN  [Business].[Organization] [Organization]
        ON [Placement].[OrganizationId] = [Organization].[Id]  

      WHERE 
        ([Channel].[Id] = @entityId OR @entityTypeName = 'Building') AND 
        (([Building].[Id] = @entityId AND [Placement].[HasIndividualAccounting] = 1) OR @entityTypeName = 'Channel') AND

        [Channel].[ResourceSystemTypeId] = 6
    ),
    /* Матрица сопоставления по шаблону */
    [ParameterMapDeviceParameter] 
    AS
    (
      SELECT 
        
        [Channel].[ChannelId] [ChannelId],
        [Channel].[MeasurementDeviceId] [MeasurementDeviceId],

        /* Информация о помещении и владельце*/
        [PlacementId],
        [PlacementHolderDescription],
        [PlacementNumber],
        [PlacementPurposeDescription],
        /**/

        /* идентификатор из матрицы сопоставления */
        [ParameterMapDeviceParameter].[Id] [Id],
        [ParameterMapDeviceParameter].[ParameterId] [ParameterId],

        [RegulatorParameterValue].[Id] [RegulatorParameterValueId],
        [Parameter].[Description] [ParameterDescription],      
        [ParameterMapDeviceParameter].[Order],
      
        /* размерность и единицы измерения */
        [Dimension].[Prefix] [DimensionPrefix],
        [MeasurementUnit].[Description] [MeasurementUnitDescription],
        [PhysicalParameter].[Code] [PhysicalParameterCode],
        [PhysicalParameter].[Id] [PhysicalParameterId],

        /* значения параметра регулирования */
        [RegulatorParameterValue].[DeviceValue] [DeviceValue],      
        [RegulatorParameterValue].[UserValue] [UserValue],
      
        [DeviceParameterSetting].[ValueTypeCode],
        [DeviceParameterSetting].[Min],
        [DeviceParameterSetting].[Max], 

        [ParameterDictionary].[Id] [ParameterDictionaryId],
        [ParameterDictionary].[Code] [ParameterDictionaryCode],
      
        [RegulatorParameterValue].[SyncDeviceTime] [SyncDeviceTime],
        [RegulatorParameterValue].[UpdateUserValueTime] [UpdateUserValueTime],

        /* для построения групп по типу подсистемы */
        [SubsystemType].[Id] [SubsystemTypeId],
        [SubsystemType].[Description] [SubsystemTypeDescription], 

        [RegulatorParameterValue].[UpdatedBy] [UpdatedBy]
        
      FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
        
      INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
        ON [DeviceParameter].[Id] = [ParameterMapDeviceParameter].[DeviceParameterId]
    
      LEFT JOIN [Business].[DeviceParameterSetting] [DeviceParameterSetting]
        ON [DeviceParameterSetting].[Id] = [DeviceParameter].[Id]

      LEFT JOIN [Business].[RegulatorParameterValue] [RegulatorParameterValue]
        ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
        AND [ParameterMapDeviceParameter].[DeviceParameterId] = [RegulatorParameterValue].[DeviceParameterId] 

      INNER JOIN [Dictionaries].[Parameter] [Parameter]
        ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      INNER  JOIN [Dictionaries].[Dimension] [Dimension] 
        ON [Dimension].[Id] = [ParameterMapDeviceParameter].[DimensionId]

      INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
        ON [MeasurementUnit].[Id] = [ParameterMapDeviceParameter].[MeasurementUnitId]

      INNER JOIN [Dictionaries].[SubsystemType] [SubsystemType]
        ON [SubsystemType].[Id] = [ParameterMapDeviceParameter].[SubsystemTypeId]

      LEFT JOIN [Dictionaries].[PhysicalParameter] [PhysicalParameter] 
        ON [PhysicalParameter].[Id] = [Parameter].[PhysicalParameterId] AND 
           [PhysicalParameter].[Id] = [MeasurementUnit].[PhysicalParameterId]
      
     INNER JOIN [Dictionaries].[ParameterDictionary] [ParameterDictionary]
          ON [ParameterDictionary].[Id] = [ParameterMapDeviceParameter].[ParameterDictionaryId]
    
     INNER JOIN [Channel] 
        ON [Channel].[ChannelTemplateId] = [ParameterMapDeviceParameter].[ChannelTemplateId] AND 
          [Channel].[MeasurementDeviceId] = [RegulatorParameterValue].[MeasurementDeviceId]
         
      WHERE [ParameterMapDeviceParameter].[PeriodTypeId] = 7 /* Без периода */           
    )

    SELECT    
      [ChannelId],
      [MeasurementDeviceId],
      
           
      /* Информация о помещении и владельце*/
      [PlacementId],
      [PlacementHolderDescription],
      [PlacementNumber],
      [PlacementPurposeDescription],
      /**/  

      [Id],
	  [ParameterId],

      [RegulatorParameterValueId],
      [ParameterDescription],
      [Order],
    
      [PhysicalParameterCode],
      [DimensionPrefix],
      [MeasurementUnitDescription],    
      [ParameterDictionaryCode], 
      [ParameterDictionaryId],   
      [PhysicalParameterId],

      [Min],
      [Max],
      [ValueTypeCode],
    
      [DeviceValue],
      [UserValue],

      [SyncDeviceTime],
      [UpdateUserValueTime],

      [SubsystemTypeId],
      [SubsystemTypeDescription],

      [UpdatedBy]
    FROM
      [ParameterMapDeviceParameter] ORDER BY [Order];
    
    COMMIT TRANSACTION;

    DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];
  
    /* Список столбцов для визуальной решетки */
    INSERT INTO @columnCaption   
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]

    VALUES

      ('MainData', 'Id', 'Ид', 0, 0)
      ,('MainData', 'PlacementNumber', 'Помещение', 0, 0)
      ,('MainData', 'PlacementPurposeDescription', 'Назначение помещения', 0, 0)
      ,('MainData', 'PlacementHolderDescription', 'Владелец', 0, 1) 

      ,('MainData', 'ParameterDescription', 'Параметр', 1, 1)

      ,('MainData', 'Order', 'Порядок', 0, 1)
    
      ,('MainData', 'DimensionPrefix', 'Размерность', 0, 1)
      ,('MainData', 'MeasurementUnitDescription', 'Ед. измерения', 0, 1)
      ,('MainData', 'PhysicalParameterCode', 'Физическая величина', 0, 1)
      ,('MainData', 'ParameterDictionaryCode', 'Код словаря', 0, 1)

      ,('MainData', 'DeviceValue', 'Значение устройства', 1, 1)
      ,('MainData', 'UserValue', 'Значение пользователя', 1, 1)

      ,('MainData', 'SyncDeviceTime', 'Время синхронизации', 1, 1)
      ,('MainData', 'UpdateUserValueTime', 'Время обновления', 1, 1)

      ,('MainData', 'SubsystemTypeId', 'Ид. подсистемы', 0, 1)
      ,('MainData', 'SubsystemTypeDescription', 'Подсистема', 0, 1)

      ,('MainData', 'UpdatedBy', 'Обновлено пользователем', 1, 20)

      COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
    IF (XACT_STATE()) = -1
    BEGIN       
      ROLLBACK TRANSACTION;
    END;
    IF (XACT_STATE()) = 1
    BEGIN      
      COMMIT TRANSACTION;   
    END;

    RETURN (3); 
  END CATCH;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[PlacementPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Organization].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@entityId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@entityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[HasIndividualAccounting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[SubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterDictionaryId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Number]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[DeviceValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UserValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[ValueTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Min]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Max]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[SyncDeviceTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UpdateUserValueTime]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Min]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[Max]" />
				</Entry>
				<Entry>
					<References Name="[Business].[DeviceParameterSetting].[ValueTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[DeviceValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UserValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[SyncDeviceTime]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UpdateUserValueTime]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[SubsystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[RegulatorParameterValue].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[PlacementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Placement].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[PlacementNumber]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Placement].[Number]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[PlacementPurposeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[PlacementHolderDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[Channel].[ChannelTemplateId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[ChannelTemplateId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ChannelId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PlacementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Placement].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PlacementHolderDescription]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PlacementNumber]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Placement].[Number]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PlacementPurposeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PlacementPurpose].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[RegulatorParameterValueId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ParameterDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[Order]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[Order]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[DimensionPrefix]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Dimension].[Prefix]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[MeasurementUnitDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[PhysicalParameterId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[DeviceValue]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[DeviceValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[UserValue]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[UserValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ValueTypeCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceParameterSetting].[ValueTypeCode]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[Min]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceParameterSetting].[Min]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[Max]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[DeviceParameterSetting].[Max]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ParameterDictionaryId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[ParameterDictionary].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[ParameterDictionaryCode]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[ParameterDictionary].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[SyncDeviceTime]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[SyncDeviceTime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[UpdateUserValueTime]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[UpdateUserValueTime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[SubsystemTypeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[SubsystemType].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[SubsystemTypeDescription]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[SubsystemType].[Description]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorParameterValues].[CTE1].[ParameterMapDeviceParameter].[UpdatedBy]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[RegulatorParameterValue].[UpdatedBy]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorParameterValues].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorParameterValues].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorParameterValues].[@entityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorParameterValues].[@entityTypeName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="360" />
				<Property Name="Length" Value="9327" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Leo&#xD;&#xA;-- Create date: 2015-11-10&#xD;&#xA;-- Description: Возвращает значения регуляционных параметров &#xD;&#xA;-- для виджета &quot;Параметры регулирования&quot;&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetRegulatorParameterValues &#xD;&#xA;  @entityId INT,&#xD;&#xA;  @entityTypeName NVARCHAR(64)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetRegulatorsTimeSlices]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN	
	SET NOCOUNT ON;

	SET XACT_ABORT ON;

   BEGIN TRY

      /* все выборки в составе хранимой процедуры имеют статус "грязных" */
    SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
	BEGIN TRANSACTION;

	 /* Имена выходных резульсетов возвращаемых в отчет */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES
         (1, 'ReportParameter'),         
         (2, 'MainData');         
    
	DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
	
	 SELECT 'UserName' [Name], CONVERT(NVARCHAR(128), @userName) [Value]
 
      DECLARE @userId  INT;    
      DECLARE @roleCode NVARCHAR(64);

      EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;
     	  
	  DECLARE @periodEnd DATETIME = DATEADD(HOUR, -@periodBeginOffset, @periodBegin); 

	  WITH [NearestTimeSignature]
       AS 
       (
           SELECT 
                [TimeSignature].[MeasurementDeviceId]
                ,[TimeSignature].[TimeSignatureId]
				,[TimeSignature].[TimeSignatureTime]
            FROM
           (
                SELECT 
                    ROW_NUMBER() OVER(PARTITION BY  [MeasurementDevice].[Id] ORDER BY [TimeSignature].[Time] DESC) [Num]
                    ,[MeasurementDevice].[Id] [MeasurementDeviceId]
                    ,[TimeSignature].[Id] [TimeSignatureId]
                    ,[TimeSignature].[Time] [TimeSignatureTime]
                        
                FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)
                
                INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                    ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
                
                INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
                    ON [Channel].[Id] = [UserLinkChannel].[ChannelId] AND [UserLinkChannel].[UserId] = @userId  
        
                INNER JOIN [Business].[TimeSignature] [TimeSignature] WITH(NOLOCK)
                    ON [MeasurementDevice].[Id] = [TimeSignature].[MeasurementDeviceId]
                                       
                    -- It's "non searchable args" already! 
                   AND 
                   (                        
                        (@includeAnyMeasurement = 0 AND [TimeSignature].[Time] <= @periodBegin AND [TimeSignature].[Time] >= @periodEnd) 											 
                        OR 
                        (@includeAnyMeasurement = 1 AND [TimeSignature].[Time] <= @periodBegin)
                   )
                                        
        
                 WHERE 
                    [MeasurementDevice].[DeviceId] IN (8, 34) AND [Channel].[ResourceSystemTypeId] = 8
            ) [TimeSignature]
    
            WHERE [TimeSignature].[Num] = 1
        )  

		SELECT 
				[Building].[Id] [BuildingId],
				[Building].[Description] [BuildingDescription],				
				[Device].[ShortName] [DeviceShortName], 

				[FinalMainData].[Time] [Time],
				[FinalMainData].[Monitoring.Temper.ReturnPipe],
				[FinalMainData].[Monitoring.Temper.HwsReturnPipe],
				[FinalMainData].[Monitoring.Temper.CalcSupplyPipe],
				[FinalMainData].[Monitoring.Temper.SupplyPipe],
				[FinalMainData].[Monitoring.Temper.CalcHwsReturnPipe],
				[FinalMainData].[Monitoring.Temper.CalcReturnPipe],
				[FinalMainData].[Monitoring.Temper.HwsSupplyPipe],
				[FinalMainData].[Monitoring.Temper.OutdoorAir],
				[FinalMainData].[Monitoring.Temper.CalcHwsSupplyPipe] 

				,ABS(([FinalMainData].[Monitoring.Temper.CalcReturnPipe] - [FinalMainData].[Monitoring.Temper.ReturnPipe])) [Monitoring.Temper.ReturnPipe.Err]
				,ABS(([FinalMainData].[Monitoring.Temper.CalcSupplyPipe] - [FinalMainData].[Monitoring.Temper.SupplyPipe])) [Monitoring.Temper.SupplyPipe.Err]
				,ABS(([FinalMainData].[Monitoring.Temper.CalcHwsSupplyPipe] - [FinalMainData].[Monitoring.Temper.HwsSupplyPipe])) [Monitoring.Temper.HwsSupplyPipe.Err]
				,ABS(([FinalMainData].[Monitoring.Temper.CalcHwsReturnPipe] - [FinalMainData].[Monitoring.Temper.HwsReturnPipe])) [Monitoring.Temper.HwsReturnPipe.Err]
		FROM
		(
			SELECT 
				[MeasurementDeviceId],
				[PlacementId],
				[Time],
				[Monitoring.Temper.ReturnPipe],
				[Monitoring.Temper.HwsReturnPipe],
				[Monitoring.Temper.CalcSupplyPipe],
				[Monitoring.Temper.SupplyPipe],
				[Monitoring.Temper.CalcHwsReturnPipe],
				[Monitoring.Temper.CalcReturnPipe],
				[Monitoring.Temper.HwsSupplyPipe],
				[Monitoring.Temper.OutdoorAir],
				[Monitoring.Temper.CalcHwsSupplyPipe]
			FROM     
			(
					SELECT             							
					[Archive].[MeasurementDeviceId] [MeasurementDeviceId]
					,[Channel].[PlacementId] [PlacementId]
					,[NearestTimeSignature].[TimeSignatureTime] [Time]
					,[Parameter].[Code] [ParameterCode]
					,[Archive].[Value] [Value]          										

				FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK)

				 INNER JOIN [NearestTimeSignature] 
					ON [NearestTimeSignature].[MeasurementDeviceId] = [MeasurementDevice].[Id]

				INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
					ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
        
				INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
					ON [Channel].[Id] = [UserLinkChannel].[ChannelId] AND [UserLinkChannel].[UserId] = @userId

				INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH(NOLOCK)
					ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]

				INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH(NOLOCK)
					ON [ChannelTemplate].[Id] = [ParameterMapDeviceParameter].[ChannelTemplateId]

				INNER JOIN [Dictionaries].[Parameter] [Parameter] WITH(NOLOCK)
					ON [ParameterMapDeviceParameter].[ParameterId] = [Parameter].[Id]
       
				INNER JOIN [Business].[Archive] [Archive] WITH(NOLOCK)         
					ON [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId] 
			
					AND [Archive].[TimeSignatureId] = [NearestTimeSignature].[TimeSignatureId]
			
					AND [Archive].[PeriodTypeId] = 1

					AND [ParameterMapDeviceParameter].[DeviceParameterId] = [Archive].[DeviceParameterId]
            
					AND [Archive].[IsValid] = 1
			   
				WHERE 
					[MeasurementDevice].[DeviceId] IN (8, 34) 
					AND [Channel].[ResourceSystemTypeId] = 8					

			) [MainData]
		 
			 PIVOT 
			(
				AVG([Value])
				FOR [ParameterCode] IN 
				(
					[Monitoring.Temper.ReturnPipe],
					[Monitoring.Temper.HwsReturnPipe],
					[Monitoring.Temper.CalcSupplyPipe],
					[Monitoring.Temper.SupplyPipe],
					[Monitoring.Temper.CalcHwsReturnPipe],
					[Monitoring.Temper.CalcReturnPipe],
					[Monitoring.Temper.HwsSupplyPipe],
					[Monitoring.Temper.OutdoorAir],
					[Monitoring.Temper.CalcHwsSupplyPipe]
				)
			) [PivotedMainData]
		) [FinalMainData]

		INNER JOIN [Business].[Placement] [Placement] WITH(NOLOCK)
			ON [Placement].[Id] = [FinalMainData].[PlacementId]

		INNER JOIN [Business].[Building] [Building] WITH(NOLOCK)
			ON [Building].[Id] = [Placement].[BuildingId]

		INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK) 
			ON [MeasurementDevice].[Id] =  [FinalMainData].[MeasurementDeviceId]

		INNER JOIN [Dictionaries].[Device] [Device] WITH(NOLOCK) 
			ON [Device].[Id] = [MeasurementDevice].[DeviceId]

	COMMIT TRANSACTION;

	END TRY
	BEGIN CATCH
       
      /* транзакция имеет активную внутреннюю ошибку и дожна быть откатится */
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;

      -- !IMPORTANT
      /* транзакция валидна, но подтверждение  не наступило, 
         например в силу генерации пользовательской ошибки */ 
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;
          
      DECLARE @lineFeed CHAR(1) = CHAR(13);

      DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed,                 
                '@periodBegin: ',          @periodBegin, @lineFeed               
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      
      THROW;
   END CATCH	
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@periodBeginOffset]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[@includeAnyMeasurement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[TimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.ReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.SupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.OutdoorAir]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[ShortName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.ReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.SupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcReturnPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.OutdoorAir]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsSupplyPipe]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorsTimeSlices].[CTE1].[NearestTimeSignature]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[CTE1].[NearestTimeSignature].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[MeasurementDevice].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[CTE1].[NearestTimeSignature].[TimeSignatureId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[TimeSignature].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[CTE1].[NearestTimeSignature].[TimeSignatureTime]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[TimeSignature].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[MeasurementDeviceId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Archive].[MeasurementDeviceId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[PlacementId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[Channel].[PlacementId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Time]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[TimeSignature].[Time]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.ReturnPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsReturnPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcSupplyPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.SupplyPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsReturnPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcReturnPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.HwsSupplyPipe]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.OutdoorAir]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[PV2].[PivotedMainData].[Monitoring.Temper.CalcHwsSupplyPipe]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorsTimeSlices].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetRegulatorsTimeSlices].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetRegulatorsTimeSlices].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorsTimeSlices].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorsTimeSlices].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorsTimeSlices].[@periodBeginOffset]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[24]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetRegulatorsTimeSlices].[@includeAnyMeasurement]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="401" />
				<Property Name="Length" Value="9842" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo &amp; Okulin Maxim &#xD;&#xA;-- Create date: 2018-01-16&#xD;&#xA;-- Description: Возвращает набор данных для отчета 'Временной срез по показаниям контроллеров погодозависимого регулирования'&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetRegulatorsTimeSlices &#xD;&#xA;    @userName NVARCHAR(32),&#xD;&#xA;    @periodBegin DATETIME,&#xD;&#xA;&#x9;@periodBeginOffset INT = 24,&#xD;&#xA;    @includeAnyMeasurement BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetResourceReleaseBalance]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;

	DECLARE @userId INT = 
        (
            SELECT TOP (1) [User].[Id] 
            FROM [Admin].[User] WITH (NOLOCK) 
            WHERE [UserName] = @userName
        );

	SELECT [ResultSetName].[Order], [ResultSetName].[Name]
		FROM
		(
			VALUES (1, N'ReportParameter'), (2, N'SummaryData'), (3, 'MainData')) ResultSetName([Order], [Name]
		);

	SELECT [Name], [Value] FROM	
	(	SELECT                                         
			CAST([District].[Description] AS NVARCHAR(128)) [District],
			CAST([Building].[FullAddress] AS NVARCHAR(128)) [FullAddress],
			CAST([Placement].[Description] AS NVARCHAR(128)) [PlacementDescription]
             
			FROM  [Business].[Building] [Building] WITH (NOLOCK)
        
			INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
				ON [Placement].[BuildingId] = [Building].[Id]

			INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
				ON [District].[Id] = [Building].[DistrictId]
           
			WHERE [Building].[Id] = @resourceBuildingId
	) 			
	[Info]
	UNPIVOT 
	(  
		[Value] FOR [Name] IN 
		(             
		  [District], 
		  [FullAddress],
		  [PlacementDescription]
		) 
	) [ReportParameter]
	UNION 
	(
			SELECT 
				'ResourceSystemTypeDescription' [Name],
				CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [Value] 
			FROM 
				[Dictionaries].[ResourceSystemType] [ResourceSystemType]
			WHERE 
				[ResourceSystemType].[Id] = @resourceSystemTypeId1
	);

   SELECT 

		[Channel].[Id] [ChannelId],
		[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId],
        [Channel].[Description] [ChannelDescription],
        [Building].[Description] [BuildingDescription],
        0 [IsConsumer]

	FROM  [Business].[Channel] [Channel] WITH (NOLOCK)

	INNER JOIN  [Business].[Placement] [Placement] WITH (NOLOCK)
		ON [Channel].[PlacementId] = [Placement].[Id]

	INNER JOIN  [Business].[Building] [Building] WITH (NOLOCK)
		ON [Placement].[BuildingId] = [Building].[Id]

	WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId1 AND

	      [Channel].[ResourceSubsystemTypeId] IS NULL AND
		  [Channel].[PlacementId] IN
  	      (
            SELECT [Id] FROM [Business].[Placement] WITH(NOLOCK) WHERE [BuildingId]= @resourceBuildingId
		 );

	SELECT 

		[Channel].[Id] [ChannelId],
		[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId],
        [Channel].[Description] [ChannelDescription],
        [Building].[Description] [BuildingDescription],
        1 [IsConsumer]

	FROM  [Business].[Channel] [Channel] WITH (NOLOCK)

	INNER JOIN  [Business].[Placement] [Placement] WITH (NOLOCK)
		ON [Channel].[PlacementId] = [Placement].[Id]

	INNER JOIN  [Business].[Building] [Building] WITH (NOLOCK)
		ON [Placement].[BuildingId] = [Building].[Id]

	WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId1 AND

	      [Channel].[ResourceSubsystemTypeId] IS NULL AND
		  [Channel].[PlacementId] IN
  	      (
				   SELECT [Id] FROM [Business].[Placement] WITH(NOLOCK) WHERE [BuildingId] IN
	                (
	                   SELECT [BuildingMapResourceBuilding]. [BuildingId]
	                   FROM [Business].[BuildingMapResourceBuilding] [BuildingMapResourceBuilding] WITH (NOLOCK)
	                   WHERE 
						[BuildingMapResourceBuilding].[ResourceBuildingId] = @resourceBuildingId 
						AND [ResourceSystemTypeId] = @resourceSystemTypeId1
					)
		 )
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetResourceReleaseBalance].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetResourceReleaseBalance].[@resourceBuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetResourceReleaseBalance].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetResourceReleaseBalance].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetResourceReleaseBalance].[@resourceSystemTypeId1]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[ResourceBuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[BuildingMapResourceBuilding].[ResourceSystemTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetResourceReleaseBalance].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetResourceReleaseBalance].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetResourceReleaseBalance].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetResourceReleaseBalance].[@userName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetResourceReleaseBalance].[@resourceBuildingId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetResourceReleaseBalance].[@resourceSystemTypeId1]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3667" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE Programmability.GetResourceReleaseBalance&#xD;&#xA;&#x9;@userName NVARCHAR (32) = NULL,&#xD;&#xA;    @resourceBuildingId INT = NULL,&#xD;&#xA;&#x9;@resourceSystemTypeId1 INT = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlScalarFunction" Name="[Programmability].[GetSchemaTableByName]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[COLUMNS]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[COLUMNS].[TABLE_SCHEMA]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[INFORMATION_SCHEMA].[COLUMNS].[TABLE_NAME]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSchemaTableByName].[@tableName]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
  DECLARE @schema NVARCHAR(128) = (
    SELECT TOP(1) [TABLE_SCHEMA] FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = @tableName
  );
  RETURN @schema;
END;]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="290" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Programmability].[GetSchemaTableByName]&#xD;&#xA;(&#xD;&#xA;  @tableName NVARCHAR(128)  &#xD;&#xA;)&#xD;&#xA;RETURNS NVARCHAR(128)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSchemaTableByName].[@tableName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="128" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Programmability].[GetSummaryAccountingAbstractParameters]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@dictrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[ 
  SELECT [Id], [Code] 
  FROM
  (
  	    SELECT 
          ROW_NUMBER() OVER (PARTITION BY [Parameter].[Id] ORDER BY [Parameter].[Id]) Num,
          [Parameter].[Id] [Id], 
          [Parameter].[Code] [Code]
  
        FROM [Dictionaries].[Parameter] [Parameter]
  
  			INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] 
  				ON [Parameter].[Id] = [Map].[ParameterId] AND [Map].[PeriodTypeId] = @periodTypeId 
  
        INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] 
  				ON [ChannelTemplate].[Id] = [Map].[ChannelTemplateId] AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId
  
        INNER JOIN [Business].[Channel]  
  				ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
  			
  			/* фильтр по принадлежности пользователю и по принадлежности к району */
  			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
  				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
  					AND [UserLinkChannel].[UserId] = @userId
  		
  			INNER JOIN [Business].[Placement] [Placement] 
  				ON [Placement].[Id] = [Channel].[PlacementId]
  
  			INNER JOIN [Business].[Building] [Building] 
  				ON [Building].[Id] = [Placement].[BuildingId] AND [Building].[DistrictId] = @dictrictId        
  ) [A]
  WHERE [Num] = 1]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="412" />
							<Property Name="Length" Value="1913" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2016-01-26&#xD;&#xA;-- Description: Возвращает не пересекающийся список абстрактных &#xD;&#xA;-- параметров по типу периоду, ресурсной системы с привязкой к пользователю и району  &#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE FUNCTION [Programmability].[GetSummaryAccountingAbstractParameters]&#xD;&#xA;(&#xD;&#xA;  @periodTypeId INT,&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;  @userId INT,&#xD;&#xA;  @dictrictId INT&#xD;&#xA;)&#xD;&#xA;RETURNS  TABLE&#xD;&#xA;AS&#xD;&#xA;RETURN" />
							<Property Name="FooterContents" Value=";" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters].[@dictrictId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlInlineTableValuedFunction" Name="[Programmability].[GetSummaryAccountingAbstractParameters2]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[Code]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Parameter].[Code]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[ 
  SELECT [Id], [Code] 
  FROM
  (
  	    SELECT 
          ROW_NUMBER() OVER (PARTITION BY [Parameter].[Id] ORDER BY [Parameter].[Id]) Num,
          [Parameter].[Id] [Id], 
          [Parameter].[Code] [Code]
  
        FROM [Dictionaries].[Parameter] [Parameter]
  
  			INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] 
  				ON [Parameter].[Id] = [Map].[ParameterId] AND [Map].[PeriodTypeId] = @periodTypeId 
  
        INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] 
  				ON [ChannelTemplate].[Id] = [Map].[ChannelTemplateId] AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId
  
        INNER JOIN [Business].[Channel]  
  				ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
  			
  			/* фильтр по принадлежности пользователю и по принадлежности к району */
  			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
  				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
  					AND [UserLinkChannel].[UserId] = @userId
  		  			     
  ) [A]
  WHERE [Num] = 1]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="258" />
							<Property Name="Length" Value="1484" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2016-02-20&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE FUNCTION Programmability.GetSummaryAccountingAbstractParameters2&#xD;&#xA;(&#xD;&#xA;  @periodTypeId INT,&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;  @userId INT  &#xD;&#xA;)&#xD;&#xA;RETURNS  TABLE&#xD;&#xA;AS&#xD;&#xA;RETURN" />
							<Property Name="FooterContents" Value=";" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[@userId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetSummaryAccountingSheet]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
  
	SET XACT_ABORT ON;
  
	BEGIN TRY
	
		/* все выборки в составе хранимой процедуры имеют статус "грязных" */
		SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

		BEGIN TRANSACTION;
    
    DECLARE @isDebug BIT = 0;

    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Подготовка входных параметров 
    */

    /* Получаем имя и код роли пользователя */
		DECLARE @userId  INT;    
    DECLARE @roleCode NVARCHAR(64);    

    EXEC [Programmability].[GetUserInfo] 
      @userName = @userName, 
      @userId = @userId OUT, 
      @roleCode = @roleCode OUT;
    				
    /* Выравнивание по границам суток входных параметров */
		SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME ); 
    SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME ); 
   
    /* Имена выходных резульсетов возвращаемых в отчет */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES
         (1, 'ReportParameter'),
         (2, 'ReportFieldInfo'),
         (3, 'MainData');         
    /*----------------------------------------------------------------------------------------------------*/
    
    
    /*----------------------------------------------------------------------------------------------------*/
    /*
      Формирование таблицы параметрии отчета и имена полей отчета
    */
    
    /* Таблица параметрии отчета */
    
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (
            SELECT                                           
               CAST([ResourceSystemType].[Code] AS NVARCHAR(128)) [ResourceSystemTypeCode],
               CAST([ResourceSystemType].[ShortName] AS NVARCHAR(128)) [ResourceSystemTypeShortName],                             
               CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [ResourceSystemTypeDescription]
  		      FROM [Dictionaries].[ResourceSystemType] [ResourceSystemType]                
  		      WHERE [ResourceSystemType].[Id] = @resourceSystemTypeId          
         ) [ReportParameterInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
              [ResourceSystemTypeShortName],
              [ResourceSystemTypeCode],
              [ResourceSystemTypeDescription]              
            ) 
         ) [ReportParameter];
    
    SELECT [ReportParameter].[Name], [ReportParameter].[Value] FROM @reportParameter [ReportParameter]    
      UNION ALL   
    SELECT 'PeriodBegin' [Name], CONVERT(NVARCHAR(128), @periodBegin, 104) [Value]    
      UNION ALL    
    SELECT 'PeriodEnd' [Name], CONVERT(NVARCHAR(128), @periodEnd, 104) [Value]
      UNION ALL    
    SELECT 'User' [Name], CONVERT(NVARCHAR(128), @userName) [Value]
      UNION ALL
    SELECT 'District' [Name], [District].[Description] [Value] FROM [Dictionaries].[District] [District] WHERE [District].[Id] = @districtId 
      UNION ALL
    SELECT 'City' [Name], [City].[Description] [Value] 
      FROM [Dictionaries].[City] [City]
      INNER JOIN [Dictionaries].[District] [District] ON [City].[Id] = [District].[CityId] AND [District].[Id] = @districtId

    /* Выхлоп имен полей отчета */
    (
      SELECT 
        CONCAT([Parameter].[Code], '.Instant') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]
    )
    UNION ALL
    (
      SELECT 
        CONCAT([Parameter].[Code], '.Daily') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (3, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]    
    )
    UNION ALL 
    (
      SELECT 
        CONCAT([Parameter].[Code], '.FinalInstant') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (5, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]
    )    
    /*----------------------------------------------------------------------------------------------------*/

        
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Уточненные предикаты диапазонов дат по типам устройств 
      с учетом времеммных смещений для суточных данных 
    */
    DECLARE @dateRangePredicate NVARCHAR(MAX) = '';
    SELECT 
      @dateRangePredicate = @dateRangePredicate 
      + CONCAT
        (
          '(',
          '(',
            '[Time]>=', '''',
            CONVERT(NVARCHAR,DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodBegin), 126 ), '''',
            ' AND ',
            '[Time]<=', '''', 
            CONVERT(NVARCHAR, DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodEnd), 126), '''',
            ') AND [Device].[Id]=', [DeviceArchiveTimeConverter].[DeviceId],
          ')'  
        )  + ' OR '
    FROM [Rules].[DeviceArchiveTimeConverter] [DeviceArchiveTimeConverter]
    WHERE EXISTS      
    (
      SELECT DISTINCT [MeasurementDevice].[DeviceId] [DeviceId] 
      FROM [Business].[MeasurementDevice] [MeasurementDevice]

      INNER JOIN [Business].[Channel]  
		  ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
	
			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = @userId
		
			INNER JOIN [Business].[Placement] [Placement] 
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building] 
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
      
      WHERE [MeasurementDevice].[DeviceId] = [DeviceArchiveTimeConverter].[DeviceId]

    ) AND [DeviceArchiveTimeConverter].[PeriodTypeId] = 3 ;

    
    SET @dateRangePredicate = LEFT(@dateRangePredicate, LEN(@dateRangePredicate) - 3);
    /*----------------------------------------------------------------------------------------------------*/
    

    /*----------------------------------------------------------------------------------------------------*/
		/* 
      Выборка всех возможных абстрактных параметров связанных с шаблонами каналов по пользователю и району
      и формирование строк подстановки для оператора PIVOT
    */      				        

    /*Проверка существования каналов связанных с пользователем по критерию отбора*/

    IF( EXISTS( SELECT 1 FROM [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) ))
    BEGIN
      /* Суточные */
      DECLARE @abstractParameterFieldsDaily NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsDailyAlias NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsWithNextDaily NVARCHAR(MAX) = '';  
      
      SELECT 
         @abstractParameterFieldsDaily = @abstractParameterFieldsDaily + CONCAT('[', [CodePull].[Code], ']') + ', ',       
         
         @abstractParameterFieldsDailyAlias = @abstractParameterFieldsDailyAlias 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Daily]') + ', ' 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '.Last] ', '[', [CodePull].[Code], '.Last.Daily]') + ', ',    
              
         @abstractParameterFieldsWithNextDaily = @abstractParameterFieldsWithNextDaily 
          + CONCAT('[', [CodePull].[Code], ']') + ', ' 
  		    + CONCAT('LAST_VALUE ([', [CodePull].[Code], ']) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [', [CodePull].[Code], '.Last', ']')
          + ','   
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (3, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsDaily = LEFT(@abstractParameterFieldsDaily, LEN(@abstractParameterFieldsDaily) - 1);
      SET @abstractParameterFieldsDailyAlias = LEFT(@abstractParameterFieldsDailyAlias, LEN(@abstractParameterFieldsDailyAlias) - 1);
      SET @abstractParameterFieldsWithNextDaily = LEFT(@abstractParameterFieldsWithNextDaily, LEN(@abstractParameterFieldsWithNextDaily) - 1);
          
      /* Итоговые */
      DECLARE @abstractParameterFieldsFinalInstant NVARCHAR(MAX) = '';
      DECLARE @abstractParameterFieldsFinalInstantAlias NVARCHAR(MAX) = '';
  
      SELECT 
        @abstractParameterFieldsFinalInstant = @abstractParameterFieldsFinalInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
        @abstractParameterFieldsFinalInstantAlias = @abstractParameterFieldsFinalInstantAlias 
          + CONCAT('[ArchiveFinalInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.FinalInstant]') + ', '
         
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (5, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsFinalInstant = LEFT(@abstractParameterFieldsFinalInstant, LEN(@abstractParameterFieldsFinalInstant) - 1);
      SET @abstractParameterFieldsFinalInstantAlias = LEFT(@abstractParameterFieldsFinalInstantAlias, LEN(@abstractParameterFieldsFinalInstantAlias) - 1);
      
      /* Мгновенные */
      DECLARE @abstractParameterFieldsInstant NVARCHAR(MAX) = '';   
      DECLARE @abstractParameterFieldsInstantAlias  NVARCHAR(MAX) = '';
         
      SELECT 
         @abstractParameterFieldsInstant = @abstractParameterFieldsInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
         @abstractParameterFieldsInstantAlias = @abstractParameterFieldsInstantAlias 
          + CONCAT('[ArchiveInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Instant]') + ', '
            
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsInstant = LEFT(@abstractParameterFieldsInstant, LEN(@abstractParameterFieldsInstant) - 1);
      SET @abstractParameterFieldsInstantAlias = LEFT(@abstractParameterFieldsInstantAlias, LEN(@abstractParameterFieldsInstantAlias) - 1);  
    
    END
    ELSE
    BEGIN
      SELECT [Unknown] FROM ( SELECT NULL [Unknown] ) [MainData] WHERE 1 != 1
    END;

    /*----------------------------------------------------------------------------------------------------*/

  
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Динамический скрипт с набором CTE для базовых выборок со диапазону суточных данных, 
      последних текущих итоговых и мгновенных данных
    */
	  DECLARE @mainDataQuery NVARCHAR(MAX) =     
    '
    /* Суточные значения за заданный диапазон */
    WITH [ArchiveDaily]
    AS
    (
      SELECT                     
       [Channel].[Id] [ChannelId],
			 [Archive].[Time] [Time],        
  		 [Parameter].[Code] [ParameterCode]           
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 3

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			/**/

      /*!!!*/
			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 3 AND ({dateRangePredicate})     
    ),

    /* Итоговые значения */
    [ArchiveFinalInstant]
    AS
    (
      SELECT       
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			        
  		 [Parameter].[Code] [ParameterCode]               
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					          
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5 

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			
      /**/
      /*!!!*/
			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 5         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                  
    ),
    
    /* Мгновенные значения */
    [ArchiveInstant]
    AS
    (
      SELECT         
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			 
  		 [Parameter].[Code] [ParameterCode]       
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] 
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 1        

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			
      /**/
      /*!!!*/

			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 1         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                 
    ),

    /* Разворот суточных данных с добавлением данных из последней строки диапазона */
  	[ArchiveDailyPivot]
    AS
    (
    	 SELECT *
       FROM (
            SELECT 
              ROW_NUMBER() OVER (PARTITION BY [ChannelId] ORDER BY [ChannelId], [Time]) [Num],              
              [ChannelId], 
              [Time] [Time.Daily],
              LAST_VALUE([Time]) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [Time.Last.Daily],
              {abstractParameterFieldsWithNextDaily}          
            FROM
              (
                SELECT                   
                  [ChannelId], 
                  [Time], 
                  {abstractParameterFieldsDaily}           
                FROM [ArchiveDaily]
                    PIVOT
                    (
                      AVG([Value])
                      FOR [ParameterCode] IN ( {abstractParameterFieldsDaily} )                  
                    ) [MainData]
                
              ) [PrePivotArchive]                                 
           ) [PivotData]
          WHERE [PivotData].[Num] = 1
        ),

        /* Извлечение последнего итогового значения и разворот */
        [ArchiveFinalInstantPivot]
        AS
        (
          SELECT [ChannelId], {abstractParameterFieldsFinalInstant} FROM
          (
            SELECT [ChannelId], [ParameterCode], [Value]
            FROM    
            (
              SELECT 
                ROW_NUMBER() OVER
                  (
                    PARTITION BY [ArchiveFinalInstant].[ChannelId], [ArchiveFinalInstant].[ParameterId] 
                    ORDER BY [ArchiveFinalInstant].[ChannelId]
                  ) [Num], 
                *
              FROM [ArchiveFinalInstant]             
            ) 
            [ArchiveFinalInstant]  WHERE [Num] = 1
          ) [MainData] 
          PIVOT
          (
            AVG([Value])
            FOR [ParameterCode] IN ( {abstractParameterFieldsFinalInstant} )                  
          ) [PivotData] 
        ),
        
        /* Извлечение последнего мгновенного значения и разворот */
        [ArchiveInstantPivot]
        AS
        (     
            SELECT [ChannelId],  {abstractParameterFieldsInstant} FROM
            (
              SELECT [ChannelId], [ParameterCode], [Value]
              FROM    
              (
                SELECT 
                  ROW_NUMBER() OVER
                    (
                      PARTITION BY [ArchiveInstant].[ChannelId], [ArchiveInstant].[ParameterId] 
                      ORDER BY [ArchiveInstant].[ChannelId]
                    ) [Num], 
                  *
                FROM [ArchiveInstant]             
              ) 
              [ArchiveInstant]  WHERE [Num] = 1

            ) [MainData]
            PIVOT
            (
              AVG([Value])
              FOR [ParameterCode] IN ( {abstractParameterFieldsInstant} )                  
            ) [PivotData]   
        )
      /**/
      
      /* Итоговые выборки с разыменованным набором полей */ 
      ,[ArchiveDailyPivotSummary] AS
      (
         SELECT           
          [ArchiveDailyPivot].[ChannelId], 
          [ArchiveDailyPivot].[Time.Daily],
          [ArchiveDailyPivot].[Time.Last.Daily],
          {abstractParameterFieldsDailyAlias}
         FROM [ArchiveDailyPivot]          
      ) 
      ,[ArchiveFinalInstantPivotSummary] AS
      (
         SELECT                     
          [ChannelId],            
          {abstractParameterFieldsFinalInstantAlias} 
         FROM [ArchiveFinalInstantPivot] 
      )
      ,[ArchiveInstantPivotSummary] AS
      (        
         SELECT                         
          [ChannelId],           
          {abstractParameterFieldsInstantAlias} 
         FROM [ArchiveInstantPivot]
      )
      /**/
            
       SELECT         
        
        [Building].[Description] [BuildingDescription],
        [MeasurementDevice].[Description] [MeasurementDeviceDescription],
        [MeasurementDevice].[NetworkAddress] [MeasurementDeviceNetworkAddress],       
        [TimeSignature].[Time] [LastConnectionTime],

		[MeasurementDevice].[DeviceId] [DeviceModelId],
		[Channel].[ChannelTemplateId] [ChannelTemplateId],
		[MeasurementDevice].[Id] [MeasurementDeviceId],

        [StatusConnection].[Description] [StatusConnectionDescription],
        [Organization].[Description] [OrganizationDescription],
        [TopChannelLinkAgreementParameter].[Value] [AgreementParameterValue],
        [TechnologicAdjunctionType].[Description] [TechnologicAdjunctionTypeDescription],

        [ArchiveDailyPivotSummary].*, 
        [ArchiveFinalInstantPivotSummary].*, 
        [ArchiveInstantPivotSummary].*

       FROM [Business].[Channel] [Channel] 
      
        /* фильтр по принадлежности пользователю и по принадлежности к району */
        INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
  				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
  					AND [UserLinkChannel].[UserId] = @userId
  			/**/
        
        /*!!!*/
  			INNER JOIN [Business].[Placement] [Placement]
  				ON [Placement].[Id] = [Channel].[PlacementId] AND [Placement].[HasIndividualAccounting] = 0
  
  			INNER JOIN [Business].[Building] [Building]
  				ON [Building].[Id] = [Placement].[BuildingId] 
  					AND [Building].[DistrictId] = @districtId
        /**/

       LEFT JOIN [ArchiveDailyPivotSummary]
          ON [ArchiveDailyPivotSummary].[ChannelId] = [Channel].[Id]

       LEFT JOIN [ArchiveFinalInstantPivotSummary] 
          ON [ArchiveFinalInstantPivotSummary].[ChannelId] = [Channel].[Id]

       LEFT JOIN [ArchiveInstantPivotSummary]
          ON [ArchiveInstantPivotSummary].[ChannelId] = [Channel].[Id]
       
       INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
          ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        
       INNER JOIN [Business].[TimeSignature] [TimeSignature]
          ON [TimeSignature].[Id] = [MeasurementDevice].[LastTimeSignatureId]
       
       INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] 
          ON [StatusConnection].[Id] = [MeasurementDevice].[LastStatusConnectionId]
             
       INNER JOIN [Dictionaries].[TechnologicAdjunctionType] [TechnologicAdjunctionType] 
          ON [TechnologicAdjunctionType].[Id] = [Channel].[TechnologicAdjunctionTypeId]
              
       LEFT JOIN [Business].[Organization] [Organization]
          ON [Organization].[Id] = [Channel].[OrganizationId]
       
       OUTER APPLY 
       (
          SELECT TOP 1 [AgreementParameter].[Value] [Value]
          FROM [Business].[ChannelLinkAgreementParameter] [ChannelLinkAgreementParameter]
        
          INNER JOIN [Business].[AgreementParameter] [AgreementParameter] 
            ON [AgreementParameter].[Id] = [ChannelLinkAgreementParameter].[AgreementParameterId]
               
          INNER JOIN [Dictionaries].[AgreementParameterType] [AgreementParameterType] 
            ON [AgreementParameterType].[Id] = [AgreementParameter].[AgreementParameterTypeId] 

          WHERE [ChannelLinkAgreementParameter].[ChannelId] = [ArchiveDailyPivotSummary].[ChannelId]
          AND 
          (
            ([AgreementParameter].[AgreementParameterTypeId] = 1 AND @resourceSystemTypeId = 4) OR 
            ([AgreementParameter].[AgreementParameterTypeId] = 2 AND @resourceSystemTypeId = 3)
          )

       ) [TopChannelLinkAgreementParameter]

      WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId {briefcaseSupportFilter}       
    ';
     
    
     /*----------------------------------------------------------------------------------------------------*/


     /*----------------------------------------------------------------------------------------------------*/ 
     /* Подстановки необходимых строк в динамический скрипт */ 
	   SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDaily}', @abstractParameterFieldsDaily);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsWithNextDaily}', @abstractParameterFieldsWithNextDaily);           
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstant}', @abstractParameterFieldsFinalInstant);     
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstant}', @abstractParameterFieldsInstant);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDailyAlias}', @abstractParameterFieldsDailyAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstantAlias}', @abstractParameterFieldsFinalInstantAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstantAlias}', @abstractParameterFieldsInstantAlias);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{dateRangePredicate}', @dateRangePredicate);
     
     /* 
      Поскольку основная выборка строится от Channel, а к ней соединяются  CTE, 
      то вполне допустимо пристраивать канальный портфельный фильтр в "задницу" 
    */
     SET @briefcaseId = IIF(@briefcaseId = 0, NULL, @briefcaseId);  

     IF(@briefcaseId IS NOT NULL)
     BEGIN
        DECLARE @briefcaseSupportFilter NVARCHAR(MAX) = 
          ' AND [Channel].[Id] IN 
          (
            SELECT            
              [BriefcaseItem].[EntityId] [Id] 
              FROM [Core].[BriefcaseItem] [BriefcaseItem]              
              INNER JOIN [Core].[Briefcase] [Briefcase] ON [BriefcaseItem].[BriefcaseId] = [Briefcase].[Id]                                        
              WHERE 
                [Briefcase].[UserId] = @userId 
                AND [Briefcase].[Id] = @briefcaseId
                AND [BriefcaseItem].[EntityTypeName] = N''Channel''              
          )';

      	SET @mainDataQuery = REPLACE(@mainDataQuery, '{briefcaseSupportFilter}', @briefcaseSupportFilter);
     END
     ELSE
     BEGIN
        SET @mainDataQuery = REPLACE(@mainDataQuery, '{briefcaseSupportFilter}', '')
     END;

     /* Вызываем динамически сформированный скрипт */ 
     EXEC [sys].[sp_executesql] @mainDataQuery,     
          N'@userId INT, 
            @districtId INT,             
            @resourceSystemTypeId INT,
            @periodBegin DATETIME, 
            @periodEnd DATETIME, 
            @briefcaseId INT',
            
            @userId = @userId,
            @districtId = @districtId,            
            @resourceSystemTypeId = @resourceSystemTypeId,
            @periodBegin = @periodBegin,
            @periodEnd = @periodEnd,
            @briefcaseId = @briefcaseId;
      /*----------------------------------------------------------------------------------------------------*/

    COMMIT TRANSACTION;
	END TRY

	BEGIN CATCH
      PRINT ERROR_MESSAGE();
      
      /* транзакция имеет активную внутреннюю ошибку и должна откатится */
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;
      
      -- !IMPORTANT
      /* транзакция валидна, но подтверждение  не наступило, 	например в силу генерации пользовательской ошибки */ 
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;

      IF (@isDebug = 0)
      BEGIN

        DECLARE @lineFeed CHAR(1) = CHAR(13);
        
        DECLARE @parameterListTrace NVARCHAR(256) = 
        CONCAT
        (  
          '@userName: ' ,            @userName, @lineFeed, 
          '@resourceSystemTypeId: ', @resourceSystemTypeId, @lineFeed, 
          '@districtId: ',           @districtId, @lineFeed, 
          '@periodBegin: ',          @periodBegin, @lineFeed, 
          '@periodEnd: ',            @periodEnd, @lineFeed
        );
        
        DECLARE @errorMessage NVARCHAR(MAX) = 
        CONCAT
        (
          'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
          'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
          'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
          'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
          'ErrorLine: ',       ERROR_LINE(), @lineFeed,
          'ErrorMessage: ',    ERROR_MESSAGE()
        );
        
        INSERT INTO [Admin].[ErrorLogEntry] 
        (
          [Time], 
          [Exception], 
          [Message], 
          [UserName],
          [StackTrace]
        )
        VALUES
        (
          GETDATE(), 
          'InternalSqlServerException', 
          @errorMessage, 
          SUSER_NAME(),
         @parameterListTrace
        );
        
        THROW;
      END;

	END CATCH;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@roleCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[Interval]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet].[@briefcaseId]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@districtId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet].[@briefcaseId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="404" />
				<Property Name="Length" Value="33929" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-20&#xD;&#xA;-- Update date: 2017-02-16&#xD;&#xA;-- Description: Возвращает набор данных для отчета сводных отчетов &#xD;&#xA;-- с дальнейшей реализацией поддержки портфелей&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetSummaryAccountingSheet]&#xD;&#xA;&#x9;@userName NVARCHAR(64),&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;  @districtId INT,&#x9;&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME,&#xD;&#xA;  @briefcaseId INT = NULL&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetSummaryAccountingSheet2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
  
	SET XACT_ABORT ON;
  
	BEGIN TRY
	
		/* все выборки в составе хранимой процедуры имеют статус "грязных" */
		SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

		BEGIN TRANSACTION;
    
    DECLARE @isDebug BIT = 0;

    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Подготовка входных параметров 
    */

    /* Получаем имя и код роли пользователя */
		DECLARE @userId  INT;    
    DECLARE @roleCode NVARCHAR(64);    

    EXEC [Programmability].[GetUserInfo] 
      @userName = @userName, 
      @userId = @userId OUT, 
      @roleCode = @roleCode OUT;
    				
    /* Выравнивание по границам суток входных параметров */
		SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME ); 
    SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME ); 
    
    DECLARE @periodBegin2 DATETIME;
    DECLARE @periodEnd2 DATETIME;

    SET @periodBegin2 = DATEADD(DAY, -1, @periodBegin);

    SET @periodEnd2 = DATEADD(DAY, 1, @periodEnd);
     
    

    /* Имена выходных резульсетов возвращаемых в отчет */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES
         (1, 'ReportParameter'),
         (2, 'ReportFieldInfo'),
         (3, 'MainData');         
    /*----------------------------------------------------------------------------------------------------*/
        
    /*----------------------------------------------------------------------------------------------------*/
    /*
      Формирование таблицы параметрии отчета и имена полей отчета
    */
    
    /* Таблица параметрии отчета */
    
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (
            SELECT                                           
               CAST([ResourceSystemType].[Code] AS NVARCHAR(128)) [ResourceSystemTypeCode],
               CAST([ResourceSystemType].[ShortName] AS NVARCHAR(128)) [ResourceSystemTypeShortName],                             
               CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [ResourceSystemTypeDescription]
  		      FROM [Dictionaries].[ResourceSystemType] [ResourceSystemType]                
  		      WHERE [ResourceSystemType].[Id] = @resourceSystemTypeId          
         ) [ReportParameterInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
              [ResourceSystemTypeShortName],
              [ResourceSystemTypeCode],
              [ResourceSystemTypeDescription]              
            ) 
         ) [ReportParameter];
    
    SELECT [ReportParameter].[Name], [ReportParameter].[Value] FROM @reportParameter [ReportParameter]    
      UNION ALL   
    SELECT 'PeriodBegin' [Name], CONVERT(NVARCHAR(128), @periodBegin, 104) [Value]    
      UNION ALL    
    SELECT 'PeriodEnd' [Name], CONVERT(NVARCHAR(128), @periodEnd, 104) [Value]
      UNION ALL    
    SELECT 'User' [Name], CONVERT(NVARCHAR(128), @userName) [Value];

   
    

  /* Выхлоп имен полей отчета */
  WITH [ReportFieldInfo]
  AS
  (
    SELECT [Id], [Code], [IntegrableValue], [PeriodTypeId]
    FROM
    (
    	    SELECT 
            ROW_NUMBER() OVER (PARTITION BY [Parameter].[Id], [Map].[PeriodTypeId] ORDER BY [Parameter].[Id]) Num,
            [Parameter].[Id] [Id], 
            [Parameter].[Code] [Code],
            [Parameter].[IntegrableValue] [IntegrableValue],
            [Map].[PeriodTypeId] [PeriodTypeId]
    
          FROM [Dictionaries].[Parameter] [Parameter]
    
    			INNER JOIN [Business].[ParameterMapDeviceParameter] [Map] 
    				ON [Parameter].[Id] = [Map].[ParameterId]
    
          INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] 
    				ON [ChannelTemplate].[Id] = [Map].[ChannelTemplateId] 
            AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId
    
          INNER JOIN [Business].[Channel]  
    				ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
    			
    			/* фильтр по принадлежности пользователю и по принадлежности к району */
    			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
    				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
    					AND [UserLinkChannel].[UserId] = @userId
    		  			
  ) [P]
  WHERE [Num] = 1
  )
  (
    SELECT CONCAT([ReportFieldInfo].[Code], '.Instant') [Name]
    FROM [ReportFieldInfo]
    WHERE [PeriodTypeId] = 1        
  )
  UNION ALL
  (
    SELECT CONCAT([ReportFieldInfo].[Code], '.Daily') [Name]
    FROM  [ReportFieldInfo] 
    WHERE [PeriodTypeId] = 3         
  )
  UNION ALL 
  (
    SELECT CONCAT([ReportFieldInfo].[Code], '.FinalInstant') [Name]
    FROM  [ReportFieldInfo]
    WHERE [PeriodTypeId] = 5    
  )   
    /*----------------------------------------------------------------------------------------------------*/

        
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Уточненные предикаты диапазонов дат по типам устройств 
      с учетом времеммных смещений для суточных данных 
    */
    DECLARE @dateRangePredicate NVARCHAR(MAX) = '';
    SELECT 
      @dateRangePredicate = @dateRangePredicate 
      + CONCAT
        (
          '(',
          '(',
            '[Time]>=', '''',
            CONVERT(NVARCHAR,DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodBegin), 126 ), '''',
            ' AND ',
            '[Time]<=', '''', 
            CONVERT(NVARCHAR, DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodEnd), 126), '''',
            ') AND [DeviceId]=', [DeviceArchiveTimeConverter].[DeviceId],
          ')'  
        )  + ' OR '
    FROM [Rules].[DeviceArchiveTimeConverter] [DeviceArchiveTimeConverter]
    WHERE EXISTS      
    (
      SELECT DISTINCT [MeasurementDevice].[DeviceId] [DeviceId] 
      FROM [Business].[MeasurementDevice] [MeasurementDevice]

      INNER JOIN [Business].[Channel]  
		  ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
	
			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = @userId
		
      WHERE [MeasurementDevice].[DeviceId] = [DeviceArchiveTimeConverter].[DeviceId]

    ) AND [DeviceArchiveTimeConverter].[PeriodTypeId] = 3 ;

    
    SET @dateRangePredicate = LEFT(@dateRangePredicate, LEN(@dateRangePredicate) - 3);
    
    /*----------------------------------------------------------------------------------------------------*/
    

    /*----------------------------------------------------------------------------------------------------*/
		/* 
      Выборка всех возможных абстрактных параметров связанных с шаблонами каналов по пользователю и району
      и формирование строк подстановки для оператора PIVOT
    */      				        

    /*Проверка существования каналов связанных с пользователем по критерию отбора*/

    IF( EXISTS( SELECT 1 FROM [Programmability].[GetSummaryAccountingAbstractParameters2] (1, @resourceSystemTypeId, @userId) ))
    BEGIN
      /* Суточные */
      DECLARE @abstractParameterFieldsDaily NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsDailyAlias NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsWithNextDaily NVARCHAR(MAX) = '';  
      
      SELECT 
         @abstractParameterFieldsDaily = @abstractParameterFieldsDaily + CONCAT('[', [CodePull].[Code], ']') + ', ',       
         
         @abstractParameterFieldsDailyAlias = @abstractParameterFieldsDailyAlias 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Daily]') + ', ' 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '.Last] ', '[', [CodePull].[Code], '.Last.Daily]') + ', ',    
              
         @abstractParameterFieldsWithNextDaily = @abstractParameterFieldsWithNextDaily 
          + CONCAT('[', [CodePull].[Code], ']') + ', ' 
  		    + CONCAT('LAST_VALUE ([', [CodePull].[Code], ']) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [', [CodePull].[Code], '.Last', ']')
          + ','   
      FROM [Programmability].[GetSummaryAccountingAbstractParameters2] (3, @resourceSystemTypeId, @userId) [CodePull];
          
      SET @abstractParameterFieldsDaily = LEFT(@abstractParameterFieldsDaily, LEN(@abstractParameterFieldsDaily) - 1);
      SET @abstractParameterFieldsDailyAlias = LEFT(@abstractParameterFieldsDailyAlias, LEN(@abstractParameterFieldsDailyAlias) - 1);
      SET @abstractParameterFieldsWithNextDaily = LEFT(@abstractParameterFieldsWithNextDaily, LEN(@abstractParameterFieldsWithNextDaily) - 1);
          
      /* Итоговые */
      DECLARE @abstractParameterFieldsFinalInstant NVARCHAR(MAX) = '';
      DECLARE @abstractParameterFieldsFinalInstantAlias NVARCHAR(MAX) = '';
  
      SELECT 
        @abstractParameterFieldsFinalInstant = @abstractParameterFieldsFinalInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
        @abstractParameterFieldsFinalInstantAlias = @abstractParameterFieldsFinalInstantAlias 
          + CONCAT('[ArchiveFinalInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.FinalInstant]') + ', '
         
      FROM [Programmability].[GetSummaryAccountingAbstractParameters2] (5, @resourceSystemTypeId, @userId) [CodePull];
          
      SET @abstractParameterFieldsFinalInstant = LEFT(@abstractParameterFieldsFinalInstant, LEN(@abstractParameterFieldsFinalInstant) - 1);
      SET @abstractParameterFieldsFinalInstantAlias = LEFT(@abstractParameterFieldsFinalInstantAlias, LEN(@abstractParameterFieldsFinalInstantAlias) - 1);
      
      /* Мгновенные */
      DECLARE @abstractParameterFieldsInstant NVARCHAR(MAX) = '';   
      DECLARE @abstractParameterFieldsInstantAlias  NVARCHAR(MAX) = '';
         
      SELECT 
         @abstractParameterFieldsInstant = @abstractParameterFieldsInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
         @abstractParameterFieldsInstantAlias = @abstractParameterFieldsInstantAlias 
          + CONCAT('[ArchiveInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Instant]') + ', '
            
      FROM [Programmability].[GetSummaryAccountingAbstractParameters2] (1, @resourceSystemTypeId, @userId) [CodePull];
          
      SET @abstractParameterFieldsInstant = LEFT(@abstractParameterFieldsInstant, LEN(@abstractParameterFieldsInstant) - 1);
      SET @abstractParameterFieldsInstantAlias = LEFT(@abstractParameterFieldsInstantAlias, LEN(@abstractParameterFieldsInstantAlias) - 1);  
    
    END
    ELSE
    BEGIN
      SELECT [Unknown] FROM ( SELECT NULL [Unknown] ) [MainData] WHERE 1 != 1
    END;

    /*----------------------------------------------------------------------------------------------------*/

  
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Динамический скрипт с набором CTE для базовых выборок со диапазону суточных данных, 
      последних текущих итоговых и мгновенных данных
    */
	  DECLARE @mainDataQuery NVARCHAR(MAX) =     
    '
    /* Суточные значения за заданный диапазон */
    WITH [ArchiveDaily]
    AS
    (
      SELECT
       [MeasurementDevice].[DeviceId] [DeviceId],
       [Channel].[Id] [ChannelId],
			 [Archive].[Time] [Time],        
  		 [Parameter].[Code] [ParameterCode]           
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 3

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
					
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 3 AND ([Time] >= @periodBegin2 AND [Time] <= @periodEnd2  )    
    ),

    /* Итоговые значения */
    [ArchiveFinalInstant]
    AS
    (
      SELECT               
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			        
  		 [Parameter].[Code] [ParameterCode]               
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
      /*INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]*/
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					          
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5 

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
						
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 5         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                  
    ),
    
    /* Мгновенные значения */
    [ArchiveInstant]
    AS
    (
      SELECT               
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			 
  		 [Parameter].[Code] [ParameterCode]       
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] 
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
                 
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 1        

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
					
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 1         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                 
    ),

    /* Разворот суточных данных с добавлением данных из последней строки диапазона */
  	[ArchiveDailyPivot]
    AS
    (
    	 SELECT *
       FROM (
            SELECT 
              ROW_NUMBER() OVER (PARTITION BY [ChannelId] ORDER BY [ChannelId], [Time]) [Num],              
              [ChannelId], 
              [Time] [Time.Daily],
              LAST_VALUE([Time]) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [Time.Last.Daily],
              {abstractParameterFieldsWithNextDaily}          
            FROM
              (
                SELECT                   
                  [ChannelId], 
                  [Time], 
                  {abstractParameterFieldsDaily}           
                FROM [ArchiveDaily]
                    PIVOT
                    (
                      AVG([Value])
                      FOR [ParameterCode] IN ( {abstractParameterFieldsDaily} )                  
                    ) [MainData]
                WHERE ({dateRangePredicate})
              ) [PrePivotArchive]                                 
           ) [PivotData]
          WHERE [PivotData].[Num] = 1
        ),

        /* Извлечение последнего итогового значения и разворот */
        [ArchiveFinalInstantPivot]
        AS
        (
          SELECT [ChannelId], {abstractParameterFieldsFinalInstant} FROM
          (
            SELECT [ChannelId], [ParameterCode], [Value]
            FROM    
            (
              SELECT 
                ROW_NUMBER() OVER
                  (
                    PARTITION BY [ArchiveFinalInstant].[ChannelId], [ArchiveFinalInstant].[ParameterId] 
                    ORDER BY [ArchiveFinalInstant].[ChannelId]
                  ) [Num], 
                *
              FROM [ArchiveFinalInstant]             
            ) 
            [ArchiveFinalInstant]  WHERE [Num] = 1
          ) [MainData] 
          PIVOT
          (
            AVG([Value])
            FOR [ParameterCode] IN ( {abstractParameterFieldsFinalInstant} )                  
          ) [PivotData] 
        ),
        
        /* Извлечение последнего мгновенного значения и разворот */
        [ArchiveInstantPivot]
        AS
        (     
            SELECT [ChannelId],  {abstractParameterFieldsInstant} FROM
            (
              SELECT [ChannelId], [ParameterCode], [Value]
              FROM    
              (
                SELECT 
                  ROW_NUMBER() OVER
                    (
                      PARTITION BY [ArchiveInstant].[ChannelId], [ArchiveInstant].[ParameterId] 
                      ORDER BY [ArchiveInstant].[ChannelId]
                    ) [Num], 
                  *
                FROM [ArchiveInstant]             
              ) 
              [ArchiveInstant]  WHERE [Num] = 1

            ) [MainData]
            PIVOT
            (
              AVG([Value])
              FOR [ParameterCode] IN ( {abstractParameterFieldsInstant} )                  
            ) [PivotData]   
        )
      /**/
      
      /* Итоговые выборки с разыменованным набором полей */ 
      ,[ArchiveDailyPivotSummary] AS
      (
         SELECT           
          [ArchiveDailyPivot].[ChannelId], 
          [ArchiveDailyPivot].[Time.Daily],
          [ArchiveDailyPivot].[Time.Last.Daily],
          {abstractParameterFieldsDailyAlias}
         FROM [ArchiveDailyPivot]          
      ) 
      ,[ArchiveFinalInstantPivotSummary] AS
      (
         SELECT               
          [ChannelId],            
          {abstractParameterFieldsFinalInstantAlias} 
         FROM [ArchiveFinalInstantPivot] 
      )
      ,[ArchiveInstantPivotSummary] AS
      (        
         SELECT                  
          [ChannelId],           
          {abstractParameterFieldsInstantAlias} 
         FROM [ArchiveInstantPivot]
      )
      /**/
            
       SELECT         
        
        [Building].[Description] [BuildingDescription],
        [MeasurementDevice].[Description] [MeasurementDeviceDescription],
        [MeasurementDevice].[NetworkAddress] [MeasurementDeviceNetworkAddress],       
        [TimeSignature].[Time] [LastConnectionTime],

        [StatusConnection].[Description] [StatusConnectionDescription],
        [Organization].[Description] [OrganizationDescription],
        [TopChannelLinkAgreementParameter].[Value] [AgreementParameterValue],
        [TechnologicAdjunctionType].[Description] [TechnologicAdjunctionTypeDescription],

        [ArchiveDailyPivotSummary].*, 
        [ArchiveFinalInstantPivotSummary].*, 
        [ArchiveInstantPivotSummary].*

       FROM [Business].[Channel] [Channel] 
      
        /* фильтр по принадлежности пользователю и по принадлежности к району */
        INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
  				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
  					AND [UserLinkChannel].[UserId] = @userId
  			
  			INNER JOIN [Business].[Placement] [Placement]
  				ON [Placement].[Id] = [Channel].[PlacementId] AND [Placement].[HasIndividualAccounting] = 0
  
  			INNER JOIN [Business].[Building] [Building]
  				ON [Building].[Id] = [Placement].[BuildingId] 
  					AND [Building].[DistrictId] = @districtId
        /**/

       LEFT JOIN [ArchiveDailyPivotSummary]
          ON [ArchiveDailyPivotSummary].[ChannelId] = [Channel].[Id]

       LEFT JOIN [ArchiveFinalInstantPivotSummary] 
          ON [ArchiveFinalInstantPivotSummary].[ChannelId] = [Channel].[Id]

       LEFT JOIN [ArchiveInstantPivotSummary]
          ON [ArchiveInstantPivotSummary].[ChannelId] = [Channel].[Id]
       
       INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
          ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        
       INNER JOIN [Business].[TimeSignature] [TimeSignature]
          ON [TimeSignature].[Id] = [MeasurementDevice].[LastTimeSignatureId]
       
       INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] 
          ON [StatusConnection].[Id] = [MeasurementDevice].[LastStatusConnectionId]
             
       INNER JOIN [Dictionaries].[TechnologicAdjunctionType] [TechnologicAdjunctionType] 
          ON [TechnologicAdjunctionType].[Id] = [Channel].[TechnologicAdjunctionTypeId]
              
       LEFT JOIN [Business].[Organization] [Organization]
          ON [Organization].[Id] = [Channel].[OrganizationId]
       
       OUTER APPLY 
       (
          SELECT TOP 1 [AgreementParameter].[Value] [Value]
          FROM [Business].[ChannelLinkAgreementParameter] [ChannelLinkAgreementParameter]
        
          INNER JOIN [Business].[AgreementParameter] [AgreementParameter] 
            ON [AgreementParameter].[Id] = [ChannelLinkAgreementParameter].[AgreementParameterId]
               
          INNER JOIN [Dictionaries].[AgreementParameterType] [AgreementParameterType] 
            ON [AgreementParameterType].[Id] = [AgreementParameter].[AgreementParameterTypeId] 

          WHERE [ChannelLinkAgreementParameter].[ChannelId] = [ArchiveDailyPivotSummary].[ChannelId]
          AND 
          (
            ([AgreementParameter].[AgreementParameterTypeId] = 1 AND @resourceSystemTypeId = 4) OR 
            ([AgreementParameter].[AgreementParameterTypeId] = 2 AND @resourceSystemTypeId = 3)
          )

       ) [TopChannelLinkAgreementParameter]

      WHERE [Channel].[ResourceSystemTypeId] = @resourceSystemTypeId

    ';
     /*----------------------------------------------------------------------------------------------------*/


     /*----------------------------------------------------------------------------------------------------*/ 
     /* Подстановки необходимых строк в динамический скрипт */ 
	   SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDaily}', @abstractParameterFieldsDaily);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsWithNextDaily}', @abstractParameterFieldsWithNextDaily);           
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstant}', @abstractParameterFieldsFinalInstant);     
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstant}', @abstractParameterFieldsInstant);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDailyAlias}', @abstractParameterFieldsDailyAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstantAlias}', @abstractParameterFieldsFinalInstantAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstantAlias}', @abstractParameterFieldsInstantAlias);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{dateRangePredicate}', @dateRangePredicate);
     
      
     /* Вызываем динамически сформированный скрипт */ 
     EXEC [sys].[sp_executesql] @mainDataQuery,     
          N'@userId INT, 
                        
            @resourceSystemTypeId INT,
            @periodBegin DATETIME, 
            @periodEnd DATETIME, 
            @periodBegin2 DATETIME, 
            @periodEnd2 DATETIME',

            @userId = @userId,
                      
            @resourceSystemTypeId = @resourceSystemTypeId,
            @periodBegin = @periodBegin,
            @periodEnd = @periodEnd,
            @periodBegin2 = @periodBegin2,
            @periodEnd2 = @periodEnd2;
      /*----------------------------------------------------------------------------------------------------*/

    COMMIT TRANSACTION;
	END TRY

	BEGIN CATCH
      PRINT ERROR_MESSAGE();
      
      /* транзакция имеет активную внутреннюю ошибку и дожна быть откатится */
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;
      
      -- !IMPORTANT
      /* транзакция валидна, но подтверждение  не наступило, 	например в силу генерации пользовательской ошибки */ 
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;

      IF (@isDebug = 0)
      BEGIN

        DECLARE @lineFeed CHAR(1) = CHAR(13);
        
        DECLARE @parameterListTrace NVARCHAR(256) = 
        CONCAT
        (  
          '@userName: ' ,            @userName, @lineFeed, 
          '@resourceSystemTypeId: ', @resourceSystemTypeId, @lineFeed, 
          
          '@periodBegin: ',          @periodBegin, @lineFeed, 
          '@periodEnd: ',            @periodEnd, @lineFeed
        );
        
        DECLARE @errorMessage NVARCHAR(MAX) = 
        CONCAT
        (
          'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
          'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
          'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
          'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
          'ErrorLine: ',       ERROR_LINE(), @lineFeed,
          'ErrorMessage: ',    ERROR_MESSAGE()
        );
        
        INSERT INTO [Admin].[ErrorLogEntry] 
        (
          [Time], 
          [Exception], 
          [Message], 
          [UserName],
          [StackTrace]
        )
        VALUES
        (
          GETDATE(), 
          'InternalSqlServerException', 
          @errorMessage, 
          SUSER_NAME(),
         @parameterListTrace
        );
        
        THROW;
      END;

	END CATCH;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@roleCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet2].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[Interval]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters2]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters2].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet2].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet2].[CTE2].[ReportFieldInfo]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[CTE2].[ReportFieldInfo].[Id]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[CTE2].[ReportFieldInfo].[Code]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[Code]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[CTE2].[ReportFieldInfo].[IntegrableValue]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[CTE2].[ReportFieldInfo].[PeriodTypeId]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet2].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet2].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet2].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet2].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet2].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet2].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet2].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="362" />
				<Property Name="Length" Value="31482" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-20&#xD;&#xA;-- Description: Возвращает набор данных для отчета сводных отчетов (вариант 2 - без распила на районы)&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE Programmability.GetSummaryAccountingSheet2&#xD;&#xA;&#x9;@userName NVARCHAR(64),&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetSummaryAccountingSheet3]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
  
	SET XACT_ABORT ON;
  
	BEGIN TRY
	
		/* все выборки в составе хранимой процедуры имеют статус "грязных" */
		SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

		BEGIN TRANSACTION;
    
    DECLARE @isDebug BIT = 0;

    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Подготовка входных параметров 
    */

    /* Получаем имя и код роли пользователя */
		DECLARE @userId  INT;    
    DECLARE @roleCode NVARCHAR(64);    

    EXEC [Programmability].[GetUserInfo] 
      @userName = @userName, 
      @userId = @userId OUT, 
      @roleCode = @roleCode OUT;
    				
    /* Выравнивание по границам суток входных параметров */
		SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME ); 
    SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME ); 
   
    /* Имена выходных резульсетов возвращаемых в отчет */
    DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
    INSERT INTO @resultSetName 
    OUTPUT inserted.[Order], inserted.[Name]
    VALUES
         (1, 'ReportParameter'),
         (2, 'ReportFieldInfo'),
         (3, 'MainData');         
    /*----------------------------------------------------------------------------------------------------*/
    
    
    /*----------------------------------------------------------------------------------------------------*/
    /*
      Формирование таблицы параметрии отчета и имена полей отчета
    */
    
    /* Таблица параметрии отчета */
    
    DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
    INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (
            SELECT                                           
               CAST([ResourceSystemType].[Code] AS NVARCHAR(128)) [ResourceSystemTypeCode],
               CAST([ResourceSystemType].[ShortName] AS NVARCHAR(128)) [ResourceSystemTypeShortName],                             
               CAST([ResourceSystemType].[Description] AS NVARCHAR(128)) [ResourceSystemTypeDescription]
  		      FROM [Dictionaries].[ResourceSystemType] [ResourceSystemType]                
  		      WHERE [ResourceSystemType].[Id] = @resourceSystemTypeId          
         ) [ReportParameterInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
              [ResourceSystemTypeShortName],
              [ResourceSystemTypeCode],
              [ResourceSystemTypeDescription]              
            ) 
         ) [ReportParameter];
    
    SELECT [ReportParameter].[Name], [ReportParameter].[Value] FROM @reportParameter [ReportParameter]    
      UNION ALL   
    SELECT 'PeriodBegin' [Name], CONVERT(NVARCHAR(128), @periodBegin, 104) [Value]    
      UNION ALL    
    SELECT 'PeriodEnd' [Name], CONVERT(NVARCHAR(128), @periodEnd, 104) [Value]
      UNION ALL    
    SELECT 'User' [Name], CONVERT(NVARCHAR(128), @userName) [Value]
      UNION ALL
    SELECT 'District' [Name], [District].[Description] [Value] FROM [Dictionaries].[District] [District] WHERE [District].[Id] = @districtId 
      UNION ALL
    SELECT 'City' [Name], [City].[Description] [Value] 
      FROM [Dictionaries].[City] [City]
      INNER JOIN [Dictionaries].[District] [District] ON [City].[Id] = [District].[CityId] AND [District].[Id] = @districtId

    /* Выхлоп имен полей отчета */
    (
      SELECT 
        CONCAT([Parameter].[Code], '.Instant') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]
    )
    UNION ALL
    (
      SELECT 
        CONCAT([Parameter].[Code], '.Daily') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (3, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]    
    )
    UNION ALL 
    (
      SELECT 
        CONCAT([Parameter].[Code], '.FinalInstant') [Name],
        [Parameter].[IntegrableValue] [IntegrableValue]
      FROM  [Programmability].[GetSummaryAccountingAbstractParameters] (5, @resourceSystemTypeId, @userId, @districtId) [ReportFieldInfo] 
      INNER JOIN [Dictionaries].[Parameter] [Parameter] 
          ON [Parameter].[Id] = [ReportFieldInfo].[Id]
    )    
    /*----------------------------------------------------------------------------------------------------*/

        
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Уточненные предикаты диапазонов дат по типам устройств 
      с учетом времеммных смещений для суточных данных 
    */
    DECLARE @dateRangePredicate NVARCHAR(MAX) = '';
    SELECT 
      @dateRangePredicate = @dateRangePredicate 
      + CONCAT
        (
          '(',
          '(',
            '[Time]>=', '''',
            CONVERT(NVARCHAR,DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodBegin), 126 ), '''',
            ' AND ',
            '[Time]<=', '''', 
            CONVERT(NVARCHAR, DATEADD(SECOND, [DeviceArchiveTimeConverter].[Interval], @periodEnd), 126), '''',
            ') AND [Device].[Id]=', [DeviceArchiveTimeConverter].[DeviceId],
          ')'  
        )  + ' OR '
    FROM [Rules].[DeviceArchiveTimeConverter] [DeviceArchiveTimeConverter]
    WHERE EXISTS      
    (
      SELECT DISTINCT [MeasurementDevice].[DeviceId] [DeviceId] 
      FROM [Business].[MeasurementDevice] [MeasurementDevice]

      INNER JOIN [Business].[Channel]  
		  ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
	
			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] 
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] AND [UserLinkChannel].[UserId] = @userId
		
			INNER JOIN [Business].[Placement] [Placement] 
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building] 
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
      
      WHERE [MeasurementDevice].[DeviceId] = [DeviceArchiveTimeConverter].[DeviceId]

    ) AND [DeviceArchiveTimeConverter].[PeriodTypeId] = 3 ;

    
    SET @dateRangePredicate = LEFT(@dateRangePredicate, LEN(@dateRangePredicate) - 3);
    /*----------------------------------------------------------------------------------------------------*/
    

    /*----------------------------------------------------------------------------------------------------*/
		/* 
      Выборка всех возможных абстрактных параметров связанных с шаблонами каналов по пользователю и району
      и формирование строк подстановки для оператора PIVOT
    */      				        

    /*Проверка существования каналов связанных с пользователем по критерию отбора*/

    IF( EXISTS( SELECT 1 FROM [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) ))
    BEGIN
      /* Суточные */
      DECLARE @abstractParameterFieldsDaily NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsDailyAlias NVARCHAR(MAX) = '';  
      DECLARE @abstractParameterFieldsWithNextDaily NVARCHAR(MAX) = '';  
      
      SELECT 
         @abstractParameterFieldsDaily = @abstractParameterFieldsDaily + CONCAT('[', [CodePull].[Code], ']') + ', ',       
         
         @abstractParameterFieldsDailyAlias = @abstractParameterFieldsDailyAlias 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Daily]') + ', ' 
          + CONCAT('[ArchiveDailyPivot].[',[CodePull].[Code], '.Last] ', '[', [CodePull].[Code], '.Last.Daily]') + ', ',    
              
         @abstractParameterFieldsWithNextDaily = @abstractParameterFieldsWithNextDaily 
          + CONCAT('[', [CodePull].[Code], ']') + ', ' 
  		    + CONCAT('LAST_VALUE ([', [CodePull].[Code], ']) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [', [CodePull].[Code], '.Last', ']')
          + ','   
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (3, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsDaily = LEFT(@abstractParameterFieldsDaily, LEN(@abstractParameterFieldsDaily) - 1);
      SET @abstractParameterFieldsDailyAlias = LEFT(@abstractParameterFieldsDailyAlias, LEN(@abstractParameterFieldsDailyAlias) - 1);
      SET @abstractParameterFieldsWithNextDaily = LEFT(@abstractParameterFieldsWithNextDaily, LEN(@abstractParameterFieldsWithNextDaily) - 1);
          
      /* Итоговые */
      DECLARE @abstractParameterFieldsFinalInstant NVARCHAR(MAX) = '';
      DECLARE @abstractParameterFieldsFinalInstantAlias NVARCHAR(MAX) = '';
  
      SELECT 
        @abstractParameterFieldsFinalInstant = @abstractParameterFieldsFinalInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
        @abstractParameterFieldsFinalInstantAlias = @abstractParameterFieldsFinalInstantAlias 
          + CONCAT('[ArchiveFinalInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.FinalInstant]') + ', '
         
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (5, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsFinalInstant = LEFT(@abstractParameterFieldsFinalInstant, LEN(@abstractParameterFieldsFinalInstant) - 1);
      SET @abstractParameterFieldsFinalInstantAlias = LEFT(@abstractParameterFieldsFinalInstantAlias, LEN(@abstractParameterFieldsFinalInstantAlias) - 1);
      
      /* Мгновенные */
      DECLARE @abstractParameterFieldsInstant NVARCHAR(MAX) = '';   
      DECLARE @abstractParameterFieldsInstantAlias  NVARCHAR(MAX) = '';
         
      SELECT 
         @abstractParameterFieldsInstant = @abstractParameterFieldsInstant + CONCAT('[', [CodePull].[Code], ']') + ', ',
  
         @abstractParameterFieldsInstantAlias = @abstractParameterFieldsInstantAlias 
          + CONCAT('[ArchiveInstantPivot].[',[CodePull].[Code], '] ', '[', [CodePull].[Code], '.Instant]') + ', '
            
      FROM [Programmability].[GetSummaryAccountingAbstractParameters] (1, @resourceSystemTypeId, @userId, @districtId) [CodePull];
          
      SET @abstractParameterFieldsInstant = LEFT(@abstractParameterFieldsInstant, LEN(@abstractParameterFieldsInstant) - 1);
      SET @abstractParameterFieldsInstantAlias = LEFT(@abstractParameterFieldsInstantAlias, LEN(@abstractParameterFieldsInstantAlias) - 1);  
    
    END
    ELSE
    BEGIN
      SELECT [Unknown] FROM ( SELECT NULL [Unknown] ) [MainData] WHERE 1 != 1
    END;

    /*----------------------------------------------------------------------------------------------------*/

  
    /*----------------------------------------------------------------------------------------------------*/
    /* 
      Динамический скрипт с набором CTE для базовых выборок со диапазону суточных данных, 
      последних текущих итоговых и мгновенных данных
    */
	  DECLARE @mainDataQuery NVARCHAR(MAX) =     
    '
    /* Суточные значения за заданный диапазон */
    WITH [ArchiveDaily]
    AS
    (
      SELECT                     
       [Channel].[Id] [ChannelId],
			 [Archive].[Time] [Time],        
  		 [Parameter].[Code] [ParameterCode]           
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 3

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			
			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 3 AND ({dateRangePredicate})     
    ),

    /* Итоговые значения */
    [ArchiveFinalInstant]
    AS
    (
      SELECT       
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			        
  		 [Parameter].[Code] [ParameterCode]               
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					          
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 5 

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			
			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 5         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                  
    ),
    
    /* Мгновенные значения */
    [ArchiveInstant]
    AS
    (
      SELECT         
       [Channel].[Id] [ChannelId],
       [Parameter].[Id] [ParameterId], 			 
  		 [Parameter].[Code] [ParameterCode]       
			 ,[dbo].[ConvertMeasurementUnit]
			  (
				  [Dimension].[Value], 
				  [Muc].[DimensionValue2], 
				  [Archive].[Value], 
				  [Muc].[Expression]
			  ) [Value]
		  FROM [Business].[Archive] [Archive]
			
			INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] 
				ON  [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]

			INNER JOIN [Business].[Channel] [Channel]
				ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
			
			/* привязка к шаблону и фильтр по типу ресурсной системы */
			INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate]
				ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] 
					AND [ChannelTemplate].[ResourceSystemTypeId] = @resourceSystemTypeId

			INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter]
				ON [DeviceParameter].[Id] = [Archive].[DeviceParameterId]
      
    INNER JOIN [Dictionaries].[Device] [Device]
				ON [Device].[Id] = [DeviceParameter].[DeviceId]
         
			INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter]
				ON [ParameterMapDeviceParameter].[DeviceParameterId] = [DeviceParameter].[Id] 
					AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]					
		      AND [ParameterMapDeviceParameter].[PeriodTypeId] = 1        

			INNER JOIN [Dictionaries].[Dimension] [Dimension]
				ON [ParameterMapDeviceParameter].[DimensionId] = [Dimension].[Id]

			INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit]
				ON [ParameterMapDeviceParameter].[MeasurementUnitId] = [MeasurementUnit].[Id]

			/* только те записи из конвертора для которых входная соотвествует архивной (исходной)*/
			LEFT OUTER JOIN [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView] [Muc] 			
				ON [MeasurementUnit].[Id] = [Muc].[MeasurementUnit1Id] 

			/* фильтр по принадлежности пользователю и по принадлежности к району */
			INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel]
				ON [UserLinkChannel].[ChannelId] = [Channel].[Id] 
					AND [UserLinkChannel].[UserId] = @userId
			
			INNER JOIN [Business].[Placement] [Placement]
				ON [Placement].[Id] = [Channel].[PlacementId]

			INNER JOIN [Business].[Building] [Building]
				ON [Building].[Id] = [Placement].[BuildingId] 
					AND [Building].[DistrictId] = @districtId
			/**/

			INNER JOIN [Dictionaries].[Parameter] [Parameter]
				ON [Parameter].[Id] = [ParameterMapDeviceParameter].[ParameterId]

      WHERE 
        [Archive].[PeriodTypeId] = 1         
        AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]                 
    ),

    /* Разворот суточных данных с добавлением данных из последней строки диапазона */
  	[ArchiveDailyPivot]
    AS
    (
    	 SELECT *
       FROM (
            SELECT 
              ROW_NUMBER() OVER (PARTITION BY [ChannelId] ORDER BY [ChannelId], [Time]) [Num],              
              [ChannelId], 
              [Time] [Time.Daily],
              LAST_VALUE([Time]) OVER(PARTITION BY [ChannelId] ORDER BY [Time] ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) [Time.Last.Daily],
              {abstractParameterFieldsWithNextDaily}          
            FROM
              (
                SELECT                   
                  [ChannelId], 
                  [Time], 
                  {abstractParameterFieldsDaily}           
                FROM [ArchiveDaily]
                    PIVOT
                    (
                      AVG([Value])
                      FOR [ParameterCode] IN ( {abstractParameterFieldsDaily} )                  
                    ) [MainData]
                
              ) [PrePivotArchive]                                 
           ) [PivotData]
          WHERE [PivotData].[Num] = 1
        ),

        /* Извлечение последнего итогового значения и разворот */
        [ArchiveFinalInstantPivot]
        AS
        (
          SELECT [ChannelId], {abstractParameterFieldsFinalInstant} FROM
          (
            SELECT [ChannelId], [ParameterCode], [Value]
            FROM    
            (
              SELECT 
                ROW_NUMBER() OVER
                  (
                    PARTITION BY [ArchiveFinalInstant].[ChannelId], [ArchiveFinalInstant].[ParameterId] 
                    ORDER BY [ArchiveFinalInstant].[ChannelId]
                  ) [Num], 
                *
              FROM [ArchiveFinalInstant]             
            ) 
            [ArchiveFinalInstant]  WHERE [Num] = 1
          ) [MainData] 
          PIVOT
          (
            AVG([Value])
            FOR [ParameterCode] IN ( {abstractParameterFieldsFinalInstant} )                  
          ) [PivotData] 
        ),
        
        /* Извлечение последнего мгновенного значения и разворот */
        [ArchiveInstantPivot]
        AS
        (     
            SELECT [ChannelId],  {abstractParameterFieldsInstant} FROM
            (
              SELECT [ChannelId], [ParameterCode], [Value]
              FROM    
              (
                SELECT 
                  ROW_NUMBER() OVER
                    (
                      PARTITION BY [ArchiveInstant].[ChannelId], [ArchiveInstant].[ParameterId] 
                      ORDER BY [ArchiveInstant].[ChannelId]
                    ) [Num], 
                  *
                FROM [ArchiveInstant]             
              ) 
              [ArchiveInstant]  WHERE [Num] = 1

            ) [MainData]
            PIVOT
            (
              AVG([Value])
              FOR [ParameterCode] IN ( {abstractParameterFieldsInstant} )                  
            ) [PivotData]   
        )
      /**/
      
      /* Итоговые выборки с разыменованным набором полей */ 
      ,[ArchiveDailyPivotSummary] AS
      (
         SELECT           
          [ArchiveDailyPivot].[ChannelId], 
          [ArchiveDailyPivot].[Time.Daily],
          [ArchiveDailyPivot].[Time.Last.Daily],
          {abstractParameterFieldsDailyAlias}
         FROM [ArchiveDailyPivot]          
      ) 
      ,[ArchiveFinalInstantPivotSummary] AS
      (
         SELECT                     
          [ChannelId],            
          {abstractParameterFieldsFinalInstantAlias} 
         FROM [ArchiveFinalInstantPivot] 
      )
      ,[ArchiveInstantPivotSummary] AS
      (        
         SELECT                         
          [ChannelId],           
          {abstractParameterFieldsInstantAlias} 
         FROM [ArchiveInstantPivot]
      )
      /**/
            
       SELECT         
        
        [Building].[Description] [BuildingDescription],
        [MeasurementDevice].[Description] [MeasurementDeviceDescription],
        [MeasurementDevice].[NetworkAddress] [MeasurementDeviceNetworkAddress],
        --[MeasurementDevice].[LastConnectionTime],
        [TimeSignature].[Time] [LastConnectionTime],

        [StatusConnection].[Description] [StatusConnectionDescription],
        [Organization].[Description] [OrganizationDescription],
        [TopChannelLinkAgreementParameter].[Value] [AgreementParameterValue],
        [TechnologicAdjunctionType].[Description] [TechnologicAdjunctionTypeDescription],

        [ArchiveDailyPivotSummary].*, 
        [ArchiveFinalInstantPivotSummary].*, 
        [ArchiveInstantPivotSummary].*

       FROM [ArchiveDailyPivotSummary] 
      
       INNER JOIN [ArchiveFinalInstantPivotSummary] 
          ON [ArchiveFinalInstantPivotSummary].[ChannelId] = [ArchiveDailyPivotSummary].[ChannelId]

       INNER JOIN [ArchiveInstantPivotSummary]
          ON [ArchiveInstantPivotSummary].[ChannelId] = [ArchiveDailyPivotSummary].[ChannelId]
       
       INNER JOIN [Business].[Channel] [Channel]
          ON [Channel].[Id] = [ArchiveFinalInstantPivotSummary].[ChannelId]

       INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice]
          ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]

        
       INNER JOIN [Business].[TimeSignature] [TimeSignature]
          ON [TimeSignature].[Id] = [MeasurementDevice].[LastTimeSignatureId]
       
       INNER JOIN [Business].[Placement] [Placement]
				  ON [Placement].[Id] = [Channel].[PlacementId]

			 INNER JOIN [Business].[Building] [Building]
				  ON [Building].[Id] = [Placement].[BuildingId]
       
       INNER JOIN [Dictionaries].[StatusConnection] [StatusConnection] 
          ON [StatusConnection].[Id] = [MeasurementDevice].[LastStatusConnectionId]
             
       INNER JOIN [Dictionaries].[TechnologicAdjunctionType] [TechnologicAdjunctionType] 
          ON [TechnologicAdjunctionType].[Id] = [Channel].[TechnologicAdjunctionTypeId]
              
       LEFT JOIN [Business].[Organization] [Organization]
          ON [Organization].[Id] = [Channel].[OrganizationId]
       
       OUTER APPLY 
       (
          SELECT TOP 1 [AgreementParameter].[Value] [Value]
          FROM [Business].[ChannelLinkAgreementParameter] [ChannelLinkAgreementParameter]
        
          INNER JOIN [Business].[AgreementParameter] [AgreementParameter] 
            ON [AgreementParameter].[Id] = [ChannelLinkAgreementParameter].[AgreementParameterId]
               
          INNER JOIN [Dictionaries].[AgreementParameterType] [AgreementParameterType] 
            ON [AgreementParameterType].[Id] = [AgreementParameter].[AgreementParameterTypeId] 

          WHERE [ChannelLinkAgreementParameter].[ChannelId] = [ArchiveDailyPivotSummary].[ChannelId]
          AND 
          (
            ([AgreementParameter].[AgreementParameterTypeId] = 1 AND @resourceSystemTypeId = 4) OR 
            ([AgreementParameter].[AgreementParameterTypeId] = 2 AND @resourceSystemTypeId = 3)
          )

       ) [TopChannelLinkAgreementParameter]

    ';
     /*----------------------------------------------------------------------------------------------------*/


     /*----------------------------------------------------------------------------------------------------*/ 
     /* Подстановки необходимых строк в динамический скрипт */ 
	   SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDaily}', @abstractParameterFieldsDaily);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsWithNextDaily}', @abstractParameterFieldsWithNextDaily);           
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstant}', @abstractParameterFieldsFinalInstant);     
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstant}', @abstractParameterFieldsInstant);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsDailyAlias}', @abstractParameterFieldsDailyAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsFinalInstantAlias}', @abstractParameterFieldsFinalInstantAlias);
     SET @mainDataQuery = REPLACE(@mainDataQuery, '{abstractParameterFieldsInstantAlias}', @abstractParameterFieldsInstantAlias);

     SET @mainDataQuery = REPLACE(@mainDataQuery, '{dateRangePredicate}', @dateRangePredicate);
     
      
     /* Вызываем динамически сформированный скрипт */ 
     EXEC [sys].[sp_executesql] @mainDataQuery,     
          N'@userId INT, 
            @districtId INT,             
            @resourceSystemTypeId INT,
            @periodBegin DATETIME, 
            @periodEnd DATETIME',

            @userId = @userId,
            @districtId = @districtId,            
            @resourceSystemTypeId = @resourceSystemTypeId,
            @periodBegin = @periodBegin,
            @periodEnd = @periodEnd;
      /*----------------------------------------------------------------------------------------------------*/

    COMMIT TRANSACTION;
	END TRY

	BEGIN CATCH
      PRINT ERROR_MESSAGE();
      
      /* транзакция имеет активную внутреннюю ошибку и дожна быть откатится */
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;
      
      -- !IMPORTANT
      /* транзакция валидна, но подтверждение  не наступило, 	например в силу генерации пользовательской ошибки */ 
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;

      IF (@isDebug = 0)
      BEGIN

        DECLARE @lineFeed CHAR(1) = CHAR(13);
        
        DECLARE @parameterListTrace NVARCHAR(256) = 
        CONCAT
        (  
          '@userName: ' ,            @userName, @lineFeed, 
          '@resourceSystemTypeId: ', @resourceSystemTypeId, @lineFeed, 
          '@districtId: ',           @districtId, @lineFeed, 
          '@periodBegin: ',          @periodBegin, @lineFeed, 
          '@periodEnd: ',            @periodEnd, @lineFeed
        );
        
        DECLARE @errorMessage NVARCHAR(MAX) = 
        CONCAT
        (
          'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
          'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
          'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
          'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
          'ErrorLine: ',       ERROR_LINE(), @lineFeed,
          'ErrorMessage: ',    ERROR_MESSAGE()
        );
        
        INSERT INTO [Admin].[ErrorLogEntry] 
        (
          [Time], 
          [Exception], 
          [Message], 
          [UserName],
          [StackTrace]
        )
        VALUES
        (
          GETDATE(), 
          'InternalSqlServerException', 
          @errorMessage, 
          SUSER_NAME(),
         @parameterListTrace
        );
        
        THROW;
      END;

	END CATCH;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@resourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@districtId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@roleCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[ShortName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingSheet3].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter].[IntegrableValue]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[Interval]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSummaryAccountingAbstractParameters].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet3].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet3].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSummaryAccountingSheet3].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSummaryAccountingSheet3].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet3].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet3].[@resourceSystemTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet3].[@districtId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet3].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSummaryAccountingSheet3].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="53" />
				<Property Name="Length" Value="31655" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="/*Старый вариант с INNER JOIN в финальной выборке*/&#xD;&#xA;CREATE PROCEDURE Programmability.GetSummaryAccountingSheet3&#xD;&#xA;&#x9;@userName NVARCHAR(64),&#xD;&#xA;  @resourceSystemTypeId INT,&#xD;&#xA;  @districtId INT,&#x9;&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;  @periodEnd DATETIME&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlScalarFunction" Name="[Programmability].[GetSysMessage]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[messages]" Type="SqlView" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[messages].[text]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[messages].[message_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage].[@msgId]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[messages].[language_id]" Type="SqlComputedColumn" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage].[@sysLangId]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
   
   DECLARE @msg NVARCHAR(2048) = 
   (
      SELECT TOP(1) [text]
            FROM [sys].[messages] [Msg] 
            WHERE [Msg].[message_id] = @msgId AND [Msg].[language_id] = @sysLangId
   );

   RETURN @msg;   
END;]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="CreateOffset" Value="369" />
							<Property Name="Length" Value="736" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-03-19&#xD;&#xA;-- Description: Возвращает системное сообщение SQL Server из таблицы sys.message по message_id и language_id &#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE FUNCTION [Programmability].[GetSysMessage]&#xD;&#xA;(&#xD;&#xA;   @msgId INT,&#xD;&#xA;   @sysLangId INT = 1049&#xD;&#xA;)&#xD;&#xA;RETURNS NVARCHAR(2048)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSysMessage].[@msgId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSysMessage].[@sysLangId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1049]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="Length" Value="2048" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[nvarchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetSystemProtocols]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN
 
  SET NOCOUNT ON;
  
  IF (@intervalByDay != 0)
  BEGIN

    SET @periodBegin = CAST(DATEDIFF(DAY, @intervalByDay, GETDATE()) AS DATETIME);
    
    /* в течении суток */
    IF(@intervalByDay = -1)
    BEGIN
      SET @periodBegin = CAST(CAST (GETDATE() AS DATE) AS DATETIME);
    END;

    SET @periodEnd = GETDATE();
  END;
  
  DECLARE @userId INT;  
  DECLARE @roleCode NVARCHAR(64);
  EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;
  
  /* 1. Формирование имен резалтсетов для отчета*/
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
   INSERT INTO @resultSetName VALUES 
       (1, 'MainData')
      ,(2, 'ColumnCaption');
   
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	   FROM @resultSetName [ResultSetName];
  /**/

  /* 2. Основная выборка данных */  
  
  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

  IF(@protocolType = 'EntityHistory')
  BEGIN
    SELECT  [EntityHistory].[Id]
           ,[EntityHistory].[EntityId]
           ,[EntityHistory].[EntityTypeName]
           ,[EntityHistory].[EntityTypeDescription]
           ,[EntityHistory].[PropertyName]
           ,[EntityHistory].[PropertyDescription]
           ,[EntityHistory].[OriginalValue]
           ,[EntityHistory].[CurrentValue]
           ,[EntityHistory].[User]
           ,[EntityHistory].[DateTime] 
      FROM [Admin].[EntityHistory] [EntityHistory] WITH (NOLOCK)
  
      WHERE 
        ([EntityHistory].[User] = @userName OR @roleCode = N'ADMIN') AND 
        ([EntityHistory].[DateTime] BETWEEN @periodBegin AND @periodEnd) AND 

        -- убираем дискрипционную "паразитку"
        NOT ([EntityHistory].[CurrentValue] = [EntityHistory].[OriginalValue] AND [EntityHistory].[PropertyName] = 'Description')
        AND 
        (
          [EntityHistory].[EntityTypeName] IN
          (
             SELECT CONVERT(NVARCHAR(64), [Item]) [EnyityCode]
             FROM [Business].[StringSplitToArray]  (@entityCodeArray, ',')
          ) 
          OR @selectAllEntity = 1
        )
        ORDER BY [EntityHistory].[DateTime] DESC;
        
      INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES
        ('MainData', 'Id', 'Ид', 0, 1),	        
        ('MainData', 'EntityTypeName', 'Ид типа', 1, 2),
        ('MainData', 'EntityTypeDescription', 'Наименование типа', 1, 3),
        ('MainData', 'EntityId', 'Ид сущности', 1, 4),    
        ('MainData', 'PropertyName', 'Ид свойства', 1, 5),
        ('MainData', 'PropertyDescription', 'Наименование свойства', 1, 6),
        ('MainData', 'OriginalValue', 'Исходное значение', 1, 7),
        ('MainData', 'CurrentValue', 'Текущее значение', 1, 8),
        ('MainData', 'User', 'Пользователь', 1, 9),
        ('MainData', 'DateTime', 'Дата и время', 1, 10);
  END  

  ELSE IF (@protocolType = 'DeletedEntity')
  BEGIN
    SELECT 
      [DeletedEntityLogEntry].[Id]
      ,[DeletedEntityLogEntry].[EntityId]
      ,[DeletedEntityLogEntry].[EntityDescription]
      ,[DeletedEntityLogEntry].[EntityTypeName]
      ,[DeletedEntityLogEntry].[EntityTypeDescription]
      
      ,[DeletedEntityLogEntry].[User]
      ,[DeletedEntityLogEntry].[DateTime]   
    FROM [Admin].[DeletedEntityLogEntry] [DeletedEntityLogEntry] WITH (NOLOCK)

    WHERE 
        ([DeletedEntityLogEntry].[User] = @userName OR @roleCode = N'ADMIN') AND 
        ([DeletedEntityLogEntry].[DateTime] BETWEEN @periodBegin AND @periodEnd)
        AND 
        (
          [DeletedEntityLogEntry].[EntityTypeName] IN
          (
             SELECT CONVERT(NVARCHAR(64), [Item]) [EnyityCode]
             FROM [Business].[StringSplitToArray]  (@entityCodeArray, ',')
          ) 
          OR @selectAllEntity = 1
        )

        ORDER BY [DeletedEntityLogEntry].[DateTime] DESC;

    INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES
        ('MainData', 'Id', 'Ид', 0, 1),	        
        ('MainData', 'EntityTypeName', 'Ид типа', 1, 2),
        ('MainData', 'EntityTypeDescription', 'Наименование типа', 1, 3),
        ('MainData', 'EntityId', 'Ид сущности', 1, 4),
        ('MainData', 'EntityDescription', 'Наименование сущности', 1, 5),        
        ('MainData', 'User', 'Пользователь', 1, 6),
        ('MainData', 'DateTime', 'Дата и время', 1, 7);
  END

  ELSE IF (@protocolType = 'CreatedBy')
  BEGIN 
    
    DECLARE @queries NVARCHAR(MAX);

    SELECT @queries = STUFF(CAST((
      SELECT [text()] = 'UNION ALL ' + 
		'('
		    +'SELECT ' 
			+ CAST([EntityOrder] AS NVARCHAR(4)) +' [EntityOrder], ' 
			+ '''' + [EntityTypeName] + ''' [EntityTypeName], '
			+ '''' + [EntityTypeDescription] + ''' [EntityTypeDescription]'
			+ ' ,[Entity].[Id] [EntityId]' + 
            IIF
    		(	
    			EXISTS -- Does it have Description property?  
    			(
    				SELECT 1 
    				FROM Core.[Entity] [EntityInfo]
    				WHERE 
    					EXISTS
    					(
    						SELECT 1 
    						FROM Core.[EntityProperty] [EntityPropertyInfo] 
    						WHERE 
								[EntityPropertyInfo].[PropertyName] = 'Description' 
								AND [EntityPropertyInfo].[EntityId] = [EntityInfo].[Id]
    					)
    					AND [EntityInfo].[Code] = [EntityTypeName]
    			),			
    			' ,[Entity].[Description] [EntityDescription]',
    			' ,NULL [EntityDescription]'				
    		  )         
              + ' ,[Entity].[CreatedBy] [User]'
    		  + ' ,[Entity].[CreatedDate] [DateTime] ' 
    		  + 'FROM [' + [EntityScheme] + '].[' + [EntityTypeName] + '] [Entity] WITH (NOLOCK)'
    		  + ' WHERE ([Entity].[CreatedBy] = @userName OR @roleCode = N''ADMIN'') AND ([Entity].[CreatedDate] BETWEEN @periodBegin AND @periodEnd)'
          + ')' 
      FROM 
      (        
          SELECT      
          [Entity].[Id] [EntityOrder]
          ,[Entity].[Schema] [EntityScheme]
          ,[Entity].[Code] [EntityTypeName]
          ,[Entity].[Description] [EntityTypeDescription]
          
          FROM [Core].[Entity] [Entity] 
          
          WHERE [Entity].[Code] IN 
          (
              SELECT CONVERT(NVARCHAR(64), [Item]) [EnyityCode]
                FROM [Business].[StringSplitToArray]  (@entityCodeArray, ',')
          )                         
      ) [Entity]
    
    FOR XML PATH(''), TYPE) AS NVARCHAR(MAX)), 1, 9, '')
    
    SET @queries = 
      'SELECT  
          ROW_NUMBER() OVER(ORDER BY [EntityOrder]) [Id]
          ,[Entity].[EntityTypeName]
          ,[Entity].[EntityTypeDescription]
          ,[Entity].[EntityId]
          ,[Entity].[EntityDescription]
          ,[Entity].[User] 
          ,[Entity].[DateTime]      
        FROM
        ( ' + @queries + ') [Entity] ORDER BY [Entity].[DateTime] DESC';

    IF(@queries IS NULL)
    BEGIN

      DECLARE @emptyStub NVARCHAR(MAX) = 
        'SELECT *
        FROM 
          (
            SELECT  
                   NULL [Id]
                  ,NULL [EntityTypeName]
                  ,NULL [EntityTypeDescription]
                  ,NULL [EntityId]
                  ,NULL [EntityDescription]
                  ,NULL [User] 
                  ,NULL [DateTime]                       
          ) [Entity] 
        WHERE NULL IS NOT NULL';
                 
      SET @queries = @emptyStub;
    END;
         
    EXEC [sys].[sp_executesql] 
      @queries,
      N'@userName NVARCHAR(32), @roleCode NVARCHAR(32), @periodBegin DATETIME, @periodEnd DATETIME',
      @userName = @userName, 
      @roleCode = @roleCode, 
      @periodBegin = @periodBegin, 
      @periodEnd = @periodEnd 
    ;

    INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES
        ('MainData', 'Id', 'Ид', 0, 1),	        
        ('MainData', 'EntityTypeName', 'Ид типа', 1, 2),
        ('MainData', 'EntityTypeDescription', 'Наименование типа', 1, 3),
        ('MainData', 'EntityId', 'Ид сущности', 1, 4),
        ('MainData', 'EntityDescription', 'Наименование сущности', 1, 5),        
        ('MainData', 'User', 'Пользователь', 1, 6),
        ('MainData', 'DateTime', 'Дата и время', 1, 7);
  END

  ELSE IF(@protocolType = 'ErrorLog')
  BEGIN
  	SELECT        
      [Err].[UserName] [User]
      ,[Err].[Time] [DateTime]      
      ,[Err].[Exception]
      
      ,IIF( LEN([Err].[Message]) > 128, [dbo].[GetGridHyperlink] 
      (
            'ErrorLogEntry', 
            'Message', 
            [Err].[Id], 
            'show-largetext', 
            'Сообщение...'
      ), [Err].[Message]) [Message] 

      ,[Err].[UserAgent]      
      ,[dbo].[GetGridHyperlink] 
      (
            'ErrorLogEntry', 
            'StackTrace', 
            [Err].[Id], 
            'show-largetext', 
            'Трассировка стека...'
      ) [StackTrace]
      ,[dbo].[GetGridHyperlink] 
      (
            'ErrorLogEntry', 
            'RequestParams', 
            [Err].[Id], 
            IIF( [Err].[RequestParams] IS NOT NULL, 'show-largetext', ''),
            'Параметры запроса...'
      ) [RequestParams]       

     FROM [Admin].[ErrorLogEntry] [Err] WITH (NOLOCK)
    
     WHERE  
        ([Err].[UserName] = @userName OR @roleCode = N'ADMIN') AND 
        ([Err].[Time] BETWEEN @periodBegin AND @periodEnd)

     ORDER BY [Err].[Time] DESC
         
    INSERT INTO @columnCaption 
    OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
    VALUES  
    	 ('MainData', 'User', 'Пользователь', 1, 1)    	
    	,('MainData', 'Exception', 'Исключение', 1, 3)
      ,('MainData', 'Message', 'Сообщение', 1, 4)
      ,('MainData', 'UserAgent', 'Браузер', 1, 5)
      ,('MainData', 'StackTrace', 'Стек', 1, 6)
      ,('MainData', 'RequestParams', 'Параметры запроса', 1, 7)
      ,('MainData', 'DateTime', 'Время', 1, 7);    
  END

  ELSE IF(@protocolType = 'Audit')
  BEGIN
    SELECT 
      [Audit].[Id] [Id], 
      [Role].[Code] [Role],
      [User].[UserName] [UserName],
      [Audit].[Time] [Time],
      [Audit].[Elapsed] [Elapsed],
      
      [Audit].[Area],
      [Audit].[Controller],
      [Audit].[Action] [Action],

      IIF( LEN([Audit].[ActionParams]) > 128, [dbo].[GetGridHyperlink] 
      (
            'Audit', 
            'ActionParams', 
            [Audit].[Id], 
            'show-largetext', 
            'Параметры действия...'
      ), [Audit].[ActionParams]) [ActionParams] 

      
    FROM [Admin].[Audit] [Audit] WITH (NOLOCK)
      INNER JOIN [Admin].[User] [User] WITH (NOLOCK) ON [Audit].[UserId] = [User].[Id]
      INNER JOIN [Admin].[Role] [Role] WITH (NOLOCK) ON [Role].[Id] = [User].[RoleId]
      
    WHERE  
      ([User].[UserName] = @userName OR @roleCode = N'ADMIN') AND 
      ([Audit].[Time] BETWEEN @periodBegin AND @periodEnd)

    ORDER BY [Audit].[Time] DESC

  
    INSERT INTO @columnCaption 
    OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
    VALUES  
  	  ('MainData', 'Id', 'Ид', 1, 1)
  	  ,('MainData', 'Role', 'Роль', 1, 2)
  	  ,('MainData', 'UserName', 'Пользователь', 1, 3)  	  
  	  ,('MainData', 'Elapsed', 'Время исполнения', 1, 5)
      ,('MainData', 'Area', 'Область', 1, 6)
  	  ,('MainData', 'Controller', 'Контроллер', 1, 7)
  	  ,('MainData', 'Action', 'Действие', 1, 8)
  	  ,('MainData', 'ActionParams', 'Параметры действия', 1, 8)
      ,('MainData', 'Time', 'Время', 1, 9)
  END;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@intervalByDay]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@periodBegin]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@protocolType]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[EntityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[EntityTypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[PropertyName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[PropertyDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[OriginalValue]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[CurrentValue]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[EntityHistory].[DateTime]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@entityCodeArray]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@selectAllEntity]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[EntityTypeDescription]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[DeletedEntityLogEntry].[DateTime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Schema]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[StringSplitToArray].[Item]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Core].[EntityProperty]" />
				</Entry>
				<Entry>
					<References Name="[Core].[EntityProperty].[PropertyName]" />
				</Entry>
				<Entry>
					<References Name="[Core].[EntityProperty].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Entity].[Schema]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetGridHyperlink]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserAgent]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetGridHyperlink]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[RequestParams]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetGridHyperlink]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Elapsed]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Area]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Controller]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Action]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[ActionParams]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetGridHyperlink]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Audit].[Time]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSystemProtocols].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetSystemProtocols].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetSystemProtocols].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@periodBegin]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@periodEnd]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@intervalByDay]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[31]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@protocolType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['EntityHistory']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="16" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@entityCodeArray]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetSystemProtocols].[@selectAllEntity]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="12141" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE Programmability.GetSystemProtocols&#xD;&#xA;&#x9;@userName NVARCHAR(64),&#xD;&#xA;&#x9;@periodBegin DATETIME = NULL,&#xD;&#xA;&#x9;@periodEnd DATETIME = NULL,&#xD;&#xA;&#x9;@intervalByDay INT = 31,&#xD;&#xA;&#x9;@protocolType NVARCHAR(16) = 'EntityHistory',&#xD;&#xA;&#x9;@entityCodeArray NVARCHAR(MAX),&#xD;&#xA;&#x9;@selectAllEntity BIT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetTv7IntegratingParameters]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	CREATE TABLE #Result  (SumParamId INT NOT NULL, DiffParamId INT NOT NULL, 
                          Name VARCHAR(32) NOT NULL, Value DECIMAL(19, 7)) 

    INSERT INTO #Result (SumParamId, DiffParamId, Name)
	VALUES (4049, 4083, 'V1Sum'),
	       (4050, 4084, 'V2Sum'),
		   (4051, 4085, 'V3Sum'),
		   (4052, 4086, 'V4Sum'),
		   (4053, 4087, 'V5Sum'),
		   (4054, 4088, 'V6Sum'),
		   (4055, 4089, 'M1Sum'),
		   (4056, 4090, 'M2Sum'),
		   (4057, 4091, 'M3Sum'),
		   (4058, 4092, 'M4Sum'),
		   (4059, 4093, 'M5Sum'),
		   (4060, 4094, 'M6Sum'),
		   (4061, 4095, 'dM1Sum'),
		   (4062, 4096, 'dM2Sum'),
		   (4063, 4097, 'Qtv1Sum'),
		   (4064, 4098, 'Qtv2Sum'),
		   (4065, 4099, 'Q121Sum'),
		   (4066, 4100, 'Q122Sum'),
		   (4067, 4101, 'Qg1Sum'),
		   (4068, 4102, 'Qg2Sum'),
		   (4069, 4103, 'Tnorm1Sum'),
		   (4070, 4104, 'Tnorm2Sum'),
		   (4071, 4105, 'Tden1Sum'),
		   (4072, 4106, 'Tden2Sum')

	  IF(@isDiff = 1)
	  BEGIN
	  UPDATE #Result SET [Value] = (SELECT [Archive].[Value]
                                      FROM [Business].[Archive] [Archive]
									  WHERE [Archive].[MeasurementDeviceId] = @measurementDeviceId AND [Archive].[PeriodTypeId] = 2 AND [Archive].[Time] = @time AND [Archive].[DeviceParameterId] = DiffParamId) 	  	  
	  END
	  ELSE
	  BEGIN
	   UPDATE #Result SET [Value] = (SELECT [Archive].[Value]
                                      FROM [Business].[Archive] [Archive]
									  WHERE [Archive].[MeasurementDeviceId] = @measurementDeviceId AND [Archive].[PeriodTypeId] = 2 AND [Archive].[Time] = @time AND [Archive].[DeviceParameterId] = SumParamId) 	  
	  END
    
	 DECLARE @PivotFields VARCHAR(512)
     SELECT @PivotFields = ISNULL( @PivotFields + ',' + '[' +Name + ']', '[' +Name + ']')  FROM #Result

  	 DECLARE @query VARCHAR (2048) = 'SELECT ' + @PivotFields + ' FROM (SELECT Name, Value FROM #Result) as MyTable
     PIVOT (AVG(Value) FOR Name IN (' +  @PivotFields +')) PivotTable'
     EXEC ( @query )
RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[SumParamId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[DiffParamId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[@isDiff]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[@time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[DiffParamId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[SumParamId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetTv7IntegratingParameters].[#Result]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[SumParamId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[DiffParamId]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="32" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[varchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7IntegratingParameters].[#Result].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Scale" Value="7" />
												<Property Name="Precision" Value="19" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[decimal]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7IntegratingParameters].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7IntegratingParameters].[@time]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7IntegratingParameters].[@isDiff]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="387" />
				<Property Name="Length" Value="2624" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 24 November 2015&#xD;&#xA;-- Update date: 24 November 2015&#xD;&#xA;-- Description: Возвращает значения часовых накопительных параметров по времени&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetTv7IntegratingParameters]&#xD;&#xA;&#x9;@measurementDeviceId INT,&#xD;&#xA;&#x9;@time DATETIME,&#xD;&#xA;&#x9;@isDiff BIT = 0 -- 0 - возвращать просуммированные значения / 1 - возвращать разностные значения&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetTv7MeasurementDeviceJournal]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
	SET XACT_ABORT ON;
	
	BEGIN TRY
	
	/* все выборки в составе хранимой процедуры имеют статус "грязных" */
      SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

      BEGIN TRANSACTION;
	  
	  DECLARE @measurementDeviceId INT = 
      (
        SELECT TOP(1) [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );
	  
	  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
      DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

      INSERT INTO @resultSetName VALUES
         (1, 'ReportParameter'),
         (2, 'MainData'),
		 (3, 'ColumnCaption') -- набор с необязательной расшифровкой имен столбцов наборов
      
	  SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName]

	  /* 2. Проверка соотвествия принадлежность прибора пользователю */
      DECLARE @userId  INT;    
      DECLARE @roleCode NVARCHAR(64);

      EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

     -- если пользователю не принадлежит прибор 
     IF(NOT EXISTS(SELECT 1 FROM [Business].[UserLinkChannel] [Link] WITH(NOLOCK) WHERE [Link].[UserId] = @userId AND [Link].[ChannelId] = @channelId))
     BEGIN    
        DECLARE @errorPermissionMsg  NVARCHAR(2048) 
         = [Programmability].[GetSysMessage](297, 1033);
        -- то возбуждаем исключение с сообщением 297                 
        THROW 500001, @errorPermissionMsg, 1;
     END;

	 /* 3. Формирование таблицы параметрии отчета*/
      DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
      INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (SELECT  
			   CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode],           
               CAST([Z].[Description] AS NVARCHAR(128)) [District],
               CAST([B].[FullAddress] AS NVARCHAR(128)) [FullAddress],
               CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber]

		      FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
			      INNER JOIN [Dictionaries].[Device] [D] 
              ON [D].[Id] = [Md].[DeviceId]
			      
            INNER JOIN [Business].[AccessPoint] [Ap] WITH (NOLOCK)
              ON [Ap].[Id] = [Md].[AccessPointId]
			      
            INNER JOIN [Business].[AccessPointLinkBuilding] [ApBL] WITH (NOLOCK)  
              ON [ApBL].[AccessPointId] = [Ap].[Id]
			      
            INNER JOIN [Business].[Building] [B] WITH (NOLOCK)
              ON [B].[Id] = [ApBL].[BuildingId]
			      
            INNER JOIN [Dictionaries].[District] [Z] WITH (NOLOCK)
              ON [Z].[Id] = [B].[DistrictId] 
            
            INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
              ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT

		      WHERE [Md].[Id] = @measurementDeviceId) [MeasurementDeviceInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
			  [DeviceCode],
              [District], 
              [FullAddress], 
              [FactoryNumber]
            ) 
         ) [ReportParameter];
      
	  DECLARE @reportTitle NVARCHAR(48) = N'Неизвестный тип асинхронного архива';
	  DECLARE @internalDeviceEventStartIndex INT = -1;
	  DECLARE @internalDeviceEventEndIndex INT = -1;

	  IF @asyncArchiveTypeId = 0
	  BEGIN
	      SET @reportTitle = N'Архив изменений базы данных';
		  SET @internalDeviceEventStartIndex = 1;
		  SET @internalDeviceEventEndIndex = 49;
	  END
	  IF @asyncArchiveTypeId = 1
	  BEGIN
	      SET @reportTitle = N'Архив событий';
		  SET @internalDeviceEventStartIndex = 50;
		  SET @internalDeviceEventEndIndex = 80;
	  END
	  IF @asyncArchiveTypeId = 2
	  BEGIN
	      SET @reportTitle = N'Диагностический архив';
		  SET @internalDeviceEventStartIndex = 81;
		  SET @internalDeviceEventEndIndex = 86;
      END

      INSERT INTO @reportParameter ([Name],[Value])
	  VALUES ('ReportTitle', @reportTitle);
         
      SELECT 
         [ReportParameter].[Name], 
         [ReportParameter].[Value] 
      FROM @reportParameter [ReportParameter];

	  /* 4. Основная выборка */

	  SELECT [MainData].[Time] [Time],
	         [MainData].[Description] [Event],
			 [MainData].[OriginalValue] [OriginalValue],
			 [MainData].[CurrentValue] [CurrentValue]	  
	  FROM [Business].[MeasurementDeviceJournal] [MainData] WITH (NOLOCK)
	         WHERE [MeasurementDeviceId] = @measurementDeviceId AND 
			       [InternalDeviceEventId] >= @internalDeviceEventStartIndex AND
				   [InternalDeviceEventId] <= @internalDeviceEventEndIndex
      ORDER BY [Time] ASC

	  /* 5. Вспомогательная таблица с расшифровками столбцов */
	  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];
 
	  INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES
        ('MainData', 'Time', 'Время', 1, 1),
		('MainData', 'Event', 'Параметр/Событие', 1, 2),
		('MainData', 'OriginalValue', 'Старое значение', 1, 3),
		('MainData', 'CurrentValue', 'Новое значение', 1, 4)
      /**/

	  COMMIT TRANSACTION;

	  END TRY

  /* Логирование ошибки хранимой процедуры */
  BEGIN CATCH
    DECLARE @lineFeed CHAR(1) = CHAR(13);

       DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed, 
                '@measurementDeviceId: ',  @measurementDeviceId, @lineFeed, 
                '@channelId: ',            @channelId, @lineFeed, 
                '@asyncArchiveTypeId: ',   @asyncArchiveTypeId, @lineFeed                        
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      -- пробрасываем исключение на верх
      THROW;    
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@asyncArchiveTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[OriginalValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[CurrentValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7MeasurementDeviceJournal].[@asyncArchiveTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="355" />
				<Property Name="Length" Value="7349" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Maxim Okulin&#xD;&#xA;-- Create date: 21 January 2016&#xD;&#xA;-- Description: Возвращает набор данных для отчета &quot;Асинхронные архивы прибора ТВ7&quot;&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetTv7MeasurementDeviceJournal]&#xD;&#xA;&#x9;@userName NVARCHAR(32),&#xD;&#xA;&#x9;@channelId INT,&#xD;&#xA;&#x9;@asyncArchiveTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetTv7MinMaxHourNotCalculatedDates]">
			<Property Name="BodyScript">
				<Value><![CDATA[
    --V1Diff
    DECLARE @diffParameterId INT = 4083;
	--V1Sum
	DECLARE @sumParameterId INT = 4049;

	SELECT MIN([ArchiveBase].[Time]) [Min], MAX([ArchiveBase].[Time]) [Max]
	  FROM [Business].[Archive] [ArchiveBase] WITH(NOLOCK)
	  LEFT JOIN [Business].[Archive] [ArchiveSum] WITH(NOLOCK)
	  ON
	  [ArchiveBase].[MeasurementDeviceId] = [ArchiveSum].[MeasurementDeviceId] AND
	  [ArchiveBase].[PeriodTypeId] = [ArchiveSum].[PeriodTypeId] AND
	  [ArchiveBase].[Time] = [ArchiveSum].[Time] AND
	  [ArchiveBase].[DeviceParameterId] = @diffParameterId AND [ArchiveSum].[DeviceParameterId] = @sumParameterId AND [ArchiveBase].[DeviceParameterId] IS NOT NULL
	  WHERE [ArchiveSum].[Time] IS NULL AND
	        [ArchiveBase].[DeviceParameterId] = @diffParameterId AND
			[ArchiveBase].[MeasurementDeviceId] = @measurementDeviceId AND
			[ArchiveBase].[PeriodTypeId] = 2

RETURN 0]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetTv7MinMaxHourNotCalculatedDates].[@measurementDeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetTv7MinMaxHourNotCalculatedDates].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="420" />
				<Property Name="Length" Value="1416" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Maxim Okulin&#xD;&#xA;-- Create date: 24 November 2015&#xD;&#xA;-- Update date: 24 November 2015&#xD;&#xA;-- Description: Возвращает диапазон дат, в котором находятся часовые архивы с нерассчитанными интеграторами ТВ-7&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetTv7MinMaxHourNotCalculatedDates]&#xD;&#xA;&#x9;@measurementDeviceId INT&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetUnitedAccountingParamSheet]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;

	IF OBJECT_ID('tempdb..#ChannelInfoStub') IS NOT NULL DROP Table #ChannelInfoStub

	SELECT [ChannelInfoStub].[Id]
          ,[ChannelInfoStub].[Code]
          ,[ChannelInfoStub].[Description]
          ,[ChannelInfoStub].[ChannelId]
          ,[ChannelInfoStub].[ResourceSystemTypeId]
          ,[ChannelInfoStub].[ResourceSubsystemTypeId]
          ,[ChannelInfoStub].[ResourceSystemTypeCode]
          ,[ChannelInfoStub].[ResourceSubsystemTypeCode]
          ,[ChannelInfoStub].[IsStubChannel]
          ,[ChannelInfoStub].[ChannelTemplateId] 
    INTO [#ChannelInfoStub] FROM 
	(
		SELECT 
			[ChannelInfoStub].[Id]
			 ,[ChannelInfoStub].[Code]
			 ,[ChannelInfoStub].[Description]
			 ,[ChannelInfoStub].[ChannelId]
			 ,[ChannelInfoStub].[ResourceSystemTypeId]
			 ,[ChannelInfoStub].[ResourceSubsystemTypeId]
			 ,[ChannelInfoStub].[ResourceSystemTypeCode]
			 ,[ChannelInfoStub].[ResourceSubsystemTypeCode]
			 ,[ChannelInfoStub].[IsStubChannel] 
			 ,[ChannelInfoStub].[ChannelTemplateId] 
        
			FROM 
			(
				VALUES 
				(0, CAST(NULL AS NVARCHAR(64)), CAST(NULL AS NVARCHAR(64)), 0, 4, NULL, N'HeatSys', N'HeatSys', CAST( CASE WHEN @channelIdHeatSys = 0 AND @isPreload = 0 THEN 1 ELSE 0 END AS BIT), 2),
				(0, CAST(NULL AS NVARCHAR(64)), CAST(NULL AS NVARCHAR(64)), 0, 4, 8, N'HeatSys', N'HeatSysBlock', CAST( CASE WHEN @channelIdHeatSysBlock = 0 AND @isPreload = 0 THEN 1 ELSE 0 END AS BIT), 3),        
				(0, CAST(NULL AS NVARCHAR(64)), CAST(NULL AS NVARCHAR(64)), 0, 4, 7, N'HeatSys', N'HeatSysMakeup', CAST( CASE WHEN @channelIdHeatSysMakeup = 0 AND @isPreload = 0 THEN 1 ELSE 0 END AS BIT), 500),            
				(0, CAST(NULL AS NVARCHAR(64)), CAST(NULL AS NVARCHAR(64)), 0, 3, NULL, N'Hws', N'Hws', CAST( CASE WHEN @channelIdHws = 0 AND @isPreload = 0 THEN 1 ELSE 0 END AS BIT), 101),        
				(0, CAST(NULL AS NVARCHAR(64)), CAST(NULL AS NVARCHAR(64)), 0, 5, NULL, N'ElectroSys', N'ElectroSys', CAST( CASE WHEN @channelIdElectroSys = 0 AND @isPreload = 0 THEN 1 ELSE 0 END AS BIT), 20)           
			) 
			[ChannelInfoStub]([Id], [Code], [Description], [ChannelId], [ResourceSystemTypeId], [ResourceSubsystemTypeId], [ResourceSystemTypeCode], [ResourceSubsystemTypeCode], [IsStubChannel], [ChannelTemplateId])
       
	) [ChannelInfoStub];

    IF(@isStubMode = 1 AND @resourceSubsystemTypeCode IS NOT NULL)
    BEGIN
        DECLARE @channelTemplateId INT = (SELECT [#ChannelInfoStub].[ChannelTemplateId] FROM [#ChannelInfoStub] WHERE [#ChannelInfoStub].[ResourceSubsystemTypeCode] = @resourceSubsystemTypeCode)
            
        EXEC [Programmability].[GetAccountingParamSheetStub] @periodTypeId = @periodTypeId, @channelTemplateId = @channelTemplateId ;
        
        RETURN;
    END;
	        
    DECLARE @userId INT = 
        (
            SELECT TOP (1) [User].[Id] 
            FROM [Admin].[User] WITH (NOLOCK) 
            WHERE [UserName] = @userName
        );

	SELECT [ResultSetName].[Order], [ResultSetName].[Name]
		FROM
		(
			VALUES (1, N'ReportParameter'), (2, N'MainData')) ResultSetName([Order], [Name]
		);

	SELECT [Name], [Value] FROM
	(SELECT                                         
		CAST([District].[Description] AS NVARCHAR(128)) [District],
		CAST([Building].[FullAddress] AS NVARCHAR(128)) [FullAddress]
             
		FROM  [Business].[Building] [Building] WITH (NOLOCK)
        
		INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
			ON [District].[Id] = [Building].[DistrictId]
           
		WHERE [Building].[Id] = @buildingId
	) [BuildingInfo]
	UNPIVOT 
	(  
		[Value] FOR [Name] IN 
		(             
		  [District], 
		  [FullAddress]               
		) 
	) [ReportParameter];

    (
		SELECT 
			[ChannelInfoStub].[Id]
		   ,[ChannelInfoStub].[Code]
		   ,[ChannelInfoStub].[Description]
		   ,[ChannelInfoStub].[ChannelId]
		   ,[ChannelInfoStub].[ResourceSystemTypeId]
		   ,[ChannelInfoStub].[ResourceSubsystemTypeId]
		   ,[ChannelInfoStub].[ResourceSystemTypeCode]
		   ,[ChannelInfoStub].[ResourceSubsystemTypeCode]
		   ,[ChannelInfoStub].[IsStubChannel] 

		FROM  [#ChannelInfoStub] [ChannelInfoStub]

		WHERE [ChannelInfoStub].[IsStubChannel] = 1
    )
    UNION ALL
    (
		SELECT 
			[ChannelInfo].[Id]
		   ,[ChannelInfo].[Code]
		   ,[ChannelInfo].[Description]

		   ,[ChannelInfo].[ChannelId]
		   ,[ChannelInfo].[ResourceSystemTypeId]
		   ,[ChannelInfo].[ResourceSubsystemTypeId]
		   ,[ChannelInfo].[ResourceSystemTypeCode]
		   ,[ChannelInfo].[ResourceSubsystemTypeCode]
		   ,CAST (0 AS BIT)  [IsStubChannel] 
		FROM 
		(SELECT 
			[Channel].[Id] [Id], 
			[Channel].[Description] [Code],
			[ResourceSystemType].[Description] [Description],

			[Channel].[Id] [ChannelId], 
			[Channel].[ResourceSystemTypeId] [ResourceSystemTypeId],
			[Channel].[ResourceSubsystemTypeId] [ResourceSubsystemTypeId],        
			[ResourceSystemType].[Code] [ResourceSystemTypeCode],

			CASE [ResourceSystemType].[Id]
        		WHEN 3 THEN [ResourceSystemType].[Code]
        		ELSE COALESCE([ResourceSubsystemType].[Code], [ResourceSystemType].[Code]) 
			END [ResourceSubsystemTypeCode]
    
		FROM [Business].[Channel] [Channel] WITH(NOLOCK)
    
		INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
			ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]
    
		INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
			ON [Channel].[PlacementId] = [Placement].[Id]
    
		INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
			ON [Placement].[BuildingId] = [Building].[Id]

		INNER JOIN [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK)
			ON [Channel].[ResourceSystemTypeId] = [ResourceSystemType].[Id]

		LEFT JOIN [Dictionaries].[ResourceSubsystemType] [ResourceSubsystemType] WITH (NOLOCK)
			ON [Channel].[ResourceSubsystemTypeId] = [ResourceSubsystemType].[Id]
    
		WHERE 
			(@isPreload = 0 OR [Building].[Id] = @buildingId)

			AND ([ResourceSystemType].[Code] IN (SELECT [#ChannelInfoStub].[ResourceSystemTypeCode] FROM [#ChannelInfoStub])) 

			AND (@isPreload = 1 OR ( [Channel].[Id] IN (@channelIdHeatSys, @channelIdHeatSysBlock, @channelIdHws, @channelIdHeatSysMakeup, @channelIdElectroSys))) 
        
		) [ChannelInfo] 
   
		WHERE [ChannelInfo].[Id] IN 
			(
				SELECT [UserLinkChannel].[ChannelId] 
				FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH (NOLOCK) 
				WHERE [UserLinkChannel].[UserId] = @userId
			)
	)

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSubsystemTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@resourceSubsystemTypeCode]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@isStubMode]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetAccountingParamSheetStub].[@channelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@buildingId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSystemTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSubsystemTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[IsStubChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSubsystemType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@isPreload]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSystemTypeCode]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSys]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSysBlock]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHws]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSysMakeup]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdElectroSys]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSubsystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Id]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Code]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[Description]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ChannelId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSystemTypeId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSubsystemTypeId]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSystemTypeCode]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ResourceSubsystemTypeCode]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[IsStubChannel]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[#ChannelInfoStub].[ChannelTemplateId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetUnitedAccountingParamSheet].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUnitedAccountingParamSheet].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@userName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@buildingId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@periodTypeId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[3]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@isPreload]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSys]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSysBlock]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHws]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdHeatSysMakeup]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@channelIdElectroSys]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@isStubMode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUnitedAccountingParamSheet].[@resourceSubsystemTypeCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="286" />
				<Property Name="Length" Value="7331" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2017-06-15&#xD;&#xA;-- Update date: 2017-06-15&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROC Programmability.GetUnitedAccountingParamSheet&#xD;&#xA;    @userName NVARCHAR (32) = NULL,&#xD;&#xA;    @buildingId INT = NULL,&#xD;&#xA;    @periodTypeId INT = 3,&#xD;&#xA;    @isPreload BIT = 1,&#xD;&#xA;    &#xD;&#xA;    @channelIdHeatSys INT = 0,&#xD;&#xA;    @channelIdHeatSysBlock INT = 0,&#xD;&#xA;    @channelIdHws INT = 0,&#xD;&#xA;    @channelIdHeatSysMakeup INT = 0,&#xD;&#xA;    @channelIdElectroSys INT = 0,&#xD;&#xA;&#xD;&#xA;    @isStubMode BIT = 0,&#xD;&#xA;    @resourceSubsystemTypeCode NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetUserExtendedInfoSummary]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN

  DECLARE @dailyLowerBound DATETIME = CAST(CAST ( GETDATE() AS DATE) AS DATETIME);
  DECLARE @dailyNow DATETIME = GETDATE();  
  DECLARE @userId INT = 0;
  DECLARE @roleCode NVARCHAR(128) = NULL;
  DECLARE @roleDescription NVARCHAR(128) = NULL;


  SELECT TOP(1) @userId = [User].[Id], 
    @roleCode = [Role].[Code], 
    @roleDescription = [Role].[Description]

  FROM [Admin].[User] [User] WITH(NOLOCK) 
    INNER JOIN [Admin].[Role] [Role] WITH(NOLOCK) ON [Role].[Id] = [User].[RoleId]
  WHERE [User].[UserName] = @userName;

  
WITH UserExtendedInfoSummary
  AS
(
  -- 0)
   SELECT 0 [GroupKey],
      'Учетные данные' [GroupName],   
      'Роль' [Description],
      CONVERT(NVARCHAR(128), @roleCode) [Value]    
  
  UNION ALL   
  
  SELECT 0 [GroupKey],
      'Учетные данные' [GroupName],   
      'Учетная запись' [Description],
      CONVERT(NVARCHAR(128), @userName) [Value]    
  
  UNION ALL   
  
    -- 1)
    SELECT      
      1 [GroupKey],
      'Объекты диспетчеризации' [GroupName],   
      'Строения' [Description],
       CONVERT(NVARCHAR(128), COUNT(*)) [Value]    
    FROM 
    (
      SELECT DISTINCT [Placement].[BuildingId]      
      FROM [Business].[Placement] [Placement] WITH(NOLOCK)
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [Placement].[Id] = [Channel].[PlacementId]
          INNER JOIN [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK) ON [Channel].[Id] = [UserLinkChannel].[ChannelId] AND [UserLinkChannel].[UserId] = @userId
    ) [Buiding]
  
    UNION ALL
  
    SELECT 
      1 [GroupKey],     
      'Объекты диспетчеризации' [GroupName],       
      'Измерительные устройства' [Description],
      CONVERT(NVARCHAR(128), COUNT(*)) [Value]
  
    FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH(NOLOCK) WHERE [MeasurementDevice].[Id] IN
      (
        SELECT [Channel].[MeasurementDeviceId]       
          FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [UserLinkChannel].[ChannelId] = [Channel].[Id]
        WHERE [UserLinkChannel].[UserId] = @userId 
      )
  
    UNION ALL
  
    SELECT 
      1 [GroupKey],     
      'Объекты диспетчеризации' [GroupName],   
      'Измерительные каналы' [Description],
      CONVERT(NVARCHAR(128), COUNT(*)) [Value]    
  
    FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
    WHERE [UserLinkChannel].[UserId] = @userId 
             
    -- 2)
    UNION ALL
  
    SELECT   
      2 [GroupKey],
    'Подписка на уведомления' [GroupName], 
      [NotificationTypeByUser].[Description],   
      CONVERT(NVARCHAR(128), [NotificationTypeByUser].[Value]) [Value]     
    FROM
    ( 
      SELECT 
        ROW_NUMBER() OVER(PARTITION BY [NotificationType].[Id] ORDER BY [UserLinkEmergencyNotificationType].[Id] ) [RowNum], 
        COUNT(*) OVER(PARTITION BY [UserLinkEmergencyNotificationType].[NotificationTypeId]) [Value],
        [NotificationType].[Description] [Description]
      
        FROM [Business].[UserLinkEmergencyNotificationType] [UserLinkEmergencyNotificationType] WITH(NOLOCK)
        INNER JOIN [Dictionaries].[NotificationType] [NotificationType] WITH(NOLOCK) ON [UserLinkEmergencyNotificationType].[NotificationTypeId] = [NotificationType].[Id]
         
        WHERE [UserLinkEmergencyNotificationType].[UserAdditionalInfoId] = @userId 
    ) [NotificationTypeByUser]
    WHERE [NotificationTypeByUser].[RowNum] = 1
    
    UNION ALL
    
    -- 3)
    SELECT 
      3 [GroupKey],
      'Нештатные ситуации' [GroupName], 
      'Всего логов за текущие сутки' [Description],
      CONVERT(NVARCHAR(128), COUNT(*))  [Value]      
    FROM [Business].[Channel] [Channel]
      INNER JOIN [Business].[EmergencySituationParameter] [EmergencySituationParameter] WITH(NOLOCK) ON [Channel].[Id] = [EmergencySituationParameter].[ChannelId]
      INNER JOIN [Business].[EmergencyLog] [EmergencyLog] WITH(NOLOCK) ON [EmergencySituationParameter].[Id] = [EmergencyLog].[EmergencySituationParameterId]  
      INNER JOIN [Business].[EmergencyTimeSignature] [EmergencyTimeSignature] WITH(NOLOCK) ON [EmergencyLog].[EmergencyTimeSignatureId] = [EmergencyTimeSignature].[Id]
      
    WHERE [Channel].[Id] IN 
      (
        SELECT [Channel].[MeasurementDeviceId]       
          FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
          INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK) ON [UserLinkChannel].[ChannelId] = [Channel].[Id]
        WHERE [UserLinkChannel].[UserId] = @userId 
      ) AND 
      [EmergencyTimeSignature].[Time] >= @dailyLowerBound AND [EmergencyTimeSignature].[Time] <= @dailyNow
    
    UNION ALL
    
    SELECT 
      3 [GroupKey],
      'Нештатные ситуации' [GroupName],
      'Всего сообщений за текущие сутки' [Description],
      CONVERT(NVARCHAR(128), COUNT(*))  [Value]    
    FROM [Business].[EmergencyMessage] [EmergencyMessage] WITH(NOLOCK)  
      INNER JOIN [Business].[UserAdditionalInfo] [UserAdditionalInfo] WITH(NOLOCK) ON [EmergencyMessage].[UserAdditionalInfoId] = [UserAdditionalInfo].[Id]
      WHERE [UserAdditionalInfo].[Id] = @userId AND 
        [EmergencyMessage].[Time] >= @dailyLowerBound AND [EmergencyMessage].[Time] <= @dailyNow 
    )
  SELECT ROW_NUMBER() OVER(ORDER BY [GroupKey]) [Num], *
  FROM UserExtendedInfoSummary

    
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserExtendedInfoSummary].[@userName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[NotificationType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[NotificationTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[NotificationType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[NotificationType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkEmergencyNotificationType].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[NotificationType].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencySituationParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencySituationParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyLog].[EmergencyTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyTimeSignature].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage].[UserAdditionalInfoId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[EmergencyMessage].[Time]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetUserExtendedInfoSummary].[CTE1].[UserExtendedInfoSummary]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUserExtendedInfoSummary].[CTE1].[UserExtendedInfoSummary].[GroupKey]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUserExtendedInfoSummary].[CTE1].[UserExtendedInfoSummary].[GroupName]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUserExtendedInfoSummary].[CTE1].[UserExtendedInfoSummary].[Description]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetUserExtendedInfoSummary].[CTE1].[UserExtendedInfoSummary].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserExtendedInfoSummary].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="5607" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROC Programmability.GetUserExtendedInfoSummary&#xD;&#xA;  @userName NVARCHAR(32)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetUserInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  
  SELECT TOP(1) 
      @userId = [User].[Id], 
      @roleCode = [Role].[Code]     
    FROM [Admin].[User] [User] 
      INNER JOIN [Admin].[Role] [Role] ON [User].[RoleId] = [Role].[Id]    
    WHERE [User].[UserName] = @userName;
  
  RETURN 0

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@roleCode]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo].[@userName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserInfo].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserInfo].[@userId]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserInfo].[@roleCode]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="409" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [Programmability].[GetUserInfo]&#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;  @userId INT OUTPUT,&#xD;&#xA;  @roleCode NVARCHAR(64) OUTPUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlMultiStatementTableValuedFunction" Name="[Programmability].[GetUserLinkChannel]">
			<Property Name="ReturnTableVariable" Value="@userLinkTable" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserLinkChannel].[ChannelId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserLinkChannel].[UserId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
  
  DECLARE @userId INT;
  DECLARE @roleCode NVARCHAR(64);

  SELECT TOP(1) 
      @userId = [User].[Id], 
      @roleCode = [Role].[Code]     
  FROM [Admin].[User] [User] WITH (NOLOCK)
      INNER JOIN [Admin].[Role] [Role] WITH (NOLOCK) ON [User].[RoleId] = [Role].[Id]    
  WHERE [User].[UserName] = @userName;

   
   IF (@roleCode = N'OPERADMIN' OR @roleCode = N'LEADOPERADMIN')
   BEGIN
   -- для OPERADMIN - его натуральные линки
      INSERT INTO @userLinkTable 
      SELECT 
         [UserLink].[ChannelId], 
         [UserLink].[UserId]
      FROM [Business].[UserLinkChannel] [UserLink] WITH (NOLOCK)
      WHERE [UserLink].[UserId] = @userId
   END       
   ELSE IF (@roleCode = N'ADMIN')
   BEGIN
   -- для ADMIN все приборы
      INSERT INTO @userLinkTable 
      SELECT 
         [UserLink].[Id] [ChannelId], 
         NULL [UserId]
      FROM [Business].[Channel] [UserLink] WITH (NOLOCK)
   END;

   RETURN;
END;]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="1148" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [Programmability].[GetUserLinkChannel]&#xD;&#xA;(&#xD;&#xA;  @userName NVARCHAR(32)  &#xD;&#xA;)&#xD;&#xA;RETURNS @userLinkTable TABLE&#xD;&#xA;(&#xD;&#xA;      [ChannelId] INT,&#xD;&#xA;      [UserId] INT&#xD;&#xA;)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserLinkChannel].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetUserMessages]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN
   SET NOCOUNT ON;

   /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

   INSERT INTO @resultSetName VALUES
	   (1, 'MainData'),		   -- стандартное имя набора для отображения в решетке
	   (2, 'ColumnCaption');	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов
  
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]

  /**/
  DECLARE @monthCount INT = 1;

  /*2. Основная выборка */
   
   DECLARE @eoMonth DATETIME = EOMONTH(GETDATE());
   
   SET @eoMonth = DATEADD(second, 86399,  @eoMonth);

   DECLARE @soMonth DATETIME =
   (
     SELECT DATEADD(month, DATEDIFF(month, 0, DATEADD(month, - (@monthCount -1 ), GETDATE())), 0)
   );

  DECLARE @userId INT;
  DECLARE @roleCode NVARCHAR(64);

  EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

  DECLARE @requestRoleCode NVARCHAR(64) = IIF (@roleCode = 'OPERADMIN', 'HOLDER', NULL);
  -- ([Ci].[Id] = @cityId OR @cityId IS NULL) 

  SELECT        
      [Role].[Code] [RoleCode]
      ,[User].[UserName]
      ,[UserMessage].[Date]                        
      ,[dbo].[GetGridHyperlink] 
      (
            'UserMessage', 
            'Text', 
            [UserMessage].[Id], 
            'show-largetext', 
            'Сообщение...'
      ) [Text]      

   FROM [Admin].[UserMessage] [UserMessage] WITH (NOLOCK)
   
   INNER JOIN [Admin].[User] [User]  WITH (NOLOCK)
    ON [User].[Id] = [UserMessage].[UserId]

   INNER JOIN [Admin].[Role] [Role] WITH (NOLOCK)
    ON [Role].[Id] = [User].[RoleId]

   -- выборка за текущий месяц
   WHERE 
    --([UserMessage].[Date] >= @soMonth AND [UserMessage].[Date] <= @eoMonth) AND 
    ([Role].[Code] = @requestRoleCode OR @requestRoleCode IS NULL) 

   ORDER BY [UserMessage].[Date] DESC

   /**/

   /* 3. Вспомогательная таблица с расшифровками столбцов */
  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType]; 
  
  INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES  
  	('MainData', 'RoleCode', 'Роль', 1, 1)
  	,('MainData', 'UserName', 'Пользователь', 1, 2)
  	,('MainData', 'Date', 'Дата', 1, 3)
  	,('MainData', 'Text', 'Сообщение', 1, 4)
   
  /**/

   RETURN 0;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[UserMessage]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[UserMessage].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[RoleId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[UserMessage].[Date]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[UserMessage].[Id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetGridHyperlink]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[Role].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserMessages].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetUserMessages].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetUserMessages].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetUserMessages].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetUserMessages].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="303" />
				<Property Name="Length" Value="2856" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2015-02-18&#xD;&#xA;-- Description: Выборка из таблицы сообщений&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetUserMessages]  &#xD;&#xA;  @userName NVARCHAR(32)  &#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
    SET NOCOUNT ON;
	SET XACT_ABORT ON;
	
	BEGIN TRY
	
	/* все выборки в составе хранимой процедуры имеют статус "грязных" */
      SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;

      BEGIN TRANSACTION;
	  
	  DECLARE @measurementDeviceId INT = 
      (
        SELECT TOP(1) [Channel].[MeasurementDeviceId] 
        FROM [Business].[Channel] [Channel] WITH (NOLOCK)
        WHERE [Channel].[Id] = @channelId 
      );

	  DECLARE @deviceId INT =
	  (
	    SELECT TOP(1) [MeasurementDevice].[DeviceId]
		FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
		WHERE [MeasurementDevice].[Id] = @measurementDeviceId
	  );
	  
	  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
      DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

      INSERT INTO @resultSetName VALUES
         (1, 'ReportParameter'),
         (2, 'MainData'),
		 (3, 'ColumnCaption') -- набор с необязательной расшифровкой имен столбцов наборов
      
	  SELECT [ResultSetName].[Order], [ResultSetName].[Name]  FROM @resultSetName [ResultSetName]

	  /* 2. Проверка соотвествия принадлежность прибора пользователю */
      DECLARE @userId  INT;    
      DECLARE @roleCode NVARCHAR(64);

      EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

     -- если пользователю не принадлежит прибор 
     IF(NOT EXISTS(SELECT 1 FROM [Business].[UserLinkChannel] [Link] WITH(NOLOCK) WHERE [Link].[UserId] = @userId AND [Link].[ChannelId] = @channelId))
     BEGIN    
        DECLARE @errorPermissionMsg  NVARCHAR(2048) 
         = [Programmability].[GetSysMessage](297, 1033);
        -- то возбуждаем исключение с сообщением 297                 
        THROW 500001, @errorPermissionMsg, 1;
     END;

	 /* 3. Формирование таблицы параметрии отчета*/
      DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 
   
      INSERT INTO @reportParameter
         SELECT [Name], [Value]
         FROM
		      (SELECT  
			   CAST([D].[Code] AS NVARCHAR(128)) [DeviceCode],           
               CAST([Z].[Description] AS NVARCHAR(128)) [District],
               CAST([B].[FullAddress] AS NVARCHAR(128)) [FullAddress],
               CONVERT(NVARCHAR(128), [Md].[FactoryNumber], 0) [FactoryNumber]

		      FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)
			      INNER JOIN [Dictionaries].[Device] [D] 
              ON [D].[Id] = [Md].[DeviceId]
			      
            INNER JOIN [Business].[AccessPoint] [Ap] WITH (NOLOCK)
              ON [Ap].[Id] = [Md].[AccessPointId]
			      
            INNER JOIN [Business].[AccessPointLinkBuilding] [ApBL] WITH (NOLOCK)  
              ON [ApBL].[AccessPointId] = [Ap].[Id]
			      
            INNER JOIN [Business].[Building] [B] WITH (NOLOCK)
              ON [B].[Id] = [ApBL].[BuildingId]
			      
            INNER JOIN [Dictionaries].[District] [Z] WITH (NOLOCK)
              ON [Z].[Id] = [B].[DistrictId] 
            
            INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
              ON [Channel].[MeasurementDeviceId] = [Md].[Id] AND [Channel].[Id] = @channelId --!IMPORTANT

		      WHERE [Md].[Id] = @measurementDeviceId) [MeasurementDeviceInfo]
         UNPIVOT 
         (  
            [Value] FOR [Name] IN 
            (
			  [DeviceCode],
              [District], 
              [FullAddress], 
              [FactoryNumber]
            ) 
         ) [ReportParameter];
      
	  DECLARE @reportTitle NVARCHAR(48) = N'Неизвестный тип журнала';
	  DECLARE @internalDeviceEventStartIndex INT = -1;
	  DECLARE @internalDeviceEventEndIndex INT = -1;

	  IF @asyncArchiveTypeId = 0
	  BEGIN
	      SET @reportTitle = N'Журнал нештатных ситуаций';
		  SET @internalDeviceEventStartIndex = 3000;
		  SET @internalDeviceEventEndIndex = 3030;
	  END
	  IF @asyncArchiveTypeId = 1
	  BEGIN
	      SET @reportTitle = N'Журнал отказов';
		  SET @internalDeviceEventStartIndex = 3031;
		  SET @internalDeviceEventEndIndex = 3035;
	  END
	  IF @asyncArchiveTypeId = 2
	  BEGIN
	      SET @reportTitle = N'Журнал режимов (электронная пломба)';
		  SET @internalDeviceEventStartIndex = 3036;
		  SET @internalDeviceEventEndIndex = 3040;
      END

	  -- для Взлет-26М делаем смещение +1000
	  IF @deviceId = 21
	  BEGIN
	      SET @internalDeviceEventStartIndex = @internalDeviceEventStartIndex + 1000;
		  SET @internalDeviceEventEndIndex = @internalDeviceEventEndIndex + 1000;
	  END

      INSERT INTO @reportParameter ([Name],[Value])
	  VALUES ('ReportTitle', @reportTitle);
         
      SELECT 
         [ReportParameter].[Name], 
         [ReportParameter].[Value] 
      FROM @reportParameter [ReportParameter];

	  /* 4. Основная выборка */

	  SELECT [MainData].[Time] [Time],
	         [MainData].[Description] [Event],
			 [MainData].[OriginalValue] [OriginalValue],
			 [MainData].[CurrentValue] [CurrentValue]	  
	  FROM [Business].[MeasurementDeviceJournal] [MainData] WITH (NOLOCK)
	         WHERE [MeasurementDeviceId] = @measurementDeviceId AND 
			       [InternalDeviceEventId] >= @internalDeviceEventStartIndex AND
				   [InternalDeviceEventId] <= @internalDeviceEventEndIndex
      ORDER BY [Time] ASC

	  /* 5. Вспомогательная таблица с расшифровками столбцов */
	  DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];
 
	  INSERT INTO @columnCaption 
      OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
      VALUES
        ('MainData', 'Time', 'Время', 1, 1),
		('MainData', 'Event', 'Параметр/Событие', 1, 2),
		('MainData', 'OriginalValue', 'Старое значение', 1, 3),
		('MainData', 'CurrentValue', 'Новое значение', 1, 4)
      /**/

	  COMMIT TRANSACTION;

	  END TRY

  /* Логирование ошибки хранимой процедуры */
  BEGIN CATCH
    DECLARE @lineFeed CHAR(1) = CHAR(13);

       DECLARE @parameterListTrace NVARCHAR(256) = 
             CONCAT
             (  
                '@userName: ' ,            @userName, @lineFeed, 
                '@measurementDeviceId: ',  @measurementDeviceId, @lineFeed, 
                '@channelId: ',            @channelId, @lineFeed, 
                '@asyncArchiveTypeId: ',   @asyncArchiveTypeId, @lineFeed                        
             );

      DECLARE @errorMessage NVARCHAR(MAX) = 
         CONCAT
         (
            'ErrorNumber: ',     ERROR_NUMBER(), @lineFeed,
            'ErrorSeverity: ',   ERROR_SEVERITY(), @lineFeed,
            'ErrorState: ' ,     ERROR_STATE(), @lineFeed,
            'ErrorProcedure: ',  ERROR_PROCEDURE(), @lineFeed,
            'ErrorLine: ',       ERROR_LINE(), @lineFeed,
            'ErrorMessage: ',    ERROR_MESSAGE()
         );

      INSERT INTO [Admin].[ErrorLogEntry] 
         (
            [Time], 
            [Exception], 
            [Message], 
            [UserName],
            [StackTrace]
         )
      VALUES
         (
            GETDATE(), 
            'InternalSqlServerException', 
            @errorMessage, 
            SUSER_NAME(),
           @parameterListTrace
         );
      -- пробрасываем исключение на верх
      THROW;    
  END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[char]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@asyncArchiveTypeId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device].[Code]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[PV1].[ReportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[PV1].[ReportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[OriginalValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[CurrentValue]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDeviceJournal].[InternalDeviceEventId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Exception]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[Message]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[ErrorLogEntry].[StackTrace]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[PV1].[ReportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[PV1].[ReportParameter].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[PV1].[ReportParameter].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[GetVzljot26MeasurementDeviceJournal].[@asyncArchiveTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="350" />
				<Property Name="Length" Value="7833" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author: Maxim Okulin&#xD;&#xA;-- Create date: 12 July 2016&#xD;&#xA;-- Description: Возвращает набор данных для отчета &quot;Журналы прибора Взлет-026(М)&quot;&#xD;&#xA;-- ====================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[GetVzljot26MeasurementDeviceJournal]&#xD;&#xA;&#x9;@userName NVARCHAR(32),&#xD;&#xA;&#x9;@channelId INT,&#xD;&#xA;&#x9;@asyncArchiveTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[MeasurementDeviceArchiveData]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET DATEFORMAT dmy;
	SET LANGUAGE N'русский';
  SET NOCOUNT ON;
	
	SET @periodTypeId = IIF(@periodTypeId = 0, NULL, @periodTypeId);
	
   -- получаем идентификатор пользователя по его уникальному имени
	DECLARE @userId  INT;    
  DECLARE @roleCode NVARCHAR(64);

   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;

   -- если пользователю не принадлежит прибор 
     IF(NOT EXISTS(SELECT 1 FROM [Business].[UserLinkChannel] [Link] WITH(NOLOCK) WHERE [Link].[UserId] = @userId AND [Link].[ChannelId] = @channelId))
     BEGIN    
        DECLARE @errorPermissionMsg  NVARCHAR(2048) 
         = [Programmability].[GetSysMessage](297, 1033);
        -- то возбуждаем исключение с сообщением 297                 
        THROW 500001, @errorPermissionMsg, 1;
     END;

   -- проверка существования шаблона канала
     IF(NOT EXISTS (SELECT 1 FROM [Business].[Channel] [Channel] 
          INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK) ON [Channel].[ChannelTemplateId] = [ChannelTemplate].[Id]
        WHERE [Channel].[Id] = @channelId)
     )
     BEGIN
      ;THROW 500001, N'Не назначен шаблон канала', 1;
     END;

   /* 1. Формирование имен резалтсетов для отчета*/
   DECLARE @resultSetName [Programmability].[ResultSetNameTableType];
   INSERT INTO @resultSetName VALUES 
       (1, 'MainData')
      ,(2, 'ColumnCaption');
   
   SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	   FROM @resultSetName [ResultSetName]

   
   /**/
   
   -- получаем идентификатор измерительного прибора
   DECLARE @measurementDeviceId INT = 
     (SELECT [MeasurementDeviceId] FROM [Business].[Channel] [Channel] WITH (NOLOCK) WHERE [Channel].[Id] = @channelId)

   -- получаем идентификатор шаблона
   DECLARE @channelTemplateId INT =
     (SELECT [ChannelTemplateId] FROM [Business].[Channel] [Channel] WITH (NOLOCK) WHERE [Channel].[Id] = @channelId)


   /* 2. Основная выборка данных */  
	SELECT
		[Archive].[Id] [ArchiveId], 
		[PeriodType].[Description] [PeriodTypeDescription], 		
		[DeviceParameter].[Description] [DeviceParameterDescription], 
		[Archive].[Value] [ArchiveValue],
		[Archive].[Time] [ArchiveTime]
		
	FROM [Business].[Archive] [Archive] WITH(NOLOCK)
				
		INNER JOIN [Business].[MeasurementDevice] [Device] WITH(NOLOCK)
         ON [Device].[Id] = [Archive].[MeasurementDeviceId] 

    INNER JOIN [Business].[Channel] [Channel]  WITH(NOLOCK)
        ON [Channel].[Id] = @channelId AND [Device].[Id] = [Channel].[MeasurementDeviceId]

		INNER JOIN [Business].[UserLinkChannel] [UserLink] WITH(NOLOCK)
         ON [Channel].[Id] = [UserLink].[ChannelId] AND [UserLink].[UserId] = @userId

		INNER JOIN [Dictionaries].[PeriodType] [PeriodType] WITH(NOLOCK)
         ON [Archive].[PeriodTypeId] = [PeriodType].[Id]

		INNER JOIN [Dictionaries].[DeviceParameter] [DeviceParameter] WITH(NOLOCK)
         ON [Archive].[DeviceParameterId] = [DeviceParameter].[Id]
				
	WHERE	[Device].[Id] = @measurementDeviceId 
			AND ([Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEnd)					
			AND ([Archive].PeriodTypeId = @periodTypeId OR @periodTypeId IS NULL)
			--отбираем только те девайсовые параметры, которые есть в шаблоне канала
			AND [Archive].[DeviceParameterId] IN 
      (
        SELECT [DeviceParameterId] 
        FROM [Business].[ParameterMapDeviceParameter] [PMDP] WITH (NOLOCK)
				WHERE ([PMDP].[ChannelTemplateId] = @channelTemplateId AND ([PMDP].[PeriodTypeId] = @periodTypeId OR @periodTypeId IS NULL))
      )

   ORDER BY [Archive].[Time] DESC OFFSET 0 ROWS FETCH NEXT 5000 ROWS ONLY;

	/* 3. Вспомогательная таблица с расшифровками столбцов */
   DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

   INSERT INTO @columnCaption 
   OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
   VALUES
      ('MainData', 'ArchiveId', 'Ид', 1, 1)
	   ,('MainData', 'PeriodTypeDescription', 'Период', 1, 2)
	   ,('MainData',  'DeviceParameterDescription', 'Параметр прибора', 1, 3)	   
	   ,('MainData', 'ArchiveValue', 'Значение', 1, 4) 
	   ,('MainData', 'ArchiveTime', 'Время', 1, 5) 	   

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetSysMessage]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@channelId]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@periodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceArchiveData].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceArchiveData].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceArchiveData].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceArchiveData].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceArchiveData].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceArchiveData].[@channelId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceArchiveData].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="314" />
				<Property Name="Length" Value="4765" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2014-10-28&#xD;&#xA;-- Description: Возвращает архивные данные устройства&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[MeasurementDeviceArchiveData]&#xD;&#xA;&#x9;@userName NVARCHAR(32),&#xD;&#xA;&#x9;@periodBegin DATETIME,&#xD;&#xA;    @periodEnd DATETIME,&#xD;&#xA;&#x9;@channelId INT,&#xD;&#xA;&#x9;@periodTypeId INT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET DATEFORMAT dmy;
  SET LANGUAGE N'русский';
  SET NOCOUNT ON;
  
  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName VALUES
	(1, 'MainData'),		-- стандартное имя набора для отображения в решетке
	(2, 'ColumnCaption');	-- набор с необязательной расшифровкой расшифровка имен столбцов наборов

  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]
  /**/
  
  /* 2. Формирование основной выборки*/
 
    
  DECLARE @userId  INT;    
  DECLARE @roleCode NVARCHAR(64);

  EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;
    
  SELECT 
     [MeasurementDeviceList].[Id]
    ,[MeasurementDeviceList].[MeasurementDeviceDescription]
    ,[MeasurementDeviceList].[StatusBar]    
    ,[MeasurementDeviceList].[SuccessConnectionPercent]
    ,[MeasurementDeviceList].[AccessPointDescription]
    ,[MeasurementDeviceList].[DistrictDescription]
    ,[MeasurementDeviceList].[BuildingDescription]
    ,[MeasurementDeviceList].[ResourceSystemTypeDescription]    
    ,[MeasurementDeviceList].[ChannelId]  -- first ChannelId  

  FROM
  (
	SELECT 			
      ROW_NUMBER() OVER(PARTITION BY [Device].[Id] ORDER BY [Device].[Id]) [Num],
      [Device].[Id] [Id],                     
      ISNULL([SCLog].[HtmlTable], '<p style=''color: gray''>Нет данных для отображения</p>') [StatusBar],
      [Device].[SuccessConnectionPercent] [SuccessConnectionPercent],
		  [District].[Description] [DistrictDescription],
      [Build].[Description] [BuildingDescription],
      [Rst].[Description] [ResourceSystemTypeDescription],
      [AccessPoint].[Description] [AccessPointDescription],
		  [Device].[Description] [MeasurementDeviceDescription],
      [Channel].[Id] [ChannelId]

	FROM [Business].[MeasurementDevice] [Device] WITH (NOLOCK)
		
    INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK) 
         ON [Channel].[MeasurementDeviceId] = [Device].[Id]

    INNER JOIN [Business].[UserLinkChannel] [Link]  WITH (NOLOCK)
         ON [Link].[UserId] = @userId AND [Link].[ChannelId] = [Channel].[Id]
    
    INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH (NOLOCK)
         ON [AccessPoint].[Id] = [Device].[AccessPointId]
        
    INNER JOIN [Dictionaries].[ResourceSystemType] [Rst] WITH (NOLOCK) 
         ON [Channel].[ResourceSystemTypeId] = [Rst].[Id]
		
    INNER JOIN [Business].[Placement] [Place]  WITH (NOLOCK)
         ON [Place].[Id] = [Channel].[PlacementId]
		
    INNER JOIN [Business].[Building] [Build] WITH (NOLOCK)
         ON [Build].[Id] = [Place].[BuildingId]

	 INNER JOIN [Dictionaries].[District] [District]  WITH (NOLOCK) 
         ON [District].[Id] = [Build].[DistrictId]

    LEFT OUTER JOIN [dbo].GetHtmlStatusConnectionBar(NULL, 'MeasurementDevice') [SCLog]
      ON [SCLog].[EntityId] = [Device].[Id]
      
	) [MeasurementDeviceList] WHERE [MeasurementDeviceList].[Num] = 1;

   
	/* 3. Вспомогательная таблица с расшифровками столбцов */
	DECLARE @columnCaption [Programmability].[ColumnCaptionTableType];

	INSERT INTO @columnCaption 
  OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
  VALUES
		  ('MainData', 'Id', 'Ид', 1, 1)
      ,('MainData', 'MeasurementDeviceDescription', 'Прибор', 1, 2)
      ,('MainData', 'StatusBar', 'Статус', 1, 3)
      ,('MainData', 'SuccessConnectionPercent', 'Процент успешных соединений', 1, 4)
      ,('MainData', 'AccessPointDescription', 'Точка доступа', 1, 5)
		  ,('MainData', 'DistrictDescription', 'Район', 1, 6)
		  ,('MainData', 'BuildingDescription', 'Строение', 1, 7)
      ,('MainData', 'ResourceSystemTypeDescription', 'Тип ресурса', 1, 8)
      ,('MainData', 'ChannelId', 'Ид. канала', 0, 9); -- первого канала
			
	/**/
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar].[EntityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[dbo].[GetHtmlStatusConnectionBar].[HtmlTable]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[SuccessConnectionPercent]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Order]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceCustomInfoListForOperAdmin].[@userName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="408" />
				<Property Name="Length" Value="4487" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2014-10-24&#xD;&#xA;-- Description: Возвращает список связанных диспетчеризируемых устройств оператором в роли OPERADMIN&#xD;&#xA;-- Запрос: &quot;Список диспетчеризируемых приборов&quot;&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[MeasurementDeviceCustomInfoListForOperAdmin]&#xD;&#xA;&#x9;@userName NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[Programmability].[MeasurementDeviceListForOperAdmin]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
  SET DATEFORMAT dmy;
  SET LANGUAGE N'русский';
  SET NOCOUNT ON;

  DECLARE @empty NCHAR(1) = '';
  
  DECLARE @userId  INT;    
   DECLARE @roleCode NVARCHAR(64);

   EXEC [Programmability].[GetUserInfo] @userName, @userId OUT, @roleCode OUT;   

  /* 1. Формирование таблицы с именами результирующих наборов возвращаемых их ХП */
	DECLARE @resultSetName [Programmability].[ResultSetNameTableType];

  INSERT INTO @resultSetName VALUES
	 (1, 'ReportParameter')		-- стандартное имя набора для отображения в решетке
   ,(2, 'MainData')
	 ,(3, 'ColumnCaption');	  -- набор с необязательной расшифровкой расшифровка имен столбцов наборов

  SELECT [ResultSetName].[Order], [ResultSetName].[Name]
	FROM @resultSetName [ResultSetName]
  /**/

  /* 2. Дополнительные параметры для отчета */
  
  DECLARE @reportParameter [Programmability].[CustomParameterTableType]; 

   INSERT INTO @reportParameter
    OUTPUT inserted.[Name], inserted.[Value]
    SELECT [Name], [Value] FROM 
    (
        SELECT [Name], [Value] 
        FROM (
            SELECT 
              CAST([User].[UserName] AS NVARCHAR(128)) [UserName]
              ,CAST(ISNULL([UserInfo].[FirstName], @empty) AS NVARCHAR(128)) [FirstName]
              ,CAST(ISNULL([UserInfo].[LastName], @empty) AS NVARCHAR(128)) [LastName]
              ,CAST(ISNULL([UserInfo].[Description], @empty) AS NVARCHAR(128)) [UserInfoDescription]

            FROM [Admin].[User] [User] WITH (NOLOCK) 
            LEFT OUTER JOIN [Business].[UserAdditionalInfo] [UserInfo] WITH (NOLOCK) 
              ON [User].[Id] = [UserInfo].[Id]
            WHERE [User].[UserName] = @userName)
          [A]
          UNPIVOT
          (
            [Value] FOR [Name] IN 
            (
              [UserName], 
              [FirstName], 
              [LastName],
              [UserInfoDescription] 
            )
          ) [B]   
    ) [C];
   
   /**/
    
   /* 2. Основная выборка */
  
  SELECT 
    [MeasurementDeviceDeviceId],
    [MeasurementDeviceDescription],
    [BuildingDescription],
    [DistrictId],
    [DistrictDescription],
    [CityDescription],
    [AccessPointDescription]
  FROM
  (
     SELECT 
          ROW_NUMBER() OVER(PARTITION BY [Md].[Id] ORDER BY [Md].[Id]) [Num],
			   [Md].[Id] [MeasurementDeviceDeviceId]
			  ,[Md].[Description] [MeasurementDeviceDescription]
			  ,[Building].[Description] [BuildingDescription]
        ,[District].[Id] [DistrictId]
        ,[City].[Description] [CityDescription]
        ,[District].[Description] [DistrictDescription]
        ,[AccessPoint].[Description] [AccessPointDescription]
	   FROM [Business].[MeasurementDevice] [Md] WITH (NOLOCK)

		  INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
            ON [Channel].[MeasurementDeviceId] = [Md].[Id]

      INNER JOIN [Programmability].[GetUserLinkChannel] (@userName) [UserLink]
            ON [UserLink].[ChannelId] = [Channel].[Id] AND 
            ((ISNULL([UserLink].[UserId], 0) = @userId) OR (@roleCode = N'ADMIN'))	

      INNER JOIN [Business].[AccessPoint] [AccessPoint] WITH (NOLOCK)
        ON [AccessPoint].[Id] = [Md].[AccessPointId]
   
      INNER JOIN [Business].[AccessPointLinkBuilding] [AccessPointLink]  WITH (NOLOCK)
        ON [AccessPointLink].[AccessPointId] = [AccessPoint].[Id]
       
      INNER JOIN [Business].[Building] [Building] WITH (NOLOCK)
        ON [Building].[Id] = [AccessPointLink].[BuildingId]
    
      INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK)
        ON [Placement].[BuildingId] = [Building].[Id]
   
      INNER JOIN [Dictionaries].[District] [District] WITH (NOLOCK)
        ON [District].[Id] = [Building].[DistrictId]

      INNER JOIN [Dictionaries].[City] [City] WITH (NOLOCK)
        ON [City].[Id] = [District].[CityId]

   ) [Md]
   
   WHERE [Md].[Num] = 1

   ORDER BY [Md].[DistrictDescription] ASC

   /**/

   /* 3. Вспомогательная таблица с расшифровками столбцов */
   DECLARE @columnCaption [Programmability].[ColumnCaptionTableType] ;

   INSERT INTO @columnCaption 
   OUTPUT inserted.[Table], inserted.[Name], inserted.[Caption], inserted.[Visible], inserted.[Order]
   VALUES
      ('MainData', 'CityDescription', 'Город', 0, 1)
      ,('MainData', 'DistrictDescription', 'Район', 1, 1)
	   ,('MainData', 'MeasurementDeviceDeviceId', 'Ид', 1, 2)
	   ,('MainData',  'MeasurementDeviceDescription', 'Прибор', 1, 3)
	   ,('MainData',  'AccessPointDescription', 'Точка доступа', 1, 4)
	   ,('MainData', 'BuildingDescription', 'Объект учета', 1, 5) ;

   SELECT [ColumnCaption].[Name], [ColumnCaption].[Caption]  FROM @columnCaption [ColumnCaption];

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ResultSetNameTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[CustomParameterTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[ColumnCaptionTableType]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserInfo]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@resultSetName].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@resultSetName].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Id]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[FirstName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[LastName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserAdditionalInfo].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@reportParameter].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@reportParameter].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[GetUserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[CityId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[District].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[City].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Table]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Caption]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Visible]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Order]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Name]" />
				</Entry>
				<Entry>
					<References Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Caption]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Value]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[PV1].[B].[Name]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@resultSetName]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@resultSetName].[Order]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@resultSetName].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@reportParameter]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@reportParameter].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@reportParameter].[Value]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="128" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Table]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Name]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Caption]">
									<Property Name="IsNullable" Value="False" />
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Property Name="Length" Value="64" />
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[nvarchar]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Visible]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[bit]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlSimpleColumn" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@columnCaption].[Order]">
									<Relationship Name="TypeSpecifier">
										<Entry>
											<Element Type="SqlTypeSpecifier">
												<Relationship Name="Type">
													<Entry>
														<References ExternalSource="BuiltIns" Name="[int]" />
													</Entry>
												</Relationship>
											</Element>
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[Programmability].[MeasurementDeviceListForOperAdmin].[@userName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="407" />
				<Property Name="Length" Value="5259" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2014-10-24&#xD;&#xA;-- Description: Возвращает список связанных диспетчеризируемых устройств оператором в роли OPERADMIN&#xD;&#xA;-- ОТЧЕТ: &quot;Список диспетчеризируемых приборов&quot;&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE [Programmability].[MeasurementDeviceListForOperAdmin]&#xD;&#xA;&#x9;@userName NVARCHAR(32) = NULL&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlView" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView]">
			<Property Name="IsSchemaBound" Value="True" />
			<Property Name="QueryScript">
				<Value><![CDATA[ 

SELECT
  [DefaultMeasurementUnit].[PhysicalParameterId], 
  [Dimension].[Value] [DimensionValue2],
  [Dimension].[Prefix] [DimensionPrefix2],
  [DefaultMeasurementUnit].[MeasurementUnitId] [PreferenceMeasurementUnitId],              
  [MeasurementUnitConverter].[MeasurementUnit1Id], 
  [MeasurementUnitConverter].[MeasurementUnit2Id],        
  [MeasurementUnit].[Description] [MeasurementUnitDescription2],
  [MeasurementUnitConverter].[Expression] [Expression]

FROM [Rules].[MeasurementUnitConverter] [MeasurementUnitConverter] 
              
INNER JOIN [Rules].[DefaultMeasurementUnit] [DefaultMeasurementUnit] 
    -- по физ вечичине
  ON [MeasurementUnitConverter].[PhysicalParameterId] = [DefaultMeasurementUnit].[PhysicalParameterId] AND 
    -- есть правило с предпочитаемой выходная единица измерения
    [MeasurementUnitConverter].[MeasurementUnit2Id] = [DefaultMeasurementUnit].[MeasurementUnitId]

INNER JOIN [Dictionaries].[Dimension] [Dimension]
    ON [Dimension].[Id] = [DefaultMeasurementUnit].[DimensionId]

INNER JOIN [Dictionaries].[MeasurementUnit] [MeasurementUnit] 
  ON [MeasurementUnit].[Id] = [MeasurementUnitConverter].[MeasurementUnit2Id]]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[PhysicalParameterId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionValue2]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Dimension].[Value]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[DimensionPrefix2]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[Dimension].[Prefix]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[PreferenceMeasurementUnitId]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnit1Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnit2Id]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[MeasurementUnitDescription2]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlComputedColumn" Name="[Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView].[Expression]">
						<Relationship Name="ExpressionDependencies">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[Expression]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="QueryDependencies">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Prefix]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[Expression]" />
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="375" />
				<Property Name="Length" Value="1682" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ===================================================================================================&#xD;&#xA;-- Author:  &#x9;  Leo&#xD;&#xA;-- Create date: 2014-11-30&#xD;&#xA;-- Description: Отбираем из конвертора записи, для которых есть выходная единица измерения из списка предпочитаемых&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE VIEW [Programmability].[MeasurementUnitConverterWithDefaultMeasurementUnitView]&#xD;&#xA;WITH SCHEMABINDING&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTableType" Name="[Programmability].[PreferenceMeasurementUnitTableType]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[PreferenceMeasurementUnitTableType].[Id]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="731" />
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[PreferenceMeasurementUnitTableType].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[PreferenceMeasurementUnitTableType].[DimensionId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[PreferenceMeasurementUnitTableType].[MeasurementUnitId]">
						<Property Name="IsNullable" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Constraints">
				<Entry>
					<Element Type="SqlTableTypePrimaryKeyConstraint">
						<Property Name="IsClustered" Value="True" />
						<Relationship Name="ColumnSpecifications">
							<Entry>
								<Element Type="SqlTableTypeIndexedColumnSpecification">
									<Relationship Name="Column">
										<Entry>
											<References Name="[Programmability].[PreferenceMeasurementUnitTableType].[Id]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<AttachedAnnotation Disambiguator="731" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTableType" Name="[Programmability].[ResultSetNameTableType]">
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ResultSetNameTableType].[Order]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlTableTypeSimpleColumn" Name="[Programmability].[ResultSetNameTableType].[Name]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Constraints">
				<Entry>
					<Element Type="SqlTableTypePrimaryKeyConstraint">
						<Property Name="IsClustered" Value="True" />
						<Relationship Name="ColumnSpecifications">
							<Entry>
								<Element Type="SqlTableTypeIndexedColumnSpecification">
									<Relationship Name="Column">
										<Entry>
											<References Name="[Programmability].[ResultSetNameTableType].[Order]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="732" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Programmability]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="732" />
		</Element>
		<Element Type="SqlSchema" Name="[Rules]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[Rules].[CHK_Rules_MeasurementUnitConverter_PhysicalParameter]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[Programmability].[CheckMeasurementUnitConverter](PhysicalParameterId, MeasurementUnit1Id, MeasurementUnit2Id) = 1]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[Programmability].[CheckMeasurementUnitConverter]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="733" />
		</Element>
		<Element Type="SqlTable" Name="[Rules].[DefaultMeasurementUnit]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[Code]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[DimensionId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
						<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="734" />
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Rules]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="735" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="736" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="737" />
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[DefaultMeasurementUnit].[IX_Rules_DefaultMeasurementUnit_Id]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DefaultMeasurementUnit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IncludedColumns">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[Rules].[DeviceArchiveTimeConverter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DeviceArchiveTimeConverter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DeviceArchiveTimeConverter].[Expression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[DeviceArchiveTimeConverter].[Interval]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Rules]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="738" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="739" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="740" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="741" />
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[DeviceArchiveTimeConverter].[IX_Rules_DeviceArchiveTimeConverter_DeviceId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[DeviceArchiveTimeConverter].[IX_Rules_DeviceArchiveTimeConverter_PeriodTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_DefaultMeasurementUnit_DimentionId_Dictionaries_Dimension_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[DimensionId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Dimension].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="737" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_DefaultMeasurementUnit_MeasurementUnitId_Dictionaries_MeasurementUnit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[MeasurementUnitId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="736" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_DefaultMeasurementUnit_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="735" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_DeviceArchiveTimeConverter_DeviceId_Dictionaries_Device_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[Device].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="739" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_DeviceArchiveTimeConverter_PeriodTypeId_Dictionaries_PeriodType_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PeriodType].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="740" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit1Id_Dictionaries_MeasurementUnit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="742" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_MeasurementUnitConverter_MeasurementUnit2Id_Dictionaries_MeasurementUnit_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="743" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[Rules].[FK_Rules_MeasurementUnitConverter_PhysicalParameterId_Dictionaries_PhysicalParameter_Id]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="744" />
		</Element>
		<Element Type="SqlTable" Name="[Rules].[MeasurementUnitConverter]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[Rules].[MeasurementUnitConverter].[Expression]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[Rules]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="745" />
			<AttachedAnnotation Disambiguator="744" />
			<AttachedAnnotation Disambiguator="742" />
			<AttachedAnnotation Disambiguator="743" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="746" />
			<AttachedAnnotation Disambiguator="733" />
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[MeasurementUnitConverter].[IX_Rules_MeasurementUnitConverter_MeasurementUnit1Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[MeasurementUnitConverter].[IX_Rules_MeasurementUnitConverter_MeasurementUnit2Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[Rules].[MeasurementUnitConverter].[IX_Rules_MeasurementUnitConverter_PhysicalParameterId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Rules].[PK_Rules_DefaultMeasurementUnit_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DefaultMeasurementUnit].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DefaultMeasurementUnit]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="734" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Rules].[PK_Rules_DeviceArchiveConverter]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DeviceArchiveTimeConverter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="738" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[Rules].[PK_Rules_MeasurementUnitConverter_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="745" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Rules].[UQ_Rules_DeviceArchiveTimeConverter_DeviceId_PeriodTypeId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DeviceArchiveTimeConverter].[DeviceId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[DeviceArchiveTimeConverter].[PeriodTypeId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[DeviceArchiveTimeConverter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="741" />
		</Element>
		<Element Type="SqlUniqueConstraint" Name="[Rules].[UQ_Rules_MeasurementUnitConverter_PhysicalParameterId_MeasurementUnit1Id_MeasurementUnit2Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[PhysicalParameterId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit1Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[Rules].[MeasurementUnitConverter].[MeasurementUnit2Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[Rules].[MeasurementUnitConverter]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="746" />
		</Element>
		<Element Type="SqlSchema" Name="[Temp]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[WebApi]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[WebApi].[ActionRequestStatisticItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[ArchiveDownloaderId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[ActionName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[Time]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[DataSize]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[ActionRequestStatisticInfo]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ActionRequestStatisticItem].[Uid]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="747" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="748" />
		</Element>
		<Element Type="SqlIndex" Name="[WebApi].[ActionRequestStatisticItem].[IX_WebApi_ActionRequestStatisticItem_ArchiveDownloader_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[WebApi].[ActionRequestStatisticItem].[ArchiveDownloaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[WebApi].[ActionRequestStatisticItem]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[WebApi].[ArchiveDownloader]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[OrganizationId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[UpdatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[CreatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloader].[UpdatedDate]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="749" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="750" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="751" />
		</Element>
		<Element Type="SqlTable" Name="[WebApi].[ArchiveDownloaderLinkScheduleItem]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ArchiveDownloaderId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ScheduleItemId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="752" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="753" />
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="754" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[WebApi].[FK_WebApi_ActionRequestStatisticItem_ArchiveDownloaderId_WebApi_ArchiveDownloader_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[WebApi].[ActionRequestStatisticItem].[ArchiveDownloaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ActionRequestStatisticItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="748" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[WebApi].[FK_WebApi_ArchiveDownloader_Id_Admin_User_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="750" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[WebApi].[FK_WebApi_ArchiveDownloader_OrganizationId]">
			<Property Name="OnDeleteAction" Value="2" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[OrganizationId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Business].[Organization].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Business].[Organization]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="751" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[WebApi].[FK_WebApi_ArchiveDownloaderLinkScheduleItem_ArchiveDownloaderId_WebApi_ArchiveDownloader_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ArchiveDownloaderId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="753" />
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[WebApi].[FK_WebApi_ArchiveDownloaderLinkScheduleItem_ScheduleItemId_Core_ScheduleItem_Id]">
			<Property Name="OnDeleteAction" Value="1" />
			<Relationship Name="Columns">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ScheduleItemId]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="754" />
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetDictionary]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   DECLARE @dateTime DATETIME = GETDATE();
   DECLARE @uid UNIQUEIDENTIFIER = NEWID();
   DECLARE @methodName VARCHAR(64) = 'Dictionary';
   DECLARE @error NVARCHAR(128); 
   
   SET @actionUid = @uid;

   DECLARE @query NVARCHAR(MAX) = 

    'SELECT  @dateTime [DateTime], @uid [Uid], @methodName [MethodName],
    (
	    SELECT (
	    SELECT @name AS ''@name'',
	    (   
		    SELECT [Id], [Code], [Description] FROM [Dictionaries].[' + @name +'] [' + @name + '] WITH(NOLOCK)
		    FOR XML AUTO, ELEMENTS, TYPE		    	 	 	
	    ) FOR XML PATH(''Dictionary''), ELEMENTS, TYPE
	    ) FOR XML PATH(''Dictionaries''), ELEMENTS, TYPE
    ) FOR XML PATH(''Package'')';

   BEGIN TRY	
	   
     EXEC [sys].[sp_executesql] @query, 
      N'@dateTime DATETIME, @uid UNIQUEIDENTIFIER, @name VARCHAR(128), @methodName  VARCHAR(64)',  
      @dateTime = @dateTime, 
      @uid = @uid,
      @name = @name, 
      @methodName = @methodName;

   END TRY
   BEGIN CATCH
	   SET @error = 'Внутренняя ошибка выполнения запроса. ' + ERROR_MESSAGE();
      SELECT 
         @dateTime [DateTime], 
         @uid [Uid],
         @methodName [MethodName],      
         @error [Message]             
      FOR XML PATH('Error'), ELEMENTS, TYPE;  
   END CATCH;
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetDictionary].[@name]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetDictionary].[@actionUid]" />
				</Entry>
				<Entry>
					<References ExternalSource="master.dacpac" Name="[master]|[sys].[sp_executesql]" Type="SqlExtendedProcedure" />
				</Entry>
				<Entry />
				<Entry />
				<Entry />
				<Entry />
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetDictionary].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetDictionary].[@name]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetDictionary].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="296" />
				<Property Name="Length" Value="1748" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20141123&#xD;&#xA;-- Description: Конвертор словаря в XML&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE WebApi.GetDictionary &#xD;&#xA;(&#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;&#x9;@name NVARCHAR(128),&#xD;&#xA;  @actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetMeasurementDeviceArchive]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
   SET XACT_ABORT ON;
   
   DECLARE @dateTime DATETIME = GETDATE();
   DECLARE @uid UNIQUEIDENTIFIER = NEWID();  
   DECLARE @methodName VARCHAR(64) = 'MeasurementDeviceArchive';
   DECLARE @error NVARCHAR(256); 
      
   SET @actionUid = @uid;

   BEGIN TRY

     SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
     BEGIN TRANSACTION;             
    
    /* Проверка принадлежности кананала и/или существования устройства */
    IF NOT EXISTS
    (
      -- по ссылкам пользователя на отдельный канал 
      SELECT 1 FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
        INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
          ON [Channel].[Id] = [UserLinkChannel].[ChannelId] 
            AND [Channel].[MeasurementDeviceId] = @measurementDeviceId
        INNER JOIN [Admin].[User] [User] WITH(NOLOCK)
          ON [UserLinkChannel].[UserId] = [User].[Id]
      WHERE [User].[UserName] = @userName

      UNION ALL

      -- по назначеной ресурсоснабжающей организации для канала 
      -- и связи оператора выгрузки с ресурсоснабжающей организацией
      SELECT 1 FROM [WebApi].[ArchiveDownloader] [ArchiveDownloader] WITH(NOLOCK)  
        INNER JOIN [Admin].[User] [User] WITH(NOLOCK)
          ON [User].[Id] = [ArchiveDownloader].[Id]
        INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
          ON [Channel].[OrganizationId] = [ArchiveDownloader].[OrganizationId] 
            AND [Channel].[MeasurementDeviceId] = @measurementDeviceId
      WHERE [User].[UserName] = @userName
    )
    BEGIN
  	    SET @error = N'Нет доступа к устройству или устройство не существует. Обратитесь к администратору системы для определения доступа уровня канала.';
              SELECT
                @dateTime [DateTime], 
                @uid [Uid],
                @methodName [MethodName],      
                @error [Message],
                (
                  SELECT @measurementDeviceId [MeasurementDeviceId]
                  FOR XML PATH('AdditionalInfo'), ELEMENTS, TYPE
                )
                FOR XML PATH('Error'), ELEMENTS;
          IF(@@trancount > 0)
          BEGIN
            COMMIT TRANSACTION;
          END;
          RETURN;     
      END;

     /* Обнуление временной части */
     SET @periodBegin = CAST( CAST( @periodBegin AS DATE ) AS DATETIME);
     SET @periodEnd = CAST( CAST( @periodEnd AS DATE ) AS DATETIME);

     -- включать граничную дату конечную дату архива
     IF(@includePeriodEnd = 1)
     BEGIN
        SET @periodEnd = DATEADD(day, 1, @periodEnd);
     END;
      
     DECLARE @expectedDateInterval INT = DATEDIFF(DAY, @periodBegin, @periodEnd);   
     DECLARE @selectedRowLimitCount INT = 250000;
     DECLARE @selectedDateInterval INT = 0; 

     IF(@channelId != 0)
     BEGIN
      SELECT TOP(1) @measurementDeviceId = [Channel].[MeasurementDeviceId] 
      FROM [Business].[Channel] [Channel] WHERE [Channel].[Id] = @channelId
     END;
        
     IF (@periodTypeId = 1)
     BEGIN
      SET @error = 'Система ограничивает получение мгновенных данных.';

      SELECT 
           @dateTime [DateTime], 
           @uid [Uid],
           @methodName [MethodName],      
           @error [Message],
           (
            SELECT           
              @periodTypeId [PeriodTypeId]          
            FOR XML PATH('AdditionalInfo'), ELEMENTS, TYPE
           )
        FOR XML PATH('Error'), ELEMENTS;

      IF(@@trancount > 0)
      BEGIN
            COMMIT TRANSACTION;
      END;
      RETURN;
     END;
   
     /* Ограничиваем отдачу по запрашиваемому интервалу */

     /* часовые и текущие итоговые за сутки*/
     IF(@periodTypeId = 2 OR @periodTypeId = 5) 
     BEGIN
        SET @selectedDateInterval = 31; --1;
     END
   
     /* суточные за 1 месяц */
     ELSE IF (@periodTypeId = 3)
     BEGIN
        SET @selectedDateInterval = 31;
     END

     /* месячное архивное значение и итоговое значение */
     ELSE IF (@periodTypeId = 4 OR @periodTypeId = 6)
     BEGIN
        SET @selectedDateInterval = 365;
     END;

     IF(@expectedDateInterval > @selectedDateInterval)
     BEGIN 
      SET @error = 'Временной интервал превышает допустимое значение.';
      SELECT 
           @dateTime [DateTime], 
           @uid [Uid],
           @methodName [MethodName],      
           @error [Message],
           (
            SELECT
              @periodBegin [PeriodBegin],
              @periodEnd [PeriodEnd],
              @periodTypeId [PeriodTypeId],
              @expectedDateInterval [ArchiveEntriesDateInterval],
              @selectedDateInterval [ArchiveEntriesLimitDateInterval] 
            FOR XML PATH('AdditionalInfo'), ELEMENTS, TYPE
           )
        FOR XML PATH('Error'), ELEMENTS;

      IF(@@trancount > 0)
      BEGIN
        COMMIT TRANSACTION;
      END;
      RETURN;
     END;

     DECLARE @expectedRowCount BIGINT = 
     (
        SELECT COUNT([Archive].[Id]) [ExpectedRowCount]
           FROM [Business].[Archive] WITH (NOLOCK)         		   
		     INNER JOIN [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK) 
              ON [MeasurementDevice].[Id] = [Archive].[MeasurementDeviceId]	  
		     WHERE 
		        ([Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEnd)		      
		        AND [Archive].PeriodTypeId = @periodTypeId 
              AND [MeasurementDevice].[Id] = @measurementDeviceId 
     );
  
     IF(@expectedRowCount > @selectedRowLimitCount)
     BEGIN
        SET @error = 'Количество выбираемых элементов архива превышает допустимое значение.';
        SELECT 
           @dateTime [DateTime], 
           @uid [Uid],
           @methodName [MethodName],      
           @error [Message],
           (
              SELECT
                @expectedRowCount [ArchiveEntriesTotalCount],
                @selectedRowLimitCount [ArchiveEntriesLimitCount]
              FOR XML PATH('AdditionalInfo'), ELEMENTS, TYPE
           )         
        FOR XML PATH('Error'), ELEMENTS;

        IF(@@trancount > 0)
        BEGIN
          COMMIT TRANSACTION;
        END;
        RETURN;
     END;
 
    SELECT                     
        @dateTime [DateTime],  
        @uid [Uid],
        @methodName [MethodName],      
        -- Business
        (      
          SELECT 
          (
              SELECT 
                [MeasurementDevice].[Id], 
                [MeasurementDevice].[DeviceId],   
                [MeasurementDevice].[FactoryNumber]
                            
		         FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)				
		   
		            WHERE [MeasurementDevice].[Id] = @measurementDeviceId
		         FOR XML PATH('MeasurementDevice'), ELEMENTS, TYPE,  ROOT('MeasurementDevices')

           ), -- MeasurementDevices               
           (     
             SELECT    
                [Archive].[Id]
                ,[Archive].[Time]
                ,[Archive].[DeviceParameterId]
                ,[Archive].[Value]
                ,[Archive].[IsValid] 
              FROM
              (
                SELECT
                  [Archive].[Id]
                 ,[Archive].[Time]
                 ,[Archive].[DeviceParameterId]
                 ,[Archive].[Value]
                 ,[Archive].[IsValid]
                 ,[ParameterMapDeviceParameter].[ChannelTemplateId]
                 ,ROW_NUMBER() OVER
                  (
                    PARTITION BY [Archive].[Id] 
                    ORDER BY [Archive].[Id] 
                  ) [Num] 
                
                FROM [Business].[Archive] [Archive] WITH (NOLOCK)
        
                INNER JOIN [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH(NOLOCK) ON 
                  [Archive].[DeviceParameterId] = [ParameterMapDeviceParameter].[DeviceParameterId] 
                  AND [Archive].[PeriodTypeId] = [ParameterMapDeviceParameter].[PeriodTypeId] 
                  AND [ParameterMapDeviceParameter].[PeriodTypeId] = @periodTypeId
        
                INNER JOIN 
                ( 
                  SELECT [ChannelOuter].[Id], [ChannelOuter].[ChannelTemplateId], [ChannelOuter].[MeasurementDeviceId]
                  FROM
                  (
                      SELECT [Channel].[Id] [Id]
  
                      FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
              
                        INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                          ON [Channel].[Id] = [UserLinkChannel].[ChannelId] 
                            AND [Channel].[MeasurementDeviceId] = @measurementDeviceId
              
                        INNER JOIN [Admin].[User] [User] WITH(NOLOCK)
                          ON [UserLinkChannel].[UserId] = [User].[Id]
              
                      WHERE [User].[UserName] = @userName
              
                      UNION
              
                      SELECT [Channel].[Id] [Id]
              
                      FROM [WebApi].[ArchiveDownloader] [ArchiveDownloader] WITH (NOLOCK)
                
                        INNER JOIN [Admin].[User] [User] WITH (NOLOCK)
                          ON [User].[Id] = [ArchiveDownloader].[Id]
              
                        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
                          ON [Channel].[OrganizationId] = [ArchiveDownloader].[OrganizationId] 
                            AND [Channel].[MeasurementDeviceId] = @measurementDeviceId
              
                      WHERE [User].[UserName] = @userName
                    ) [ChannelInner] INNER JOIN [Business].[Channel] [ChannelOuter] WITH (NOLOCK) ON [ChannelOuter].[Id] = [ChannelInner].[Id]

                ) [Channel] ON [Archive].[MeasurementDeviceId] = [Channel].[MeasurementDeviceId]

                INNER JOIN [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
                  ON [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId] AND [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id] 

              WHERE 
                [Archive].[MeasurementDeviceId] = @measurementDeviceId AND 
                [Archive].PeriodTypeId = @periodTypeId AND 
                ([Archive].[Time] >= @periodBegin AND [Archive].[Time] <= @periodEnd)
              
              ) [Archive] WHERE [Archive].[Num] = 1
		           
		         FOR XML PATH('Archive'), ELEMENTS, TYPE, ROOT('Archives')
           ) -- Archives
                     
           FOR XML PATH('Business'), ELEMENTS, TYPE) -- Business       

      FOR XML PATH('Package'), ELEMENTS;
     
      COMMIT TRANSACTION;
  END TRY
  BEGIN CATCH
      IF (XACT_STATE()) = -1
      BEGIN       
        ROLLBACK TRANSACTION;
      END;
      IF (XACT_STATE()) = 1
      BEGIN      
        COMMIT TRANSACTION;   
      END;

      SET @error = 'Внутренняя ошибка выполнения запроса. ' + ERROR_MESSAGE();
      SELECT 
         @dateTime [DateTime],  
         @uid [Uid],
         @methodName [MethodName],      
         @error [Message]             
      FOR XML PATH('Error'), ELEMENTS, TYPE;        
  END CATCH;
  
  RETURN (0); 
 END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@periodBegin]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@periodEnd]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bigint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@periodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@measurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@actionUid]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[date]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@includePeriodEnd]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceArchive].[@channelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Time]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[Value]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[IsValid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@measurementDeviceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@periodBegin]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@periodEnd]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@includePeriodEnd]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[1]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@periodTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@withDictionaries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@channelId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceArchive].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="325" />
				<Property Name="Length" Value="12224" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 2014-11-21&#xD;&#xA;-- Updated date 2015-09-09&#xD;&#xA;-- Description: Конвертор архива в XML&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE WebApi.GetMeasurementDeviceArchive &#xD;&#xA;(&#xD;&#xA;    @userName NVARCHAR(64),&#xD;&#xA;    @measurementDeviceId INT,&#xD;&#xA;&#x9;  @periodBegin DATETIME,&#x9;&#x9;-- начальная дата архива &#xD;&#xA;&#x9;  @periodEnd DATETIME,&#x9;&#x9;&#x9;-- конечная дата архива &#xD;&#xA;    @includePeriodEnd BIT = 1,  &#xD;&#xA;    @periodTypeId INT,&#x9;&#xD;&#xA;&#x9;  @withDictionaries BIT = NULL,&#x9;-- включать словари &#x9;&#xD;&#xA;    @channelId INT = 0,&#xD;&#xA;    @actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;)&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetMeasurementDeviceInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   DECLARE @dateTime DATETIME = GETDATE();
   DECLARE @uid UNIQUEIDENTIFIER = NEWID();
   DECLARE @methodName VARCHAR(64) = 'MeasurementDeviceInfo';
   DECLARE @error NVARCHAR(128); 
   SET @actionUid = @uid;

   BEGIN TRY	    	
    SELECT     
    @dateTime [DateTime], 
    @uid [Uid],
    @methodName [MethodName],     
    (
	    SELECT 
      (
          SELECT 
            [MeasurementDevice].[Id], 
            [MeasurementDevice].[DeviceId],
            [MeasurementDevice].[FactoryNumber],
            (
              SELECT TOP(1)
                [Building].[Id] [Id], 
                [Building].[FullAddress] [FullAddress],         
                CAST([Building].[Location] AS VARCHAR(MAX)) [Location]                 
              FROM [Business].[Building] [Building] WITH (NOLOCK)                  
              INNER JOIN [Business].[Placement] [Placement] WITH (NOLOCK) 
                ON [Building].[Id] = [Placement].[BuildingId]
  		        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)	
                ON [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id] AND [Placement].[Id] = [Channel].[PlacementId]
              FOR XML AUTO, ELEMENTS, TYPE
            ), 
            (
              SELECT 
                [Channel].[Id], 
                [Channel].[ChannelTemplateId],
                [Channel].[ResourceSystemTypeId]
              FROM [Business].[Channel] [Channel] WITH (NOLOCK) 

              INNER JOIN  
              (
                SELECT [Channel].[Id] [Id]
  
                      FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
              
                        INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                          ON [Channel].[Id] = [UserLinkChannel].[ChannelId] 
                                          
                        INNER JOIN [Admin].[User] [User] WITH(NOLOCK)
                          ON [UserLinkChannel].[UserId] = [User].[Id]
              
                      WHERE [User].[UserName] = @userName
              
                      UNION
              
                      SELECT [Channel].[Id] [Id]
              
                      FROM [WebApi].[ArchiveDownloader] [ArchiveDownloader] WITH (NOLOCK)
                
                        INNER JOIN [Admin].[User] [User] WITH (NOLOCK)
                          ON [User].[Id] = [ArchiveDownloader].[Id]
              
                        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
                          ON [Channel].[OrganizationId] = [ArchiveDownloader].[OrganizationId] 
                            
                      WHERE [User].[UserName] = @userName
              ) [Ch] ON [Ch].[Id] = [Channel].[Id]

              WHERE [Channel].[MeasurementDeviceId] = [MeasurementDevice].[Id]

              FOR XML AUTO, ELEMENTS, TYPE, ROOT('Channels')
            )
          FROM (
          SELECT 
            ROW_NUMBER() OVER(PARTITION BY [MeasurementDevice].[Id] ORDER BY  [MeasurementDevice].[Id]) [Num],
            [MeasurementDevice].[Id], 
            [MeasurementDevice].[DeviceId],
            [MeasurementDevice].[FactoryNumber]
  
            FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK) 
            
            INNER JOIN 
                ( 
                  SELECT [ChannelOuter].[MeasurementDeviceId]
                  FROM
                  (
                      SELECT [Channel].[Id] [Id]
  
                      FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH(NOLOCK)
              
                        INNER JOIN [Business].[Channel] [Channel] WITH(NOLOCK)
                          ON [Channel].[Id] = [UserLinkChannel].[ChannelId] 
                                          
                        INNER JOIN [Admin].[User] [User] WITH(NOLOCK)
                          ON [UserLinkChannel].[UserId] = [User].[Id]
              
                      WHERE [User].[UserName] = @userName
              
                      UNION
              
                      SELECT [Channel].[Id] [Id]
              
                      FROM [WebApi].[ArchiveDownloader] [ArchiveDownloader] WITH (NOLOCK)
                
                        INNER JOIN [Admin].[User] [User] WITH (NOLOCK)
                          ON [User].[Id] = [ArchiveDownloader].[Id]
              
                        INNER JOIN [Business].[Channel] [Channel] WITH (NOLOCK)
                          ON [Channel].[OrganizationId] = [ArchiveDownloader].[OrganizationId] 
                            
                      WHERE [User].[UserName] = @userName
                    ) [ChannelInner] INNER JOIN [Business].[Channel] [ChannelOuter] WITH (NOLOCK) ON [ChannelOuter].[Id] = [ChannelInner].[Id]

                ) [Channel] ON [MeasurementDevice].[Id] = [Channel].[MeasurementDeviceId]
            
            ) [MeasurementDevice] 
            WHERE [MeasurementDevice].[Num] = 1
  
            FOR XML AUTO, ELEMENTS, TYPE, ROOT('MeasurementDevices')
          ),
          (
            SELECT [ParameterMapDeviceParameter].[Id], [ParameterMapDeviceParameter].[DeviceParameterId], 
                  [ParameterMapDeviceParameter].[ParameterId], [ParameterMapDeviceParameter].[PeriodTypeId],
                  [ParameterMapDeviceParameter].[DimensionId], [ParameterMapDeviceParameter].[MeasurementUnitId],
                  [ParameterMapDeviceParameter].[ChannelTemplateId]
			       FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK) 
			                   
			       FOR XML AUTO, ELEMENTS, TYPE,  ROOT('ParameterMapDeviceParameters')
          )          
	    FOR XML PATH('Business'), ELEMENTS, TYPE 
	  ), 
    (
         SELECT 'Не все словари могут быть доступны через Web API.' AS '@notAllDictionaryAvailible',          
          (
            SELECT [Dictionary].[Id], [Dictionary].[Code], [Dictionary].[Description]
            FROM [Core].[Dictionary] [Dictionary] 
            WHERE [Dictionary].[Id] NOT IN (21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 5)

            FOR XML PATH('DictionaryEntityName'), ELEMENTS, TYPE
          )
          FOR XML PATH('Dictionaries'), ELEMENTS, TYPE
    )
	  FOR XML PATH('Package')
  END TRY
  BEGIN CATCH
	  SET @error = 'Внутренняя ошибка выполнения запроса. ' + ERROR_MESSAGE();
      SELECT 
         @dateTime [DateTime], 
         @uid [Uid],
         @methodName [MethodName],      
         @error [Message]             
      FOR XML PATH('Error'), ELEMENTS, TYPE;  
  END CATCH
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceInfo].[@actionUid]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetMeasurementDeviceInfo].[@userName]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[DeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[FactoryNumber]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Location]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ResourceSystemTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DeviceParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ParameterId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[PeriodTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[DimensionId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[MeasurementUnitId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Dictionary]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Dictionary].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Dictionary].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Dictionary].[Description]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceInfo].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceInfo].[@name]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['MesurementDevice']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetMeasurementDeviceInfo].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="385" />
				<Property Name="Length" Value="7303" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20150902&#xD;&#xA;-- Description: Возвращает XML-ответ метода Web API со списком устройств системы &#xD;&#xA;-- с привязками к строению и списком каналов &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE WebApi.GetMeasurementDeviceInfo&#xD;&#xA;(&#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;  @name NVARCHAR(128) = 'MesurementDevice',&#xD;&#xA;  @actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;)&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetNativeDatabaseStructureExample]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;	
	DECLARE @dateTime DATETIME = GETDATE();
	DECLARE @uid UNIQUEIDENTIFIER = NEWID();
	DECLARE @methodName VARCHAR(64) = 'NativeDatabaseStructureExample';
	DECLARE @error NVARCHAR(128); 
	SET @actionUid = @uid;

	BEGIN TRY
		-- for Building entity as origin
		IF( @entityTypeName = 'Building' )
		BEGIN
			SELECT 
			@dateTime [DateTime], 
			@uid [Uid],
			@methodName [MethodName],
			(
				SELECT 
				(
					SELECT [Building].[Id]
						  ,[Building].[Description]
						  ,[Building].[FullAddress]
						  ,[Building].[Square]
						  ,[Building].[BuildingPurposeId]
						  ,[Building].[CountFlats]
						  ,[Building].[Location].ToString()  [Location]
						  ,[Building].[OrganizationId]
						  ,[Building].[CreatedBy]
						  ,[Building].[UpdatedBy]
						  ,[Building].[CreatedDate]
						  ,[Building].[UpdatedDate]
						  ,[Building].[DistrictId]
						  ,(
								SELECT  
								(
									SELECT *,
									(
										SELECT *,
											(
												SELECT * FROM [Business].[Archive] [Archive] WITH (NOLOCK)
												WHERE 
													[Archive].[MeasurementDeviceId] = [MeasurementDevice].[Id] 
													AND [Archive].[TimeSignatureId] = [MeasurementDevice].[LastTimeSignatureId]
												FOR XML AUTO, ELEMENTS, TYPE, ROOT('Archives')
											) 
										FROM [Business].[MeasurementDevice] [MeasurementDevice] WITH (NOLOCK)
										WHERE [MeasurementDevice].[AccessPointId] = [AccessPoint].[Id]
										FOR XML AUTO, ELEMENTS, TYPE, ROOT('MeasurementDevices')
									)
									FROM [Business].[AccessPoint] [AccessPoint] WITH (NOLOCK)
									WHERE [AccessPoint].[Id] = [AccessPointLinkBuilding].[AccessPointId]
									FOR XML AUTO, ELEMENTS, TYPE
								)
								FROM [Business].[AccessPointLinkBuilding] [AccessPointLinkBuilding] WITH (NOLOCK)
								WHERE [AccessPointLinkBuilding].[BuildingId] = [Building].[Id]
								FOR XML AUTO, ELEMENTS, TYPE, ROOT('AccessPointLinkBuildings')
							)
						   ,(
								SELECT *, 
								( 
									SELECT *,
									(
										SELECT *,
										(
											SELECT [User].[Id]
												  ,[User].[UserName]
												  ,[User].[Description]                                             
											FROM [Admin].[User] [User] 
											WHERE [User].[Id] = [UserLinkChannel].[UserId] 
											FOR XML AUTO, ELEMENTS, TYPE
										) 
										FROM [Business].[UserLinkChannel] [UserLinkChannel] WITH (NOLOCK)
										WHERE [UserLinkChannel].[ChannelId] = [Channel].[Id]
										FOR XML AUTO, ELEMENTS, TYPE, ROOT('UserLinkChannels')
									)
									,(
										SELECT *,
										(
											SELECT * FROM [Business].[ParameterMapDeviceParameter] [ParameterMapDeviceParameter] WITH (NOLOCK)
											WHERE [ParameterMapDeviceParameter].[ChannelTemplateId] = [ChannelTemplate].[Id]
											FOR XML AUTO, ELEMENTS, TYPE, ROOT('ParameterMapDeviceParameters')	
										)
										FROM [Business].[ChannelTemplate] [ChannelTemplate] WITH (NOLOCK)
										WHERE [ChannelTemplate].[Id] = [Channel].[ChannelTemplateId]
										FOR XML AUTO, ELEMENTS, TYPE                                     
									)
									FROM [Business].[Channel] [Channel] WITH (NOLOCK)
									WHERE [Channel].[PlacementId] = [Placement].[Id] 
									FOR XML AUTO, ELEMENTS, TYPE, ROOT('Channels') 
								)
								FROM [Business].[Placement] [Placement] WITH (NOLOCK)
								WHERE [Placement].[BuildingId] = [Building].[Id] FOR XML AUTO, ELEMENTS, TYPE, ROOT('Placements')
							)							  			  			  			  
					FROM [Business].[Building] [Building] WITH (NOLOCK)
					WHERE [Building].[Id] = @entityId 
					FOR XML AUTO, ELEMENTS, TYPE, ROOT('Buildings')
				) FOR XML PATH('Business'), ELEMENTS, TYPE
			),
			(
				SELECT 
					(SELECT * FROM [Dictionaries].[ResourceSystemType] [ResourceSystemType] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('ResourceSystemTypes')),
					(SELECT * FROM [Dictionaries].[Device] [Device] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('Devices')),
					(SELECT * FROM [Dictionaries].[DeviceParameter] [DeviceParameter] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('DeviceParameters')),                
					(SELECT * FROM [Dictionaries].[PeriodType] [PeriodType] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('PeriodTypes')),
					(SELECT * FROM [Dictionaries].[Parameter] [Parameter] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('Parameters')),	
					(SELECT * FROM [Dictionaries].[MeasurementUnit] [MeasurementUnit] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('MeasurementUnits')),
					(SELECT * FROM [Dictionaries].[Dimension] [Dimension] WITH (NOLOCK) FOR XML AUTO, ELEMENTS, TYPE, ROOT('Dimensions')), 
					(SELECT * FROM [Dictionaries].[PhysicalParameter] [PhysicalParameter] WITH (NOLOCK) FOR XML AUTO, ELEMENTS, TYPE, ROOT('PhysicalParameters')),		
					(SELECT * FROM [Dictionaries].[PlacementPurpose] [PlacementPurpose] WITH (NOLOCK) FOR XML AUTO, ELEMENTS, TYPE, ROOT('PlacementPurposes')),
					(SELECT * FROM [Dictionaries].[BuildingPurpose] [BuildingPurpose] WITH (NOLOCK) FOR XML AUTO,  ELEMENTS, TYPE, ROOT('BuildingPurposes'))		
				 FOR XML PATH('Dictionaries'), ELEMENTS, TYPE	
			)
			FOR XML PATH('Package'), ELEMENTS, TYPE;
		END
		ELSE 
		-- If necessary this method may be developed for another way of presentation database relationships   
		BEGIN
			SELECT 
				@dateTime [DateTime], 
				@uid [Uid],
				@methodName [MethodName], 
				'The database structure example didn''t implement for this entity.' [Message] 
			FOR XML PATH('Package'), ELEMENTS, TYPE;
		END;	
	END TRY
	BEGIN CATCH
		SET @error = 'There was internal query execution error. ' + ERROR_MESSAGE();
		SELECT 
			@dateTime [DateTime], 
			@uid [Uid],
			@methodName [MethodName],      
			@error [Message]             
		FOR XML PATH('Error'), ELEMENTS, TYPE;  
	END CATCH;

END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetNativeDatabaseStructureExample].[@actionUid]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetNativeDatabaseStructureExample].[@entityTypeName]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[FullAddress]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Square]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[BuildingPurposeId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[CountFlats]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Location]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[OrganizationId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UpdatedBy]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[CreatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[UpdatedDate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[DistrictId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[MeasurementDeviceId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Archive].[TimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[LastTimeSignatureId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[MeasurementDevice].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPoint].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[AccessPointId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[AccessPointLinkBuilding].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[UserLinkChannel].[ChannelId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ParameterMapDeviceParameter].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[ChannelTemplate].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[ChannelTemplateId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Channel].[PlacementId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Placement].[BuildingId]" />
				</Entry>
				<Entry>
					<References Name="[Business].[Building].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetNativeDatabaseStructureExample].[@entityId]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ResourceSystemType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Device]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[DeviceParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PeriodType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Parameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[MeasurementUnit]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[Dimension]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PhysicalParameter]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[PlacementPurpose]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[BuildingPurpose]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetNativeDatabaseStructureExample].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetNativeDatabaseStructureExample].[@entityId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetNativeDatabaseStructureExample].[@entityTypeName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="32" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetNativeDatabaseStructureExample].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="525" />
				<Property Name="Length" Value="6715" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20180402&#xD;&#xA;-- Description: This stored procedure returns xml-package containing data example of structure of relations &#xD;&#xA;-- for some entity (it's developed only for Building entity). Besides the stored procedure forms section &#xD;&#xA;-- with content of the most valuable dictionaries. &#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE WebApi.GetNativeDatabaseStructureExample&#xD;&#xA;&#x9;@userName NVARCHAR(32),&#xD;&#xA;&#x9;@entityId INT, &#xD;&#xA;&#x9;@entityTypeName NVARCHAR(32),&#xD;&#xA;&#x9;@actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetScheduleInfo]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   DECLARE @dateTime DATETIME = GETDATE();
   DECLARE @uid UNIQUEIDENTIFIER = NEWID();
   DECLARE @methodName VARCHAR(64) = 'ScheduleInfo';
   DECLARE @error NVARCHAR(128); 

   SET @actionUid = @uid;

   BEGIN TRY	    	
    SELECT       
      @dateTime [DateTime], 
      @uid [Uid],
      @methodName [MethodName],
      (
        SELECT      
        (
          SELECT [ScheduleItem].[Id] ,
                 [ScheduleItem].[Description] ,
                 [ScheduleItem].[Enabled] ,               
                 (
                    SELECT [ScheduleType].[Id] ,
                           [ScheduleType].[Code] ,
                           [ScheduleType].[Description]
                    FROM [Dictionaries].[ScheduleType] [ScheduleType] WITH (NOLOCK)
                    WHERE [ScheduleType].[Id] = [ScheduleItem].[ScheduleTypeId]
                    FOR XML AUTO, ELEMENTS, TYPE
                 ),
                 [ScheduleItem].[PeriodBegin],
                 [ScheduleItem].[PeriodEnd],
                 [ScheduleItem].[OrdinalNumberOfDay]
                 FROM [Core].[ScheduleItem] [ScheduleItem] WITH (NOLOCK)
        
          INNER JOIN [WebApi].[ArchiveDownloaderLinkScheduleItem] [ArchiveDownloaderLinkScheduleItem] WITH (NOLOCK)
            ON [ArchiveDownloaderLinkScheduleItem].[ScheduleItemId] = [ScheduleItem].[Id]

          INNER JOIN [Admin].[User] [User] WITH(NOLOCK) 
            ON [User].[Id] = [ArchiveDownloaderLinkScheduleItem].[ArchiveDownloaderId] 

          WHERE [User].[UserName] = @userName
          FOR XML AUTO, ELEMENTS, TYPE, ROOT('ScheduleItems')
        )
        FOR XML PATH('Core'), ELEMENTS, TYPE
      )
	  FOR XML PATH('Package')
  END TRY
  BEGIN CATCH
	  SET @error = 'Внутренняя ошибка выполнения запроса. ' + ERROR_MESSAGE();
      SELECT 
         @dateTime [DateTime],
         @uid [Uid], 
         @methodName [MethodName],      
         @error [Message]             
      FOR XML PATH('Error'), ELEMENTS, TYPE;  
  END CATCH
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetScheduleInfo].[@actionUid]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ScheduleItemId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ArchiveDownloaderId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[Enabled]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ScheduleType]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ScheduleType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ScheduleType].[Code]" />
				</Entry>
				<Entry>
					<References Name="[Dictionaries].[ScheduleType].[Description]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[ScheduleTypeId]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodBegin]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[PeriodEnd]" />
				</Entry>
				<Entry>
					<References Name="[Core].[ScheduleItem].[OrdinalNumberOfDay]" />
				</Entry>
				<Entry>
					<References Name="[Admin].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetScheduleInfo].[@userName]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetScheduleInfo].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetScheduleInfo].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="CreateOffset" Value="335" />
				<Property Name="Length" Value="2533" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="-- ====================================================================================================&#xD;&#xA;-- Author:  &#x9;Leo&#xD;&#xA;-- Create date: 20160815&#xD;&#xA;-- Description: Возвращает XML-ответ с расписанием назначеным для пользователя&#xD;&#xA;-- ===================================================================================================&#xD;&#xA;&#xD;&#xA;CREATE PROCEDURE WebApi.GetScheduleInfo&#xD;&#xA;(&#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;  @actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;)&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[WebApi].[GetSchema]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;
   DECLARE @uid UNIQUEIDENTIFIER = NEWID();
   SET @actionUid = @uid;

   DECLARE @schema XML = 
   (
    SELECT TOP(1) CONVERT(XML, [Binary].[Data])
    FROM [Core].[Binary] [Binary] 
    WHERE [Binary].[Id] = 1000
   );

   SELECT @schema FOR XML PATH('');
END;]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Binary]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[xml]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Binary].[Data]" />
				</Entry>
				<Entry>
					<References Name="[Core].[Binary].[Id]" />
				</Entry>
				<Entry>
					<References Name="[WebApi].[GetSchema].[@actionUid]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetSchema].[@userName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="64" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[WebApi].[GetSchema].[@actionUid]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[WebApi]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="415" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [WebApi].[GetSchema]&#xD;&#xA;(&#xD;&#xA;  @userName NVARCHAR(64),&#xD;&#xA;  @actionUid UNIQUEIDENTIFIER OUTPUT&#xD;&#xA;)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[WebApi].[PK_WebApi_ActionRequestStatisticItem_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[WebApi].[ActionRequestStatisticItem].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ActionRequestStatisticItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="747" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[WebApi].[PK_WebApi_ArchiveDownloader_Id]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[WebApi].[ArchiveDownloader].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloader]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="749" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[WebApi].[PK_WebApi_ArchiveDownloaderLinkScheduleItem_ScheduleItemId_ArchiveDownloaderId]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ScheduleItemId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem].[ArchiveDownloaderId]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[WebApi].[ArchiveDownloaderLinkScheduleItem]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="752" />
		</Element>
	</Model>
</DataSchemaModel>